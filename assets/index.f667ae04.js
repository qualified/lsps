const Od=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function a(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerpolicy&&(f.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?f.credentials="include":u.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(u){if(u.ep)return;u.ep=!0;const f=a(u);fetch(u.href,f)}};Od();var nn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ad(i){if(i.__esModule)return i;var o=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(a){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(o,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}),o}var Nn={exports:{}};(function(i,o){(function(a,l){i.exports=l()})(nn,function(){var a=navigator.userAgent,l=navigator.platform,u=/gecko\/\d/i.test(a),f=/MSIE \d/.test(a),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(a),b=/Edge\/(\d+)/.exec(a),w=f||g||b,k=w&&(f?document.documentMode||6:+(b||g)[1]),T=!b&&/WebKit\//.test(a),N=T&&/Qt\/\d+\.\d+/.test(a),E=!b&&/Chrome\//.test(a),M=/Opera\//.test(a),$=/Apple Computer/.test(navigator.vendor),Y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(a),V=/PhantomJS/.test(a),_=$&&(/Mobile\/\w+/.test(a)||navigator.maxTouchPoints>2),P=/Android/.test(a),L=_||P||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(a),y=_||/Mac/.test(l),W=/\bCrOS\b/.test(a),j=/win/i.test(l),A=M&&a.match(/Version\/(\d*\.\d*)/);A&&(A=Number(A[1])),A&&A>=15&&(M=!1,T=!0);var X=y&&(N||M&&(A==null||A<12.11)),ue=u||w&&k>=9;function oe(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var ve=function(e,t){var r=e.className,n=oe(t).exec(r);if(n){var s=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(s?n[1]+s:"")}};function Ne(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function q(e,t){return Ne(e).appendChild(t)}function z(e,t,r,n){var s=document.createElement(e);if(r&&(s.className=r),n&&(s.style.cssText=n),typeof t=="string")s.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)s.appendChild(t[c]);return s}function R(e,t,r,n){var s=z(e,t,r,n);return s.setAttribute("role","presentation"),s}var Z;document.createRange?Z=function(e,t,r,n){var s=document.createRange();return s.setEnd(n||e,r),s.setStart(e,t),s}:Z=function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch{return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};function Ee(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function he(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function ke(e,t){var r=e.className;oe(t).test(r)||(e.className+=(r?" ":"")+t)}function _e(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!oe(r[n]).test(t)&&(t+=" "+r[n]);return t}var Oe=function(e){e.select()};_?Oe=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(Oe=function(e){try{e.select()}catch{}});function pt(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function $e(e,t,r){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(r!==!1||!t.hasOwnProperty(n))&&(t[n]=e[n]);return t}function Fe(e,t,r,n,s){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=n||0,d=s||0;;){var h=e.indexOf("	",c);if(h<0||h>=t)return d+(t-c);d+=h-c,d+=r-d%r,c=h+1}}var xe=function(){this.id=null,this.f=null,this.time=0,this.handler=pt(this.onTimeout,this)};xe.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},xe.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};function ae(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}var re=50,Ce={toString:function(){return"CodeMirror.Pass"}},De={scroll:!1},kn={origin:"*mouse"},Ae={origin:"+move"};function ot(e,t,r){for(var n=0,s=0;;){var c=e.indexOf("	",n);c==-1&&(c=e.length);var d=c-n;if(c==e.length||s+d>=t)return n+Math.min(d,t-s);if(s+=c-n,s+=r-s%r,n=c+1,s>=t)return n}}var Ut=[""];function Dt(e){for(;Ut.length<=e;)Ut.push(Re(Ut)+" ");return Ut[e]}function Re(e){return e[e.length-1]}function xt(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Yt(e,t,r){for(var n=0,s=r(t);n<e.length&&r(e[n])<=s;)n++;e.splice(n,0,t)}function st(){}function gt(e,t){var r;return Object.create?r=Object.create(e):(st.prototype=e,r=new st),t&&$e(t,r),r}var Cn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Zt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Cn.test(e))}function Jt(e,t){return t?t.source.indexOf("\\w")>-1&&Zt(e)?!0:t.test(e):Zt(e)}function nr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Qr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rr(e){return e.charCodeAt(0)>=768&&Qr.test(e)}function ir(e,t,r){for(;(r<0?t>0:t<e.length)&&rr(e.charAt(t));)t+=r;return t}function rn(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var s=(t+r)/2,c=n<0?Math.ceil(s):Math.floor(s);if(c==t)return e(c)?t:r;e(c)?r=c:t=c+n}}function Vr(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var s=!1,c=0;c<e.length;++c){var d=e[c];(d.from<r&&d.to>t||t==r&&d.to==t)&&(n(Math.max(d.from,t),Math.min(d.to,r),d.level==1?"rtl":"ltr",c),s=!0)}s||n(t,r,"ltr")}var It=null;function Xe(e,t,r){var n;It=null;for(var s=0;s<e.length;++s){var c=e[s];if(c.from<t&&c.to>t)return s;c.to==t&&(c.from!=c.to&&r=="before"?n=s:It=s),c.from==t&&(c.from!=c.to&&r!="before"?n=s:It=s)}return n!=null?n:It}var An=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(v){return v<=247?e.charAt(v):1424<=v&&v<=1524?"R":1536<=v&&v<=1785?t.charAt(v-1536):1774<=v&&v<=2220?"r":8192<=v&&v<=8203?"w":v==8204?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,c=/[LRr]/,d=/[Lb1n]/,h=/[1n]/;function p(v,C,S){this.level=v,this.from=C,this.to=S}return function(v,C){var S=C=="ltr"?"L":"R";if(v.length==0||C=="ltr"&&!n.test(v))return!1;for(var I=v.length,O=[],H=0;H<I;++H)O.push(r(v.charCodeAt(H)));for(var U=0,Q=S;U<I;++U){var te=O[U];te=="m"?O[U]=Q:Q=te}for(var ie=0,ne=S;ie<I;++ie){var le=O[ie];le=="1"&&ne=="r"?O[ie]="n":c.test(le)&&(ne=le,le=="r"&&(O[ie]="R"))}for(var ye=1,ge=O[0];ye<I-1;++ye){var Me=O[ye];Me=="+"&&ge=="1"&&O[ye+1]=="1"?O[ye]="1":Me==","&&ge==O[ye+1]&&(ge=="1"||ge=="n")&&(O[ye]=ge),ge=Me}for(var je=0;je<I;++je){var wt=O[je];if(wt==",")O[je]="N";else if(wt=="%"){var tt=void 0;for(tt=je+1;tt<I&&O[tt]=="%";++tt);for(var Xt=je&&O[je-1]=="!"||tt<I&&O[tt]=="1"?"1":"N",qt=je;qt<tt;++qt)O[qt]=Xt;je=tt-1}}for(var lt=0,zt=S;lt<I;++lt){var Ct=O[lt];zt=="L"&&Ct=="1"?O[lt]="L":c.test(Ct)&&(zt=Ct)}for(var ct=0;ct<I;++ct)if(s.test(O[ct])){var ut=void 0;for(ut=ct+1;ut<I&&s.test(O[ut]);++ut);for(var it=(ct?O[ct-1]:S)=="L",Bt=(ut<I?O[ut]:S)=="L",Hr=it==Bt?it?"L":"R":S,tr=ct;tr<ut;++tr)O[tr]=Hr;ct=ut-1}for(var Et=[],Mn,kt=0;kt<I;)if(d.test(O[kt])){var Rs=kt;for(++kt;kt<I&&d.test(O[kt]);++kt);Et.push(new p(0,Rs,kt))}else{var zn=kt,gr=Et.length,vr=C=="rtl"?1:0;for(++kt;kt<I&&O[kt]!="L";++kt);for(var At=zn;At<kt;)if(h.test(O[At])){zn<At&&(Et.splice(gr,0,new p(1,zn,At)),gr+=vr);var Fr=At;for(++At;At<kt&&h.test(O[At]);++At);Et.splice(gr,0,new p(2,Fr,At)),gr+=vr,zn=At}else++At;zn<kt&&Et.splice(gr,0,new p(1,zn,kt))}return C=="ltr"&&(Et[0].level==1&&(Mn=v.match(/^\s+/))&&(Et[0].from=Mn[0].length,Et.unshift(new p(0,0,Mn[0].length))),Re(Et).level==1&&(Mn=v.match(/\s+$/))&&(Re(Et).to-=Mn[0].length,Et.push(new p(0,I-Mn[0].length,I)))),C=="rtl"?Et.reverse():Et}}();function Pt(e,t){var r=e.order;return r==null&&(r=e.order=An(e.text,t)),r}var cn=[],me=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||cn).concat(r)}};function fn(e,t){return e._handlers&&e._handlers[t]||cn}function Rt(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,s=n&&n[t];if(s){var c=ae(s,r);c>-1&&(n[t]=s.slice(0,c).concat(s.slice(c+1)))}}}function be(e,t){var r=fn(e,t);if(!!r.length)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<r.length;++s)r[s].apply(null,n)}function nt(e,t,r){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),be(e,r||t.type,e,t),Nt(t)||t.codemirrorIgnore}function Qt(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)ae(r,t[n])==-1&&r.push(t[n])}function Ze(e,t){return fn(e,t).length>0}function on(e){e.prototype.on=function(t,r){me(this,t,r)},e.prototype.off=function(t,r){Rt(this,t,r)}}function vt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function sn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Nt(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Tn(e){vt(e),sn(e)}function an(e){return e.target||e.srcElement}function or(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),y&&e.ctrlKey&&t==1&&(t=3),t}var ln=function(){if(w&&k<9)return!1;var e=z("div");return"draggable"in e||"dragDrop"in e}(),D;function G(e){if(D==null){var t=z("span","\u200B");q(e,z("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(D=t.offsetWidth<=1&&t.offsetHeight>2&&!(w&&k<8))}var r=D?z("span","\u200B"):z("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var ee;function pe(e){if(ee!=null)return ee;var t=q(e,document.createTextNode("A\u062EA")),r=Z(t,0,1).getBoundingClientRect(),n=Z(t,1,2).getBoundingClientRect();return Ne(e),!r||r.left==r.right?!1:ee=n.right-r.right<3}var Ie=`

b`.split(/\n/).length!=3?function(e){for(var t=0,r=[],n=e.length;t<=n;){var s=e.indexOf(`
`,t);s==-1&&(s=e.length);var c=e.slice(t,e.charAt(s-1)=="\r"?s-1:s),d=c.indexOf("\r");d!=-1?(r.push(c.slice(0,d)),t+=d+1):(r.push(c),t=s+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Ge=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Je=function(){var e=z("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Qe=null;function Pe(e){if(Qe!=null)return Qe;var t=q(e,z("span","x")),r=t.getBoundingClientRect(),n=Z(t,0,1).getBoundingClientRect();return Qe=Math.abs(r.left-n.left)>1}var He={},Le={};function Ve(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),He[e]=t}function et(e,t){Le[e]=t}function $t(e){if(typeof e=="string"&&Le.hasOwnProperty(e))e=Le[e];else if(e&&typeof e.name=="string"&&Le.hasOwnProperty(e.name)){var t=Le[e.name];typeof t=="string"&&(t={name:t}),e=gt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return $t("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return $t("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Wt(e,t){t=$t(t);var r=He[t.name];if(!r)return Wt(e,"text/plain");var n=r(e,t);if(dn.hasOwnProperty(t.name)){var s=dn[t.name];for(var c in s)!s.hasOwnProperty(c)||(n.hasOwnProperty(c)&&(n["_"+c]=n[c]),n[c]=s[c])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var d in t.modeProps)n[d]=t.modeProps[d];return n}var dn={};function hn(e,t){var r=dn.hasOwnProperty(e)?dn[e]:dn[e]={};$e(t,r)}function Vt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var s=t[n];s instanceof Array&&(s=s.concat([])),r[n]=s}return r}function ei(e,t){for(var r;e.innerMode&&(r=e.innerMode(t),!(!r||r.mode==e));)t=r.state,e=r.mode;return r||{mode:e,state:t}}function ti(e,t,r){return e.startState?e.startState(t,r):!0}var rt=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};rt.prototype.eol=function(){return this.pos>=this.string.length},rt.prototype.sol=function(){return this.pos==this.lineStart},rt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},rt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},rt.prototype.eat=function(e){var t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e.test?e.test(t):e(t)),r)return++this.pos,t},rt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},rt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},rt.prototype.skipToEnd=function(){this.pos=this.string.length},rt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},rt.prototype.backUp=function(e){this.pos-=e},rt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Fe(this.string,this.lineStart,this.tabSize):0)},rt.prototype.indentation=function(){return Fe(this.string,null,this.tabSize)-(this.lineStart?Fe(this.string,this.lineStart,this.tabSize):0)},rt.prototype.match=function(e,t,r){if(typeof e=="string"){var n=function(d){return r?d.toLowerCase():d},s=this.string.substr(this.pos,e.length);if(n(s)==n(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},rt.prototype.current=function(){return this.string.slice(this.start,this.pos)},rt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},rt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},rt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function ce(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var s=r.children[n],c=s.chunkSize();if(t<c){r=s;break}t-=c}return r.lines[t]}function Sn(e,t,r){var n=[],s=t.line;return e.iter(t.line,r.line+1,function(c){var d=c.text;s==r.line&&(d=d.slice(0,r.ch)),s==t.line&&(d=d.slice(t.ch)),n.push(d),++s}),n}function ni(e,t,r){var n=[];return e.iter(t,r,function(s){n.push(s.text)}),n}function Gt(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function qe(e){if(e.parent==null)return null;for(var t=e.parent,r=ae(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var s=0;n.children[s]!=t;++s)r+=n.children[s].chunkSize();return r+t.first}function xn(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var s=e.children[n],c=s.height;if(t<c){e=s;continue e}t-=c,r+=s.chunkSize()}return r}while(!e.lines);for(var d=0;d<e.lines.length;++d){var h=e.lines[d],p=h.height;if(t<p)break;t-=p}return r+d}function sr(e,t){return t>=e.first&&t<e.first+e.size}function ri(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function K(e,t,r){if(r===void 0&&(r=null),!(this instanceof K))return new K(e,t,r);this.line=e,this.ch=t,this.sticky=r}function m(e,t){return e.line-t.line||e.ch-t.ch}function x(e,t){return e.sticky==t.sticky&&m(e,t)==0}function B(e){return K(e.line,e.ch)}function J(e,t){return m(e,t)<0?t:e}function Te(e,t){return m(e,t)<0?e:t}function We(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function se(e,t){if(t.line<e.first)return K(e.first,0);var r=e.first+e.size-1;return t.line>r?K(r,ce(e,r).text.length):_t(t,ce(e,t.line).text.length)}function _t(e,t){var r=e.ch;return r==null||r>t?K(e.line,t):r<0?K(e.line,0):e}function en(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=se(e,t[n]);return r}var wr=function(e,t){this.state=e,this.lookAhead=t},Rn=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};Rn.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Rn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Rn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Rn.fromSaved=function(e,t,r){return t instanceof wr?new Rn(e,Vt(e.mode,t.state),r,t.lookAhead):new Rn(e,Vt(e.mode,t),r)},Rn.prototype.save=function(e){var t=e!==!1?Vt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wr(t,this.maxLookAhead):t};function _a(e,t,r,n){var s=[e.state.modeGen],c={};Na(e,t.text,e.doc.mode,r,function(v,C){return s.push(v,C)},c,n);for(var d=r.state,h=function(v){r.baseTokens=s;var C=e.state.overlays[v],S=1,I=0;r.state=!0,Na(e,t.text,C.mode,r,function(O,H){for(var U=S;I<O;){var Q=s[S];Q>O&&s.splice(S,1,O,s[S+1],Q),S+=2,I=Math.min(O,Q)}if(!!H)if(C.opaque)s.splice(U,S-U,O,"overlay "+H),S=U+2;else for(;U<S;U+=2){var te=s[U+1];s[U+1]=(te?te+" ":"")+"overlay "+H}},c),r.state=d,r.baseTokens=null,r.baseTokenPos=1},p=0;p<e.state.overlays.length;++p)h(p);return{styles:s,classes:c.bgClass||c.textClass?c:null}}function La(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=ii(e,qe(t)),s=t.text.length>e.options.maxHighlightLength&&Vt(e.doc.mode,n.state),c=_a(e,t,n);s&&(n.state=s),t.stateAfter=n.save(!s),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ii(e,t,r){var n=e.doc,s=e.display;if(!n.mode.startState)return new Rn(n,!0,t);var c=Ac(e,t,r),d=c>n.first&&ce(n,c-1).stateAfter,h=d?Rn.fromSaved(n,d,c):new Rn(n,ti(n.mode),c);return n.iter(c,t,function(p){Wo(e,p.text,h);var v=h.line;p.stateAfter=v==t-1||v%5==0||v>=s.viewFrom&&v<s.viewTo?h.save():null,h.nextLine()}),r&&(n.modeFrontier=h.line),h}function Wo(e,t,r,n){var s=e.doc.mode,c=new rt(t,e.options.tabSize,r);for(c.start=c.pos=n||0,t==""&&Ea(s,r.state);!c.eol();)Ho(s,c,r.state),c.start=c.pos}function Ea(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var r=ei(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function Ho(e,t,r,n){for(var s=0;s<10;s++){n&&(n[0]=ei(e,r).mode);var c=e.token(t,r);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var Ma=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function Da(e,t,r,n){var s=e.doc,c=s.mode,d;t=se(s,t);var h=ce(s,t.line),p=ii(e,t.line,r),v=new rt(h.text,e.options.tabSize,p),C;for(n&&(C=[]);(n||v.pos<t.ch)&&!v.eol();)v.start=v.pos,d=Ho(c,v,p.state),n&&C.push(new Ma(v,d,Vt(s.mode,p.state)));return n?C:new Ma(v,d,p.state)}function Pa(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";t[n]==null?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function Na(e,t,r,n,s,c,d){var h=r.flattenSpans;h==null&&(h=e.options.flattenSpans);var p=0,v=null,C=new rt(t,e.options.tabSize,n),S,I=e.options.addModeClass&&[null];for(t==""&&Pa(Ea(r,n.state),c);!C.eol();){if(C.pos>e.options.maxHighlightLength?(h=!1,d&&Wo(e,t,n,C.pos),C.pos=t.length,S=null):S=Pa(Ho(r,C,n.state,I),c),I){var O=I[0].name;O&&(S="m-"+(S?O+" "+S:O))}if(!h||v!=S){for(;p<C.start;)p=Math.min(C.start,p+5e3),s(p,v);v=S}C.start=C.pos}for(;p<C.pos;){var H=Math.min(C.pos,p+5e3);s(H,v),p=H}}function Ac(e,t,r){for(var n,s,c=e.doc,d=r?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>d;--h){if(h<=c.first)return c.first;var p=ce(c,h-1),v=p.stateAfter;if(v&&(!r||h+(v instanceof wr?v.lookAhead:0)<=c.modeFrontier))return h;var C=Fe(p.text,null,e.options.tabSize);(s==null||n>C)&&(s=h-1,n=C)}return s}function Ic(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var s=ce(e,n).stateAfter;if(s&&(!(s instanceof wr)||n+s.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}var Oa=!1,In=!1;function Wc(){Oa=!0}function Hc(){In=!0}function Fi(e,t,r){this.marker=e,this.from=t,this.to=r}function oi(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Fc(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function qc(e,t,r){var n=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));n&&n.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],n&&n.add(e.markedSpans)),t.marker.attachLine(e)}function zc(e,t,r){var n;if(e)for(var s=0;s<e.length;++s){var c=e[s],d=c.marker,h=c.from==null||(d.inclusiveLeft?c.from<=t:c.from<t);if(h||c.from==t&&d.type=="bookmark"&&(!r||!c.marker.insertLeft)){var p=c.to==null||(d.inclusiveRight?c.to>=t:c.to>t);(n||(n=[])).push(new Fi(d,c.from,p?null:c.to))}}return n}function Bc(e,t,r){var n;if(e)for(var s=0;s<e.length;++s){var c=e[s],d=c.marker,h=c.to==null||(d.inclusiveRight?c.to>=t:c.to>t);if(h||c.from==t&&d.type=="bookmark"&&(!r||c.marker.insertLeft)){var p=c.from==null||(d.inclusiveLeft?c.from<=t:c.from<t);(n||(n=[])).push(new Fi(d,p?null:c.from-t,c.to==null?null:c.to-t))}}return n}function Fo(e,t){if(t.full)return null;var r=sr(e,t.from.line)&&ce(e,t.from.line).markedSpans,n=sr(e,t.to.line)&&ce(e,t.to.line).markedSpans;if(!r&&!n)return null;var s=t.from.ch,c=t.to.ch,d=m(t.from,t.to)==0,h=zc(r,s,d),p=Bc(n,c,d),v=t.text.length==1,C=Re(t.text).length+(v?s:0);if(h)for(var S=0;S<h.length;++S){var I=h[S];if(I.to==null){var O=oi(p,I.marker);O?v&&(I.to=O.to==null?null:O.to+C):I.to=s}}if(p)for(var H=0;H<p.length;++H){var U=p[H];if(U.to!=null&&(U.to+=C),U.from==null){var Q=oi(h,U.marker);Q||(U.from=C,v&&(h||(h=[])).push(U))}else U.from+=C,v&&(h||(h=[])).push(U)}h&&(h=Aa(h)),p&&p!=h&&(p=Aa(p));var te=[h];if(!v){var ie=t.text.length-2,ne;if(ie>0&&h)for(var le=0;le<h.length;++le)h[le].to==null&&(ne||(ne=[])).push(new Fi(h[le].marker,null,null));for(var ye=0;ye<ie;++ye)te.push(ne);te.push(p)}return te}function Aa(e){for(var t=0;t<e.length;++t){var r=e[t];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function jc(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(O){if(O.markedSpans)for(var H=0;H<O.markedSpans.length;++H){var U=O.markedSpans[H].marker;U.readOnly&&(!n||ae(n,U)==-1)&&(n||(n=[])).push(U)}}),!n)return null;for(var s=[{from:t,to:r}],c=0;c<n.length;++c)for(var d=n[c],h=d.find(0),p=0;p<s.length;++p){var v=s[p];if(!(m(v.to,h.from)<0||m(v.from,h.to)>0)){var C=[p,1],S=m(v.from,h.from),I=m(v.to,h.to);(S<0||!d.inclusiveLeft&&!S)&&C.push({from:v.from,to:h.from}),(I>0||!d.inclusiveRight&&!I)&&C.push({from:h.to,to:v.to}),s.splice.apply(s,C),p+=C.length-3}}return s}function Ia(e){var t=e.markedSpans;if(!!t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Wa(e,t){if(!!t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function qi(e){return e.inclusiveLeft?-1:0}function zi(e){return e.inclusiveRight?1:0}function qo(e,t){var r=e.lines.length-t.lines.length;if(r!=0)return r;var n=e.find(),s=t.find(),c=m(n.from,s.from)||qi(e)-qi(t);if(c)return-c;var d=m(n.to,s.to)||zi(e)-zi(t);return d||t.id-e.id}function Ha(e,t){var r=In&&e.markedSpans,n;if(r)for(var s=void 0,c=0;c<r.length;++c)s=r[c],s.marker.collapsed&&(t?s.from:s.to)==null&&(!n||qo(n,s.marker)<0)&&(n=s.marker);return n}function Fa(e){return Ha(e,!0)}function Bi(e){return Ha(e,!1)}function Uc(e,t){var r=In&&e.markedSpans,n;if(r)for(var s=0;s<r.length;++s){var c=r[s];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!n||qo(n,c.marker)<0)&&(n=c.marker)}return n}function qa(e,t,r,n,s){var c=ce(e,t),d=In&&c.markedSpans;if(d)for(var h=0;h<d.length;++h){var p=d[h];if(!!p.marker.collapsed){var v=p.marker.find(0),C=m(v.from,r)||qi(p.marker)-qi(s),S=m(v.to,n)||zi(p.marker)-zi(s);if(!(C>=0&&S<=0||C<=0&&S>=0)&&(C<=0&&(p.marker.inclusiveRight&&s.inclusiveLeft?m(v.to,r)>=0:m(v.to,r)>0)||C>=0&&(p.marker.inclusiveRight&&s.inclusiveLeft?m(v.from,n)<=0:m(v.from,n)<0)))return!0}}}function _n(e){for(var t;t=Fa(e);)e=t.find(-1,!0).line;return e}function $c(e){for(var t;t=Bi(e);)e=t.find(1,!0).line;return e}function Gc(e){for(var t,r;t=Bi(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function zo(e,t){var r=ce(e,t),n=_n(r);return r==n?t:qe(n)}function za(e,t){if(t>e.lastLine())return t;var r=ce(e,t),n;if(!Kn(e,r))return t;for(;n=Bi(r);)r=n.find(1,!0).line;return qe(r)+1}function Kn(e,t){var r=In&&t.markedSpans;if(r){for(var n=void 0,s=0;s<r.length;++s)if(n=r[s],!!n.marker.collapsed){if(n.from==null)return!0;if(!n.marker.widgetNode&&n.from==0&&n.marker.inclusiveLeft&&Bo(e,t,n))return!0}}}function Bo(e,t,r){if(r.to==null){var n=r.marker.find(1,!0);return Bo(e,n.line,oi(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var s=void 0,c=0;c<t.markedSpans.length;++c)if(s=t.markedSpans[c],s.marker.collapsed&&!s.marker.widgetNode&&s.from==r.to&&(s.to==null||s.to!=r.from)&&(s.marker.inclusiveLeft||r.marker.inclusiveRight)&&Bo(e,t,s))return!0}function Wn(e){e=_n(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var s=r.lines[n];if(s==e)break;t+=s.height}for(var c=r.parent;c;r=c,c=r.parent)for(var d=0;d<c.children.length;++d){var h=c.children[d];if(h==r)break;t+=h.height}return t}function ji(e){if(e.height==0)return 0;for(var t=e.text.length,r,n=e;r=Fa(n);){var s=r.find(0,!0);n=s.from.line,t+=s.from.ch-s.to.ch}for(n=e;r=Bi(n);){var c=r.find(0,!0);t-=n.text.length-c.from.ch,n=c.to.line,t+=n.text.length-c.to.ch}return t}function jo(e){var t=e.display,r=e.doc;t.maxLine=ce(r,r.first),t.maxLineLength=ji(t.maxLine),t.maxLineChanged=!0,r.iter(function(n){var s=ji(n);s>t.maxLineLength&&(t.maxLineLength=s,t.maxLine=n)})}var kr=function(e,t,r){this.text=e,Wa(this,t),this.height=r?r(this):1};kr.prototype.lineNo=function(){return qe(this)},on(kr);function Kc(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Ia(e),Wa(e,r);var s=n?n(e):1;s!=e.height&&Gt(e,s)}function Xc(e){e.parent=null,Ia(e)}var Yc={},Zc={};function Ba(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Zc:Yc;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function ja(e,t){var r=R("span",null,null,T?"padding-right: .1px":null),n={pre:R("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var s=0;s<=(t.rest?t.rest.length:0);s++){var c=s?t.rest[s-1]:t.line,d=void 0;n.pos=0,n.addToken=Qc,pe(e.display.measure)&&(d=Pt(c,e.doc.direction))&&(n.addToken=ef(n.addToken,d)),n.map=[];var h=t!=e.display.externalMeasured&&qe(c);tf(c,n,La(e,c,h)),c.styleClasses&&(c.styleClasses.bgClass&&(n.bgClass=_e(c.styleClasses.bgClass,n.bgClass||"")),c.styleClasses.textClass&&(n.textClass=_e(c.styleClasses.textClass,n.textClass||""))),n.map.length==0&&n.map.push(0,0,n.content.appendChild(G(e.display.measure))),s==0?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(T){var p=n.content.lastChild;(/\bcm-tab\b/.test(p.className)||p.querySelector&&p.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return be(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=_e(n.pre.className,n.textClass||"")),n}function Jc(e){var t=z("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qc(e,t,r,n,s,c,d){if(!!t){var h=e.splitSpaces?Vc(t,e.trailingSpace):t,p=e.cm.state.specialChars,v=!1,C;if(!p.test(t))e.col+=t.length,C=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,C),w&&k<9&&(v=!0),e.pos+=t.length;else{C=document.createDocumentFragment();for(var S=0;;){p.lastIndex=S;var I=p.exec(t),O=I?I.index-S:t.length-S;if(O){var H=document.createTextNode(h.slice(S,S+O));w&&k<9?C.appendChild(z("span",[H])):C.appendChild(H),e.map.push(e.pos,e.pos+O,H),e.col+=O,e.pos+=O}if(!I)break;S+=O+1;var U=void 0;if(I[0]=="	"){var Q=e.cm.options.tabSize,te=Q-e.col%Q;U=C.appendChild(z("span",Dt(te),"cm-tab")),U.setAttribute("role","presentation"),U.setAttribute("cm-text","	"),e.col+=te}else I[0]=="\r"||I[0]==`
`?(U=C.appendChild(z("span",I[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),U.setAttribute("cm-text",I[0]),e.col+=1):(U=e.cm.options.specialCharPlaceholder(I[0]),U.setAttribute("cm-text",I[0]),w&&k<9?C.appendChild(z("span",[U])):C.appendChild(U),e.col+=1);e.map.push(e.pos,e.pos+1,U),e.pos++}}if(e.trailingSpace=h.charCodeAt(t.length-1)==32,r||n||s||v||c||d){var ie=r||"";n&&(ie+=n),s&&(ie+=s);var ne=z("span",[C],ie,c);if(d)for(var le in d)d.hasOwnProperty(le)&&le!="style"&&le!="class"&&ne.setAttribute(le,d[le]);return e.content.appendChild(ne)}e.content.appendChild(C)}}function Vc(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",s=0;s<e.length;s++){var c=e.charAt(s);c==" "&&r&&(s==e.length-1||e.charCodeAt(s+1)==32)&&(c="\xA0"),n+=c,r=c==" "}return n}function ef(e,t){return function(r,n,s,c,d,h,p){s=s?s+" cm-force-border":"cm-force-border";for(var v=r.pos,C=v+n.length;;){for(var S=void 0,I=0;I<t.length&&(S=t[I],!(S.to>v&&S.from<=v));I++);if(S.to>=C)return e(r,n,s,c,d,h,p);e(r,n.slice(0,S.to-v),s,c,null,h,p),c=null,n=n.slice(S.to-v),v=S.to}}}function Ua(e,t,r,n){var s=!n&&r.widgetNode;s&&e.map.push(e.pos,e.pos+t,s),!n&&e.cm.display.input.needsContentAttribute&&(s||(s=e.content.appendChild(document.createElement("span"))),s.setAttribute("cm-marker",r.id)),s&&(e.cm.display.input.setUneditable(s),e.content.appendChild(s)),e.pos+=t,e.trailingSpace=!1}function tf(e,t,r){var n=e.markedSpans,s=e.text,c=0;if(!n){for(var d=1;d<r.length;d+=2)t.addToken(t,s.slice(c,c=r[d]),Ba(r[d+1],t.cm.options));return}for(var h=s.length,p=0,v=1,C="",S,I,O=0,H,U,Q,te,ie;;){if(O==p){H=U=Q=I="",ie=null,te=null,O=1/0;for(var ne=[],le=void 0,ye=0;ye<n.length;++ye){var ge=n[ye],Me=ge.marker;if(Me.type=="bookmark"&&ge.from==p&&Me.widgetNode)ne.push(Me);else if(ge.from<=p&&(ge.to==null||ge.to>p||Me.collapsed&&ge.to==p&&ge.from==p)){if(ge.to!=null&&ge.to!=p&&O>ge.to&&(O=ge.to,U=""),Me.className&&(H+=" "+Me.className),Me.css&&(I=(I?I+";":"")+Me.css),Me.startStyle&&ge.from==p&&(Q+=" "+Me.startStyle),Me.endStyle&&ge.to==O&&(le||(le=[])).push(Me.endStyle,ge.to),Me.title&&((ie||(ie={})).title=Me.title),Me.attributes)for(var je in Me.attributes)(ie||(ie={}))[je]=Me.attributes[je];Me.collapsed&&(!te||qo(te.marker,Me)<0)&&(te=ge)}else ge.from>p&&O>ge.from&&(O=ge.from)}if(le)for(var wt=0;wt<le.length;wt+=2)le[wt+1]==O&&(U+=" "+le[wt]);if(!te||te.from==p)for(var tt=0;tt<ne.length;++tt)Ua(t,0,ne[tt]);if(te&&(te.from||0)==p){if(Ua(t,(te.to==null?h+1:te.to)-p,te.marker,te.from==null),te.to==null)return;te.to==p&&(te=!1)}}if(p>=h)break;for(var Xt=Math.min(h,O);;){if(C){var qt=p+C.length;if(!te){var lt=qt>Xt?C.slice(0,Xt-p):C;t.addToken(t,lt,S?S+H:H,Q,p+lt.length==O?U:"",I,ie)}if(qt>=Xt){C=C.slice(Xt-p),p=Xt;break}p=qt,Q=""}C=s.slice(c,c=r[v++]),S=Ba(r[v++],t.cm.options)}}}function $a(e,t,r){this.line=t,this.rest=Gc(t),this.size=this.rest?qe(Re(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Kn(e,t)}function Ui(e,t,r){for(var n=[],s,c=t;c<r;c=s){var d=new $a(e.doc,ce(e.doc,c),c);s=c+d.size,n.push(d)}return n}var Cr=null;function nf(e){Cr?Cr.ops.push(e):e.ownsGroup=Cr={ops:[e],delayedCallbacks:[]}}function rf(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var s=e.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++].call(null,s.cm)}}while(r<t.length)}function of(e,t){var r=e.ownsGroup;if(!!r)try{rf(r)}finally{Cr=null,t(r)}}var si=null;function mt(e,t){var r=fn(e,t);if(!!r.length){var n=Array.prototype.slice.call(arguments,2),s;Cr?s=Cr.delayedCallbacks:si?s=si:(s=si=[],setTimeout(sf,0));for(var c=function(h){s.push(function(){return r[h].apply(null,n)})},d=0;d<r.length;++d)c(d)}}function sf(){var e=si;si=null;for(var t=0;t<e.length;++t)e[t]()}function Ga(e,t,r,n){for(var s=0;s<t.changes.length;s++){var c=t.changes[s];c=="text"?lf(e,t):c=="gutter"?Xa(e,t,r,n):c=="class"?Uo(e,t):c=="widget"&&uf(e,t,n)}t.changes=null}function ai(e){return e.node==e.text&&(e.node=z("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&k<8&&(e.node.style.zIndex=2)),e.node}function af(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=ai(t);t.background=n.insertBefore(z("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}function Ka(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):ja(e,t)}function lf(e,t){var r=t.text.className,n=Ka(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Uo(e,t)):r&&(t.text.className=r)}function Uo(e,t){af(e,t),t.line.wrapClass?ai(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Xa(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var s=ai(t);t.gutterBackground=z("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),s.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var d=ai(t),h=t.gutter=z("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),d.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(z("div",ri(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var p=0;p<e.display.gutterSpecs.length;++p){var v=e.display.gutterSpecs[p].className,C=c.hasOwnProperty(v)&&c[v];C&&h.appendChild(z("div",[C],"CodeMirror-gutter-elt","left: "+n.gutterLeft[v]+"px; width: "+n.gutterWidth[v]+"px"))}}}function uf(e,t,r){t.alignable&&(t.alignable=null);for(var n=oe("CodeMirror-linewidget"),s=t.node.firstChild,c=void 0;s;s=c)c=s.nextSibling,n.test(s.className)&&t.node.removeChild(s);Ya(e,t,r)}function cf(e,t,r,n){var s=Ka(e,t);return t.text=t.node=s.pre,s.bgClass&&(t.bgClass=s.bgClass),s.textClass&&(t.textClass=s.textClass),Uo(e,t),Xa(e,t,r,n),Ya(e,t,n),t.node}function Ya(e,t,r){if(Za(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)Za(e,t.rest[n],t,r,!1)}function Za(e,t,r,n,s){if(!!t.widgets)for(var c=ai(r),d=0,h=t.widgets;d<h.length;++d){var p=h[d],v=z("div",[p.node],"CodeMirror-linewidget"+(p.className?" "+p.className:""));p.handleMouseEvents||v.setAttribute("cm-ignore-events","true"),ff(p,v,r,n),e.display.input.setUneditable(v),s&&p.above?c.insertBefore(v,r.gutter||r.text):c.appendChild(v),mt(p,"redraw")}}function ff(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var s=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(s-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=s+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function li(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ee(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),q(t.display.measure,z("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function Hn(e,t){for(var r=an(t);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function $i(e){return e.lineSpace.offsetTop}function $o(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ja(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=q(e.measure,z("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(e.cachedPaddingH=n),n}function Ln(e){return re-e.display.nativeBarWidth}function ar(e){return e.display.scroller.clientWidth-Ln(e)-e.display.barWidth}function Go(e){return e.display.scroller.clientHeight-Ln(e)-e.display.barHeight}function df(e,t,r){var n=e.options.lineWrapping,s=n&&ar(e);if(!t.measure.heights||n&&t.measure.width!=s){var c=t.measure.heights=[];if(n){t.measure.width=s;for(var d=t.text.firstChild.getClientRects(),h=0;h<d.length-1;h++){var p=d[h],v=d[h+1];Math.abs(p.bottom-v.bottom)>2&&c.push((p.bottom+v.top)/2-r.top)}}c.push(r.bottom-r.top)}}function Qa(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var s=0;s<e.rest.length;s++)if(qe(e.rest[s])>r)return{map:e.measure.maps[s],cache:e.measure.caches[s],before:!0}}function hf(e,t){t=_n(t);var r=qe(t),n=e.display.externalMeasured=new $a(e.doc,t,r);n.lineN=r;var s=n.built=ja(e,n);return n.text=s.pre,q(e.display.lineMeasure,s.pre),n}function Va(e,t,r,n){return En(e,Tr(e,t),r,n)}function Ko(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function Tr(e,t){var r=qe(t),n=Ko(e,r);n&&!n.text?n=null:n&&n.changes&&(Ga(e,n,r,Qo(e)),e.curOp.forceUpdate=!0),n||(n=hf(e,t));var s=Qa(n,t,r);return{line:t,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function En(e,t,r,n,s){t.before&&(r=-1);var c=r+(n||""),d;return t.cache.hasOwnProperty(c)?d=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(df(e,t.view,t.rect),t.hasHeights=!0),d=gf(e,t,r,n),d.bogus||(t.cache[c]=d)),{left:d.left,right:d.right,top:s?d.rtop:d.top,bottom:s?d.rbottom:d.bottom}}var el={left:0,right:0,top:0,bottom:0};function tl(e,t,r){for(var n,s,c,d,h,p,v=0;v<e.length;v+=3)if(h=e[v],p=e[v+1],t<h?(s=0,c=1,d="left"):t<p?(s=t-h,c=s+1):(v==e.length-3||t==p&&e[v+3]>t)&&(c=p-h,s=c-1,t>=p&&(d="right")),s!=null){if(n=e[v+2],h==p&&r==(n.insertLeft?"left":"right")&&(d=r),r=="left"&&s==0)for(;v&&e[v-2]==e[v-3]&&e[v-1].insertLeft;)n=e[(v-=3)+2],d="left";if(r=="right"&&s==p-h)for(;v<e.length-3&&e[v+3]==e[v+4]&&!e[v+5].insertLeft;)n=e[(v+=3)+2],d="right";break}return{node:n,start:s,end:c,collapse:d,coverStart:h,coverEnd:p}}function pf(e,t){var r=el;if(t=="left")for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var s=e.length-1;s>=0&&(r=e[s]).left==r.right;s--);return r}function gf(e,t,r,n){var s=tl(t.map,r,n),c=s.node,d=s.start,h=s.end,p=s.collapse,v;if(c.nodeType==3){for(var C=0;C<4;C++){for(;d&&rr(t.line.text.charAt(s.coverStart+d));)--d;for(;s.coverStart+h<s.coverEnd&&rr(t.line.text.charAt(s.coverStart+h));)++h;if(w&&k<9&&d==0&&h==s.coverEnd-s.coverStart?v=c.parentNode.getBoundingClientRect():v=pf(Z(c,d,h).getClientRects(),n),v.left||v.right||d==0)break;h=d,d=d-1,p="right"}w&&k<11&&(v=vf(e.display.measure,v))}else{d>0&&(p=n="right");var S;e.options.lineWrapping&&(S=c.getClientRects()).length>1?v=S[n=="right"?S.length-1:0]:v=c.getBoundingClientRect()}if(w&&k<9&&!d&&(!v||!v.left&&!v.right)){var I=c.parentNode.getClientRects()[0];I?v={left:I.left,right:I.left+xr(e.display),top:I.top,bottom:I.bottom}:v=el}for(var O=v.top-t.rect.top,H=v.bottom-t.rect.top,U=(O+H)/2,Q=t.view.measure.heights,te=0;te<Q.length-1&&!(U<Q[te]);te++);var ie=te?Q[te-1]:0,ne=Q[te],le={left:(p=="right"?v.right:v.left)-t.rect.left,right:(p=="left"?v.left:v.right)-t.rect.left,top:ie,bottom:ne};return!v.left&&!v.right&&(le.bogus=!0),e.options.singleCursorHeightPerLine||(le.rtop=O,le.rbottom=H),le}function vf(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Pe(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function nl(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function rl(e){e.display.externalMeasure=null,Ne(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)nl(e.display.view[t])}function ui(e){rl(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function il(){return E&&P?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ol(){return E&&P?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Xo(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=li(e.widgets[r]));return t}function Gi(e,t,r,n,s){if(!s){var c=Xo(t);r.top+=c,r.bottom+=c}if(n=="line")return r;n||(n="local");var d=Wn(t);if(n=="local"?d+=$i(e.display):d-=e.display.viewOffset,n=="page"||n=="window"){var h=e.display.lineSpace.getBoundingClientRect();d+=h.top+(n=="window"?0:ol());var p=h.left+(n=="window"?0:il());r.left+=p,r.right+=p}return r.top+=d,r.bottom+=d,r}function sl(e,t,r){if(r=="div")return t;var n=t.left,s=t.top;if(r=="page")n-=il(),s-=ol();else if(r=="local"||!r){var c=e.display.sizer.getBoundingClientRect();n+=c.left,s+=c.top}var d=e.display.lineSpace.getBoundingClientRect();return{left:n-d.left,top:s-d.top}}function Ki(e,t,r,n,s){return n||(n=ce(e.doc,t.line)),Gi(e,n,Va(e,n,t.ch,s),r)}function pn(e,t,r,n,s,c){n=n||ce(e.doc,t.line),s||(s=Tr(e,n));function d(H,U){var Q=En(e,s,H,U?"right":"left",c);return U?Q.left=Q.right:Q.right=Q.left,Gi(e,n,Q,r)}var h=Pt(n,e.doc.direction),p=t.ch,v=t.sticky;if(p>=n.text.length?(p=n.text.length,v="before"):p<=0&&(p=0,v="after"),!h)return d(v=="before"?p-1:p,v=="before");function C(H,U,Q){var te=h[U],ie=te.level==1;return d(Q?H-1:H,ie!=Q)}var S=Xe(h,p,v),I=It,O=C(p,S,v=="before");return I!=null&&(O.other=C(p,I,v!="before")),O}function al(e,t){var r=0;t=se(e.doc,t),e.options.lineWrapping||(r=xr(e.display)*t.ch);var n=ce(e.doc,t.line),s=Wn(n)+$i(e.display);return{left:r,right:r,top:s,bottom:s+n.height}}function Yo(e,t,r,n,s){var c=K(e,t,r);return c.xRel=s,n&&(c.outside=n),c}function Zo(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return Yo(n.first,0,null,-1,-1);var s=xn(n,r),c=n.first+n.size-1;if(s>c)return Yo(n.first+n.size-1,ce(n,c).text.length,null,1,1);t<0&&(t=0);for(var d=ce(n,s);;){var h=mf(e,d,s,t,r),p=Uc(d,h.ch+(h.xRel>0||h.outside>0?1:0));if(!p)return h;var v=p.find(1);if(v.line==s)return v;d=ce(n,s=v.line)}}function ll(e,t,r,n){n-=Xo(t);var s=t.text.length,c=rn(function(d){return En(e,r,d-1).bottom<=n},s,0);return s=rn(function(d){return En(e,r,d).top>n},c,s),{begin:c,end:s}}function ul(e,t,r,n){r||(r=Tr(e,t));var s=Gi(e,t,En(e,r,n),"line").top;return ll(e,t,r,s)}function Jo(e,t,r,n){return e.bottom<=r?!1:e.top>r?!0:(n?e.left:e.right)>t}function mf(e,t,r,n,s){s-=Wn(t);var c=Tr(e,t),d=Xo(t),h=0,p=t.text.length,v=!0,C=Pt(t,e.doc.direction);if(C){var S=(e.options.lineWrapping?bf:yf)(e,t,r,c,C,n,s);v=S.level!=1,h=v?S.from:S.to-1,p=v?S.to:S.from-1}var I=null,O=null,H=rn(function(ye){var ge=En(e,c,ye);return ge.top+=d,ge.bottom+=d,Jo(ge,n,s,!1)?(ge.top<=s&&ge.left<=n&&(I=ye,O=ge),!0):!1},h,p),U,Q,te=!1;if(O){var ie=n-O.left<O.right-n,ne=ie==v;H=I+(ne?0:1),Q=ne?"after":"before",U=ie?O.left:O.right}else{!v&&(H==p||H==h)&&H++,Q=H==0?"after":H==t.text.length?"before":En(e,c,H-(v?1:0)).bottom+d<=s==v?"after":"before";var le=pn(e,K(r,H,Q),"line",t,c);U=le.left,te=s<le.top?-1:s>=le.bottom?1:0}return H=ir(t.text,H,1),Yo(r,H,Q,te,n-U)}function yf(e,t,r,n,s,c,d){var h=rn(function(S){var I=s[S],O=I.level!=1;return Jo(pn(e,K(r,O?I.to:I.from,O?"before":"after"),"line",t,n),c,d,!0)},0,s.length-1),p=s[h];if(h>0){var v=p.level!=1,C=pn(e,K(r,v?p.from:p.to,v?"after":"before"),"line",t,n);Jo(C,c,d,!0)&&C.top>d&&(p=s[h-1])}return p}function bf(e,t,r,n,s,c,d){var h=ll(e,t,n,d),p=h.begin,v=h.end;/\s/.test(t.text.charAt(v-1))&&v--;for(var C=null,S=null,I=0;I<s.length;I++){var O=s[I];if(!(O.from>=v||O.to<=p)){var H=O.level!=1,U=En(e,n,H?Math.min(v,O.to)-1:Math.max(p,O.from)).right,Q=U<c?c-U+1e9:U-c;(!C||S>Q)&&(C=O,S=Q)}}return C||(C=s[s.length-1]),C.from<p&&(C={from:p,to:C.to,level:C.level}),C.to>v&&(C={from:C.from,to:v,level:C.level}),C}var lr;function Sr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(lr==null){lr=z("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)lr.appendChild(document.createTextNode("x")),lr.appendChild(z("br"));lr.appendChild(document.createTextNode("x"))}q(e.measure,lr);var r=lr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Ne(e.measure),r||1}function xr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=z("span","xxxxxxxxxx"),r=z("pre",[t],"CodeMirror-line-like");q(e.measure,r);var n=t.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(e.cachedCharWidth=s),s||10}function Qo(e){for(var t=e.display,r={},n={},s=t.gutters.clientLeft,c=t.gutters.firstChild,d=0;c;c=c.nextSibling,++d){var h=e.display.gutterSpecs[d].className;r[h]=c.offsetLeft+c.clientLeft+s,n[h]=c.clientWidth}return{fixedPos:Vo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Vo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function cl(e){var t=Sr(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/xr(e.display)-3);return function(s){if(Kn(e.doc,s))return 0;var c=0;if(s.widgets)for(var d=0;d<s.widgets.length;d++)s.widgets[d].height&&(c+=s.widgets[d].height);return r?c+(Math.ceil(s.text.length/n)||1)*t:c+t}}function es(e){var t=e.doc,r=cl(e);t.iter(function(n){var s=r(n);s!=n.height&&Gt(n,s)})}function ur(e,t,r,n){var s=e.display;if(!r&&an(t).getAttribute("cm-not-content")=="true")return null;var c,d,h=s.lineSpace.getBoundingClientRect();try{c=t.clientX-h.left,d=t.clientY-h.top}catch{return null}var p=Zo(e,c,d),v;if(n&&p.xRel>0&&(v=ce(e.doc,p.line).text).length==p.ch){var C=Fe(v,v.length,e.options.tabSize)-v.length;p=K(p.line,Math.max(0,Math.round((c-Ja(e.display).left)/xr(e.display))-C))}return p}function cr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function Ht(e,t,r,n){t==null&&(t=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),n||(n=0);var s=e.display;if(n&&r<s.viewTo&&(s.updateLineNumbers==null||s.updateLineNumbers>t)&&(s.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=s.viewTo)In&&zo(e.doc,t)<s.viewTo&&Yn(e);else if(r<=s.viewFrom)In&&za(e.doc,r+n)>s.viewFrom?Yn(e):(s.viewFrom+=n,s.viewTo+=n);else if(t<=s.viewFrom&&r>=s.viewTo)Yn(e);else if(t<=s.viewFrom){var c=Xi(e,r,r+n,1);c?(s.view=s.view.slice(c.index),s.viewFrom=c.lineN,s.viewTo+=n):Yn(e)}else if(r>=s.viewTo){var d=Xi(e,t,t,-1);d?(s.view=s.view.slice(0,d.index),s.viewTo=d.lineN):Yn(e)}else{var h=Xi(e,t,t,-1),p=Xi(e,r,r+n,1);h&&p?(s.view=s.view.slice(0,h.index).concat(Ui(e,h.lineN,p.lineN)).concat(s.view.slice(p.index)),s.viewTo+=n):Yn(e)}var v=s.externalMeasured;v&&(r<v.lineN?v.lineN+=n:t<v.lineN+v.size&&(s.externalMeasured=null))}function Xn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,s=e.display.externalMeasured;if(s&&t>=s.lineN&&t<s.lineN+s.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var c=n.view[cr(e,t)];if(c.node!=null){var d=c.changes||(c.changes=[]);ae(d,r)==-1&&d.push(r)}}}function Yn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Xi(e,t,r,n){var s=cr(e,t),c,d=e.display.view;if(!In||r==e.doc.first+e.doc.size)return{index:s,lineN:r};for(var h=e.display.viewFrom,p=0;p<s;p++)h+=d[p].size;if(h!=t){if(n>0){if(s==d.length-1)return null;c=h+d[s].size-t,s++}else c=h-t;t+=c,r+=c}for(;zo(e.doc,r)!=r;){if(s==(n<0?0:d.length-1))return null;r+=n*d[s-(n<0?1:0)].size,s+=n}return{index:s,lineN:r}}function wf(e,t,r){var n=e.display,s=n.view;s.length==0||t>=n.viewTo||r<=n.viewFrom?(n.view=Ui(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=Ui(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(cr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(Ui(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,cr(e,r)))),n.viewTo=r}function fl(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var s=t[n];!s.hidden&&(!s.node||s.changes)&&++r}return r}function ci(e){e.display.input.showSelection(e.display.input.prepareSelection())}function dl(e,t){t===void 0&&(t=!0);for(var r=e.doc,n={},s=n.cursors=document.createDocumentFragment(),c=n.selection=document.createDocumentFragment(),d=0;d<r.sel.ranges.length;d++)if(!(!t&&d==r.sel.primIndex)){var h=r.sel.ranges[d];if(!(h.from().line>=e.display.viewTo||h.to().line<e.display.viewFrom)){var p=h.empty();(p||e.options.showCursorWhenSelecting)&&hl(e,h.head,s),p||kf(e,h,c)}}return n}function hl(e,t,r){var n=pn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),s=r.appendChild(z("div","\xA0","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=Ki(e,t,"div",null,null);c.right-c.left>0&&(s.style.width=c.right-c.left+"px")}if(n.other){var d=r.appendChild(z("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));d.style.display="",d.style.left=n.other.left+"px",d.style.top=n.other.top+"px",d.style.height=(n.other.bottom-n.other.top)*.85+"px"}}function Yi(e,t){return e.top-t.top||e.left-t.left}function kf(e,t,r){var n=e.display,s=e.doc,c=document.createDocumentFragment(),d=Ja(e.display),h=d.left,p=Math.max(n.sizerWidth,ar(e)-n.sizer.offsetLeft)-d.right,v=s.direction=="ltr";function C(ne,le,ye,ge){le<0&&(le=0),le=Math.round(le),ge=Math.round(ge),c.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+ne+`px;
                             top: `+le+"px; width: "+(ye==null?p-ne:ye)+`px;
                             height: `+(ge-le)+"px"))}function S(ne,le,ye){var ge=ce(s,ne),Me=ge.text.length,je,wt;function tt(lt,zt){return Ki(e,K(ne,lt),"div",ge,zt)}function Xt(lt,zt,Ct){var ct=ul(e,ge,null,lt),ut=zt=="ltr"==(Ct=="after")?"left":"right",it=Ct=="after"?ct.begin:ct.end-(/\s/.test(ge.text.charAt(ct.end-1))?2:1);return tt(it,ut)[ut]}var qt=Pt(ge,s.direction);return Vr(qt,le||0,ye==null?Me:ye,function(lt,zt,Ct,ct){var ut=Ct=="ltr",it=tt(lt,ut?"left":"right"),Bt=tt(zt-1,ut?"right":"left"),Hr=le==null&&lt==0,tr=ye==null&&zt==Me,Et=ct==0,Mn=!qt||ct==qt.length-1;if(Bt.top-it.top<=3){var kt=(v?Hr:tr)&&Et,Rs=(v?tr:Hr)&&Mn,zn=kt?h:(ut?it:Bt).left,gr=Rs?p:(ut?Bt:it).right;C(zn,it.top,gr-zn,it.bottom)}else{var vr,At,Fr,_s;ut?(vr=v&&Hr&&Et?h:it.left,At=v?p:Xt(lt,Ct,"before"),Fr=v?h:Xt(zt,Ct,"after"),_s=v&&tr&&Mn?p:Bt.right):(vr=v?Xt(lt,Ct,"before"):h,At=!v&&Hr&&Et?p:it.right,Fr=!v&&tr&&Mn?h:Bt.left,_s=v?Xt(zt,Ct,"after"):p),C(vr,it.top,At-vr,it.bottom),it.bottom<Bt.top&&C(h,it.bottom,null,Bt.top),C(Fr,Bt.top,_s-Fr,Bt.bottom)}(!je||Yi(it,je)<0)&&(je=it),Yi(Bt,je)<0&&(je=Bt),(!wt||Yi(it,wt)<0)&&(wt=it),Yi(Bt,wt)<0&&(wt=Bt)}),{start:je,end:wt}}var I=t.from(),O=t.to();if(I.line==O.line)S(I.line,I.ch,O.ch);else{var H=ce(s,I.line),U=ce(s,O.line),Q=_n(H)==_n(U),te=S(I.line,I.ch,Q?H.text.length+1:null).end,ie=S(O.line,Q?0:null,O.ch).start;Q&&(te.top<ie.top-2?(C(te.right,te.top,null,te.bottom),C(h,ie.top,ie.left,ie.bottom)):C(te.right,te.top,ie.left-te.right,te.bottom)),te.bottom<ie.top&&C(h,te.bottom,null,ie.top)}r.appendChild(c)}function ts(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Rr(e),t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function pl(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||rs(e))}function ns(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Rr(e))},100)}function rs(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(be(e,"focus",e,t),e.state.focused=!0,ke(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),T&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ts(e))}function Rr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(be(e,"blur",e,t),e.state.focused=!1,ve(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Zi(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=Math.max(0,t.scroller.getBoundingClientRect().top),s=t.lineDiv.getBoundingClientRect().top,c=0,d=0;d<t.view.length;d++){var h=t.view[d],p=e.options.lineWrapping,v=void 0,C=0;if(!h.hidden){if(s+=h.line.height,w&&k<8){var S=h.node.offsetTop+h.node.offsetHeight;v=S-r,r=S}else{var I=h.node.getBoundingClientRect();v=I.bottom-I.top,!p&&h.text.firstChild&&(C=h.text.firstChild.getBoundingClientRect().right-I.left-1)}var O=h.line.height-v;if((O>.005||O<-.005)&&(s<n&&(c-=O),Gt(h.line,v),gl(h.line),h.rest))for(var H=0;H<h.rest.length;H++)gl(h.rest[H]);if(C>e.display.sizerWidth){var U=Math.ceil(C/xr(e.display));U>e.display.maxLineLength&&(e.display.maxLineLength=U,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function gl(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Ji(e,t,r){var n=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-$i(e));var s=r&&r.bottom!=null?r.bottom:n+e.wrapper.clientHeight,c=xn(t,n),d=xn(t,s);if(r&&r.ensure){var h=r.ensure.from.line,p=r.ensure.to.line;h<c?(c=h,d=xn(t,Wn(ce(t,h))+e.wrapper.clientHeight)):Math.min(p,t.lastLine())>=d&&(c=xn(t,Wn(ce(t,p))-e.wrapper.clientHeight),d=p)}return{from:c,to:Math.max(d,c+1)}}function Cf(e,t){if(!nt(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),s=null;if(t.top+n.top<0?s=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),s!=null&&!V){var c=z("div","\u200B",null,`position: absolute;
                         top: `+(t.top-r.viewOffset-$i(e.display))+`px;
                         height: `+(t.bottom-t.top+Ln(e)+r.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(s),e.display.lineSpace.removeChild(c)}}}function Tf(e,t,r,n){n==null&&(n=0);var s;!e.options.lineWrapping&&t==r&&(r=t.sticky=="before"?K(t.line,t.ch+1,"before"):t,t=t.ch?K(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var d=!1,h=pn(e,t),p=!r||r==t?h:pn(e,r);s={left:Math.min(h.left,p.left),top:Math.min(h.top,p.top)-n,right:Math.max(h.left,p.left),bottom:Math.max(h.bottom,p.bottom)+n};var v=is(e,s),C=e.doc.scrollTop,S=e.doc.scrollLeft;if(v.scrollTop!=null&&(di(e,v.scrollTop),Math.abs(e.doc.scrollTop-C)>1&&(d=!0)),v.scrollLeft!=null&&(fr(e,v.scrollLeft),Math.abs(e.doc.scrollLeft-S)>1&&(d=!0)),!d)break}return s}function Sf(e,t){var r=is(e,t);r.scrollTop!=null&&di(e,r.scrollTop),r.scrollLeft!=null&&fr(e,r.scrollLeft)}function is(e,t){var r=e.display,n=Sr(e.display);t.top<0&&(t.top=0);var s=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:r.scroller.scrollTop,c=Go(e),d={};t.bottom-t.top>c&&(t.bottom=t.top+c);var h=e.doc.height+$o(r),p=t.top<n,v=t.bottom>h-n;if(t.top<s)d.scrollTop=p?0:t.top;else if(t.bottom>s+c){var C=Math.min(t.top,(v?h:t.bottom)-c);C!=s&&(d.scrollTop=C)}var S=e.options.fixedGutter?0:r.gutters.offsetWidth,I=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:r.scroller.scrollLeft-S,O=ar(e)-r.gutters.offsetWidth,H=t.right-t.left>O;return H&&(t.right=t.left+O),t.left<10?d.scrollLeft=0:t.left<I?d.scrollLeft=Math.max(0,t.left+S-(H?0:10)):t.right>O+I-3&&(d.scrollLeft=t.right+(H?0:10)-O),d}function os(e,t){t!=null&&(Qi(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function _r(e){Qi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function fi(e,t,r){(t!=null||r!=null)&&Qi(e),t!=null&&(e.curOp.scrollLeft=t),r!=null&&(e.curOp.scrollTop=r)}function xf(e,t){Qi(e),e.curOp.scrollToPos=t}function Qi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=al(e,t.from),n=al(e,t.to);vl(e,r,n,t.margin)}}function vl(e,t,r,n){var s=is(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});fi(e,s.scrollLeft,s.scrollTop)}function di(e,t){Math.abs(e.doc.scrollTop-t)<2||(u||as(e,{top:t}),ml(e,t,!0),u&&as(e),gi(e,100))}function ml(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function fr(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n)&&(e.doc.scrollLeft=t,Cl(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function hi(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+$o(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Ln(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var dr=function(e,t,r){this.cm=r;var n=this.vert=z("div",[z("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=z("div",[z("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=s.tabIndex=-1,e(n),e(s),me(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),me(s,"scroll",function(){s.clientWidth&&t(s.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&k<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};dr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var s=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+s)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(n==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},dr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},dr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},dr.prototype.zeroWidthHack=function(){var e=y&&!Y?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new xe,this.disableVert=new xe},dr.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto";function n(){var s=e.getBoundingClientRect(),c=r=="vert"?document.elementFromPoint(s.right-1,(s.top+s.bottom)/2):document.elementFromPoint((s.right+s.left)/2,s.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,n)}t.set(1e3,n)},dr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var pi=function(){};pi.prototype.update=function(){return{bottom:0,right:0}},pi.prototype.setScrollLeft=function(){},pi.prototype.setScrollTop=function(){},pi.prototype.clear=function(){};function Lr(e,t){t||(t=hi(e));var r=e.display.barWidth,n=e.display.barHeight;yl(e,t);for(var s=0;s<4&&r!=e.display.barWidth||n!=e.display.barHeight;s++)r!=e.display.barWidth&&e.options.lineWrapping&&Zi(e),yl(e,hi(e)),r=e.display.barWidth,n=e.display.barHeight}function yl(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}var bl={native:dr,null:pi};function wl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ve(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new bl[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),me(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){r=="horizontal"?fr(e,t):di(e,t)},e),e.display.scrollbars.addClass&&ke(e.display.wrapper,e.display.scrollbars.addClass)}var Rf=0;function hr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rf,markArrays:null},nf(e.curOp)}function pr(e){var t=e.curOp;t&&of(t,function(r){for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;_f(r)})}function _f(e){for(var t=e.ops,r=0;r<t.length;r++)Lf(t[r]);for(var n=0;n<t.length;n++)Ef(t[n]);for(var s=0;s<t.length;s++)Mf(t[s]);for(var c=0;c<t.length;c++)Df(t[c]);for(var d=0;d<t.length;d++)Pf(t[d])}function Lf(e){var t=e.cm,r=t.display;Of(t),e.updateMaxLine&&jo(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Vi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ef(e){e.updatedDisplay=e.mustUpdate&&ss(e.cm,e.update)}function Mf(e){var t=e.cm,r=t.display;e.updatedDisplay&&Zi(t),e.barMeasure=hi(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Va(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Ln(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-ar(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Df(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&fr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==he();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Lr(t,e.barMeasure),e.updatedDisplay&&us(t,e.barMeasure),e.selectionChanged&&ts(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&pl(e.cm)}function Pf(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&kl(t,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&ml(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&fr(t,e.scrollLeft,!0,!0),e.scrollToPos){var s=Tf(t,se(n,e.scrollToPos.from),se(n,e.scrollToPos.to),e.scrollToPos.margin);Cf(t,s)}var c=e.maybeHiddenMarkers,d=e.maybeUnhiddenMarkers;if(c)for(var h=0;h<c.length;++h)c[h].lines.length||be(c[h],"hide");if(d)for(var p=0;p<d.length;++p)d[p].lines.length&&be(d[p],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&be(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kt(e,t){if(e.curOp)return t();hr(e);try{return t()}finally{pr(e)}}function yt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);hr(e);try{return t.apply(e,arguments)}finally{pr(e)}}}function Ot(e){return function(){if(this.curOp)return e.apply(this,arguments);hr(this);try{return e.apply(this,arguments)}finally{pr(this)}}}function bt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);hr(t);try{return e.apply(this,arguments)}finally{pr(t)}}}function gi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,pt(Nf,e))}function Nf(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=ii(e,t.highlightFrontier),s=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(n.line>=e.display.viewFrom){var d=c.styles,h=c.text.length>e.options.maxHighlightLength?Vt(t.mode,n.state):null,p=_a(e,c,n,!0);h&&(n.state=h),c.styles=p.styles;var v=c.styleClasses,C=p.classes;C?c.styleClasses=C:v&&(c.styleClasses=null);for(var S=!d||d.length!=c.styles.length||v!=C&&(!v||!C||v.bgClass!=C.bgClass||v.textClass!=C.textClass),I=0;!S&&I<d.length;++I)S=d[I]!=c.styles[I];S&&s.push(n.line),c.stateAfter=n.save(),n.nextLine()}else c.text.length<=e.options.maxHighlightLength&&Wo(e,c.text,n),c.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return gi(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),s.length&&Kt(e,function(){for(var c=0;c<s.length;c++)Xn(e,s[c],"text")})}}var Vi=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Ji(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=ar(e),this.force=r,this.dims=Qo(e),this.events=[]};Vi.prototype.signal=function(e,t){Ze(e,t)&&this.events.push(arguments)},Vi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)be.apply(null,this.events[e])};function Of(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ln(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ln(e)+"px",t.scrollbarsClipped=!0)}function Af(e){if(e.hasFocus())return null;var t=he();if(!t||!Ee(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&Ee(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function If(e){if(!(!e||!e.activeElt||e.activeElt==he())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Ee(document.body,e.anchorNode)&&Ee(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}function ss(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return Yn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&fl(e)==0)return!1;Tl(e)&&(Yn(e),t.dims=Qo(e));var s=n.first+n.size,c=Math.max(t.visible.from-e.options.viewportMargin,n.first),d=Math.min(s,t.visible.to+e.options.viewportMargin);r.viewFrom<c&&c-r.viewFrom<20&&(c=Math.max(n.first,r.viewFrom)),r.viewTo>d&&r.viewTo-d<20&&(d=Math.min(s,r.viewTo)),In&&(c=zo(e.doc,c),d=za(e.doc,d));var h=c!=r.viewFrom||d!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;wf(e,c,d),r.viewOffset=Wn(ce(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var p=fl(e);if(!h&&p==0&&!t.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var v=Af(e);return p>4&&(r.lineDiv.style.display="none"),Wf(e,r.updateLineNumbers,t.dims),p>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,If(v),Ne(r.cursorDiv),Ne(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,h&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,gi(e,400)),r.updateLineNumbers=null,!0}function kl(e,t){for(var r=t.viewport,n=!0;;n=!1){if(!n||!e.options.lineWrapping||t.oldDisplayWidth==ar(e)){if(r&&r.top!=null&&(r={top:Math.min(e.doc.height+$o(e.display)-Go(e),r.top)}),t.visible=Ji(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else n&&(t.visible=Ji(e.display,e.doc,r));if(!ss(e,t))break;Zi(e);var s=hi(e);ci(e),Lr(e,s),us(e,s),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function as(e,t){var r=new Vi(e,t);if(ss(e,r)){Zi(e),kl(e,r);var n=hi(e);ci(e),Lr(e,n),us(e,n),r.finish()}}function Wf(e,t,r){var n=e.display,s=e.options.lineNumbers,c=n.lineDiv,d=c.firstChild;function h(H){var U=H.nextSibling;return T&&y&&e.display.currentWheelTarget==H?H.style.display="none":H.parentNode.removeChild(H),U}for(var p=n.view,v=n.viewFrom,C=0;C<p.length;C++){var S=p[C];if(!S.hidden)if(!S.node||S.node.parentNode!=c){var I=cf(e,S,v,r);c.insertBefore(I,d)}else{for(;d!=S.node;)d=h(d);var O=s&&t!=null&&t<=v&&S.lineNumber;S.changes&&(ae(S.changes,"gutter")>-1&&(O=!1),Ga(e,S,v,r)),O&&(Ne(S.lineNumber),S.lineNumber.appendChild(document.createTextNode(ri(e.options,v)))),d=S.node.nextSibling}v+=S.size}for(;d;)d=h(d)}function ls(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",mt(e,"gutterChanged",e)}function us(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ln(e)+"px"}function Cl(e){var t=e.display,r=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var n=Vo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,s=t.gutters.offsetWidth,c=n+"px",d=0;d<r.length;d++)if(!r[d].hidden){e.options.fixedGutter&&(r[d].gutter&&(r[d].gutter.style.left=c),r[d].gutterBackground&&(r[d].gutterBackground.style.left=c));var h=r[d].alignable;if(h)for(var p=0;p<h.length;p++)h[p].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=n+s+"px")}}function Tl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=ri(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var s=n.measure.appendChild(z("div",[z("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=s.firstChild.offsetWidth,d=s.offsetWidth-c;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(c,n.lineGutter.offsetWidth-d)+1,n.lineNumWidth=n.lineNumInnerWidth+d,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",ls(e.display),!0}return!1}function cs(e,t){for(var r=[],n=!1,s=0;s<e.length;s++){var c=e[s],d=null;if(typeof c!="string"&&(d=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)n=!0;else continue;r.push({className:c,style:d})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function Sl(e){var t=e.gutters,r=e.gutterSpecs;Ne(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var s=r[n],c=s.className,d=s.style,h=t.appendChild(z("div",null,"CodeMirror-gutter "+c));d&&(h.style.cssText=d),c=="CodeMirror-linenumbers"&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",ls(e)}function vi(e){Sl(e.display),Ht(e),Cl(e)}function Hf(e,t,r,n){var s=this;this.input=r,s.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=z("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=R("div",null,"CodeMirror-code"),s.selectionDiv=z("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=z("div",null,"CodeMirror-cursors"),s.measure=z("div",null,"CodeMirror-measure"),s.lineMeasure=z("div",null,"CodeMirror-measure"),s.lineSpace=R("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var c=R("div",[s.lineSpace],"CodeMirror-lines");s.mover=z("div",[c],null,"position: relative"),s.sizer=z("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=z("div",null,null,"position: absolute; height: "+re+"px; width: 1px;"),s.gutters=z("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=z("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=z("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),s.wrapper.setAttribute("translate","no"),w&&k<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),!T&&!(u&&L)&&(s.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(s.wrapper):e(s.wrapper)),s.viewFrom=s.viewTo=t.first,s.reportedViewFrom=s.reportedViewTo=t.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=cs(n.gutters,n.lineNumbers),Sl(s),r.init(s)}var eo=0,Fn=null;w?Fn=-.53:u?Fn=15:E?Fn=-.7:$&&(Fn=-1/3);function xl(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:t,y:r}}function Ff(e){var t=xl(e);return t.x*=Fn,t.y*=Fn,t}function Rl(e,t){var r=xl(t),n=r.x,s=r.y,c=Fn;t.deltaMode===0&&(n=t.deltaX,s=t.deltaY,c=1);var d=e.display,h=d.scroller,p=h.scrollWidth>h.clientWidth,v=h.scrollHeight>h.clientHeight;if(!!(n&&p||s&&v)){if(s&&y&&T){e:for(var C=t.target,S=d.view;C!=h;C=C.parentNode)for(var I=0;I<S.length;I++)if(S[I].node==C){e.display.currentWheelTarget=C;break e}}if(n&&!u&&!M&&c!=null){s&&v&&di(e,Math.max(0,h.scrollTop+s*c)),fr(e,Math.max(0,h.scrollLeft+n*c)),(!s||s&&v)&&vt(t),d.wheelStartX=null;return}if(s&&c!=null){var O=s*c,H=e.doc.scrollTop,U=H+d.wrapper.clientHeight;O<0?H=Math.max(0,H+O-50):U=Math.min(e.doc.height,U+O+50),as(e,{top:H,bottom:U})}eo<20&&t.deltaMode!==0&&(d.wheelStartX==null?(d.wheelStartX=h.scrollLeft,d.wheelStartY=h.scrollTop,d.wheelDX=n,d.wheelDY=s,setTimeout(function(){if(d.wheelStartX!=null){var Q=h.scrollLeft-d.wheelStartX,te=h.scrollTop-d.wheelStartY,ie=te&&d.wheelDY&&te/d.wheelDY||Q&&d.wheelDX&&Q/d.wheelDX;d.wheelStartX=d.wheelStartY=null,ie&&(Fn=(Fn*eo+ie)/(eo+1),++eo)}},200)):(d.wheelDX+=n,d.wheelDY+=s))}}var tn=function(e,t){this.ranges=e,this.primIndex=t};tn.prototype.primary=function(){return this.ranges[this.primIndex]},tn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!x(r.anchor,n.anchor)||!x(r.head,n.head))return!1}return!0},tn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ze(B(this.ranges[t].anchor),B(this.ranges[t].head));return new tn(e,this.primIndex)},tn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},tn.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(m(t,n.from())>=0&&m(e,n.to())<=0)return r}return-1};var ze=function(e,t){this.anchor=e,this.head=t};ze.prototype.from=function(){return Te(this.anchor,this.head)},ze.prototype.to=function(){return J(this.anchor,this.head)},ze.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function gn(e,t,r){var n=e&&e.options.selectionsMayTouch,s=t[r];t.sort(function(I,O){return m(I.from(),O.from())}),r=ae(t,s);for(var c=1;c<t.length;c++){var d=t[c],h=t[c-1],p=m(h.to(),d.from());if(n&&!d.empty()?p>0:p>=0){var v=Te(h.from(),d.from()),C=J(h.to(),d.to()),S=h.empty()?d.from()==d.head:h.from()==h.head;c<=r&&--r,t.splice(--c,2,new ze(S?C:v,S?v:C))}}return new tn(t,r)}function Zn(e,t){return new tn([new ze(e,t||e)],0)}function Jn(e){return e.text?K(e.from.line+e.text.length-1,Re(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function _l(e,t){if(m(e,t.from)<0)return e;if(m(e,t.to)<=0)return Jn(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Jn(t).ch-t.to.ch),K(r,n)}function fs(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var s=e.sel.ranges[n];r.push(new ze(_l(s.anchor,t),_l(s.head,t)))}return gn(e.cm,r,e.sel.primIndex)}function Ll(e,t,r){return e.line==t.line?K(r.line,e.ch-t.ch+r.ch):K(r.line+(e.line-t.line),e.ch)}function qf(e,t,r){for(var n=[],s=K(e.first,0),c=s,d=0;d<t.length;d++){var h=t[d],p=Ll(h.from,s,c),v=Ll(Jn(h),s,c);if(s=h.to,c=v,r=="around"){var C=e.sel.ranges[d],S=m(C.head,C.anchor)<0;n[d]=new ze(S?v:p,S?p:v)}else n[d]=new ze(p,p)}return new tn(n,e.sel.primIndex)}function ds(e){e.doc.mode=Wt(e.options,e.doc.modeOption),mi(e)}function mi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,gi(e,100),e.state.modeGen++,e.curOp&&Ht(e)}function El(e,t){return t.from.ch==0&&t.to.ch==0&&Re(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function hs(e,t,r,n){function s(ie){return r?r[ie]:null}function c(ie,ne,le){Kc(ie,ne,le,n),mt(ie,"change",ie,t)}function d(ie,ne){for(var le=[],ye=ie;ye<ne;++ye)le.push(new kr(v[ye],s(ye),n));return le}var h=t.from,p=t.to,v=t.text,C=ce(e,h.line),S=ce(e,p.line),I=Re(v),O=s(v.length-1),H=p.line-h.line;if(t.full)e.insert(0,d(0,v.length)),e.remove(v.length,e.size-v.length);else if(El(e,t)){var U=d(0,v.length-1);c(S,S.text,O),H&&e.remove(h.line,H),U.length&&e.insert(h.line,U)}else if(C==S)if(v.length==1)c(C,C.text.slice(0,h.ch)+I+C.text.slice(p.ch),O);else{var Q=d(1,v.length-1);Q.push(new kr(I+C.text.slice(p.ch),O,n)),c(C,C.text.slice(0,h.ch)+v[0],s(0)),e.insert(h.line+1,Q)}else if(v.length==1)c(C,C.text.slice(0,h.ch)+v[0]+S.text.slice(p.ch),s(0)),e.remove(h.line+1,H);else{c(C,C.text.slice(0,h.ch)+v[0],s(0)),c(S,I+S.text.slice(p.ch),O);var te=d(1,v.length-1);H>1&&e.remove(h.line+1,H-1),e.insert(h.line+1,te)}mt(e,"change",e,t)}function Qn(e,t,r){function n(s,c,d){if(s.linked)for(var h=0;h<s.linked.length;++h){var p=s.linked[h];if(p.doc!=c){var v=d&&p.sharedHist;r&&!v||(t(p.doc,v),n(p.doc,s,v))}}}n(e,null,!0)}function Ml(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,es(e),ds(e),Dl(e),e.options.direction=t.direction,e.options.lineWrapping||jo(e),e.options.mode=t.modeOption,Ht(e)}function Dl(e){(e.doc.direction=="rtl"?ke:ve)(e.display.lineDiv,"CodeMirror-rtl")}function zf(e){Kt(e,function(){Dl(e),Ht(e)})}function to(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ps(e,t){var r={from:B(t.from),to:Jn(t),text:Sn(e,t.from,t.to)};return Ol(e,r,t.from.line,t.to.line+1),Qn(e,function(n){return Ol(n,r,t.from.line,t.to.line+1)},!0),r}function Pl(e){for(;e.length;){var t=Re(e);if(t.ranges)e.pop();else break}}function Bf(e,t){if(t)return Pl(e.done),Re(e.done);if(e.done.length&&!Re(e.done).ranges)return Re(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Re(e.done)}function Nl(e,t,r,n){var s=e.history;s.undone.length=0;var c=+new Date,d,h;if((s.lastOp==n||s.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&s.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(d=Bf(s,s.lastOp==n)))h=Re(d.changes),m(t.from,t.to)==0&&m(t.from,h.to)==0?h.to=Jn(t):d.changes.push(ps(e,t));else{var p=Re(s.done);for((!p||!p.ranges)&&no(e.sel,s.done),d={changes:[ps(e,t)],generation:s.generation},s.done.push(d);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(r),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=c,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=t.origin,h||be(e,"historyAdded")}function jf(e,t,r,n){var s=t.charAt(0);return s=="*"||s=="+"&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Uf(e,t,r,n){var s=e.history,c=n&&n.origin;r==s.lastSelOp||c&&s.lastSelOrigin==c&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==c||jf(e,c,Re(s.done),t))?s.done[s.done.length-1]=t:no(t,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=c,s.lastSelOp=r,n&&n.clearRedo!==!1&&Pl(s.undone)}function no(e,t){var r=Re(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Ol(e,t,r,n){var s=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(d){d.markedSpans&&((s||(s=t["spans_"+e.id]={}))[c]=d.markedSpans),++c})}function $f(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Gf(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],s=0;s<t.text.length;++s)n.push($f(r[s]));return n}function Al(e,t){var r=Gf(e,t),n=Fo(e,t);if(!r)return n;if(!n)return r;for(var s=0;s<r.length;++s){var c=r[s],d=n[s];if(c&&d){e:for(var h=0;h<d.length;++h){for(var p=d[h],v=0;v<c.length;++v)if(c[v].marker==p.marker)continue e;c.push(p)}}else d&&(r[s]=d)}return r}function Er(e,t,r){for(var n=[],s=0;s<e.length;++s){var c=e[s];if(c.ranges){n.push(r?tn.prototype.deepCopy.call(c):c);continue}var d=c.changes,h=[];n.push({changes:h});for(var p=0;p<d.length;++p){var v=d[p],C=void 0;if(h.push({from:v.from,to:v.to,text:v.text}),t)for(var S in v)(C=S.match(/^spans_(\d+)$/))&&ae(t,Number(C[1]))>-1&&(Re(h)[S]=v[S],delete v[S])}}return n}function gs(e,t,r,n){if(n){var s=e.anchor;if(r){var c=m(t,s)<0;c!=m(r,s)<0?(s=t,t=r):c!=m(t,r)<0&&(t=r)}return new ze(s,t)}else return new ze(r||t,t)}function ro(e,t,r,n,s){s==null&&(s=e.cm&&(e.cm.display.shift||e.extend)),Lt(e,new tn([gs(e.sel.primary(),t,r,s)],0),n)}function Il(e,t,r){for(var n=[],s=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)n[c]=gs(e.sel.ranges[c],t[c],null,s);var d=gn(e.cm,n,e.sel.primIndex);Lt(e,d,r)}function vs(e,t,r,n){var s=e.sel.ranges.slice(0);s[t]=r,Lt(e,gn(e.cm,s,e.sel.primIndex),n)}function Wl(e,t,r,n){Lt(e,Zn(t,r),n)}function Kf(e,t,r){var n={ranges:t.ranges,update:function(s){this.ranges=[];for(var c=0;c<s.length;c++)this.ranges[c]=new ze(se(e,s[c].anchor),se(e,s[c].head))},origin:r&&r.origin};return be(e,"beforeSelectionChange",e,n),e.cm&&be(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?gn(e.cm,n.ranges,n.ranges.length-1):t}function Hl(e,t,r){var n=e.history.done,s=Re(n);s&&s.ranges?(n[n.length-1]=t,io(e,t,r)):Lt(e,t,r)}function Lt(e,t,r){io(e,t,r),Uf(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function io(e,t,r){(Ze(e,"beforeSelectionChange")||e.cm&&Ze(e.cm,"beforeSelectionChange"))&&(t=Kf(e,t,r));var n=r&&r.bias||(m(t.primary().head,e.sel.primary().head)<0?-1:1);Fl(e,zl(e,t,n,!0)),!(r&&r.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&_r(e.cm)}function Fl(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Qt(e.cm)),mt(e,"cursorActivity",e))}function ql(e){Fl(e,zl(e,e.sel,null,!1))}function zl(e,t,r,n){for(var s,c=0;c<t.ranges.length;c++){var d=t.ranges[c],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],p=oo(e,d.anchor,h&&h.anchor,r,n),v=oo(e,d.head,h&&h.head,r,n);(s||p!=d.anchor||v!=d.head)&&(s||(s=t.ranges.slice(0,c)),s[c]=new ze(p,v))}return s?gn(e.cm,s,t.primIndex):t}function Mr(e,t,r,n,s){var c=ce(e,t.line);if(c.markedSpans)for(var d=0;d<c.markedSpans.length;++d){var h=c.markedSpans[d],p=h.marker,v="selectLeft"in p?!p.selectLeft:p.inclusiveLeft,C="selectRight"in p?!p.selectRight:p.inclusiveRight;if((h.from==null||(v?h.from<=t.ch:h.from<t.ch))&&(h.to==null||(C?h.to>=t.ch:h.to>t.ch))){if(s&&(be(p,"beforeCursorEnter"),p.explicitlyCleared))if(c.markedSpans){--d;continue}else break;if(!p.atomic)continue;if(r){var S=p.find(n<0?1:-1),I=void 0;if((n<0?C:v)&&(S=Bl(e,S,-n,S&&S.line==t.line?c:null)),S&&S.line==t.line&&(I=m(S,r))&&(n<0?I<0:I>0))return Mr(e,S,t,n,s)}var O=p.find(n<0?-1:1);return(n<0?v:C)&&(O=Bl(e,O,n,O.line==t.line?c:null)),O?Mr(e,O,t,n,s):null}}return t}function oo(e,t,r,n,s){var c=n||1,d=Mr(e,t,r,c,s)||!s&&Mr(e,t,r,c,!0)||Mr(e,t,r,-c,s)||!s&&Mr(e,t,r,-c,!0);return d||(e.cantEdit=!0,K(e.first,0))}function Bl(e,t,r,n){return r<0&&t.ch==0?t.line>e.first?se(e,K(t.line-1)):null:r>0&&t.ch==(n||ce(e,t.line)).text.length?t.line<e.first+e.size-1?K(t.line+1,0):null:new K(t.line,t.ch+r)}function jl(e){e.setSelection(K(e.firstLine(),0),K(e.lastLine()),De)}function Ul(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(s,c,d,h){s&&(n.from=se(e,s)),c&&(n.to=se(e,c)),d&&(n.text=d),h!==void 0&&(n.origin=h)}),be(e,"beforeChange",e,n),e.cm&&be(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Dr(e,t,r){if(e.cm){if(!e.cm.curOp)return yt(e.cm,Dr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!((Ze(e,"beforeChange")||e.cm&&Ze(e.cm,"beforeChange"))&&(t=Ul(e,t,!0),!t))){var n=Oa&&!r&&jc(e,t.from,t.to);if(n)for(var s=n.length-1;s>=0;--s)$l(e,{from:n[s].from,to:n[s].to,text:s?[""]:t.text,origin:t.origin});else $l(e,t)}}function $l(e,t){if(!(t.text.length==1&&t.text[0]==""&&m(t.from,t.to)==0)){var r=fs(e,t);Nl(e,t,r,e.cm?e.cm.curOp.id:NaN),yi(e,t,r,Fo(e,t));var n=[];Qn(e,function(s,c){!c&&ae(n,s.history)==-1&&(Yl(s.history,t),n.push(s.history)),yi(s,t,null,Fo(s,t))})}}function so(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!(n&&!r)){for(var s=e.history,c,d=e.sel,h=t=="undo"?s.done:s.undone,p=t=="undo"?s.undone:s.done,v=0;v<h.length&&(c=h[v],!(r?c.ranges&&!c.equals(e.sel):!c.ranges));v++);if(v!=h.length){for(s.lastOrigin=s.lastSelOrigin=null;;)if(c=h.pop(),c.ranges){if(no(c,p),r&&!c.equals(e.sel)){Lt(e,c,{clearRedo:!1});return}d=c}else if(n){h.push(c);return}else break;var C=[];no(d,p),p.push({changes:C,generation:s.generation}),s.generation=c.generation||++s.maxGeneration;for(var S=Ze(e,"beforeChange")||e.cm&&Ze(e.cm,"beforeChange"),I=function(U){var Q=c.changes[U];if(Q.origin=t,S&&!Ul(e,Q,!1))return h.length=0,{};C.push(ps(e,Q));var te=U?fs(e,Q):Re(h);yi(e,Q,te,Al(e,Q)),!U&&e.cm&&e.cm.scrollIntoView({from:Q.from,to:Jn(Q)});var ie=[];Qn(e,function(ne,le){!le&&ae(ie,ne.history)==-1&&(Yl(ne.history,Q),ie.push(ne.history)),yi(ne,Q,null,Al(ne,Q))})},O=c.changes.length-1;O>=0;--O){var H=I(O);if(H)return H.v}}}}function Gl(e,t){if(t!=0&&(e.first+=t,e.sel=new tn(xt(e.sel.ranges,function(s){return new ze(K(s.anchor.line+t,s.anchor.ch),K(s.head.line+t,s.head.ch))}),e.sel.primIndex),e.cm)){Ht(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Xn(e.cm,n,"gutter")}}function yi(e,t,r,n){if(e.cm&&!e.cm.curOp)return yt(e.cm,yi)(e,t,r,n);if(t.to.line<e.first){Gl(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var s=t.text.length-1-(e.first-t.from.line);Gl(e,s),t={from:K(e.first,0),to:K(t.to.line+s,t.to.ch),text:[Re(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:K(c,ce(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Sn(e,t.from,t.to),r||(r=fs(e,t)),e.cm?Xf(e.cm,t,n):hs(e,t,n),io(e,r,De),e.cantEdit&&oo(e,K(e.firstLine(),0))&&(e.cantEdit=!1)}}function Xf(e,t,r){var n=e.doc,s=e.display,c=t.from,d=t.to,h=!1,p=c.line;e.options.lineWrapping||(p=qe(_n(ce(n,c.line))),n.iter(p,d.line+1,function(O){if(O==s.maxLine)return h=!0,!0})),n.sel.contains(t.from,t.to)>-1&&Qt(e),hs(n,t,r,cl(e)),e.options.lineWrapping||(n.iter(p,c.line+t.text.length,function(O){var H=ji(O);H>s.maxLineLength&&(s.maxLine=O,s.maxLineLength=H,s.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),Ic(n,c.line),gi(e,400);var v=t.text.length-(d.line-c.line)-1;t.full?Ht(e):c.line==d.line&&t.text.length==1&&!El(e.doc,t)?Xn(e,c.line,"text"):Ht(e,c.line,d.line+1,v);var C=Ze(e,"changes"),S=Ze(e,"change");if(S||C){var I={from:c,to:d,text:t.text,removed:t.removed,origin:t.origin};S&&mt(e,"change",e,I),C&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(I)}e.display.selForContextMenu=null}function Pr(e,t,r,n,s){var c;n||(n=r),m(n,r)<0&&(c=[n,r],r=c[0],n=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Dr(e,{from:r,to:n,text:t,origin:s})}function Kl(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Xl(e,t,r,n){for(var s=0;s<e.length;++s){var c=e[s],d=!0;if(c.ranges){c.copied||(c=e[s]=c.deepCopy(),c.copied=!0);for(var h=0;h<c.ranges.length;h++)Kl(c.ranges[h].anchor,t,r,n),Kl(c.ranges[h].head,t,r,n);continue}for(var p=0;p<c.changes.length;++p){var v=c.changes[p];if(r<v.from.line)v.from=K(v.from.line+n,v.from.ch),v.to=K(v.to.line+n,v.to.ch);else if(t<=v.to.line){d=!1;break}}d||(e.splice(0,s+1),s=0)}}function Yl(e,t){var r=t.from.line,n=t.to.line,s=t.text.length-(n-r)-1;Xl(e.done,r,n,s),Xl(e.undone,r,n,s)}function bi(e,t,r,n){var s=t,c=t;return typeof t=="number"?c=ce(e,We(e,t)):s=qe(t),s==null?null:(n(c,s)&&e.cm&&Xn(e.cm,s,r),c)}function wi(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var s=this.lines[r];this.height-=s.height,Xc(s),mt(s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}};function ki(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var s=e[n];t+=s.chunkSize(),r+=s.height,s.parent=this}this.size=t,this.height=r,this.parent=null}ki.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],s=n.chunkSize();if(e<s){var c=Math.min(t,s-e),d=n.height;if(n.removeInner(e,c),this.height-=d-n.height,s==c&&(this.children.splice(r--,1),n.parent=null),(t-=c)==0)break;e=0}else e-=s}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wi))){var h=[];this.collapse(h),this.children=[new wi(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var s=this.children[n],c=s.chunkSize();if(e<=c){if(s.insertInner(e,t,r),s.lines&&s.lines.length>50){for(var d=s.lines.length%25+25,h=d;h<s.lines.length;){var p=new wi(s.lines.slice(h,h+=25));s.height-=p.height,this.children.splice(++n,0,p),p.parent=this}s.lines=s.lines.slice(0,d),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new ki(t);if(e.parent){e.size-=r.size,e.height-=r.height;var s=ae(e.parent.children,e);e.parent.children.splice(s+1,0,r)}else{var n=new ki(e.children);n.parent=e,e.children=[n,r],e=n}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var s=this.children[n],c=s.chunkSize();if(e<c){var d=Math.min(t,c-e);if(s.iterN(e,d,r))return!0;if((t-=d)==0)break;e=0}else e-=c}}};var Ci=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};Ci.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=qe(r);if(!(n==null||!t)){for(var s=0;s<t.length;++s)t[s]==this&&t.splice(s--,1);t.length||(r.widgets=null);var c=li(this);Gt(r,Math.max(0,r.height-c)),e&&(Kt(e,function(){Zl(e,r,-c),Xn(e,n,"widget")}),mt(e,"lineWidgetCleared",e,this,n))}},Ci.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var s=li(this)-t;!s||(Kn(this.doc,n)||Gt(n,n.height+s),r&&Kt(r,function(){r.curOp.forceUpdate=!0,Zl(r,n,s),mt(r,"lineWidgetChanged",r,e,qe(n))}))},on(Ci);function Zl(e,t,r){Wn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&os(e,r)}function Yf(e,t,r,n){var s=new Ci(e,r,n),c=e.cm;return c&&s.noHScroll&&(c.display.alignWidgets=!0),bi(e,t,"widget",function(d){var h=d.widgets||(d.widgets=[]);if(s.insertAt==null?h.push(s):h.splice(Math.min(h.length,Math.max(0,s.insertAt)),0,s),s.line=d,c&&!Kn(e,d)){var p=Wn(d)<e.scrollTop;Gt(d,d.height+li(s)),p&&os(c,s.height),c.curOp.forceUpdate=!0}return!0}),c&&mt(c,"lineWidgetAdded",c,s,typeof t=="number"?t:qe(t)),s}var Jl=0,Vn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Jl};Vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&hr(e),Ze(this,"clear")){var r=this.find();r&&mt(this,"clear",r.from,r.to)}for(var n=null,s=null,c=0;c<this.lines.length;++c){var d=this.lines[c],h=oi(d.markedSpans,this);e&&!this.collapsed?Xn(e,qe(d),"text"):e&&(h.to!=null&&(s=qe(d)),h.from!=null&&(n=qe(d))),d.markedSpans=Fc(d.markedSpans,h),h.from==null&&this.collapsed&&!Kn(this.doc,d)&&e&&Gt(d,Sr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var p=0;p<this.lines.length;++p){var v=_n(this.lines[p]),C=ji(v);C>e.display.maxLineLength&&(e.display.maxLine=v,e.display.maxLineLength=C,e.display.maxLineChanged=!0)}n!=null&&e&&this.collapsed&&Ht(e,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ql(e.doc)),e&&mt(e,"markerCleared",e,this,n,s),t&&pr(e),this.parent&&this.parent.clear()}},Vn.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var r,n,s=0;s<this.lines.length;++s){var c=this.lines[s],d=oi(c.markedSpans,this);if(d.from!=null&&(r=K(t?c:qe(c),d.from),e==-1))return r;if(d.to!=null&&(n=K(t?c:qe(c),d.to),e==1))return n}return r&&{from:r,to:n}},Vn.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;!t||!n||Kt(n,function(){var s=t.line,c=qe(t.line),d=Ko(n,c);if(d&&(nl(d),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Kn(r.doc,s)&&r.height!=null){var h=r.height;r.height=null;var p=li(r)-h;p&&Gt(s,s.height+p)}mt(n,"markerChanged",n,e)})},Vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ae(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Vn.prototype.detachLine=function(e){if(this.lines.splice(ae(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},on(Vn);function Nr(e,t,r,n,s){if(n&&n.shared)return Zf(e,t,r,n,s);if(e.cm&&!e.cm.curOp)return yt(e.cm,Nr)(e,t,r,n,s);var c=new Vn(e,s),d=m(t,r);if(n&&$e(n,c,!1),d>0||d==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=R("span",[c.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(qa(e,t.line,t,r,c)||t.line!=r.line&&qa(e,r.line,t,r,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");Hc()}c.addToHistory&&Nl(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var h=t.line,p=e.cm,v;if(e.iter(h,r.line+1,function(S){p&&c.collapsed&&!p.options.lineWrapping&&_n(S)==p.display.maxLine&&(v=!0),c.collapsed&&h!=t.line&&Gt(S,0),qc(S,new Fi(c,h==t.line?t.ch:null,h==r.line?r.ch:null),e.cm&&e.cm.curOp),++h}),c.collapsed&&e.iter(t.line,r.line+1,function(S){Kn(e,S)&&Gt(S,0)}),c.clearOnEnter&&me(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(Wc(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++Jl,c.atomic=!0),p){if(v&&(p.curOp.updateMaxLine=!0),c.collapsed)Ht(p,t.line,r.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var C=t.line;C<=r.line;C++)Xn(p,C,"text");c.atomic&&ql(p.doc),mt(p,"markerAdded",p,c)}return c}var Ti=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};Ti.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();mt(this,"clear")}},Ti.prototype.find=function(e,t){return this.primary.find(e,t)},on(Ti);function Zf(e,t,r,n,s){n=$e(n),n.shared=!1;var c=[Nr(e,t,r,n,s)],d=c[0],h=n.widgetNode;return Qn(e,function(p){h&&(n.widgetNode=h.cloneNode(!0)),c.push(Nr(p,se(p,t),se(p,r),n,s));for(var v=0;v<p.linked.length;++v)if(p.linked[v].isParent)return;d=Re(c)}),new Ti(c,d)}function Ql(e){return e.findMarks(K(e.first,0),e.clipPos(K(e.lastLine())),function(t){return t.parent})}function Jf(e,t){for(var r=0;r<t.length;r++){var n=t[r],s=n.find(),c=e.clipPos(s.from),d=e.clipPos(s.to);if(m(c,d)){var h=Nr(e,c,d,n.primary,n.primary.type);n.markers.push(h),h.parent=n}}}function Qf(e){for(var t=function(n){var s=e[n],c=[s.primary.doc];Qn(s.primary.doc,function(p){return c.push(p)});for(var d=0;d<s.markers.length;d++){var h=s.markers[d];ae(c,h.doc)==-1&&(h.parent=null,s.markers.splice(d--,1))}},r=0;r<e.length;r++)t(r)}var Vf=0,Ft=function(e,t,r,n,s){if(!(this instanceof Ft))return new Ft(e,t,r,n,s);r==null&&(r=0),ki.call(this,[new wi([new kr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var c=K(r,0);this.sel=Zn(c),this.history=new to(null),this.id=++Vf,this.modeOption=t,this.lineSep=n,this.direction=s=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),hs(this,{from:c,to:c,text:e}),Lt(this,Zn(c),De)};Ft.prototype=gt(ki.prototype,{constructor:Ft,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ni(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:bt(function(e){var t=K(this.first,0),r=this.first+this.size-1;Dr(this,{from:t,to:K(r,ce(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&fi(this.cm,0,0),Lt(this,Zn(t),De)}),replaceRange:function(e,t,r,n){t=se(this,t),r=r?se(this,r):t,Pr(this,e,t,r,n)},getRange:function(e,t,r){var n=Sn(this,se(this,e),se(this,t));return r===!1?n:r===""?n.join(""):n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(sr(this,e))return ce(this,e)},getLineNumber:function(e){return qe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=ce(this,e)),_n(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return se(this,e)},getCursor:function(e){var t=this.sel.primary(),r;return e==null||e=="head"?r=t.head:e=="anchor"?r=t.anchor:e=="end"||e=="to"||e===!1?r=t.to():r=t.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:bt(function(e,t,r){Wl(this,se(this,typeof e=="number"?K(e,t||0):e),null,r)}),setSelection:bt(function(e,t,r){Wl(this,se(this,e),se(this,t||e),r)}),extendSelection:bt(function(e,t,r){ro(this,se(this,e),t&&se(this,t),r)}),extendSelections:bt(function(e,t){Il(this,en(this,e),t)}),extendSelectionsBy:bt(function(e,t){var r=xt(this.sel.ranges,e);Il(this,en(this,r),t)}),setSelections:bt(function(e,t,r){if(!!e.length){for(var n=[],s=0;s<e.length;s++)n[s]=new ze(se(this,e[s].anchor),se(this,e[s].head||e[s].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Lt(this,gn(this.cm,n,t),r)}}),addSelection:bt(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new ze(se(this,e),se(this,t||e))),Lt(this,gn(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r,n=0;n<t.length;n++){var s=Sn(this,t[n].from(),t[n].to());r=r?r.concat(s):s}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var s=Sn(this,r[n].from(),r[n].to());e!==!1&&(s=s.join(e||this.lineSeparator())),t[n]=s}return t},replaceSelection:function(e,t,r){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:bt(function(e,t,r){for(var n=[],s=this.sel,c=0;c<s.ranges.length;c++){var d=s.ranges[c];n[c]={from:d.from(),to:d.to(),text:this.splitLines(e[c]),origin:r}}for(var h=t&&t!="end"&&qf(this,n,t),p=n.length-1;p>=0;p--)Dr(this,n[p]);h?Hl(this,h):this.cm&&_r(this.cm)}),undo:bt(function(){so(this,"undo")}),redo:bt(function(){so(this,"redo")}),undoSelection:bt(function(){so(this,"undo",!0)}),redoSelection:bt(function(){so(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var s=0;s<e.undone.length;s++)e.undone[s].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new to(this.history),Qn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Er(this.history.done),undone:Er(this.history.undone)}},setHistory:function(e){var t=this.history=new to(this.history);t.done=Er(e.done.slice(0),null,!0),t.undone=Er(e.undone.slice(0),null,!0)},setGutterMarker:bt(function(e,t,r){return bi(this,e,"gutter",function(n){var s=n.gutterMarkers||(n.gutterMarkers={});return s[t]=r,!r&&nr(s)&&(n.gutterMarkers=null),!0})}),clearGutter:bt(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&bi(t,r,"gutter",function(){return r.gutterMarkers[e]=null,nr(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!sr(this,e)||(t=e,e=ce(this,e),!e))return null}else if(t=qe(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:bt(function(e,t,r){return bi(this,e,t=="gutter"?"gutter":"class",function(n){var s=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!n[s])n[s]=r;else{if(oe(r).test(n[s]))return!1;n[s]+=" "+r}return!0})}),removeLineClass:bt(function(e,t,r){return bi(this,e,t=="gutter"?"gutter":"class",function(n){var s=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=n[s];if(c)if(r==null)n[s]=null;else{var d=c.match(oe(r));if(!d)return!1;var h=d.index+d[0].length;n[s]=c.slice(0,d.index)+(!d.index||h==c.length?"":" ")+c.slice(h)||null}else return!1;return!0})}),addLineWidget:bt(function(e,t,r){return Yf(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Nr(this,se(this,e),se(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=se(this,e),Nr(this,e,e,r,"bookmark")},findMarksAt:function(e){e=se(this,e);var t=[],r=ce(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var s=r[n];(s.from==null||s.from<=e.ch)&&(s.to==null||s.to>=e.ch)&&t.push(s.marker.parent||s.marker)}return t},findMarks:function(e,t,r){e=se(this,e),t=se(this,t);var n=[],s=e.line;return this.iter(e.line,t.line+1,function(c){var d=c.markedSpans;if(d)for(var h=0;h<d.length;h++){var p=d[h];!(p.to!=null&&s==e.line&&e.ch>=p.to||p.from==null&&s!=e.line||p.from!=null&&s==t.line&&p.from>=t.ch)&&(!r||r(p.marker))&&n.push(p.marker.parent||p.marker)}++s}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)r[n].from!=null&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(s){var c=s.text.length+n;if(c>e)return t=e,!0;e-=c,++r}),se(this,K(r,t))},indexFromPos:function(e){e=se(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(n){t+=n.text.length+r}),t},copy:function(e){var t=new Ft(ni(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<r&&(r=e.to);var n=new Ft(ni(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Jf(n,Ql(this)),n},unlinkDoc:function(e){if(e instanceof Ye&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Qf(Ql(this));break}}if(e.history==this.history){var n=[e.id];Qn(e,function(s){return n.push(s.id)},!0),e.history=new to(null),e.history.done=Er(this.history.done,n),e.history.undone=Er(this.history.undone,n)}},iterLinkedDocs:function(e){Qn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ie(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:bt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&zf(this.cm))})}),Ft.prototype.eachLine=Ft.prototype.iter;var Vl=0;function ed(e){var t=this;if(eu(t),!(nt(t,e)||Hn(t.display,e))){vt(e),w&&(Vl=+new Date);var r=ur(t,e,!0),n=e.dataTransfer.files;if(!(!r||t.isReadOnly()))if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,c=Array(s),d=0,h=function(){++d==s&&yt(t,function(){r=se(t.doc,r);var O={from:r,to:r,text:t.doc.splitLines(c.filter(function(H){return H!=null}).join(t.doc.lineSeparator())),origin:"paste"};Dr(t.doc,O),Hl(t.doc,Zn(se(t.doc,r),se(t.doc,Jn(O))))})()},p=function(O,H){if(t.options.allowDropFileTypes&&ae(t.options.allowDropFileTypes,O.type)==-1){h();return}var U=new FileReader;U.onerror=function(){return h()},U.onload=function(){var Q=U.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Q)){h();return}c[H]=Q,h()},U.readAsText(O)},v=0;v<n.length;v++)p(n[v],v);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var C=e.dataTransfer.getData("Text");if(C){var S;if(t.state.draggingText&&!t.state.draggingText.copy&&(S=t.listSelections()),io(t.doc,Zn(r,r)),S)for(var I=0;I<S.length;++I)Pr(t.doc,"",S[I].anchor,S[I].head,"drag");t.replaceSelection(C,"around","paste"),t.display.input.focus()}}catch{}}}}function td(e,t){if(w&&(!e.state.draggingText||+new Date-Vl<100)){Tn(t);return}if(!(nt(e,t)||Hn(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!$)){var r=z("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",M&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),M&&r.parentNode.removeChild(r)}}function nd(e,t){var r=ur(e,t);if(!!r){var n=document.createDocumentFragment();hl(e,r,n),e.display.dragCursor||(e.display.dragCursor=z("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),q(e.display.dragCursor,n)}}function eu(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function tu(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var s=t[n].CodeMirror;s&&r.push(s)}r.length&&r[0].operation(function(){for(var c=0;c<r.length;c++)e(r[c])})}}var nu=!1;function rd(){nu||(id(),nu=!0)}function id(){var e;me(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,tu(od)},100))}),me(window,"blur",function(){return tu(Rr)})}function od(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var er={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Si=0;Si<10;Si++)er[Si+48]=er[Si+96]=String(Si);for(var ao=65;ao<=90;ao++)er[ao]=String.fromCharCode(ao);for(var xi=1;xi<=12;xi++)er[xi+111]=er[xi+63235]="F"+xi;var qn={};qn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qn.default=y?qn.macDefault:qn.pcDefault;function sd(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var r,n,s,c,d=0;d<t.length-1;d++){var h=t[d];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))n=!0;else if(/^s(hift)?$/i.test(h))s=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(e="Alt-"+e),n&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),s&&(e="Shift-"+e),e}function ad(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(n=="..."){delete e[r];continue}for(var s=xt(r.split(" "),sd),c=0;c<s.length;c++){var d=void 0,h=void 0;c==s.length-1?(h=s.join(" "),d=n):(h=s.slice(0,c+1).join(" "),d="...");var p=t[h];if(!p)t[h]=d;else if(p!=d)throw new Error("Inconsistent bindings for "+h)}delete e[r]}for(var v in t)e[v]=t[v];return e}function Or(e,t,r,n){t=lo(t);var s=t.call?t.call(e,n):t[e];if(s===!1)return"nothing";if(s==="...")return"multi";if(s!=null&&r(s))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Or(e,t.fallthrough,r,n);for(var c=0;c<t.fallthrough.length;c++){var d=Or(e,t.fallthrough[c],r,n);if(d)return d}}}function ru(e){var t=typeof e=="string"?e:er[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function iu(e,t,r){var n=e;return t.altKey&&n!="Alt"&&(e="Alt-"+e),(X?t.metaKey:t.ctrlKey)&&n!="Ctrl"&&(e="Ctrl-"+e),(X?t.ctrlKey:t.metaKey)&&n!="Mod"&&(e="Cmd-"+e),!r&&t.shiftKey&&n!="Shift"&&(e="Shift-"+e),e}function ou(e,t){if(M&&e.keyCode==34&&e.char)return!1;var r=er[e.keyCode];return r==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(r=e.code),iu(r,e,t))}function lo(e){return typeof e=="string"?qn[e]:e}function Ar(e,t){for(var r=e.doc.sel.ranges,n=[],s=0;s<r.length;s++){for(var c=t(r[s]);n.length&&m(c.from,Re(n).to)<=0;){var d=n.pop();if(m(d.from,c.from)<0){c.from=d.from;break}}n.push(c)}Kt(e,function(){for(var h=n.length-1;h>=0;h--)Pr(e.doc,"",n[h].from,n[h].to,"+delete");_r(e)})}function ms(e,t,r){var n=ir(e.text,t+r,r);return n<0||n>e.text.length?null:n}function ys(e,t,r){var n=ms(e,t.ch,r);return n==null?null:new K(t.line,n,r<0?"after":"before")}function bs(e,t,r,n,s){if(e){t.doc.direction=="rtl"&&(s=-s);var c=Pt(r,t.doc.direction);if(c){var d=s<0?Re(c):c[0],h=s<0==(d.level==1),p=h?"after":"before",v;if(d.level>0||t.doc.direction=="rtl"){var C=Tr(t,r);v=s<0?r.text.length-1:0;var S=En(t,C,v).top;v=rn(function(I){return En(t,C,I).top==S},s<0==(d.level==1)?d.from:d.to-1,v),p=="before"&&(v=ms(r,v,1))}else v=s<0?d.to:d.from;return new K(n,v,p)}}return new K(n,s<0?r.text.length:0,s<0?"before":"after")}function ld(e,t,r,n){var s=Pt(t,e.doc.direction);if(!s)return ys(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var c=Xe(s,r.ch,r.sticky),d=s[c];if(e.doc.direction=="ltr"&&d.level%2==0&&(n>0?d.to>r.ch:d.from<r.ch))return ys(t,r,n);var h=function(te,ie){return ms(t,te instanceof K?te.ch:te,ie)},p,v=function(te){return e.options.lineWrapping?(p=p||Tr(e,t),ul(e,t,p,te)):{begin:0,end:t.text.length}},C=v(r.sticky=="before"?h(r,-1):r.ch);if(e.doc.direction=="rtl"||d.level==1){var S=d.level==1==n<0,I=h(r,S?1:-1);if(I!=null&&(S?I<=d.to&&I<=C.end:I>=d.from&&I>=C.begin)){var O=S?"before":"after";return new K(r.line,I,O)}}var H=function(te,ie,ne){for(var le=function(je,wt){return wt?new K(r.line,h(je,1),"before"):new K(r.line,je,"after")};te>=0&&te<s.length;te+=ie){var ye=s[te],ge=ie>0==(ye.level!=1),Me=ge?ne.begin:h(ne.end,-1);if(ye.from<=Me&&Me<ye.to||(Me=ge?ye.from:h(ye.to,-1),ne.begin<=Me&&Me<ne.end))return le(Me,ge)}},U=H(c+n,n,C);if(U)return U;var Q=n>0?C.end:h(C.begin,-1);return Q!=null&&!(n>0&&Q==t.text.length)&&(U=H(n>0?0:s.length-1,n,v(Q)),U)?U:null}var Ri={selectAll:jl,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),De)},killLine:function(e){return Ar(e,function(t){if(t.empty()){var r=ce(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:K(t.head.line+1,0)}:{from:t.head,to:K(t.head.line,r)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Ar(e,function(t){return{from:K(t.from().line,0),to:se(e.doc,K(t.to().line+1,0))}})},delLineLeft:function(e){return Ar(e,function(t){return{from:K(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Ar(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){return Ar(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(K(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(K(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return su(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return au(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return ud(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Ae)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Ae)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?au(e,t.head):n},Ae)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,s=0;s<r.length;s++){var c=r[s].from(),d=Fe(e.getLine(c.line),c.ch,n);t.push(Dt(n-d%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kt(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(!!t[n].empty()){var s=t[n].head,c=ce(e.doc,s.line).text;if(c){if(s.ch==c.length&&(s=new K(s.line,s.ch-1)),s.ch>0)s=new K(s.line,s.ch+1),e.replaceRange(c.charAt(s.ch-1)+c.charAt(s.ch-2),K(s.line,s.ch-2),s,"+transpose");else if(s.line>e.doc.first){var d=ce(e.doc,s.line-1).text;d&&(s=new K(s.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+d.charAt(d.length-1),K(s.line-1,d.length-1),s,"+transpose"))}}r.push(new ze(s,s))}e.setSelections(r)})},newlineAndIndent:function(e){return Kt(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);_r(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function su(e,t){var r=ce(e.doc,t),n=_n(r);return n!=r&&(t=qe(n)),bs(!0,e,n,t,1)}function ud(e,t){var r=ce(e.doc,t),n=$c(r);return n!=r&&(t=qe(n)),bs(!0,e,r,t,-1)}function au(e,t){var r=su(e,t.line),n=ce(e.doc,r.line),s=Pt(n,e.doc.direction);if(!s||s[0].level==0){var c=Math.max(r.ch,n.text.search(/\S/)),d=t.line==r.line&&t.ch<=c&&t.ch;return K(r.line,d?0:c,r.sticky)}return r}function uo(e,t,r){if(typeof t=="string"&&(t=Ri[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,s=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),s=t(e)!=Ce}finally{e.display.shift=n,e.state.suppressEdits=!1}return s}function cd(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var s=Or(t,e.state.keyMaps[n],r,e);if(s)return s}return e.options.extraKeys&&Or(t,e.options.extraKeys,r,e)||Or(t,e.options.keyMap,r,e)}var fd=new xe;function _i(e,t,r,n){var s=e.state.keySeq;if(s){if(ru(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:fd.set(50,function(){e.state.keySeq==s&&(e.state.keySeq=null,e.display.input.reset())}),lu(e,s+" "+t,r,n))return!0}return lu(e,t,r,n)}function lu(e,t,r,n){var s=cd(e,t,n);return s=="multi"&&(e.state.keySeq=t),s=="handled"&&mt(e,"keyHandled",e,t,r),(s=="handled"||s=="multi")&&(vt(r),ts(e)),!!s}function uu(e,t){var r=ou(t,!0);return r?t.shiftKey&&!e.state.keySeq?_i(e,"Shift-"+r,t,function(n){return uo(e,n,!0)})||_i(e,r,t,function(n){if(typeof n=="string"?/^go[A-Z]/.test(n):n.motion)return uo(e,n)}):_i(e,r,t,function(n){return uo(e,n)}):!1}function dd(e,t,r){return _i(e,"'"+r+"'",t,function(n){return uo(e,n,!0)})}var ws=null;function cu(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=he(),!nt(t,e))){w&&k<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var n=uu(t,e);M&&(ws=n?r:null,!n&&r==88&&!Je&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),u&&!y&&!n&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&hd(t)}}function hd(e){var t=e.display.lineDiv;ke(t,"CodeMirror-crosshair");function r(n){(n.keyCode==18||!n.altKey)&&(ve(t,"CodeMirror-crosshair"),Rt(document,"keyup",r),Rt(document,"mouseover",r))}me(document,"keyup",r),me(document,"mouseover",r)}function fu(e){e.keyCode==16&&(this.doc.sel.shift=!1),nt(this,e)}function du(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Hn(t.display,e)||nt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(M&&r==ws){ws=null,vt(e);return}if(!(M&&(!e.which||e.which<10)&&uu(t,e))){var s=String.fromCharCode(n==null?r:n);s!="\b"&&(dd(t,e,s)||t.display.input.onKeyPress(e))}}}var pd=400,ks=function(e,t,r){this.time=e,this.pos=t,this.button=r};ks.prototype.compare=function(e,t,r){return this.time+pd>e&&m(t,this.pos)==0&&r==this.button};var Li,Ei;function gd(e,t){var r=+new Date;return Ei&&Ei.compare(r,e,t)?(Li=Ei=null,"triple"):Li&&Li.compare(r,e,t)?(Ei=new ks(r,e,t),Li=null,"double"):(Li=new ks(r,e,t),Ei=null,"single")}function hu(e){var t=this,r=t.display;if(!(nt(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,Hn(r,e)){T||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));return}if(!Cs(t,e)){var n=ur(t,e),s=or(e),c=n?gd(n,s):"single";window.focus(),s==1&&t.state.selectingText&&t.state.selectingText(e),!(n&&vd(t,s,n,c,e))&&(s==1?n?yd(t,n,c,e):an(e)==r.scroller&&vt(e):s==2?(n&&ro(t.doc,n),setTimeout(function(){return r.input.focus()},20)):s==3&&(ue?t.display.input.onContextMenu(e):ns(t)))}}}function vd(e,t,r,n,s){var c="Click";return n=="double"?c="Double"+c:n=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,_i(e,iu(c,s),s,function(d){if(typeof d=="string"&&(d=Ri[d]),!d)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=d(e,r)!=Ce}finally{e.state.suppressEdits=!1}return h})}function md(e,t,r){var n=e.getOption("configureMouse"),s=n?n(e,t,r):{};if(s.unit==null){var c=W?r.shiftKey&&r.metaKey:r.altKey;s.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(s.extend==null||e.doc.extend)&&(s.extend=e.doc.extend||r.shiftKey),s.addNew==null&&(s.addNew=y?r.metaKey:r.ctrlKey),s.moveOnDrag==null&&(s.moveOnDrag=!(y?r.altKey:r.ctrlKey)),s}function yd(e,t,r,n){w?setTimeout(pt(pl,e),0):e.curOp.focus=he();var s=md(e,r,n),c=e.doc.sel,d;e.options.dragDrop&&ln&&!e.isReadOnly()&&r=="single"&&(d=c.contains(t))>-1&&(m((d=c.ranges[d]).from(),t)<0||t.xRel>0)&&(m(d.to(),t)>0||t.xRel<0)?bd(e,n,t,s):wd(e,n,t,s)}function bd(e,t,r,n){var s=e.display,c=!1,d=yt(e,function(v){T&&(s.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:ns(e)),Rt(s.wrapper.ownerDocument,"mouseup",d),Rt(s.wrapper.ownerDocument,"mousemove",h),Rt(s.scroller,"dragstart",p),Rt(s.scroller,"drop",d),c||(vt(v),n.addNew||ro(e.doc,r,null,null,n.extend),T&&!$||w&&k==9?setTimeout(function(){s.wrapper.ownerDocument.body.focus({preventScroll:!0}),s.input.focus()},20):s.input.focus())}),h=function(v){c=c||Math.abs(t.clientX-v.clientX)+Math.abs(t.clientY-v.clientY)>=10},p=function(){return c=!0};T&&(s.scroller.draggable=!0),e.state.draggingText=d,d.copy=!n.moveOnDrag,me(s.wrapper.ownerDocument,"mouseup",d),me(s.wrapper.ownerDocument,"mousemove",h),me(s.scroller,"dragstart",p),me(s.scroller,"drop",d),e.state.delayingBlurEvent=!0,setTimeout(function(){return s.input.focus()},20),s.scroller.dragDrop&&s.scroller.dragDrop()}function pu(e,t,r){if(r=="char")return new ze(t,t);if(r=="word")return e.findWordAt(t);if(r=="line")return new ze(K(t.line,0),se(e.doc,K(t.line+1,0)));var n=r(e,t);return new ze(n.from,n.to)}function wd(e,t,r,n){w&&ns(e);var s=e.display,c=e.doc;vt(t);var d,h,p=c.sel,v=p.ranges;if(n.addNew&&!n.extend?(h=c.sel.contains(r),h>-1?d=v[h]:d=new ze(r,r)):(d=c.sel.primary(),h=c.sel.primIndex),n.unit=="rectangle")n.addNew||(d=new ze(r,r)),r=ur(e,t,!0,!0),h=-1;else{var C=pu(e,r,n.unit);n.extend?d=gs(d,C.anchor,C.head,n.extend):d=C}n.addNew?h==-1?(h=v.length,Lt(c,gn(e,v.concat([d]),h),{scroll:!1,origin:"*mouse"})):v.length>1&&v[h].empty()&&n.unit=="char"&&!n.extend?(Lt(c,gn(e,v.slice(0,h).concat(v.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),p=c.sel):vs(c,h,d,kn):(h=0,Lt(c,new tn([d],0),kn),p=c.sel);var S=r;function I(ne){if(m(S,ne)!=0)if(S=ne,n.unit=="rectangle"){for(var le=[],ye=e.options.tabSize,ge=Fe(ce(c,r.line).text,r.ch,ye),Me=Fe(ce(c,ne.line).text,ne.ch,ye),je=Math.min(ge,Me),wt=Math.max(ge,Me),tt=Math.min(r.line,ne.line),Xt=Math.min(e.lastLine(),Math.max(r.line,ne.line));tt<=Xt;tt++){var qt=ce(c,tt).text,lt=ot(qt,je,ye);je==wt?le.push(new ze(K(tt,lt),K(tt,lt))):qt.length>lt&&le.push(new ze(K(tt,lt),K(tt,ot(qt,wt,ye))))}le.length||le.push(new ze(r,r)),Lt(c,gn(e,p.ranges.slice(0,h).concat(le),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ne)}else{var zt=d,Ct=pu(e,ne,n.unit),ct=zt.anchor,ut;m(Ct.anchor,ct)>0?(ut=Ct.head,ct=Te(zt.from(),Ct.anchor)):(ut=Ct.anchor,ct=J(zt.to(),Ct.head));var it=p.ranges.slice(0);it[h]=kd(e,new ze(se(c,ct),ut)),Lt(c,gn(e,it,h),kn)}}var O=s.wrapper.getBoundingClientRect(),H=0;function U(ne){var le=++H,ye=ur(e,ne,!0,n.unit=="rectangle");if(!!ye)if(m(ye,S)!=0){e.curOp.focus=he(),I(ye);var ge=Ji(s,c);(ye.line>=ge.to||ye.line<ge.from)&&setTimeout(yt(e,function(){H==le&&U(ne)}),150)}else{var Me=ne.clientY<O.top?-20:ne.clientY>O.bottom?20:0;Me&&setTimeout(yt(e,function(){H==le&&(s.scroller.scrollTop+=Me,U(ne))}),50)}}function Q(ne){e.state.selectingText=!1,H=1/0,ne&&(vt(ne),s.input.focus()),Rt(s.wrapper.ownerDocument,"mousemove",te),Rt(s.wrapper.ownerDocument,"mouseup",ie),c.history.lastSelOrigin=null}var te=yt(e,function(ne){ne.buttons===0||!or(ne)?Q(ne):U(ne)}),ie=yt(e,Q);e.state.selectingText=ie,me(s.wrapper.ownerDocument,"mousemove",te),me(s.wrapper.ownerDocument,"mouseup",ie)}function kd(e,t){var r=t.anchor,n=t.head,s=ce(e.doc,r.line);if(m(r,n)==0&&r.sticky==n.sticky)return t;var c=Pt(s);if(!c)return t;var d=Xe(c,r.ch,r.sticky),h=c[d];if(h.from!=r.ch&&h.to!=r.ch)return t;var p=d+(h.from==r.ch==(h.level!=1)?0:1);if(p==0||p==c.length)return t;var v;if(n.line!=r.line)v=(n.line-r.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var C=Xe(c,n.ch,n.sticky),S=C-d||(n.ch-r.ch)*(h.level==1?-1:1);C==p-1||C==p?v=S<0:v=S>0}var I=c[p+(v?-1:0)],O=v==(I.level==1),H=O?I.from:I.to,U=O?"after":"before";return r.ch==H&&r.sticky==U?t:new ze(new K(r.line,H,U),n)}function gu(e,t,r,n){var s,c;if(t.touches)s=t.touches[0].clientX,c=t.touches[0].clientY;else try{s=t.clientX,c=t.clientY}catch{return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&vt(t);var d=e.display,h=d.lineDiv.getBoundingClientRect();if(c>h.bottom||!Ze(e,r))return Nt(t);c-=h.top-d.viewOffset;for(var p=0;p<e.display.gutterSpecs.length;++p){var v=d.gutters.childNodes[p];if(v&&v.getBoundingClientRect().right>=s){var C=xn(e.doc,c),S=e.display.gutterSpecs[p];return be(e,r,e,C,S.className,t),Nt(t)}}}function Cs(e,t){return gu(e,t,"gutterClick",!0)}function vu(e,t){Hn(e.display,t)||Cd(e,t)||nt(e,t,"contextmenu")||ue||e.display.input.onContextMenu(t)}function Cd(e,t){return Ze(e,"gutterContextMenu")?gu(e,t,"gutterContextMenu",!1):!1}function mu(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ui(e)}var Ir={toString:function(){return"CodeMirror.Init"}},yu={},co={};function Td(e){var t=e.optionHandlers;function r(n,s,c,d){e.defaults[n]=s,c&&(t[n]=d?function(h,p,v){v!=Ir&&c(h,p,v)}:c)}e.defineOption=r,e.Init=Ir,r("value","",function(n,s){return n.setValue(s)},!0),r("mode",null,function(n,s){n.doc.modeOption=s,ds(n)},!0),r("indentUnit",2,ds,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(n){mi(n),ui(n),Ht(n)},!0),r("lineSeparator",null,function(n,s){if(n.doc.lineSep=s,!!s){var c=[],d=n.doc.first;n.doc.iter(function(p){for(var v=0;;){var C=p.text.indexOf(s,v);if(C==-1)break;v=C+s.length,c.push(K(d,C))}d++});for(var h=c.length-1;h>=0;h--)Pr(n.doc,s,c[h],K(c[h].line,c[h].ch+s.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(n,s,c){n.state.specialChars=new RegExp(s.source+(s.test("	")?"":"|	"),"g"),c!=Ir&&n.refresh()}),r("specialCharPlaceholder",Jc,function(n){return n.refresh()},!0),r("electricChars",!0),r("inputStyle",L?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(n,s){return n.getInputField().spellcheck=s},!0),r("autocorrect",!1,function(n,s){return n.getInputField().autocorrect=s},!0),r("autocapitalize",!1,function(n,s){return n.getInputField().autocapitalize=s},!0),r("rtlMoveVisually",!j),r("wholeLineUpdateBefore",!0),r("theme","default",function(n){mu(n),vi(n)},!0),r("keyMap","default",function(n,s,c){var d=lo(s),h=c!=Ir&&lo(c);h&&h.detach&&h.detach(n,d),d.attach&&d.attach(n,h||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,xd,!0),r("gutters",[],function(n,s){n.display.gutterSpecs=cs(s,n.options.lineNumbers),vi(n)},!0),r("fixedGutter",!0,function(n,s){n.display.gutters.style.left=s?Vo(n.display)+"px":"0",n.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(n){return Lr(n)},!0),r("scrollbarStyle","native",function(n){wl(n),Lr(n),n.display.scrollbars.setScrollTop(n.doc.scrollTop),n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0),r("lineNumbers",!1,function(n,s){n.display.gutterSpecs=cs(n.options.gutters,s),vi(n)},!0),r("firstLineNumber",1,vi,!0),r("lineNumberFormatter",function(n){return n},vi,!0),r("showCursorWhenSelecting",!1,ci,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(n,s){s=="nocursor"&&(Rr(n),n.display.input.blur()),n.display.input.readOnlyChanged(s)}),r("screenReaderLabel",null,function(n,s){s=s===""?null:s,n.display.input.screenReaderLabelChanged(s)}),r("disableInput",!1,function(n,s){s||n.display.input.reset()},!0),r("dragDrop",!0,Sd),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,ci,!0),r("singleCursorHeightPerLine",!0,ci,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,mi,!0),r("addModeClass",!1,mi,!0),r("pollInterval",100),r("undoDepth",200,function(n,s){return n.doc.history.undoDepth=s}),r("historyEventDelay",1250),r("viewportMargin",10,function(n){return n.refresh()},!0),r("maxHighlightLength",1e4,mi,!0),r("moveInputWithCursor",!0,function(n,s){s||n.display.input.resetPosition()}),r("tabindex",null,function(n,s){return n.display.input.getField().tabIndex=s||""}),r("autofocus",null),r("direction","ltr",function(n,s){return n.doc.setDirection(s)},!0),r("phrases",null)}function Sd(e,t,r){var n=r&&r!=Ir;if(!t!=!n){var s=e.display.dragFunctions,c=t?me:Rt;c(e.display.scroller,"dragstart",s.start),c(e.display.scroller,"dragenter",s.enter),c(e.display.scroller,"dragover",s.over),c(e.display.scroller,"dragleave",s.leave),c(e.display.scroller,"drop",s.drop)}}function xd(e){e.options.lineWrapping?(ke(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ve(e.display.wrapper,"CodeMirror-wrap"),jo(e)),es(e),Ht(e),ui(e),setTimeout(function(){return Lr(e)},100)}function Ye(e,t){var r=this;if(!(this instanceof Ye))return new Ye(e,t);this.options=t=t?$e(t):{},$e(yu,t,!1);var n=t.value;typeof n=="string"?n=new Ft(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var s=new Ye.inputStyles[t.inputStyle](this),c=this.display=new Hf(e,n,s,t);c.wrapper.CodeMirror=this,mu(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),wl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new xe,keySeq:null,specialChars:null},t.autofocus&&!L&&c.input.focus(),w&&k<11&&setTimeout(function(){return r.display.input.reset(!0)},20),Rd(this),rd(),hr(this),this.curOp.forceUpdate=!0,Ml(this,n),t.autofocus&&!L||this.hasFocus()?setTimeout(function(){r.hasFocus()&&!r.state.focused&&rs(r)},20):Rr(this);for(var d in co)co.hasOwnProperty(d)&&co[d](this,t[d],Ir);Tl(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Ts.length;++h)Ts[h](this);pr(this),T&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}Ye.defaults=yu,Ye.optionHandlers=co;function Rd(e){var t=e.display;me(t.scroller,"mousedown",yt(e,hu)),w&&k<11?me(t.scroller,"dblclick",yt(e,function(p){if(!nt(e,p)){var v=ur(e,p);if(!(!v||Cs(e,p)||Hn(e.display,p))){vt(p);var C=e.findWordAt(v);ro(e.doc,C.anchor,C.head)}}})):me(t.scroller,"dblclick",function(p){return nt(e,p)||vt(p)}),me(t.scroller,"contextmenu",function(p){return vu(e,p)}),me(t.input.getField(),"contextmenu",function(p){t.scroller.contains(p.target)||vu(e,p)});var r,n={end:0};function s(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),n=t.activeTouch,n.end=+new Date)}function c(p){if(p.touches.length!=1)return!1;var v=p.touches[0];return v.radiusX<=1&&v.radiusY<=1}function d(p,v){if(v.left==null)return!0;var C=v.left-p.left,S=v.top-p.top;return C*C+S*S>20*20}me(t.scroller,"touchstart",function(p){if(!nt(e,p)&&!c(p)&&!Cs(e,p)){t.input.ensurePolled(),clearTimeout(r);var v=+new Date;t.activeTouch={start:v,moved:!1,prev:v-n.end<=300?n:null},p.touches.length==1&&(t.activeTouch.left=p.touches[0].pageX,t.activeTouch.top=p.touches[0].pageY)}}),me(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),me(t.scroller,"touchend",function(p){var v=t.activeTouch;if(v&&!Hn(t,p)&&v.left!=null&&!v.moved&&new Date-v.start<300){var C=e.coordsChar(t.activeTouch,"page"),S;!v.prev||d(v,v.prev)?S=new ze(C,C):!v.prev.prev||d(v,v.prev.prev)?S=e.findWordAt(C):S=new ze(K(C.line,0),se(e.doc,K(C.line+1,0))),e.setSelection(S.anchor,S.head),e.focus(),vt(p)}s()}),me(t.scroller,"touchcancel",s),me(t.scroller,"scroll",function(){t.scroller.clientHeight&&(di(e,t.scroller.scrollTop),fr(e,t.scroller.scrollLeft,!0),be(e,"scroll",e))}),me(t.scroller,"mousewheel",function(p){return Rl(e,p)}),me(t.scroller,"DOMMouseScroll",function(p){return Rl(e,p)}),me(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(p){nt(e,p)||Tn(p)},over:function(p){nt(e,p)||(nd(e,p),Tn(p))},start:function(p){return td(e,p)},drop:yt(e,ed),leave:function(p){nt(e,p)||eu(e)}};var h=t.input.getField();me(h,"keyup",function(p){return fu.call(e,p)}),me(h,"keydown",yt(e,cu)),me(h,"keypress",yt(e,du)),me(h,"focus",function(p){return rs(e,p)}),me(h,"blur",function(p){return Rr(e,p)})}var Ts=[];Ye.defineInitHook=function(e){return Ts.push(e)};function Mi(e,t,r,n){var s=e.doc,c;r==null&&(r="add"),r=="smart"&&(s.mode.indent?c=ii(e,t).state:r="prev");var d=e.options.tabSize,h=ce(s,t),p=Fe(h.text,null,d);h.stateAfter&&(h.stateAfter=null);var v=h.text.match(/^\s*/)[0],C;if(!n&&!/\S/.test(h.text))C=0,r="not";else if(r=="smart"&&(C=s.mode.indent(c,h.text.slice(v.length),h.text),C==Ce||C>150)){if(!n)return;r="prev"}r=="prev"?t>s.first?C=Fe(ce(s,t-1).text,null,d):C=0:r=="add"?C=p+e.options.indentUnit:r=="subtract"?C=p-e.options.indentUnit:typeof r=="number"&&(C=p+r),C=Math.max(0,C);var S="",I=0;if(e.options.indentWithTabs)for(var O=Math.floor(C/d);O;--O)I+=d,S+="	";if(I<C&&(S+=Dt(C-I)),S!=v)return Pr(s,S,K(t,0),K(t,v.length),"+input"),h.stateAfter=null,!0;for(var H=0;H<s.sel.ranges.length;H++){var U=s.sel.ranges[H];if(U.head.line==t&&U.head.ch<v.length){var Q=K(t,v.length);vs(s,H,new ze(Q,Q));break}}}var vn=null;function fo(e){vn=e}function Ss(e,t,r,n,s){var c=e.doc;e.display.shift=!1,n||(n=c.sel);var d=+new Date-200,h=s=="paste"||e.state.pasteIncoming>d,p=Ie(t),v=null;if(h&&n.ranges.length>1)if(vn&&vn.text.join(`
`)==t){if(n.ranges.length%vn.text.length==0){v=[];for(var C=0;C<vn.text.length;C++)v.push(c.splitLines(vn.text[C]))}}else p.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(v=xt(p,function(te){return[te]}));for(var S=e.curOp.updateInput,I=n.ranges.length-1;I>=0;I--){var O=n.ranges[I],H=O.from(),U=O.to();O.empty()&&(r&&r>0?H=K(H.line,H.ch-r):e.state.overwrite&&!h?U=K(U.line,Math.min(ce(c,U.line).text.length,U.ch+Re(p).length)):h&&vn&&vn.lineWise&&vn.text.join(`
`)==p.join(`
`)&&(H=U=K(H.line,0)));var Q={from:H,to:U,text:v?v[I%v.length]:p,origin:s||(h?"paste":e.state.cutIncoming>d?"cut":"+input")};Dr(e.doc,Q),mt(e,"inputRead",e,Q)}t&&!h&&wu(e,t),_r(e),e.curOp.updateInput<2&&(e.curOp.updateInput=S),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function bu(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Kt(t,function(){return Ss(t,r,0,null,"paste")}),!0}function wu(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var s=r.ranges[n];if(!(s.head.ch>100||n&&r.ranges[n-1].head.line==s.head.line)){var c=e.getModeAt(s.head),d=!1;if(c.electricChars){for(var h=0;h<c.electricChars.length;h++)if(t.indexOf(c.electricChars.charAt(h))>-1){d=Mi(e,s.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(ce(e.doc,s.head.line).text.slice(0,s.head.ch))&&(d=Mi(e,s.head.line,"smart"));d&&mt(e,"electricInput",e,s.head.line)}}}function ku(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var s=e.doc.sel.ranges[n].head.line,c={anchor:K(s,0),head:K(s+1,0)};r.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:r}}function Cu(e,t,r,n){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",n?"":"off"),e.setAttribute("spellcheck",!!t)}function Tu(){var e=z("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=z("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return T?e.style.width="1000px":e.setAttribute("wrap","off"),_&&(e.style.border="1px solid black"),Cu(e),t}function _d(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(n,s){var c=this.options,d=c[n];c[n]==s&&n!="mode"||(c[n]=s,t.hasOwnProperty(n)&&yt(this,t[n])(this,s,d),be(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,s){this.state.keyMaps[s?"push":"unshift"](lo(n))},removeKeyMap:function(n){for(var s=this.state.keyMaps,c=0;c<s.length;++c)if(s[c]==n||s[c].name==n)return s.splice(c,1),!0},addOverlay:Ot(function(n,s){var c=n.token?n:e.getMode(this.options,n);if(c.startState)throw new Error("Overlays may not be stateful.");Yt(this.state.overlays,{mode:c,modeSpec:n,opaque:s&&s.opaque,priority:s&&s.priority||0},function(d){return d.priority}),this.state.modeGen++,Ht(this)}),removeOverlay:Ot(function(n){for(var s=this.state.overlays,c=0;c<s.length;++c){var d=s[c].modeSpec;if(d==n||typeof n=="string"&&d.name==n){s.splice(c,1),this.state.modeGen++,Ht(this);return}}}),indentLine:Ot(function(n,s,c){typeof s!="string"&&typeof s!="number"&&(s==null?s=this.options.smartIndent?"smart":"prev":s=s?"add":"subtract"),sr(this.doc,n)&&Mi(this,n,s,c)}),indentSelection:Ot(function(n){for(var s=this.doc.sel.ranges,c=-1,d=0;d<s.length;d++){var h=s[d];if(h.empty())h.head.line>c&&(Mi(this,h.head.line,n,!0),c=h.head.line,d==this.doc.sel.primIndex&&_r(this));else{var p=h.from(),v=h.to(),C=Math.max(c,p.line);c=Math.min(this.lastLine(),v.line-(v.ch?0:1))+1;for(var S=C;S<c;++S)Mi(this,S,n);var I=this.doc.sel.ranges;p.ch==0&&s.length==I.length&&I[d].from().ch>0&&vs(this.doc,d,new ze(p,I[d].to()),De)}}}),getTokenAt:function(n,s){return Da(this,n,s)},getLineTokens:function(n,s){return Da(this,K(n),s,!0)},getTokenTypeAt:function(n){n=se(this.doc,n);var s=La(this,ce(this.doc,n.line)),c=0,d=(s.length-1)/2,h=n.ch,p;if(h==0)p=s[2];else for(;;){var v=c+d>>1;if((v?s[v*2-1]:0)>=h)d=v;else if(s[v*2+1]<h)c=v+1;else{p=s[v*2+2];break}}var C=p?p.indexOf("overlay "):-1;return C<0?p:C==0?null:p.slice(0,C-1)},getModeAt:function(n){var s=this.doc.mode;return s.innerMode?e.innerMode(s,this.getTokenAt(n).state).mode:s},getHelper:function(n,s){return this.getHelpers(n,s)[0]},getHelpers:function(n,s){var c=[];if(!r.hasOwnProperty(s))return c;var d=r[s],h=this.getModeAt(n);if(typeof h[s]=="string")d[h[s]]&&c.push(d[h[s]]);else if(h[s])for(var p=0;p<h[s].length;p++){var v=d[h[s][p]];v&&c.push(v)}else h.helperType&&d[h.helperType]?c.push(d[h.helperType]):d[h.name]&&c.push(d[h.name]);for(var C=0;C<d._global.length;C++){var S=d._global[C];S.pred(h,this)&&ae(c,S.val)==-1&&c.push(S.val)}return c},getStateAfter:function(n,s){var c=this.doc;return n=We(c,n==null?c.first+c.size-1:n),ii(this,n+1,s).state},cursorCoords:function(n,s){var c,d=this.doc.sel.primary();return n==null?c=d.head:typeof n=="object"?c=se(this.doc,n):c=n?d.from():d.to(),pn(this,c,s||"page")},charCoords:function(n,s){return Ki(this,se(this.doc,n),s||"page")},coordsChar:function(n,s){return n=sl(this,n,s||"page"),Zo(this,n.left,n.top)},lineAtHeight:function(n,s){return n=sl(this,{top:n,left:0},s||"page").top,xn(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,s,c){var d=!1,h;if(typeof n=="number"){var p=this.doc.first+this.doc.size-1;n<this.doc.first?n=this.doc.first:n>p&&(n=p,d=!0),h=ce(this.doc,n)}else h=n;return Gi(this,h,{top:0,left:0},s||"page",c||d).top+(d?this.doc.height-Wn(h):0)},defaultTextHeight:function(){return Sr(this.display)},defaultCharWidth:function(){return xr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,s,c,d,h){var p=this.display;n=pn(this,se(this.doc,n));var v=n.bottom,C=n.left;if(s.style.position="absolute",s.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(s),p.sizer.appendChild(s),d=="over")v=n.top;else if(d=="above"||d=="near"){var S=Math.max(p.wrapper.clientHeight,this.doc.height),I=Math.max(p.sizer.clientWidth,p.lineSpace.clientWidth);(d=="above"||n.bottom+s.offsetHeight>S)&&n.top>s.offsetHeight?v=n.top-s.offsetHeight:n.bottom+s.offsetHeight<=S&&(v=n.bottom),C+s.offsetWidth>I&&(C=I-s.offsetWidth)}s.style.top=v+"px",s.style.left=s.style.right="",h=="right"?(C=p.sizer.clientWidth-s.offsetWidth,s.style.right="0px"):(h=="left"?C=0:h=="middle"&&(C=(p.sizer.clientWidth-s.offsetWidth)/2),s.style.left=C+"px"),c&&Sf(this,{left:C,top:v,right:C+s.offsetWidth,bottom:v+s.offsetHeight})},triggerOnKeyDown:Ot(cu),triggerOnKeyPress:Ot(du),triggerOnKeyUp:fu,triggerOnMouseDown:Ot(hu),execCommand:function(n){if(Ri.hasOwnProperty(n))return Ri[n].call(null,this)},triggerElectric:Ot(function(n){wu(this,n)}),findPosH:function(n,s,c,d){var h=1;s<0&&(h=-1,s=-s);for(var p=se(this.doc,n),v=0;v<s&&(p=xs(this.doc,p,h,c,d),!p.hitSide);++v);return p},moveH:Ot(function(n,s){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?xs(c.doc,d.head,n,s,c.options.rtlMoveVisually):n<0?d.from():d.to()},Ae)}),deleteH:Ot(function(n,s){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):Ar(this,function(h){var p=xs(d,h.head,n,s,!1);return n<0?{from:p,to:h.head}:{from:h.head,to:p}})}),findPosV:function(n,s,c,d){var h=1,p=d;s<0&&(h=-1,s=-s);for(var v=se(this.doc,n),C=0;C<s;++C){var S=pn(this,v,"div");if(p==null?p=S.left:S.left=p,v=Su(this,S,h,c),v.hitSide)break}return v},moveV:Ot(function(n,s){var c=this,d=this.doc,h=[],p=!this.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(C){if(p)return n<0?C.from():C.to();var S=pn(c,C.head,"div");C.goalColumn!=null&&(S.left=C.goalColumn),h.push(S.left);var I=Su(c,S,n,s);return s=="page"&&C==d.sel.primary()&&os(c,Ki(c,I,"div").top-S.top),I},Ae),h.length)for(var v=0;v<d.sel.ranges.length;v++)d.sel.ranges[v].goalColumn=h[v]}),findWordAt:function(n){var s=this.doc,c=ce(s,n.line).text,d=n.ch,h=n.ch;if(c){var p=this.getHelper(n,"wordChars");(n.sticky=="before"||h==c.length)&&d?--d:++h;for(var v=c.charAt(d),C=Jt(v,p)?function(S){return Jt(S,p)}:/\s/.test(v)?function(S){return/\s/.test(S)}:function(S){return!/\s/.test(S)&&!Jt(S)};d>0&&C(c.charAt(d-1));)--d;for(;h<c.length&&C(c.charAt(h));)++h}return new ze(K(n.line,d),K(n.line,h))},toggleOverwrite:function(n){n!=null&&n==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ke(this.display.cursorDiv,"CodeMirror-overwrite"):ve(this.display.cursorDiv,"CodeMirror-overwrite"),be(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==he()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ot(function(n,s){fi(this,n,s)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-Ln(this)-this.display.barHeight,width:n.scrollWidth-Ln(this)-this.display.barWidth,clientHeight:Go(this),clientWidth:ar(this)}},scrollIntoView:Ot(function(n,s){n==null?(n={from:this.doc.sel.primary().head,to:null},s==null&&(s=this.options.cursorScrollMargin)):typeof n=="number"?n={from:K(n,0),to:null}:n.from==null&&(n={from:n,to:null}),n.to||(n.to=n.from),n.margin=s||0,n.from.line!=null?xf(this,n):vl(this,n.from,n.to,n.margin)}),setSize:Ot(function(n,s){var c=this,d=function(p){return typeof p=="number"||/^\d+$/.test(String(p))?p+"px":p};n!=null&&(this.display.wrapper.style.width=d(n)),s!=null&&(this.display.wrapper.style.height=d(s)),this.options.lineWrapping&&rl(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(p){if(p.widgets){for(var v=0;v<p.widgets.length;v++)if(p.widgets[v].noHScroll){Xn(c,h,"widget");break}}++h}),this.curOp.forceUpdate=!0,be(this,"refresh",this)}),operation:function(n){return Kt(this,n)},startOperation:function(){return hr(this)},endOperation:function(){return pr(this)},refresh:Ot(function(){var n=this.display.cachedTextHeight;Ht(this),this.curOp.forceUpdate=!0,ui(this),fi(this,this.doc.scrollLeft,this.doc.scrollTop),ls(this.display),(n==null||Math.abs(n-Sr(this.display))>.5||this.options.lineWrapping)&&es(this),be(this,"refresh",this)}),swapDoc:Ot(function(n){var s=this.doc;return s.cm=null,this.state.selectingText&&this.state.selectingText(),Ml(this,n),ui(this),this.display.input.reset(),fi(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,mt(this,"swapDoc",this,s),s}),phrase:function(n){var s=this.options.phrases;return s&&Object.prototype.hasOwnProperty.call(s,n)?s[n]:n},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},on(e),e.registerHelper=function(n,s,c){r.hasOwnProperty(n)||(r[n]=e[n]={_global:[]}),r[n][s]=c},e.registerGlobalHelper=function(n,s,c,d){e.registerHelper(n,s,d),r[n]._global.push({pred:c,val:d})}}function xs(e,t,r,n,s){var c=t,d=r,h=ce(e,t.line),p=s&&e.direction=="rtl"?-r:r;function v(){var ie=t.line+p;return ie<e.first||ie>=e.first+e.size?!1:(t=new K(ie,t.ch,t.sticky),h=ce(e,ie))}function C(ie){var ne;if(n=="codepoint"){var le=h.text.charCodeAt(t.ch+(r>0?0:-1));if(isNaN(le))ne=null;else{var ye=r>0?le>=55296&&le<56320:le>=56320&&le<57343;ne=new K(t.line,Math.max(0,Math.min(h.text.length,t.ch+r*(ye?2:1))),-r)}}else s?ne=ld(e.cm,h,t,r):ne=ys(h,t,r);if(ne==null)if(!ie&&v())t=bs(s,e.cm,h,t.line,p);else return!1;else t=ne;return!0}if(n=="char"||n=="codepoint")C();else if(n=="column")C(!0);else if(n=="word"||n=="group")for(var S=null,I=n=="group",O=e.cm&&e.cm.getHelper(t,"wordChars"),H=!0;!(r<0&&!C(!H));H=!1){var U=h.text.charAt(t.ch)||`
`,Q=Jt(U,O)?"w":I&&U==`
`?"n":!I||/\s/.test(U)?null:"p";if(I&&!H&&!Q&&(Q="s"),S&&S!=Q){r<0&&(r=1,C(),t.sticky="after");break}if(Q&&(S=Q),r>0&&!C(!H))break}var te=oo(e,t,c,d,!0);return x(c,te)&&(te.hitSide=!0),te}function Su(e,t,r,n){var s=e.doc,c=t.left,d;if(n=="page"){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),p=Math.max(h-.5*Sr(e.display),3);d=(r>0?t.bottom:t.top)+r*p}else n=="line"&&(d=r>0?t.bottom+3:t.top-3);for(var v;v=Zo(e,c,d),!!v.outside;){if(r<0?d<=0:d>=s.height){v.hitSide=!0;break}d+=r*5}return v}var Be=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new xe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Be.prototype.init=function(e){var t=this,r=this,n=r.cm,s=r.div=e.lineDiv;s.contentEditable=!0,Cu(s,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize);function c(h){for(var p=h.target;p;p=p.parentNode){if(p==s)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(p.className))break}return!1}me(s,"paste",function(h){!c(h)||nt(n,h)||bu(h,n)||k<=11&&setTimeout(yt(n,function(){return t.updateFromDOM()}),20)}),me(s,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),me(s,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),me(s,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),me(s,"touchstart",function(){return r.forceCompositionEnd()}),me(s,"input",function(){t.composing||t.readFromDOMSoon()});function d(h){if(!(!c(h)||nt(n,h))){if(n.somethingSelected())fo({lineWise:!1,text:n.getSelections()}),h.type=="cut"&&n.replaceSelection("",null,"cut");else if(n.options.lineWiseCopyCut){var p=ku(n);fo({lineWise:!0,text:p.text}),h.type=="cut"&&n.operation(function(){n.setSelections(p.ranges,0,De),n.replaceSelection("",null,"cut")})}else return;if(h.clipboardData){h.clipboardData.clearData();var v=vn.text.join(`
`);if(h.clipboardData.setData("Text",v),h.clipboardData.getData("Text")==v){h.preventDefault();return}}var C=Tu(),S=C.firstChild;n.display.lineSpace.insertBefore(C,n.display.lineSpace.firstChild),S.value=vn.text.join(`
`);var I=he();Oe(S),setTimeout(function(){n.display.lineSpace.removeChild(C),I.focus(),I==s&&r.showPrimarySelection()},50)}}me(s,"copy",d),me(s,"cut",d)},Be.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Be.prototype.prepareSelection=function(){var e=dl(this.cm,!1);return e.focus=he()==this.div,e},Be.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Be.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Be.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),s=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||s.line<t.display.viewFrom){e.removeAllRanges();return}var c=ho(t,e.anchorNode,e.anchorOffset),d=ho(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&d&&!d.bad&&m(Te(c,d),n)==0&&m(J(c,d),s)==0)){var h=t.display.view,p=n.line>=t.display.viewFrom&&xu(t,n)||{node:h[0].measure.map[2],offset:0},v=s.line<t.display.viewTo&&xu(t,s);if(!v){var C=h[h.length-1].measure,S=C.maps?C.maps[C.maps.length-1]:C.map;v={node:S[S.length-1],offset:S[S.length-2]-S[S.length-3]}}if(!p||!v){e.removeAllRanges();return}var I=e.rangeCount&&e.getRangeAt(0),O;try{O=Z(p.node,p.offset,v.offset,v.node)}catch{}O&&(!u&&t.state.focused?(e.collapse(p.node,p.offset),O.collapsed||(e.removeAllRanges(),e.addRange(O))):(e.removeAllRanges(),e.addRange(O)),I&&e.anchorNode==null?e.addRange(I):u&&this.startGracePeriod()),this.rememberSelection()}},Be.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Be.prototype.showMultipleSelections=function(e){q(this.cm.display.cursorDiv,e.cursors),q(this.cm.display.selectionDiv,e.selection)},Be.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Be.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ee(this.div,t)},Be.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||he()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Be.prototype.blur=function(){this.div.blur()},Be.prototype.getField=function(){return this.div},Be.prototype.supportsTouch=function(){return!0},Be.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Kt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function r(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,r))}this.polling.set(this.cm.options.pollInterval,r)},Be.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Be.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(P&&E&&this.cm.display.gutterSpecs.length&&Ld(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var r=ho(t,e.anchorNode,e.anchorOffset),n=ho(t,e.focusNode,e.focusOffset);r&&n&&Kt(t,function(){Lt(t.doc,Zn(r,n),De),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Be.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),s=r.to();if(n.ch==0&&n.line>e.firstLine()&&(n=K(n.line-1,ce(e.doc,n.line-1).length)),s.ch==ce(e.doc,s.line).text.length&&s.line<e.lastLine()&&(s=K(s.line+1,0)),n.line<t.viewFrom||s.line>t.viewTo-1)return!1;var c,d,h;n.line==t.viewFrom||(c=cr(e,n.line))==0?(d=qe(t.view[0].line),h=t.view[0].node):(d=qe(t.view[c].line),h=t.view[c-1].node.nextSibling);var p=cr(e,s.line),v,C;if(p==t.view.length-1?(v=t.viewTo-1,C=t.lineDiv.lastChild):(v=qe(t.view[p+1].line)-1,C=t.view[p+1].node.previousSibling),!h)return!1;for(var S=e.doc.splitLines(Ed(e,h,C,d,v)),I=Sn(e.doc,K(d,0),K(v,ce(e.doc,v).text.length));S.length>1&&I.length>1;)if(Re(S)==Re(I))S.pop(),I.pop(),v--;else if(S[0]==I[0])S.shift(),I.shift(),d++;else break;for(var O=0,H=0,U=S[0],Q=I[0],te=Math.min(U.length,Q.length);O<te&&U.charCodeAt(O)==Q.charCodeAt(O);)++O;for(var ie=Re(S),ne=Re(I),le=Math.min(ie.length-(S.length==1?O:0),ne.length-(I.length==1?O:0));H<le&&ie.charCodeAt(ie.length-H-1)==ne.charCodeAt(ne.length-H-1);)++H;if(S.length==1&&I.length==1&&d==n.line)for(;O&&O>n.ch&&ie.charCodeAt(ie.length-H-1)==ne.charCodeAt(ne.length-H-1);)O--,H++;S[S.length-1]=ie.slice(0,ie.length-H).replace(/^\u200b+/,""),S[0]=S[0].slice(O).replace(/\u200b+$/,"");var ye=K(d,O),ge=K(v,I.length?Re(I).length-H:0);if(S.length>1||S[0]||m(ye,ge))return Pr(e.doc,S,ye,ge,"+input"),!0},Be.prototype.ensurePolled=function(){this.forceCompositionEnd()},Be.prototype.reset=function(){this.forceCompositionEnd()},Be.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Be.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Be.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Kt(this.cm,function(){return Ht(e.cm)})},Be.prototype.setUneditable=function(e){e.contentEditable="false"},Be.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||yt(this.cm,Ss)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Be.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Be.prototype.onContextMenu=function(){},Be.prototype.resetPosition=function(){},Be.prototype.needsContentAttribute=!0;function xu(e,t){var r=Ko(e,t.line);if(!r||r.hidden)return null;var n=ce(e.doc,t.line),s=Qa(r,n,t.line),c=Pt(n,e.doc.direction),d="left";if(c){var h=Xe(c,t.ch);d=h%2?"right":"left"}var p=tl(s.map,t.ch,d);return p.offset=p.collapse=="right"?p.end:p.start,p}function Ld(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Wr(e,t){return t&&(e.bad=!0),e}function Ed(e,t,r,n,s){var c="",d=!1,h=e.doc.lineSeparator(),p=!1;function v(O){return function(H){return H.id==O}}function C(){d&&(c+=h,p&&(c+=h),d=p=!1)}function S(O){O&&(C(),c+=O)}function I(O){if(O.nodeType==1){var H=O.getAttribute("cm-text");if(H){S(H);return}var U=O.getAttribute("cm-marker"),Q;if(U){var te=e.findMarks(K(n,0),K(s+1,0),v(+U));te.length&&(Q=te[0].find(0))&&S(Sn(e.doc,Q.from,Q.to).join(h));return}if(O.getAttribute("contenteditable")=="false")return;var ie=/^(pre|div|p|li|table|br)$/i.test(O.nodeName);if(!/^br$/i.test(O.nodeName)&&O.textContent.length==0)return;ie&&C();for(var ne=0;ne<O.childNodes.length;ne++)I(O.childNodes[ne]);/^(pre|p)$/i.test(O.nodeName)&&(p=!0),ie&&(d=!0)}else O.nodeType==3&&S(O.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;I(t),t!=r;)t=t.nextSibling,p=!1;return c}function ho(e,t,r){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[r],!n)return Wr(e.clipPos(K(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var s=0;s<e.display.view.length;s++){var c=e.display.view[s];if(c.node==n)return Md(c,t,r)}}function Md(e,t,r){var n=e.text.firstChild,s=!1;if(!t||!Ee(n,t))return Wr(K(qe(e.line),0),!0);if(t==n&&(s=!0,t=n.childNodes[r],r=0,!t)){var c=e.rest?Re(e.rest):e.line;return Wr(K(qe(c),c.text.length),s)}var d=t.nodeType==3?t:null,h=t;for(!d&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(d=t.firstChild,r&&(r=d.nodeValue.length));h.parentNode!=n;)h=h.parentNode;var p=e.measure,v=p.maps;function C(Q,te,ie){for(var ne=-1;ne<(v?v.length:0);ne++)for(var le=ne<0?p.map:v[ne],ye=0;ye<le.length;ye+=3){var ge=le[ye+2];if(ge==Q||ge==te){var Me=qe(ne<0?e.line:e.rest[ne]),je=le[ye]+ie;return(ie<0||ge!=Q)&&(je=le[ye+(ie?1:0)]),K(Me,je)}}}var S=C(d,h,r);if(S)return Wr(S,s);for(var I=h.nextSibling,O=d?d.nodeValue.length-r:0;I;I=I.nextSibling){if(S=C(I,I.firstChild,0),S)return Wr(K(S.line,S.ch-O),s);O+=I.textContent.length}for(var H=h.previousSibling,U=r;H;H=H.previousSibling){if(S=C(H,H.firstChild,-1),S)return Wr(K(S.line,S.ch+U),s);U+=H.textContent.length}}var at=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new xe,this.hasSelection=!1,this.composing=null};at.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var s=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),_&&(s.style.width="0px"),me(s,"input",function(){w&&k>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()}),me(s,"paste",function(d){nt(n,d)||bu(d,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())});function c(d){if(!nt(n,d)){if(n.somethingSelected())fo({lineWise:!1,text:n.getSelections()});else if(n.options.lineWiseCopyCut){var h=ku(n);fo({lineWise:!0,text:h.text}),d.type=="cut"?n.setSelections(h.ranges,null,De):(r.prevInput="",s.value=h.text.join(`
`),Oe(s))}else return;d.type=="cut"&&(n.state.cutIncoming=+new Date)}}me(s,"cut",c),me(s,"copy",c),me(e.scroller,"paste",function(d){if(!(Hn(e,d)||nt(n,d))){if(!s.dispatchEvent){n.state.pasteIncoming=+new Date,r.focus();return}var h=new Event("paste");h.clipboardData=d.clipboardData,s.dispatchEvent(h)}}),me(e.lineSpace,"selectstart",function(d){Hn(e,d)||vt(d)}),me(s,"compositionstart",function(){var d=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:d,range:n.markText(d,n.getCursor("to"),{className:"CodeMirror-composing"})}}),me(s,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},at.prototype.createField=function(e){this.wrapper=Tu(),this.textarea=this.wrapper.firstChild},at.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},at.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=dl(e);if(e.options.moveInputWithCursor){var s=pn(e,r.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),d=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,s.top+d.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,s.left+d.left-c.left))}return n},at.prototype.showSelection=function(e){var t=this.cm,r=t.display;q(r.cursorDiv,e.cursors),q(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},at.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&Oe(this.textarea),w&&k>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",w&&k>=9&&(this.hasSelection=null))}},at.prototype.getField=function(){return this.textarea},at.prototype.supportsTouch=function(){return!1},at.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!L||he()!=this.textarea))try{this.textarea.focus()}catch{}},at.prototype.blur=function(){this.textarea.blur()},at.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},at.prototype.receivedFocus=function(){this.slowPoll()},at.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},at.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function r(){var n=t.poll();!n&&!e?(e=!0,t.polling.set(60,r)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,r)},at.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ge(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var s=r.value;if(s==n&&!t.somethingSelected())return!1;if(w&&k>=9&&this.hasSelection===s||y&&/[\uf700-\uf7ff]/.test(s))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=s.charCodeAt(0);if(c==8203&&!n&&(n="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var d=0,h=Math.min(n.length,s.length);d<h&&n.charCodeAt(d)==s.charCodeAt(d);)++d;return Kt(t,function(){Ss(t,s.slice(d),n.length-d,null,e.composing?"*compose":null),s.length>1e3||s.indexOf(`
`)>-1?r.value=e.prevInput="":e.prevInput=s,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},at.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},at.prototype.onKeyPress=function(){w&&k>=9&&(this.hasSelection=null),this.fastPoll()},at.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,s=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=ur(r,e),d=n.scroller.scrollTop;if(!c||M)return;var h=r.options.resetSelectionOnContextMenu;h&&r.doc.sel.contains(c)==-1&&yt(r,Lt)(r.doc,Zn(c),De);var p=s.style.cssText,v=t.wrapper.style.cssText,C=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",s.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-C.top-5)+"px; left: "+(e.clientX-C.left-5)+`px;
      z-index: 1000; background: `+(w?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var S;T&&(S=window.scrollY),n.input.focus(),T&&window.scrollTo(null,S),n.input.reset(),r.somethingSelected()||(s.value=t.prevInput=" "),t.contextMenuPending=O,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll);function I(){if(s.selectionStart!=null){var U=r.somethingSelected(),Q="\u200B"+(U?s.value:"");s.value="\u21DA",s.value=Q,t.prevInput=U?"":"\u200B",s.selectionStart=1,s.selectionEnd=Q.length,n.selForContextMenu=r.doc.sel}}function O(){if(t.contextMenuPending==O&&(t.contextMenuPending=!1,t.wrapper.style.cssText=v,s.style.cssText=p,w&&k<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=d),s.selectionStart!=null)){(!w||w&&k<9)&&I();var U=0,Q=function(){n.selForContextMenu==r.doc.sel&&s.selectionStart==0&&s.selectionEnd>0&&t.prevInput=="\u200B"?yt(r,jl)(r):U++<10?n.detectingSelectAll=setTimeout(Q,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(Q,200)}}if(w&&k>=9&&I(),ue){Tn(e);var H=function(){Rt(window,"mouseup",H),setTimeout(O,20)};me(window,"mouseup",H)}else setTimeout(O,50)},at.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},at.prototype.setUneditable=function(){},at.prototype.needsContentAttribute=!1;function Dd(e,t){if(t=t?$e(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var r=he();t.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function n(){e.value=h.getValue()}var s;if(e.form&&(me(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var c=e.form;s=c.submit;try{var d=c.submit=function(){n(),c.submit=s,c.submit(),c.submit=d}}catch{}}t.finishInit=function(p){p.save=n,p.getTextArea=function(){return e},p.toTextArea=function(){p.toTextArea=isNaN,n(),e.parentNode.removeChild(p.getWrapperElement()),e.style.display="",e.form&&(Rt(e.form,"submit",n),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=s))}},e.style.display="none";var h=Ye(function(p){return e.parentNode.insertBefore(p,e.nextSibling)},t);return h}function Pd(e){e.off=Rt,e.on=me,e.wheelEventPixels=Ff,e.Doc=Ft,e.splitLines=Ie,e.countColumn=Fe,e.findColumn=ot,e.isWordChar=Zt,e.Pass=Ce,e.signal=be,e.Line=kr,e.changeEnd=Jn,e.scrollbarModel=bl,e.Pos=K,e.cmpPos=m,e.modes=He,e.mimeModes=Le,e.resolveMode=$t,e.getMode=Wt,e.modeExtensions=dn,e.extendMode=hn,e.copyState=Vt,e.startState=ti,e.innerMode=ei,e.commands=Ri,e.keyMap=qn,e.keyName=ou,e.isModifierKey=ru,e.lookupKey=Or,e.normalizeKeyMap=ad,e.StringStream=rt,e.SharedTextMarker=Ti,e.TextMarker=Vn,e.LineWidget=Ci,e.e_preventDefault=vt,e.e_stopPropagation=sn,e.e_stop=Tn,e.addClass=ke,e.contains=Ee,e.rmClass=ve,e.keyNames=er}Td(Ye),_d(Ye);var Nd="iter insert remove copy getEditor constructor".split(" ");for(var po in Ft.prototype)Ft.prototype.hasOwnProperty(po)&&ae(Nd,po)<0&&(Ye.prototype[po]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ft.prototype[po]));return on(Ft),Ye.inputStyles={textarea:at,contenteditable:Be},Ye.defineMode=function(e){!Ye.defaults.mode&&e!="null"&&(Ye.defaults.mode=e),Ve.apply(this,arguments)},Ye.defineMIME=et,Ye.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ye.defineMIME("text/plain","null"),Ye.defineExtension=function(e,t){Ye.prototype[e]=t},Ye.defineDocExtension=function(e,t){Ft.prototype[e]=t},Ye.fromTextArea=Dd,Pd(Ye),Ye.version="5.63.3",Ye})})(Nn);var Di=Nn.exports;(function(i,o){(function(a){a(Nn.exports)})(function(a){a.defineMode("javascript",function(l,u){var f=l.indentUnit,g=u.statementIndent,b=u.jsonld,w=u.json||b,k=u.trackScope!==!1,T=u.typescript,N=u.wordCharacters||/[\w$\xa1-\uffff]/,E=function(){function m(_t){return{type:_t,style:"keyword"}}var x=m("keyword a"),B=m("keyword b"),J=m("keyword c"),Te=m("keyword d"),We=m("operator"),se={type:"atom",style:"atom"};return{if:m("if"),while:x,with:x,else:B,do:B,try:B,finally:B,return:Te,break:Te,continue:Te,new:m("new"),delete:J,void:J,throw:J,debugger:m("debugger"),var:m("var"),const:m("var"),let:m("var"),function:m("function"),catch:m("catch"),for:m("for"),switch:m("switch"),case:m("case"),default:m("default"),in:We,typeof:We,instanceof:We,true:se,false:se,null:se,undefined:se,NaN:se,Infinity:se,this:m("this"),class:m("class"),super:m("atom"),yield:J,export:m("export"),import:m("import"),extends:J,await:J}}(),M=/[+\-*&%=<>!?|~^@]/,$=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Y(m){for(var x=!1,B,J=!1;(B=m.next())!=null;){if(!x){if(B=="/"&&!J)return;B=="["?J=!0:J&&B=="]"&&(J=!1)}x=!x&&B=="\\"}}var V,_;function P(m,x,B){return V=m,_=B,x}function L(m,x){var B=m.next();if(B=='"'||B=="'")return x.tokenize=y(B),x.tokenize(m,x);if(B=="."&&m.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return P("number","number");if(B=="."&&m.match(".."))return P("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(B))return P(B);if(B=="="&&m.eat(">"))return P("=>","operator");if(B=="0"&&m.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return P("number","number");if(/\d/.test(B))return m.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),P("number","number");if(B=="/")return m.eat("*")?(x.tokenize=W,W(m,x)):m.eat("/")?(m.skipToEnd(),P("comment","comment")):K(m,x,1)?(Y(m),m.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),P("regexp","string-2")):(m.eat("="),P("operator","operator",m.current()));if(B=="`")return x.tokenize=j,j(m,x);if(B=="#"&&m.peek()=="!")return m.skipToEnd(),P("meta","meta");if(B=="#"&&m.eatWhile(N))return P("variable","property");if(B=="<"&&m.match("!--")||B=="-"&&m.match("->")&&!/\S/.test(m.string.slice(0,m.start)))return m.skipToEnd(),P("comment","comment");if(M.test(B))return(B!=">"||!x.lexical||x.lexical.type!=">")&&(m.eat("=")?(B=="!"||B=="=")&&m.eat("="):/[<>*+\-|&?]/.test(B)&&(m.eat(B),B==">"&&m.eat(B))),B=="?"&&m.eat(".")?P("."):P("operator","operator",m.current());if(N.test(B)){m.eatWhile(N);var J=m.current();if(x.lastType!="."){if(E.propertyIsEnumerable(J)){var Te=E[J];return P(Te.type,Te.style,J)}if(J=="async"&&m.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return P("async","keyword",J)}return P("variable","variable",J)}}function y(m){return function(x,B){var J=!1,Te;if(b&&x.peek()=="@"&&x.match($))return B.tokenize=L,P("jsonld-keyword","meta");for(;(Te=x.next())!=null&&!(Te==m&&!J);)J=!J&&Te=="\\";return J||(B.tokenize=L),P("string","string")}}function W(m,x){for(var B=!1,J;J=m.next();){if(J=="/"&&B){x.tokenize=L;break}B=J=="*"}return P("comment","comment")}function j(m,x){for(var B=!1,J;(J=m.next())!=null;){if(!B&&(J=="`"||J=="$"&&m.eat("{"))){x.tokenize=L;break}B=!B&&J=="\\"}return P("quasi","string-2",m.current())}var A="([{}])";function X(m,x){x.fatArrowAt&&(x.fatArrowAt=null);var B=m.string.indexOf("=>",m.start);if(!(B<0)){if(T){var J=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(m.string.slice(m.start,B));J&&(B=J.index)}for(var Te=0,We=!1,se=B-1;se>=0;--se){var _t=m.string.charAt(se),en=A.indexOf(_t);if(en>=0&&en<3){if(!Te){++se;break}if(--Te==0){_t=="("&&(We=!0);break}}else if(en>=3&&en<6)++Te;else if(N.test(_t))We=!0;else if(/["'\/`]/.test(_t))for(;;--se){if(se==0)return;var wr=m.string.charAt(se-1);if(wr==_t&&m.string.charAt(se-2)!="\\"){se--;break}}else if(We&&!Te){++se;break}}We&&!Te&&(x.fatArrowAt=se)}}var ue={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function oe(m,x,B,J,Te,We){this.indented=m,this.column=x,this.type=B,this.prev=Te,this.info=We,J!=null&&(this.align=J)}function ve(m,x){if(!k)return!1;for(var B=m.localVars;B;B=B.next)if(B.name==x)return!0;for(var J=m.context;J;J=J.prev)for(var B=J.vars;B;B=B.next)if(B.name==x)return!0}function Ne(m,x,B,J,Te){var We=m.cc;for(q.state=m,q.stream=Te,q.marked=null,q.cc=We,q.style=x,m.lexical.hasOwnProperty("align")||(m.lexical.align=!0);;){var se=We.length?We.pop():w?Ae:De;if(se(B,J)){for(;We.length&&We[We.length-1].lex;)We.pop()();return q.marked?q.marked:B=="variable"&&ve(m,J)?"variable-2":x}}}var q={state:null,column:null,marked:null,cc:null};function z(){for(var m=arguments.length-1;m>=0;m--)q.cc.push(arguments[m])}function R(){return z.apply(null,arguments),!0}function Z(m,x){for(var B=x;B;B=B.next)if(B.name==m)return!0;return!1}function Ee(m){var x=q.state;if(q.marked="def",!!k){if(x.context){if(x.lexical.info=="var"&&x.context&&x.context.block){var B=he(m,x.context);if(B!=null){x.context=B;return}}else if(!Z(m,x.localVars)){x.localVars=new Oe(m,x.localVars);return}}u.globalVars&&!Z(m,x.globalVars)&&(x.globalVars=new Oe(m,x.globalVars))}}function he(m,x){if(x)if(x.block){var B=he(m,x.prev);return B?B==x.prev?x:new _e(B,x.vars,!0):null}else return Z(m,x.vars)?x:new _e(x.prev,new Oe(m,x.vars),!1);else return null}function ke(m){return m=="public"||m=="private"||m=="protected"||m=="abstract"||m=="readonly"}function _e(m,x,B){this.prev=m,this.vars=x,this.block=B}function Oe(m,x){this.name=m,this.next=x}var pt=new Oe("this",new Oe("arguments",null));function $e(){q.state.context=new _e(q.state.context,q.state.localVars,!1),q.state.localVars=pt}function Fe(){q.state.context=new _e(q.state.context,q.state.localVars,!0),q.state.localVars=null}function xe(){q.state.localVars=q.state.context.vars,q.state.context=q.state.context.prev}xe.lex=!0;function ae(m,x){var B=function(){var J=q.state,Te=J.indented;if(J.lexical.type=="stat")Te=J.lexical.indented;else for(var We=J.lexical;We&&We.type==")"&&We.align;We=We.prev)Te=We.indented;J.lexical=new oe(Te,q.stream.column(),m,null,J.lexical,x)};return B.lex=!0,B}function re(){var m=q.state;m.lexical.prev&&(m.lexical.type==")"&&(m.indented=m.lexical.indented),m.lexical=m.lexical.prev)}re.lex=!0;function Ce(m){function x(B){return B==m?R():m==";"||B=="}"||B==")"||B=="]"?z():R(x)}return x}function De(m,x){return m=="var"?R(ae("vardef",x),ln,Ce(";"),re):m=="keyword a"?R(ae("form"),Ut,De,re):m=="keyword b"?R(ae("form"),De,re):m=="keyword d"?q.stream.match(/^\s*$/,!1)?R():R(ae("stat"),Re,Ce(";"),re):m=="debugger"?R(Ce(";")):m=="{"?R(ae("}"),Fe,Pt,re,xe):m==";"?R():m=="if"?(q.state.lexical.info=="else"&&q.state.cc[q.state.cc.length-1]==re&&q.state.cc.pop()(),R(ae("form"),Ut,De,re,Ge)):m=="function"?R(He):m=="for"?R(ae("form"),Fe,Je,De,xe,re):m=="class"||T&&x=="interface"?(q.marked="keyword",R(ae("form",m=="class"?m:x),Wt,re)):m=="variable"?T&&x=="declare"?(q.marked="keyword",R(De)):T&&(x=="module"||x=="enum"||x=="type")&&q.stream.match(/^\s*\w/,!1)?(q.marked="keyword",x=="enum"?R(xn):x=="type"?R(Ve,Ce("operator"),be,Ce(";")):R(ae("form"),D,Ce("{"),ae("}"),Pt,re,re)):T&&x=="namespace"?(q.marked="keyword",R(ae("form"),Ae,De,re)):T&&x=="abstract"?(q.marked="keyword",R(De)):R(ae("stat"),rr):m=="switch"?R(ae("form"),Ut,Ce("{"),ae("}","switch"),Fe,Pt,re,re,xe):m=="case"?R(Ae,Ce(":")):m=="default"?R(Ce(":")):m=="catch"?R(ae("form"),$e,kn,De,re,xe):m=="export"?R(ae("stat"),ei,re):m=="import"?R(ae("stat"),rt,re):m=="async"?R(De):x=="@"?R(Ae,De):z(ae("stat"),Ae,Ce(";"),re)}function kn(m){if(m=="(")return R(et,Ce(")"))}function Ae(m,x){return Dt(m,x,!1)}function ot(m,x){return Dt(m,x,!0)}function Ut(m){return m!="("?z():R(ae(")"),Re,Ce(")"),re)}function Dt(m,x,B){if(q.state.fatArrowAt==q.stream.start){var J=B?Zt:Cn;if(m=="(")return R($e,ae(")"),Xe(et,")"),re,Ce("=>"),J,xe);if(m=="variable")return z($e,D,Ce("=>"),J,xe)}var Te=B?Yt:xt;return ue.hasOwnProperty(m)?R(Te):m=="function"?R(He,Te):m=="class"||T&&x=="interface"?(q.marked="keyword",R(ae("form"),$t,re)):m=="keyword c"||m=="async"?R(B?ot:Ae):m=="("?R(ae(")"),Re,Ce(")"),re,Te):m=="operator"||m=="spread"?R(B?ot:Ae):m=="["?R(ae("]"),qe,re,Te):m=="{"?An(rn,"}",null,Te):m=="quasi"?z(st,Te):m=="new"?R(Jt(B)):R()}function Re(m){return m.match(/[;\}\)\],]/)?z():z(Ae)}function xt(m,x){return m==","?R(Re):Yt(m,x,!1)}function Yt(m,x,B){var J=B==!1?xt:Yt,Te=B==!1?Ae:ot;if(m=="=>")return R($e,B?Zt:Cn,xe);if(m=="operator")return/\+\+|--/.test(x)||T&&x=="!"?R(J):T&&x=="<"&&q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?R(ae(">"),Xe(be,">"),re,J):x=="?"?R(Ae,Ce(":"),Te):R(Te);if(m=="quasi")return z(st,J);if(m!=";"){if(m=="(")return An(ot,")","call",J);if(m==".")return R(ir,J);if(m=="[")return R(ae("]"),Re,Ce("]"),re,J);if(T&&x=="as")return q.marked="keyword",R(be,J);if(m=="regexp")return q.state.lastType=q.marked="operator",q.stream.backUp(q.stream.pos-q.stream.start-1),R(Te)}}function st(m,x){return m!="quasi"?z():x.slice(x.length-2)!="${"?R(st):R(Re,gt)}function gt(m){if(m=="}")return q.marked="string-2",q.state.tokenize=j,R(st)}function Cn(m){return X(q.stream,q.state),z(m=="{"?De:Ae)}function Zt(m){return X(q.stream,q.state),z(m=="{"?De:ot)}function Jt(m){return function(x){return x=="."?R(m?Qr:nr):x=="variable"&&T?R(Tn,m?Yt:xt):z(m?ot:Ae)}}function nr(m,x){if(x=="target")return q.marked="keyword",R(xt)}function Qr(m,x){if(x=="target")return q.marked="keyword",R(Yt)}function rr(m){return m==":"?R(re,De):z(xt,Ce(";"),re)}function ir(m){if(m=="variable")return q.marked="property",R()}function rn(m,x){if(m=="async")return q.marked="property",R(rn);if(m=="variable"||q.style=="keyword"){if(q.marked="property",x=="get"||x=="set")return R(Vr);var B;return T&&q.state.fatArrowAt==q.stream.start&&(B=q.stream.match(/^\s*:\s*/,!1))&&(q.state.fatArrowAt=q.stream.pos+B[0].length),R(It)}else{if(m=="number"||m=="string")return q.marked=b?"property":q.style+" property",R(It);if(m=="jsonld-keyword")return R(It);if(T&&ke(x))return q.marked="keyword",R(rn);if(m=="[")return R(Ae,cn,Ce("]"),It);if(m=="spread")return R(ot,It);if(x=="*")return q.marked="keyword",R(rn);if(m==":")return z(It)}}function Vr(m){return m!="variable"?z(It):(q.marked="property",R(He))}function It(m){if(m==":")return R(ot);if(m=="(")return z(He)}function Xe(m,x,B){function J(Te,We){if(B?B.indexOf(Te)>-1:Te==","){var se=q.state.lexical;return se.info=="call"&&(se.pos=(se.pos||0)+1),R(function(_t,en){return _t==x||en==x?z():z(m)},J)}return Te==x||We==x?R():B&&B.indexOf(";")>-1?z(m):R(Ce(x))}return function(Te,We){return Te==x||We==x?R():z(m,J)}}function An(m,x,B){for(var J=3;J<arguments.length;J++)q.cc.push(arguments[J]);return R(ae(x,B),Xe(m,x),re)}function Pt(m){return m=="}"?R():z(De,Pt)}function cn(m,x){if(T){if(m==":")return R(be);if(x=="?")return R(cn)}}function me(m,x){if(T&&(m==":"||x=="in"))return R(be)}function fn(m){if(T&&m==":")return q.stream.match(/^\s*\w+\s+is\b/,!1)?R(Ae,Rt,be):R(be)}function Rt(m,x){if(x=="is")return q.marked="keyword",R()}function be(m,x){if(x=="keyof"||x=="typeof"||x=="infer"||x=="readonly")return q.marked="keyword",R(x=="typeof"?ot:be);if(m=="variable"||x=="void")return q.marked="type",R(Nt);if(x=="|"||x=="&")return R(be);if(m=="string"||m=="number"||m=="atom")return R(Nt);if(m=="[")return R(ae("]"),Xe(be,"]",","),re,Nt);if(m=="{")return R(ae("}"),Qt,re,Nt);if(m=="(")return R(Xe(sn,")"),nt,Nt);if(m=="<")return R(Xe(be,">"),be);if(m=="quasi")return z(on,Nt)}function nt(m){if(m=="=>")return R(be)}function Qt(m){return m.match(/[\}\)\]]/)?R():m==","||m==";"?R(Qt):z(Ze,Qt)}function Ze(m,x){if(m=="variable"||q.style=="keyword")return q.marked="property",R(Ze);if(x=="?"||m=="number"||m=="string")return R(Ze);if(m==":")return R(be);if(m=="[")return R(Ce("variable"),me,Ce("]"),Ze);if(m=="(")return z(Le,Ze);if(!m.match(/[;\}\)\],]/))return R()}function on(m,x){return m!="quasi"?z():x.slice(x.length-2)!="${"?R(on):R(be,vt)}function vt(m){if(m=="}")return q.marked="string-2",q.state.tokenize=j,R(on)}function sn(m,x){return m=="variable"&&q.stream.match(/^\s*[?:]/,!1)||x=="?"?R(sn):m==":"?R(be):m=="spread"?R(sn):z(be)}function Nt(m,x){if(x=="<")return R(ae(">"),Xe(be,">"),re,Nt);if(x=="|"||m=="."||x=="&")return R(be);if(m=="[")return R(be,Ce("]"),Nt);if(x=="extends"||x=="implements")return q.marked="keyword",R(be);if(x=="?")return R(be,Ce(":"),be)}function Tn(m,x){if(x=="<")return R(ae(">"),Xe(be,">"),re,Nt)}function an(){return z(be,or)}function or(m,x){if(x=="=")return R(be)}function ln(m,x){return x=="enum"?(q.marked="keyword",R(xn)):z(D,cn,pe,Ie)}function D(m,x){if(T&&ke(x))return q.marked="keyword",R(D);if(m=="variable")return Ee(x),R();if(m=="spread")return R(D);if(m=="[")return An(ee,"]");if(m=="{")return An(G,"}")}function G(m,x){return m=="variable"&&!q.stream.match(/^\s*:/,!1)?(Ee(x),R(pe)):(m=="variable"&&(q.marked="property"),m=="spread"?R(D):m=="}"?z():m=="["?R(Ae,Ce("]"),Ce(":"),G):R(Ce(":"),D,pe))}function ee(){return z(D,pe)}function pe(m,x){if(x=="=")return R(ot)}function Ie(m){if(m==",")return R(ln)}function Ge(m,x){if(m=="keyword b"&&x=="else")return R(ae("form","else"),De,re)}function Je(m,x){if(x=="await")return R(Je);if(m=="(")return R(ae(")"),Qe,re)}function Qe(m){return m=="var"?R(ln,Pe):m=="variable"?R(Pe):z(Pe)}function Pe(m,x){return m==")"?R():m==";"?R(Pe):x=="in"||x=="of"?(q.marked="keyword",R(Ae,Pe)):z(Ae,Pe)}function He(m,x){if(x=="*")return q.marked="keyword",R(He);if(m=="variable")return Ee(x),R(He);if(m=="(")return R($e,ae(")"),Xe(et,")"),re,fn,De,xe);if(T&&x=="<")return R(ae(">"),Xe(an,">"),re,He)}function Le(m,x){if(x=="*")return q.marked="keyword",R(Le);if(m=="variable")return Ee(x),R(Le);if(m=="(")return R($e,ae(")"),Xe(et,")"),re,fn,xe);if(T&&x=="<")return R(ae(">"),Xe(an,">"),re,Le)}function Ve(m,x){if(m=="keyword"||m=="variable")return q.marked="type",R(Ve);if(x=="<")return R(ae(">"),Xe(an,">"),re)}function et(m,x){return x=="@"&&R(Ae,et),m=="spread"?R(et):T&&ke(x)?(q.marked="keyword",R(et)):T&&m=="this"?R(cn,pe):z(D,cn,pe)}function $t(m,x){return m=="variable"?Wt(m,x):dn(m,x)}function Wt(m,x){if(m=="variable")return Ee(x),R(dn)}function dn(m,x){if(x=="<")return R(ae(">"),Xe(an,">"),re,dn);if(x=="extends"||x=="implements"||T&&m==",")return x=="implements"&&(q.marked="keyword"),R(T?be:Ae,dn);if(m=="{")return R(ae("}"),hn,re)}function hn(m,x){if(m=="async"||m=="variable"&&(x=="static"||x=="get"||x=="set"||T&&ke(x))&&q.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return q.marked="keyword",R(hn);if(m=="variable"||q.style=="keyword")return q.marked="property",R(Vt,hn);if(m=="number"||m=="string")return R(Vt,hn);if(m=="[")return R(Ae,cn,Ce("]"),Vt,hn);if(x=="*")return q.marked="keyword",R(hn);if(T&&m=="(")return z(Le,hn);if(m==";"||m==",")return R(hn);if(m=="}")return R();if(x=="@")return R(Ae,hn)}function Vt(m,x){if(x=="!"||x=="?")return R(Vt);if(m==":")return R(be,pe);if(x=="=")return R(ot);var B=q.state.lexical.prev,J=B&&B.info=="interface";return z(J?Le:He)}function ei(m,x){return x=="*"?(q.marked="keyword",R(Gt,Ce(";"))):x=="default"?(q.marked="keyword",R(Ae,Ce(";"))):m=="{"?R(Xe(ti,"}"),Gt,Ce(";")):z(De)}function ti(m,x){if(x=="as")return q.marked="keyword",R(Ce("variable"));if(m=="variable")return z(ot,ti)}function rt(m){return m=="string"?R():m=="("?z(Ae):m=="."?z(xt):z(ce,Sn,Gt)}function ce(m,x){return m=="{"?An(ce,"}"):(m=="variable"&&Ee(x),x=="*"&&(q.marked="keyword"),R(ni))}function Sn(m){if(m==",")return R(ce,Sn)}function ni(m,x){if(x=="as")return q.marked="keyword",R(ce)}function Gt(m,x){if(x=="from")return q.marked="keyword",R(Ae)}function qe(m){return m=="]"?R():z(Xe(ot,"]"))}function xn(){return z(ae("form"),D,Ce("{"),ae("}"),Xe(sr,"}"),re,re)}function sr(){return z(D,pe)}function ri(m,x){return m.lastType=="operator"||m.lastType==","||M.test(x.charAt(0))||/[,.]/.test(x.charAt(0))}function K(m,x,B){return x.tokenize==L&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(x.lastType)||x.lastType=="quasi"&&/\{\s*$/.test(m.string.slice(0,m.pos-(B||0)))}return{startState:function(m){var x={tokenize:L,lastType:"sof",cc:[],lexical:new oe((m||0)-f,0,"block",!1),localVars:u.localVars,context:u.localVars&&new _e(null,null,!1),indented:m||0};return u.globalVars&&typeof u.globalVars=="object"&&(x.globalVars=u.globalVars),x},token:function(m,x){if(m.sol()&&(x.lexical.hasOwnProperty("align")||(x.lexical.align=!1),x.indented=m.indentation(),X(m,x)),x.tokenize!=W&&m.eatSpace())return null;var B=x.tokenize(m,x);return V=="comment"?B:(x.lastType=V=="operator"&&(_=="++"||_=="--")?"incdec":V,Ne(x,B,V,_,m))},indent:function(m,x){if(m.tokenize==W||m.tokenize==j)return a.Pass;if(m.tokenize!=L)return 0;var B=x&&x.charAt(0),J=m.lexical,Te;if(!/^\s*else\b/.test(x))for(var We=m.cc.length-1;We>=0;--We){var se=m.cc[We];if(se==re)J=J.prev;else if(se!=Ge&&se!=xe)break}for(;(J.type=="stat"||J.type=="form")&&(B=="}"||(Te=m.cc[m.cc.length-1])&&(Te==xt||Te==Yt)&&!/^[,\.=+\-*:?[\(]/.test(x));)J=J.prev;g&&J.type==")"&&J.prev.type=="stat"&&(J=J.prev);var _t=J.type,en=B==_t;return _t=="vardef"?J.indented+(m.lastType=="operator"||m.lastType==","?J.info.length+1:0):_t=="form"&&B=="{"?J.indented:_t=="form"?J.indented+f:_t=="stat"?J.indented+(ri(m,x)?g||f:0):J.info=="switch"&&!en&&u.doubleIndentSwitch!=!1?J.indented+(/^(?:case|default)\b/.test(x)?f:2*f):J.align?J.column+(en?0:1):J.indented+(en?0:f)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:w?null:"/*",blockCommentEnd:w?null:"*/",blockCommentContinue:w?null:" * ",lineComment:w?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:w?"json":"javascript",jsonldMode:b,jsonMode:w,expressionAllowed:K,skipExpression:function(m){Ne(m,"atom","atom","true",new a.StringStream("",2,null))}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/manifest+json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();(function(i,o){(function(a){a(Nn.exports)})(function(a){var l="CodeMirror-hint",u="CodeMirror-hint-active";a.showHint=function(_,P,L){if(!P)return _.showHint(L);L&&L.async&&(P.async=!0);var y={hint:P};if(L)for(var W in L)y[W]=L[W];return _.showHint(y)},a.defineExtension("showHint",function(_){_=w(this,this.getCursor("start"),_);var P=this.listSelections();if(!(P.length>1)){if(this.somethingSelected()){if(!_.hint.supportsSelection)return;for(var L=0;L<P.length;L++)if(P[L].head.line!=P[L].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var y=this.state.completionActive=new f(this,_);!y.options.hint||(a.signal(this,"startCompletion",this),y.update(!0))}}),a.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function f(_,P){if(this.cm=_,this.options=P,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var L=this;_.on("cursorActivity",this.activityFunc=function(){L.cursorActivity()})}}var g=window.requestAnimationFrame||function(_){return setTimeout(_,1e3/60)},b=window.cancelAnimationFrame||clearTimeout;f.prototype={close:function(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&a.signal(this.data,"close"),this.widget&&this.widget.close(),a.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(_,P){var L=_.list[P],y=this;this.cm.operation(function(){L.hint?L.hint(y.cm,_,L):y.cm.replaceRange(k(L),L.from||_.from,L.to||_.to,"complete"),a.signal(_,"pick",L),y.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(b(this.debounce),this.debounce=0);var _=this.startPos;this.data&&(_=this.data.from);var P=this.cm.getCursor(),L=this.cm.getLine(P.line);if(P.line!=this.startPos.line||L.length-P.ch!=this.startLen-this.startPos.ch||P.ch<_.ch||this.cm.somethingSelected()||!P.ch||this.options.closeCharacters.test(L.charAt(P.ch-1)))this.close();else{var y=this;this.debounce=g(function(){y.update()}),this.widget&&this.widget.disable()}},update:function(_){if(this.tick!=null){var P=this,L=++this.tick;$(this.options.hint,this.cm,this.options,function(y){P.tick==L&&P.finishUpdate(y,_)})}},finishUpdate:function(_,P){this.data&&a.signal(this.data,"update");var L=this.widget&&this.widget.picked||P&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=_,_&&_.list.length&&(L&&_.list.length==1?this.pick(_,0):(this.widget=new E(this,_),a.signal(_,"shown")))}};function w(_,P,L){var y=_.options.hintOptions,W={};for(var j in V)W[j]=V[j];if(y)for(var j in y)y[j]!==void 0&&(W[j]=y[j]);if(L)for(var j in L)L[j]!==void 0&&(W[j]=L[j]);return W.hint.resolve&&(W.hint=W.hint.resolve(_,P)),W}function k(_){return typeof _=="string"?_:_.text}function T(_,P){var L={Up:function(){P.moveFocus(-1)},Down:function(){P.moveFocus(1)},PageUp:function(){P.moveFocus(-P.menuSize()+1,!0)},PageDown:function(){P.moveFocus(P.menuSize()-1,!0)},Home:function(){P.setFocus(0)},End:function(){P.setFocus(P.length-1)},Enter:P.pick,Tab:P.pick,Esc:P.close},y=/Mac/.test(navigator.platform);y&&(L["Ctrl-P"]=function(){P.moveFocus(-1)},L["Ctrl-N"]=function(){P.moveFocus(1)});var W=_.options.customKeys,j=W?{}:L;function A(oe,ve){var Ne;typeof ve!="string"?Ne=function(q){return ve(q,P)}:L.hasOwnProperty(ve)?Ne=L[ve]:Ne=ve,j[oe]=Ne}if(W)for(var X in W)W.hasOwnProperty(X)&&A(X,W[X]);var ue=_.options.extraKeys;if(ue)for(var X in ue)ue.hasOwnProperty(X)&&A(X,ue[X]);return j}function N(_,P){for(;P&&P!=_;){if(P.nodeName.toUpperCase()==="LI"&&P.parentNode==_)return P;P=P.parentNode}}function E(_,P){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=_,this.data=P,this.picked=!1;var L=this,y=_.cm,W=y.getInputField().ownerDocument,j=W.defaultView||W.parentWindow,A=this.hints=W.createElement("ul");A.setAttribute("role","listbox"),A.setAttribute("aria-expanded","true"),A.id=this.id;var X=_.cm.options.theme;A.className="CodeMirror-hints "+X,this.selectedHint=P.selectedHint||0;for(var ue=P.list,oe=0;oe<ue.length;++oe){var ve=A.appendChild(W.createElement("li")),Ne=ue[oe],q=l+(oe!=this.selectedHint?"":" "+u);Ne.className!=null&&(q=Ne.className+" "+q),ve.className=q,oe==this.selectedHint&&ve.setAttribute("aria-selected","true"),ve.id=this.id+"-"+oe,ve.setAttribute("role","option"),Ne.render?Ne.render(ve,P,Ne):ve.appendChild(W.createTextNode(Ne.displayText||k(Ne))),ve.hintId=oe}var z=_.options.container||W.body,R=y.cursorCoords(_.options.alignWithWord?P.from:null),Z=R.left,Ee=R.bottom,he=!0,ke=0,_e=0;if(z!==W.body){var Oe=["absolute","relative","fixed"].indexOf(j.getComputedStyle(z).position)!==-1,pt=Oe?z:z.offsetParent,$e=pt.getBoundingClientRect(),Fe=W.body.getBoundingClientRect();ke=$e.left-Fe.left-pt.scrollLeft,_e=$e.top-Fe.top-pt.scrollTop}A.style.left=Z-ke+"px",A.style.top=Ee-_e+"px";var xe=j.innerWidth||Math.max(W.body.offsetWidth,W.documentElement.offsetWidth),ae=j.innerHeight||Math.max(W.body.offsetHeight,W.documentElement.offsetHeight);z.appendChild(A),y.getInputField().setAttribute("aria-autocomplete","list"),y.getInputField().setAttribute("aria-owns",this.id),y.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var re=_.options.moveOnOverlap?A.getBoundingClientRect():new DOMRect,Ce=_.options.paddingForScrollbar?A.scrollHeight>A.clientHeight+1:!1,De;setTimeout(function(){De=y.getScrollInfo()});var kn=re.bottom-ae;if(kn>0){var Ae=re.bottom-re.top,ot=R.top-(R.bottom-re.top);if(ot-Ae>0)A.style.top=(Ee=R.top-Ae-_e)+"px",he=!1;else if(Ae>ae){A.style.height=ae-5+"px",A.style.top=(Ee=R.bottom-re.top-_e)+"px";var Ut=y.getCursor();P.from.ch!=Ut.ch&&(R=y.cursorCoords(Ut),A.style.left=(Z=R.left-ke)+"px",re=A.getBoundingClientRect())}}var Dt=re.right-xe;if(Ce&&(Dt+=y.display.nativeBarWidth),Dt>0&&(re.right-re.left>xe&&(A.style.width=xe-5+"px",Dt-=re.right-re.left-xe),A.style.left=(Z=R.left-Dt-ke)+"px"),Ce)for(var Re=A.firstChild;Re;Re=Re.nextSibling)Re.style.paddingRight=y.display.nativeBarWidth+"px";if(y.addKeyMap(this.keyMap=T(_,{moveFocus:function(st,gt){L.changeActive(L.selectedHint+st,gt)},setFocus:function(st){L.changeActive(st)},menuSize:function(){return L.screenAmount()},length:ue.length,close:function(){_.close()},pick:function(){L.pick()},data:P})),_.options.closeOnUnfocus){var xt;y.on("blur",this.onBlur=function(){xt=setTimeout(function(){_.close()},100)}),y.on("focus",this.onFocus=function(){clearTimeout(xt)})}y.on("scroll",this.onScroll=function(){var st=y.getScrollInfo(),gt=y.getWrapperElement().getBoundingClientRect();De||(De=y.getScrollInfo());var Cn=Ee+De.top-st.top,Zt=Cn-(j.pageYOffset||(W.documentElement||W.body).scrollTop);if(he||(Zt+=A.offsetHeight),Zt<=gt.top||Zt>=gt.bottom)return _.close();A.style.top=Cn+"px",A.style.left=Z+De.left-st.left+"px"}),a.on(A,"dblclick",function(st){var gt=N(A,st.target||st.srcElement);gt&&gt.hintId!=null&&(L.changeActive(gt.hintId),L.pick())}),a.on(A,"click",function(st){var gt=N(A,st.target||st.srcElement);gt&&gt.hintId!=null&&(L.changeActive(gt.hintId),_.options.completeOnSingleClick&&L.pick())}),a.on(A,"mousedown",function(){setTimeout(function(){y.focus()},20)});var Yt=this.getSelectedHintRange();return(Yt.from!==0||Yt.to!==0)&&this.scrollToActive(),a.signal(P,"select",ue[this.selectedHint],A.childNodes[this.selectedHint]),!0}E.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var _=this.completion.cm.getInputField();_.removeAttribute("aria-activedescendant"),_.removeAttribute("aria-owns");var P=this.completion.cm;this.completion.options.closeOnUnfocus&&(P.off("blur",this.onBlur),P.off("focus",this.onFocus)),P.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var _=this;this.keyMap={Enter:function(){_.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(_,P){if(_>=this.data.list.length?_=P?this.data.list.length-1:0:_<0&&(_=P?0:this.data.list.length-1),this.selectedHint!=_){var L=this.hints.childNodes[this.selectedHint];L&&(L.className=L.className.replace(" "+u,""),L.removeAttribute("aria-selected")),L=this.hints.childNodes[this.selectedHint=_],L.className+=" "+u,L.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",L.id),this.scrollToActive(),a.signal(this.data,"select",this.data.list[this.selectedHint],L)}},scrollToActive:function(){var _=this.getSelectedHintRange(),P=this.hints.childNodes[_.from],L=this.hints.childNodes[_.to],y=this.hints.firstChild;P.offsetTop<this.hints.scrollTop?this.hints.scrollTop=P.offsetTop-y.offsetTop:L.offsetTop+L.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=L.offsetTop+L.offsetHeight-this.hints.clientHeight+y.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var _=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-_),to:Math.min(this.data.list.length-1,this.selectedHint+_)}}};function M(_,P){if(!_.somethingSelected())return P;for(var L=[],y=0;y<P.length;y++)P[y].supportsSelection&&L.push(P[y]);return L}function $(_,P,L,y){if(_.async)_(P,y,L);else{var W=_(P,L);W&&W.then?W.then(y):y(W)}}function Y(_,P){var L=_.getHelpers(P,"hint"),y;if(L.length){var W=function(j,A,X){var ue=M(j,L);function oe(ve){if(ve==ue.length)return A(null);$(ue[ve],j,X,function(Ne){Ne&&Ne.list.length>0?A(Ne):oe(ve+1)})}oe(0)};return W.async=!0,W.supportsSelection=!0,W}else return(y=_.getHelper(_.getCursor(),"hintWords"))?function(j){return a.hint.fromList(j,{words:y})}:a.hint.anyword?function(j,A){return a.hint.anyword(j,A)}:function(){}}a.registerHelper("hint","auto",{resolve:Y}),a.registerHelper("hint","fromList",function(_,P){var L=_.getCursor(),y=_.getTokenAt(L),W,j=a.Pos(L.line,y.start),A=L;y.start<L.ch&&/\w/.test(y.string.charAt(L.ch-y.start-1))?W=y.string.substr(0,L.ch-y.start):(W="",j=L);for(var X=[],ue=0;ue<P.words.length;ue++){var oe=P.words[ue];oe.slice(0,W.length)==W&&X.push(oe)}if(X.length)return{list:X,from:j,to:A}}),a.commands.autocomplete=a.showHint;var V={hint:a.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};a.defineOption("hintOptions",null)})})();(function(i,o){(function(a){a(Nn.exports)})(function(a){var l=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),u=a.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function g(E){return E&&E.bracketRegex||/[(){}[\]]/}function b(E,M,$){var Y=E.getLineHandle(M.line),V=M.ch-1,_=$&&$.afterCursor;_==null&&(_=/(^| )cm-fat-cursor($| )/.test(E.getWrapperElement().className));var P=g($),L=!_&&V>=0&&P.test(Y.text.charAt(V))&&f[Y.text.charAt(V)]||P.test(Y.text.charAt(V+1))&&f[Y.text.charAt(++V)];if(!L)return null;var y=L.charAt(1)==">"?1:-1;if($&&$.strict&&y>0!=(V==M.ch))return null;var W=E.getTokenTypeAt(u(M.line,V+1)),j=w(E,u(M.line,V+(y>0?1:0)),y,W,$);return j==null?null:{from:u(M.line,V),to:j&&j.pos,match:j&&j.ch==L.charAt(0),forward:y>0}}function w(E,M,$,Y,V){for(var _=V&&V.maxScanLineLength||1e4,P=V&&V.maxScanLines||1e3,L=[],y=g(V),W=$>0?Math.min(M.line+P,E.lastLine()+1):Math.max(E.firstLine()-1,M.line-P),j=M.line;j!=W;j+=$){var A=E.getLine(j);if(!!A){var X=$>0?0:A.length-1,ue=$>0?A.length:-1;if(!(A.length>_))for(j==M.line&&(X=M.ch-($<0?1:0));X!=ue;X+=$){var oe=A.charAt(X);if(y.test(oe)&&(Y===void 0||(E.getTokenTypeAt(u(j,X+1))||"")==(Y||""))){var ve=f[oe];if(ve&&ve.charAt(1)==">"==$>0)L.push(oe);else if(L.length)L.pop();else return{pos:u(j,X),ch:oe}}}}}return j-$==($>0?E.lastLine():E.firstLine())?!1:null}function k(E,M,$){for(var Y=E.state.matchBrackets.maxHighlightLineLength||1e3,V=$&&$.highlightNonMatching,_=[],P=E.listSelections(),L=0;L<P.length;L++){var y=P[L].empty()&&b(E,P[L].head,$);if(y&&(y.match||V!==!1)&&E.getLine(y.from.line).length<=Y){var W=y.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";_.push(E.markText(y.from,u(y.from.line,y.from.ch+1),{className:W})),y.to&&E.getLine(y.to.line).length<=Y&&_.push(E.markText(y.to,u(y.to.line,y.to.ch+1),{className:W}))}}if(_.length){l&&E.state.focused&&E.focus();var j=function(){E.operation(function(){for(var A=0;A<_.length;A++)_[A].clear()})};if(M)setTimeout(j,800);else return j}}function T(E){E.operation(function(){E.state.matchBrackets.currentlyHighlighted&&(E.state.matchBrackets.currentlyHighlighted(),E.state.matchBrackets.currentlyHighlighted=null),E.state.matchBrackets.currentlyHighlighted=k(E,!1,E.state.matchBrackets)})}function N(E){E.state.matchBrackets&&E.state.matchBrackets.currentlyHighlighted&&(E.state.matchBrackets.currentlyHighlighted(),E.state.matchBrackets.currentlyHighlighted=null)}a.defineOption("matchBrackets",!1,function(E,M,$){$&&$!=a.Init&&(E.off("cursorActivity",T),E.off("focus",T),E.off("blur",N),N(E)),M&&(E.state.matchBrackets=typeof M=="object"?M:{},E.on("cursorActivity",T),E.on("focus",T),E.on("blur",N))}),a.defineExtension("matchBrackets",function(){k(this,!0)}),a.defineExtension("findMatchingBracket",function(E,M,$){return($||typeof M=="boolean")&&($?($.strict=M,M=$):M=M?{strict:!0}:null),b(this,E,M)}),a.defineExtension("scanForBracket",function(E,M,$,Y){return w(this,E,M,$,Y)})})})();(function(i,o){(function(a){a(Nn.exports)})(function(a){var l={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},u=a.Pos;a.defineOption("autoCloseBrackets",!1,function(_,P,L){L&&L!=a.Init&&(_.removeKeyMap(g),_.state.closeBrackets=null),P&&(b(f(P,"pairs")),_.state.closeBrackets=P,_.addKeyMap(g))});function f(_,P){return P=="pairs"&&typeof _=="string"?_:typeof _=="object"&&_[P]!=null?_[P]:l[P]}var g={Backspace:T,Enter:N};function b(_){for(var P=0;P<_.length;P++){var L=_.charAt(P),y="'"+L+"'";g[y]||(g[y]=w(L))}}b(l.pairs+"`");function w(_){return function(P){return $(P,_)}}function k(_){var P=_.state.closeBrackets;if(!P||P.override)return P;var L=_.getModeAt(_.getCursor());return L.closeBrackets||P}function T(_){var P=k(_);if(!P||_.getOption("disableInput"))return a.Pass;for(var L=f(P,"pairs"),y=_.listSelections(),W=0;W<y.length;W++){if(!y[W].empty())return a.Pass;var j=Y(_,y[W].head);if(!j||L.indexOf(j)%2!=0)return a.Pass}for(var W=y.length-1;W>=0;W--){var A=y[W].head;_.replaceRange("",u(A.line,A.ch-1),u(A.line,A.ch+1),"+delete")}}function N(_){var P=k(_),L=P&&f(P,"explode");if(!L||_.getOption("disableInput"))return a.Pass;for(var y=_.listSelections(),W=0;W<y.length;W++){if(!y[W].empty())return a.Pass;var j=Y(_,y[W].head);if(!j||L.indexOf(j)%2!=0)return a.Pass}_.operation(function(){var A=_.lineSeparator()||`
`;_.replaceSelection(A+A,null),E(_,-1),y=_.listSelections();for(var X=0;X<y.length;X++){var ue=y[X].head.line;_.indentLine(ue,null,!0),_.indentLine(ue+1,null,!0)}})}function E(_,P){for(var L=[],y=_.listSelections(),W=0,j=0;j<y.length;j++){var A=y[j];A.head==_.getCursor()&&(W=j);var X=A.head.ch||P>0?{line:A.head.line,ch:A.head.ch+P}:{line:A.head.line-1};L.push({anchor:X,head:X})}_.setSelections(L,W)}function M(_){var P=a.cmpPos(_.anchor,_.head)>0;return{anchor:new u(_.anchor.line,_.anchor.ch+(P?-1:1)),head:new u(_.head.line,_.head.ch+(P?1:-1))}}function $(_,P){var L=k(_);if(!L||_.getOption("disableInput"))return a.Pass;var y=f(L,"pairs"),W=y.indexOf(P);if(W==-1)return a.Pass;for(var j=f(L,"closeBefore"),A=f(L,"triples"),X=y.charAt(W+1)==P,ue=_.listSelections(),oe=W%2==0,ve,Ne=0;Ne<ue.length;Ne++){var q=ue[Ne],z=q.head,R,Z=_.getRange(z,u(z.line,z.ch+1));if(oe&&!q.empty())R="surround";else if((X||!oe)&&Z==P)X&&V(_,z)?R="both":A.indexOf(P)>=0&&_.getRange(z,u(z.line,z.ch+3))==P+P+P?R="skipThree":R="skip";else if(X&&z.ch>1&&A.indexOf(P)>=0&&_.getRange(u(z.line,z.ch-2),z)==P+P){if(z.ch>2&&/\bstring/.test(_.getTokenTypeAt(u(z.line,z.ch-2))))return a.Pass;R="addFour"}else if(X){var Ee=z.ch==0?" ":_.getRange(u(z.line,z.ch-1),z);if(!a.isWordChar(Z)&&Ee!=P&&!a.isWordChar(Ee))R="both";else return a.Pass}else if(oe&&(Z.length===0||/\s/.test(Z)||j.indexOf(Z)>-1))R="both";else return a.Pass;if(!ve)ve=R;else if(ve!=R)return a.Pass}var he=W%2?y.charAt(W-1):P,ke=W%2?P:y.charAt(W+1);_.operation(function(){if(ve=="skip")E(_,1);else if(ve=="skipThree")E(_,3);else if(ve=="surround"){for(var _e=_.getSelections(),Oe=0;Oe<_e.length;Oe++)_e[Oe]=he+_e[Oe]+ke;_.replaceSelections(_e,"around"),_e=_.listSelections().slice();for(var Oe=0;Oe<_e.length;Oe++)_e[Oe]=M(_e[Oe]);_.setSelections(_e)}else ve=="both"?(_.replaceSelection(he+ke,null),_.triggerElectric(he+ke),E(_,-1)):ve=="addFour"&&(_.replaceSelection(he+he+he+he,"before"),E(_,1))})}function Y(_,P){var L=_.getRange(u(P.line,P.ch-1),u(P.line,P.ch+1));return L.length==2?L:null}function V(_,P){var L=_.getTokenAt(u(P.line,P.ch+1));return/\bstring/.test(L.type)&&L.start==P.ch&&(P.ch==0||!/\bstring/.test(_.getTokenTypeAt(P)))}})})();(function(i,o){(function(a){a(Nn.exports)})(function(a){a.runMode=function(l,u,f,g){var b=a.getMode(a.defaults,u),w=g&&g.tabSize||a.defaults.tabSize;if(f.appendChild){var k=/MSIE \d/.test(navigator.userAgent),T=k&&(document.documentMode==null||document.documentMode<9),N=f,E=0;N.innerHTML="",f=function(L,y){if(L==`
`){N.appendChild(document.createTextNode(T?"\r":L)),E=0;return}for(var W="",j=0;;){var A=L.indexOf("	",j);if(A==-1){W+=L.slice(j),E+=L.length-j;break}else{E+=A-j,W+=L.slice(j,A);var X=w-E%w;E+=X;for(var ue=0;ue<X;++ue)W+=" ";j=A+1}}if(y){var oe=N.appendChild(document.createElement("span"));oe.className="cm-"+y.replace(/ +/g," cm-"),oe.appendChild(document.createTextNode(W))}else N.appendChild(document.createTextNode(W))}}for(var M=a.splitLines(l),$=g&&g.state||a.startState(b),Y=0,V=M.length;Y<V;++Y){Y&&f(`
`);var _=new a.StringStream(M[Y],null,{lookAhead:function(L){return M[Y+L]},baseToken:function(){}});for(!_.string&&b.blankLine&&b.blankLine($);!_.eol();){var P=b.token(_,$);f(_.current(),P,Y,_.start,$,b),_.start=_.pos}}}})})();function Ju(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Zr=Ju();function Id(i){Zr=i}const Wd=/[&<>"']/,Hd=/[&<>"']/g,Fd=/[<>"']|&(?!#?\w+;)/,qd=/[<>"']|&(?!#?\w+;)/g,zd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ru=i=>zd[i];function Tt(i,o){if(o){if(Wd.test(i))return i.replace(Hd,Ru)}else if(Fd.test(i))return i.replace(qd,Ru);return i}const Bd=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Qu(i){return i.replace(Bd,(o,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}const jd=/(^|[^\[])\^/g;function Ke(i,o){i=typeof i=="string"?i:i.source,o=o||"";const a={replace:(l,u)=>(u=u.source||u,u=u.replace(jd,"$1"),i=i.replace(l,u),a),getRegex:()=>new RegExp(i,o)};return a}const Ud=/[^\w:]/g,$d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function _u(i,o,a){if(i){let l;try{l=decodeURIComponent(Qu(a)).replace(Ud,"").toLowerCase()}catch{return null}if(l.indexOf("javascript:")===0||l.indexOf("vbscript:")===0||l.indexOf("data:")===0)return null}o&&!$d.test(a)&&(a=Yd(o,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}const go={},Gd=/^[^:]+:\/*[^/]*$/,Kd=/^([^:]+:)[\s\S]*$/,Xd=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Yd(i,o){go[" "+i]||(Gd.test(i)?go[" "+i]=i+"/":go[" "+i]=yo(i,"/",!0)),i=go[" "+i];const a=i.indexOf(":")===-1;return o.substring(0,2)==="//"?a?o:i.replace(Kd,"$1")+o:o.charAt(0)==="/"?a?o:i.replace(Xd,"$1")+o:i+o}const wo={exec:function(){}};function wn(i){let o=1,a,l;for(;o<arguments.length;o++){a=arguments[o];for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i}function Lu(i,o){const a=i.replace(/\|/g,(f,g,b)=>{let w=!1,k=g;for(;--k>=0&&b[k]==="\\";)w=!w;return w?"|":" |"}),l=a.split(/ \|/);let u=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),l.length>o)l.splice(o);else for(;l.length<o;)l.push("");for(;u<l.length;u++)l[u]=l[u].trim().replace(/\\\|/g,"|");return l}function yo(i,o,a){const l=i.length;if(l===0)return"";let u=0;for(;u<l;){const f=i.charAt(l-u-1);if(f===o&&!a)u++;else if(f!==o&&a)u++;else break}return i.slice(0,l-u)}function Zd(i,o){if(i.indexOf(o[1])===-1)return-1;const a=i.length;let l=0,u=0;for(;u<a;u++)if(i[u]==="\\")u++;else if(i[u]===o[0])l++;else if(i[u]===o[1]&&(l--,l<0))return u;return-1}function Vu(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Eu(i,o){if(o<1)return"";let a="";for(;o>1;)o&1&&(a+=i),o>>=1,i+=i;return a+i}function Mu(i,o,a,l){const u=o.href,f=o.title?Tt(o.title):null,g=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){l.state.inLink=!0;const b={type:"link",raw:a,href:u,title:f,text:g,tokens:l.inlineTokens(g,[])};return l.state.inLink=!1,b}return{type:"image",raw:a,href:u,title:f,text:Tt(g)}}function Jd(i,o){const a=i.match(/^(\s+)(?:```)/);if(a===null)return o;const l=a[1];return o.split(`
`).map(u=>{const f=u.match(/^\s+/);if(f===null)return u;const[g]=f;return g.length>=l.length?u.slice(l.length):u}).join(`
`)}class ya{constructor(o){this.options=o||Zr}space(o){const a=this.rules.block.newline.exec(o);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(o){const a=this.rules.block.code.exec(o);if(a){const l=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?l:yo(l,`
`)}}}fences(o){const a=this.rules.block.fences.exec(o);if(a){const l=a[0],u=Jd(l,a[3]||"");return{type:"code",raw:l,lang:a[2]?a[2].trim():a[2],text:u}}}heading(o){const a=this.rules.block.heading.exec(o);if(a){let l=a[2].trim();if(/#$/.test(l)){const f=yo(l,"#");(this.options.pedantic||!f||/ $/.test(f))&&(l=f.trim())}const u={type:"heading",raw:a[0],depth:a[1].length,text:l,tokens:[]};return this.lexer.inline(u.text,u.tokens),u}}hr(o){const a=this.rules.block.hr.exec(o);if(a)return{type:"hr",raw:a[0]}}blockquote(o){const a=this.rules.block.blockquote.exec(o);if(a){const l=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(o){let a=this.rules.block.list.exec(o);if(a){let l,u,f,g,b,w,k,T,N,E,M,$,Y=a[1].trim();const V=Y.length>1,_={type:"list",raw:"",ordered:V,start:V?+Y.slice(0,-1):"",loose:!1,items:[]};Y=V?`\\d{1,9}\\${Y.slice(-1)}`:`\\${Y}`,this.options.pedantic&&(Y=V?Y:"[*+-]");const P=new RegExp(`^( {0,3}${Y})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;o&&($=!1,!(!(a=P.exec(o))||this.rules.block.hr.test(o)));){if(l=a[0],o=o.substring(l.length),T=a[2].split(`
`,1)[0],N=o.split(`
`,1)[0],this.options.pedantic?(g=2,M=T.trimLeft()):(g=a[2].search(/[^ ]/),g=g>4?1:g,M=T.slice(g),g+=a[1].length),w=!1,!T&&/^ *$/.test(N)&&(l+=N+`
`,o=o.substring(N.length+1),$=!0),!$){const y=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),W=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),j=new RegExp(`^( {0,${Math.min(3,g-1)}})(\`\`\`|~~~)`);for(;o&&(E=o.split(`
`,1)[0],T=E,this.options.pedantic&&(T=T.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(j.test(T)||this.rules.block.heading.test(T)||y.test(T)||W.test(o)));){if(T.search(/[^ ]/)>=g||!T.trim())M+=`
`+T.slice(g);else if(!w)M+=`
`+T;else break;!w&&!T.trim()&&(w=!0),l+=E+`
`,o=o.substring(E.length+1)}}_.loose||(k?_.loose=!0:/\n *\n *$/.test(l)&&(k=!0)),this.options.gfm&&(u=/^\[[ xX]\] /.exec(M),u&&(f=u[0]!=="[ ] ",M=M.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:l,task:!!u,checked:f,loose:!1,text:M}),_.raw+=l}_.items[_.items.length-1].raw=l.trimRight(),_.items[_.items.length-1].text=M.trimRight(),_.raw=_.raw.trimRight();const L=_.items.length;for(b=0;b<L;b++){this.lexer.state.top=!1,_.items[b].tokens=this.lexer.blockTokens(_.items[b].text,[]);const y=_.items[b].tokens.filter(j=>j.type==="space"),W=y.every(j=>{const A=j.raw.split("");let X=0;for(const ue of A)if(ue===`
`&&(X+=1),X>1)return!0;return!1});!_.loose&&y.length&&W&&(_.loose=!0,_.items[b].loose=!0)}return _}}html(o){const a=this.rules.block.html.exec(o);if(a){const l={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};return this.options.sanitize&&(l.type="paragraph",l.text=this.options.sanitizer?this.options.sanitizer(a[0]):Tt(a[0]),l.tokens=[],this.lexer.inline(l.text,l.tokens)),l}}def(o){const a=this.rules.block.def.exec(o);if(a){a[3]&&(a[3]=a[3].substring(1,a[3].length-1));const l=a[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:l,raw:a[0],href:a[2],title:a[3]}}}table(o){const a=this.rules.block.table.exec(o);if(a){const l={type:"table",header:Lu(a[1]).map(u=>({text:u})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=a[0];let u=l.align.length,f,g,b,w;for(f=0;f<u;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(u=l.rows.length,f=0;f<u;f++)l.rows[f]=Lu(l.rows[f],l.header.length).map(k=>({text:k}));for(u=l.header.length,g=0;g<u;g++)l.header[g].tokens=[],this.lexer.inline(l.header[g].text,l.header[g].tokens);for(u=l.rows.length,g=0;g<u;g++)for(w=l.rows[g],b=0;b<w.length;b++)w[b].tokens=[],this.lexer.inline(w[b].text,w[b].tokens);return l}}}lheading(o){const a=this.rules.block.lheading.exec(o);if(a){const l={type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}paragraph(o){const a=this.rules.block.paragraph.exec(o);if(a){const l={type:"paragraph",raw:a[0],text:a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}text(o){const a=this.rules.block.text.exec(o);if(a){const l={type:"text",raw:a[0],text:a[0],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}escape(o){const a=this.rules.inline.escape.exec(o);if(a)return{type:"escape",raw:a[0],text:Tt(a[1])}}tag(o){const a=this.rules.inline.tag.exec(o);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):Tt(a[0]):a[0]}}link(o){const a=this.rules.inline.link.exec(o);if(a){const l=a[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;const g=yo(l.slice(0,-1),"\\");if((l.length-g.length)%2===0)return}else{const g=Zd(a[2],"()");if(g>-1){const w=(a[0].indexOf("!")===0?5:4)+a[1].length+g;a[2]=a[2].substring(0,g),a[0]=a[0].substring(0,w).trim(),a[3]=""}}let u=a[2],f="";if(this.options.pedantic){const g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);g&&(u=g[1],f=g[3])}else f=a[3]?a[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(l)?u=u.slice(1):u=u.slice(1,-1)),Mu(a,{href:u&&u.replace(this.rules.inline._escapes,"$1"),title:f&&f.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(o,a){let l;if((l=this.rules.inline.reflink.exec(o))||(l=this.rules.inline.nolink.exec(o))){let u=(l[2]||l[1]).replace(/\s+/g," ");if(u=a[u.toLowerCase()],!u||!u.href){const f=l[0].charAt(0);return{type:"text",raw:f,text:f}}return Mu(l,u,l[0],this.lexer)}}emStrong(o,a,l=""){let u=this.rules.inline.emStrong.lDelim.exec(o);if(!u||u[3]&&l.match(/[\p{L}\p{N}]/u))return;const f=u[1]||u[2]||"";if(!f||f&&(l===""||this.rules.inline.punctuation.exec(l))){const g=u[0].length-1;let b,w,k=g,T=0;const N=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(N.lastIndex=0,a=a.slice(-1*o.length+g);(u=N.exec(a))!=null;){if(b=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!b)continue;if(w=b.length,u[3]||u[4]){k+=w;continue}else if((u[5]||u[6])&&g%3&&!((g+w)%3)){T+=w;continue}if(k-=w,k>0)continue;if(w=Math.min(w,w+k+T),Math.min(g,w)%2){const M=o.slice(1,g+u.index+w);return{type:"em",raw:o.slice(0,g+u.index+w+1),text:M,tokens:this.lexer.inlineTokens(M,[])}}const E=o.slice(2,g+u.index+w-1);return{type:"strong",raw:o.slice(0,g+u.index+w+1),text:E,tokens:this.lexer.inlineTokens(E,[])}}}}codespan(o){const a=this.rules.inline.code.exec(o);if(a){let l=a[2].replace(/\n/g," ");const u=/[^ ]/.test(l),f=/^ /.test(l)&&/ $/.test(l);return u&&f&&(l=l.substring(1,l.length-1)),l=Tt(l,!0),{type:"codespan",raw:a[0],text:l}}}br(o){const a=this.rules.inline.br.exec(o);if(a)return{type:"br",raw:a[0]}}del(o){const a=this.rules.inline.del.exec(o);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2],[])}}autolink(o,a){const l=this.rules.inline.autolink.exec(o);if(l){let u,f;return l[2]==="@"?(u=Tt(this.options.mangle?a(l[1]):l[1]),f="mailto:"+u):(u=Tt(l[1]),f=u),{type:"link",raw:l[0],text:u,href:f,tokens:[{type:"text",raw:u,text:u}]}}}url(o,a){let l;if(l=this.rules.inline.url.exec(o)){let u,f;if(l[2]==="@")u=Tt(this.options.mangle?a(l[0]):l[0]),f="mailto:"+u;else{let g;do g=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(g!==l[0]);u=Tt(l[0]),l[1]==="www."?f="http://"+u:f=u}return{type:"link",raw:l[0],text:u,href:f,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(o,a){const l=this.rules.inline.text.exec(o);if(l){let u;return this.lexer.state.inRawBlock?u=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):Tt(l[0]):l[0]:u=Tt(this.options.smartypants?a(l[0]):l[0]),{type:"text",raw:l[0],text:u}}}}const we={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:wo,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};we._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;we._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;we.def=Ke(we.def).replace("label",we._label).replace("title",we._title).getRegex();we.bullet=/(?:[*+-]|\d{1,9}[.)])/;we.listItemStart=Ke(/^( *)(bull) */).replace("bull",we.bullet).getRegex();we.list=Ke(we.list).replace(/bull/g,we.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+we.def.source+")").getRegex();we._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";we._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;we.html=Ke(we.html,"i").replace("comment",we._comment).replace("tag",we._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();we.paragraph=Ke(we._paragraph).replace("hr",we.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.blockquote=Ke(we.blockquote).replace("paragraph",we.paragraph).getRegex();we.normal=wn({},we);we.gfm=wn({},we.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});we.gfm.table=Ke(we.gfm.table).replace("hr",we.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.gfm.paragraph=Ke(we._paragraph).replace("hr",we.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",we.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.pedantic=wn({},we.normal,{html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",we._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wo,paragraph:Ke(we.normal._paragraph).replace("hr",we.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",we.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const fe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:wo,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:wo,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};fe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";fe.punctuation=Ke(fe.punctuation).replace(/punctuation/g,fe._punctuation).getRegex();fe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;fe.escapedEmSt=/\\\*|\\_/g;fe._comment=Ke(we._comment).replace("(?:-->|$)","-->").getRegex();fe.emStrong.lDelim=Ke(fe.emStrong.lDelim).replace(/punct/g,fe._punctuation).getRegex();fe.emStrong.rDelimAst=Ke(fe.emStrong.rDelimAst,"g").replace(/punct/g,fe._punctuation).getRegex();fe.emStrong.rDelimUnd=Ke(fe.emStrong.rDelimUnd,"g").replace(/punct/g,fe._punctuation).getRegex();fe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;fe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;fe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;fe.autolink=Ke(fe.autolink).replace("scheme",fe._scheme).replace("email",fe._email).getRegex();fe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;fe.tag=Ke(fe.tag).replace("comment",fe._comment).replace("attribute",fe._attribute).getRegex();fe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;fe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;fe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;fe.link=Ke(fe.link).replace("label",fe._label).replace("href",fe._href).replace("title",fe._title).getRegex();fe.reflink=Ke(fe.reflink).replace("label",fe._label).replace("ref",we._label).getRegex();fe.nolink=Ke(fe.nolink).replace("ref",we._label).getRegex();fe.reflinkSearch=Ke(fe.reflinkSearch,"g").replace("reflink",fe.reflink).replace("nolink",fe.nolink).getRegex();fe.normal=wn({},fe);fe.pedantic=wn({},fe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",fe._label).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fe._label).getRegex()});fe.gfm=wn({},fe.normal,{escape:Ke(fe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});fe.gfm.url=Ke(fe.gfm.url,"i").replace("email",fe.gfm._extended_email).getRegex();fe.breaks=wn({},fe.gfm,{br:Ke(fe.br).replace("{2,}","*").getRegex(),text:Ke(fe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Qd(i){return i.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Du(i){let o="",a,l;const u=i.length;for(a=0;a<u;a++)l=i.charCodeAt(a),Math.random()>.5&&(l="x"+l.toString(16)),o+="&#"+l+";";return o}class Un{constructor(o){this.tokens=[],this.tokens.links=Object.create(null),this.options=o||Zr,this.options.tokenizer=this.options.tokenizer||new ya,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const a={block:we.normal,inline:fe.normal};this.options.pedantic?(a.block=we.pedantic,a.inline=fe.pedantic):this.options.gfm&&(a.block=we.gfm,this.options.breaks?a.inline=fe.breaks:a.inline=fe.gfm),this.tokenizer.rules=a}static get rules(){return{block:we,inline:fe}}static lex(o,a){return new Un(a).lex(o)}static lexInline(o,a){return new Un(a).inlineTokens(o)}lex(o){o=o.replace(/\r\n|\r/g,`
`),this.blockTokens(o,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(o,a=[]){this.options.pedantic?o=o.replace(/\t/g,"    ").replace(/^ +$/gm,""):o=o.replace(/^( *)(\t+)/gm,(b,w,k)=>w+"    ".repeat(k.length));let l,u,f,g;for(;o;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(b=>(l=b.call({lexer:this},o,a))?(o=o.substring(l.raw.length),a.push(l),!0):!1))){if(l=this.tokenizer.space(o)){o=o.substring(l.raw.length),l.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(l);continue}if(l=this.tokenizer.code(o)){o=o.substring(l.raw.length),u=a[a.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):a.push(l);continue}if(l=this.tokenizer.fences(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.heading(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.hr(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.blockquote(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.list(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.html(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.def(o)){o=o.substring(l.raw.length),u=a[a.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.lheading(o)){o=o.substring(l.raw.length),a.push(l);continue}if(f=o,this.options.extensions&&this.options.extensions.startBlock){let b=1/0;const w=o.slice(1);let k;this.options.extensions.startBlock.forEach(function(T){k=T.call({lexer:this},w),typeof k=="number"&&k>=0&&(b=Math.min(b,k))}),b<1/0&&b>=0&&(f=o.substring(0,b+1))}if(this.state.top&&(l=this.tokenizer.paragraph(f))){u=a[a.length-1],g&&u.type==="paragraph"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):a.push(l),g=f.length!==o.length,o=o.substring(l.raw.length);continue}if(l=this.tokenizer.text(o)){o=o.substring(l.raw.length),u=a[a.length-1],u&&u.type==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):a.push(l);continue}if(o){const b="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(b);break}else throw new Error(b)}}return this.state.top=!0,a}inline(o,a){this.inlineQueue.push({src:o,tokens:a})}inlineTokens(o,a=[]){let l,u,f,g=o,b,w,k;if(this.tokens.links){const T=Object.keys(this.tokens.links);if(T.length>0)for(;(b=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)T.includes(b[0].slice(b[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,b.index)+"["+Eu("a",b[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(b=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,b.index)+"["+Eu("a",b[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(b=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,b.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;o;)if(w||(k=""),w=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(T=>(l=T.call({lexer:this},o,a))?(o=o.substring(l.raw.length),a.push(l),!0):!1))){if(l=this.tokenizer.escape(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.tag(o)){o=o.substring(l.raw.length),u=a[a.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):a.push(l);continue}if(l=this.tokenizer.link(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.reflink(o,this.tokens.links)){o=o.substring(l.raw.length),u=a[a.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):a.push(l);continue}if(l=this.tokenizer.emStrong(o,g,k)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.codespan(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.br(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.del(o)){o=o.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.autolink(o,Du)){o=o.substring(l.raw.length),a.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(o,Du))){o=o.substring(l.raw.length),a.push(l);continue}if(f=o,this.options.extensions&&this.options.extensions.startInline){let T=1/0;const N=o.slice(1);let E;this.options.extensions.startInline.forEach(function(M){E=M.call({lexer:this},N),typeof E=="number"&&E>=0&&(T=Math.min(T,E))}),T<1/0&&T>=0&&(f=o.substring(0,T+1))}if(l=this.tokenizer.inlineText(f,Qd)){o=o.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(k=l.raw.slice(-1)),w=!0,u=a[a.length-1],u&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):a.push(l);continue}if(o){const T="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(T);break}else throw new Error(T)}}return a}}class ba{constructor(o){this.options=o||Zr}code(o,a,l){const u=(a||"").match(/\S*/)[0];if(this.options.highlight){const f=this.options.highlight(o,u);f!=null&&f!==o&&(l=!0,o=f)}return o=o.replace(/\n$/,"")+`
`,u?'<pre><code class="'+this.options.langPrefix+Tt(u,!0)+'">'+(l?o:Tt(o,!0))+`</code></pre>
`:"<pre><code>"+(l?o:Tt(o,!0))+`</code></pre>
`}blockquote(o){return`<blockquote>
${o}</blockquote>
`}html(o){return o}heading(o,a,l,u){if(this.options.headerIds){const f=this.options.headerPrefix+u.slug(l);return`<h${a} id="${f}">${o}</h${a}>
`}return`<h${a}>${o}</h${a}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(o,a,l){const u=a?"ol":"ul",f=a&&l!==1?' start="'+l+'"':"";return"<"+u+f+`>
`+o+"</"+u+`>
`}listitem(o){return`<li>${o}</li>
`}checkbox(o){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(o){return`<p>${o}</p>
`}table(o,a){return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+o+`</thead>
`+a+`</table>
`}tablerow(o){return`<tr>
${o}</tr>
`}tablecell(o,a){const l=a.header?"th":"td";return(a.align?`<${l} align="${a.align}">`:`<${l}>`)+o+`</${l}>
`}strong(o){return`<strong>${o}</strong>`}em(o){return`<em>${o}</em>`}codespan(o){return`<code>${o}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(o){return`<del>${o}</del>`}link(o,a,l){if(o=_u(this.options.sanitize,this.options.baseUrl,o),o===null)return l;let u='<a href="'+Tt(o)+'"';return a&&(u+=' title="'+a+'"'),u+=">"+l+"</a>",u}image(o,a,l){if(o=_u(this.options.sanitize,this.options.baseUrl,o),o===null)return l;let u=`<img src="${o}" alt="${l}"`;return a&&(u+=` title="${a}"`),u+=this.options.xhtml?"/>":">",u}text(o){return o}}class ec{strong(o){return o}em(o){return o}codespan(o){return o}del(o){return o}html(o){return o}text(o){return o}link(o,a,l){return""+l}image(o,a,l){return""+l}br(){return""}}class tc{constructor(){this.seen={}}serialize(o){return o.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(o,a){let l=o,u=0;if(this.seen.hasOwnProperty(l)){u=this.seen[o];do u++,l=o+"-"+u;while(this.seen.hasOwnProperty(l))}return a||(this.seen[o]=u,this.seen[l]=0),l}slug(o,a={}){const l=this.serialize(o);return this.getNextSafeSlug(l,a.dryrun)}}class $n{constructor(o){this.options=o||Zr,this.options.renderer=this.options.renderer||new ba,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ec,this.slugger=new tc}static parse(o,a){return new $n(a).parse(o)}static parseInline(o,a){return new $n(a).parseInline(o)}parse(o,a=!0){let l="",u,f,g,b,w,k,T,N,E,M,$,Y,V,_,P,L,y,W,j;const A=o.length;for(u=0;u<A;u++){if(M=o[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[M.type]&&(j=this.options.extensions.renderers[M.type].call({parser:this},M),j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(M.type))){l+=j||"";continue}switch(M.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{l+=this.renderer.heading(this.parseInline(M.tokens),M.depth,Qu(this.parseInline(M.tokens,this.textRenderer)),this.slugger);continue}case"code":{l+=this.renderer.code(M.text,M.lang,M.escaped);continue}case"table":{for(N="",T="",b=M.header.length,f=0;f<b;f++)T+=this.renderer.tablecell(this.parseInline(M.header[f].tokens),{header:!0,align:M.align[f]});for(N+=this.renderer.tablerow(T),E="",b=M.rows.length,f=0;f<b;f++){for(k=M.rows[f],T="",w=k.length,g=0;g<w;g++)T+=this.renderer.tablecell(this.parseInline(k[g].tokens),{header:!1,align:M.align[g]});E+=this.renderer.tablerow(T)}l+=this.renderer.table(N,E);continue}case"blockquote":{E=this.parse(M.tokens),l+=this.renderer.blockquote(E);continue}case"list":{for($=M.ordered,Y=M.start,V=M.loose,b=M.items.length,E="",f=0;f<b;f++)P=M.items[f],L=P.checked,y=P.task,_="",P.task&&(W=this.renderer.checkbox(L),V?P.tokens.length>0&&P.tokens[0].type==="paragraph"?(P.tokens[0].text=W+" "+P.tokens[0].text,P.tokens[0].tokens&&P.tokens[0].tokens.length>0&&P.tokens[0].tokens[0].type==="text"&&(P.tokens[0].tokens[0].text=W+" "+P.tokens[0].tokens[0].text)):P.tokens.unshift({type:"text",text:W}):_+=W),_+=this.parse(P.tokens,V),E+=this.renderer.listitem(_,y,L);l+=this.renderer.list(E,$,Y);continue}case"html":{l+=this.renderer.html(M.text);continue}case"paragraph":{l+=this.renderer.paragraph(this.parseInline(M.tokens));continue}case"text":{for(E=M.tokens?this.parseInline(M.tokens):M.text;u+1<A&&o[u+1].type==="text";)M=o[++u],E+=`
`+(M.tokens?this.parseInline(M.tokens):M.text);l+=a?this.renderer.paragraph(E):E;continue}default:{const X='Token with "'+M.type+'" type was not found.';if(this.options.silent){console.error(X);return}else throw new Error(X)}}}return l}parseInline(o,a){a=a||this.renderer;let l="",u,f,g;const b=o.length;for(u=0;u<b;u++){if(f=o[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(g=this.options.extensions.renderers[f.type].call({parser:this},f),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type))){l+=g||"";continue}switch(f.type){case"escape":{l+=a.text(f.text);break}case"html":{l+=a.html(f.text);break}case"link":{l+=a.link(f.href,f.title,this.parseInline(f.tokens,a));break}case"image":{l+=a.image(f.href,f.title,f.text);break}case"strong":{l+=a.strong(this.parseInline(f.tokens,a));break}case"em":{l+=a.em(this.parseInline(f.tokens,a));break}case"codespan":{l+=a.codespan(f.text);break}case"br":{l+=a.br();break}case"del":{l+=a.del(this.parseInline(f.tokens,a));break}case"text":{l+=a.text(f.text);break}default:{const w='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return l}}function Se(i,o,a){if(typeof i=="undefined"||i===null)throw new Error("marked(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");if(typeof o=="function"&&(a=o,o=null),o=wn({},Se.defaults,o||{}),Vu(o),a){const l=o.highlight;let u;try{u=Un.lex(i,o)}catch(b){return a(b)}const f=function(b){let w;if(!b)try{o.walkTokens&&Se.walkTokens(u,o.walkTokens),w=$n.parse(u,o)}catch(k){b=k}return o.highlight=l,b?a(b):a(null,w)};if(!l||l.length<3||(delete o.highlight,!u.length))return f();let g=0;Se.walkTokens(u,function(b){b.type==="code"&&(g++,setTimeout(()=>{l(b.text,b.lang,function(w,k){if(w)return f(w);k!=null&&k!==b.text&&(b.text=k,b.escaped=!0),g--,g===0&&f()})},0))}),g===0&&f();return}try{const l=Un.lex(i,o);return o.walkTokens&&Se.walkTokens(l,o.walkTokens),$n.parse(l,o)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+Tt(l.message+"",!0)+"</pre>";throw l}}Se.options=Se.setOptions=function(i){return wn(Se.defaults,i),Id(Se.defaults),Se};Se.getDefaults=Ju;Se.defaults=Zr;Se.use=function(...i){const o=wn({},...i),a=Se.defaults.extensions||{renderers:{},childTokens:{}};let l;i.forEach(u=>{if(u.extensions&&(l=!0,u.extensions.forEach(f=>{if(!f.name)throw new Error("extension name required");if(f.renderer){const g=a.renderers?a.renderers[f.name]:null;g?a.renderers[f.name]=function(...b){let w=f.renderer.apply(this,b);return w===!1&&(w=g.apply(this,b)),w}:a.renderers[f.name]=f.renderer}if(f.tokenizer){if(!f.level||f.level!=="block"&&f.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[f.level]?a[f.level].unshift(f.tokenizer):a[f.level]=[f.tokenizer],f.start&&(f.level==="block"?a.startBlock?a.startBlock.push(f.start):a.startBlock=[f.start]:f.level==="inline"&&(a.startInline?a.startInline.push(f.start):a.startInline=[f.start]))}f.childTokens&&(a.childTokens[f.name]=f.childTokens)})),u.renderer){const f=Se.defaults.renderer||new ba;for(const g in u.renderer){const b=f[g];f[g]=(...w)=>{let k=u.renderer[g].apply(f,w);return k===!1&&(k=b.apply(f,w)),k}}o.renderer=f}if(u.tokenizer){const f=Se.defaults.tokenizer||new ya;for(const g in u.tokenizer){const b=f[g];f[g]=(...w)=>{let k=u.tokenizer[g].apply(f,w);return k===!1&&(k=b.apply(f,w)),k}}o.tokenizer=f}if(u.walkTokens){const f=Se.defaults.walkTokens;o.walkTokens=function(g){u.walkTokens.call(this,g),f&&f.call(this,g)}}l&&(o.extensions=a),Se.setOptions(o)})};Se.walkTokens=function(i,o){for(const a of i)switch(o.call(Se,a),a.type){case"table":{for(const l of a.header)Se.walkTokens(l.tokens,o);for(const l of a.rows)for(const u of l)Se.walkTokens(u.tokens,o);break}case"list":{Se.walkTokens(a.items,o);break}default:Se.defaults.extensions&&Se.defaults.extensions.childTokens&&Se.defaults.extensions.childTokens[a.type]?Se.defaults.extensions.childTokens[a.type].forEach(function(l){Se.walkTokens(a[l],o)}):a.tokens&&Se.walkTokens(a.tokens,o)}};Se.parseInline=function(i,o){if(typeof i=="undefined"||i===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");o=wn({},Se.defaults,o||{}),Vu(o);try{const a=Un.lexInline(i,o);return o.walkTokens&&Se.walkTokens(a,o.walkTokens),$n.parseInline(a,o)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+Tt(a.message+"",!0)+"</pre>";throw a}};Se.Parser=$n;Se.parser=$n.parse;Se.Renderer=ba;Se.TextRenderer=ec;Se.Lexer=Un;Se.lexer=Un.lex;Se.Tokenizer=ya;Se.Slugger=tc;Se.parse=Se;Se.options;Se.setOptions;Se.use;Se.walkTokens;Se.parseInline;$n.parse;Un.lex;var de={},ht={},wa={},On={};Object.defineProperty(On,"__esModule",{value:!0});let Ds;function Ps(){if(Ds===void 0)throw new Error("No runtime abstraction layer installed");return Ds}(function(i){function o(a){if(a===void 0)throw new Error("No runtime abstraction layer provided");Ds=a}i.install=o})(Ps||(Ps={}));On.default=Ps;var ka={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Disposable=void 0,function(o){function a(l){return{dispose:l}}o.create=a}(i.Disposable||(i.Disposable={}))})(ka);var br={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Emitter=i.Event=void 0;const o=On;(function(u){const f={dispose(){}};u.None=function(){return f}})(i.Event||(i.Event={}));class a{add(f,g=null,b){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(f),this._contexts.push(g),Array.isArray(b)&&b.push({dispose:()=>this.remove(f,g)})}remove(f,g=null){if(!this._callbacks)return;let b=!1;for(let w=0,k=this._callbacks.length;w<k;w++)if(this._callbacks[w]===f)if(this._contexts[w]===g){this._callbacks.splice(w,1),this._contexts.splice(w,1);return}else b=!0;if(b)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...f){if(!this._callbacks)return[];const g=[],b=this._callbacks.slice(0),w=this._contexts.slice(0);for(let k=0,T=b.length;k<T;k++)try{g.push(b[k].apply(w[k],f))}catch(N){o.default().console.error(N)}return g}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class l{constructor(f){this._options=f}get event(){return this._event||(this._event=(f,g,b)=>{this._callbacks||(this._callbacks=new a),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(f,g);const w={dispose:()=>{!this._callbacks||(this._callbacks.remove(f,g),w.dispose=l._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(b)&&b.push(w),w}),this._event}fire(f){this._callbacks&&this._callbacks.invoke.call(this._callbacks,f)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i.Emitter=l,l._noop=function(){}})(br);var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.AbstractMessageBuffer=void 0;const Vd=13,eh=10,th=`\r
`;class nh{constructor(o="utf-8"){this._encoding=o,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(o){const a=typeof o=="string"?this.fromString(o,this._encoding):o;this._chunks.push(a),this._totalLength+=a.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let o=0,a=0,l=0,u=0;e:for(;a<this._chunks.length;){const w=this._chunks[a];for(l=0;l<w.length;){switch(w[l]){case Vd:switch(o){case 0:o=1;break;case 2:o=3;break;default:o=0}break;case eh:switch(o){case 1:o=2;break;case 3:o=4,l++;break e;default:o=0}break;default:o=0}l++}u+=w.byteLength,a++}if(o!==4)return;const f=this._read(u+l),g=new Map,b=this.toString(f,"ascii").split(th);if(b.length<2)return g;for(let w=0;w<b.length-2;w++){const k=b[w],T=k.indexOf(":");if(T===-1)throw new Error("Message header must separate key and value using :");const N=k.substr(0,T),E=k.substr(T+1).trim();g.set(N,E)}return g}tryReadBody(o){if(!(this._totalLength<o))return this._read(o)}get numberOfBytes(){return this._totalLength}_read(o){if(o===0)return this.emptyBuffer();if(o>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===o){const f=this._chunks[0];return this._chunks.shift(),this._totalLength-=o,this.asNative(f)}if(this._chunks[0].byteLength>o){const f=this._chunks[0],g=this.asNative(f,o);return this._chunks[0]=f.slice(o),this._totalLength-=o,g}const a=this.allocNative(o);let l=0,u=0;for(;o>0;){const f=this._chunks[u];if(f.byteLength>o){const g=f.slice(0,o);a.set(g,l),l+=o,this._chunks[u]=f.slice(o),this._totalLength-=o,o-=o}else a.set(f,l),l+=f.byteLength,this._chunks.shift(),this._totalLength-=f.byteLength,o-=f.byteLength}return a}}Po.AbstractMessageBuffer=nh;Object.defineProperty(wa,"__esModule",{value:!0});const rh=On,zr=ka,ih=br,oh=Po;class No extends oh.AbstractMessageBuffer{constructor(o="utf-8"){super(o),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return No.emptyBuffer}fromString(o,a){return new TextEncoder().encode(o)}toString(o,a){return a==="ascii"?this.asciiDecoder.decode(o):new TextDecoder(a).decode(o)}asNative(o,a){return a===void 0?o:o.slice(0,a)}allocNative(o){return new Uint8Array(o)}}No.emptyBuffer=new Uint8Array(0);class sh{constructor(o){this.socket=o,this._onData=new ih.Emitter,this._messageListener=a=>{a.data.arrayBuffer().then(u=>{this._onData.fire(new Uint8Array(u))})},this.socket.addEventListener("message",this._messageListener)}onClose(o){return this.socket.addEventListener("close",o),zr.Disposable.create(()=>this.socket.removeEventListener("close",o))}onError(o){return this.socket.addEventListener("error",o),zr.Disposable.create(()=>this.socket.removeEventListener("error",o))}onEnd(o){return this.socket.addEventListener("end",o),zr.Disposable.create(()=>this.socket.removeEventListener("end",o))}onData(o){return this._onData.event(o)}}class ah{constructor(o){this.socket=o}onClose(o){return this.socket.addEventListener("close",o),zr.Disposable.create(()=>this.socket.removeEventListener("close",o))}onError(o){return this.socket.addEventListener("error",o),zr.Disposable.create(()=>this.socket.removeEventListener("error",o))}onEnd(o){return this.socket.addEventListener("end",o),zr.Disposable.create(()=>this.socket.removeEventListener("end",o))}write(o,a){if(typeof o=="string"){if(a!==void 0&&a!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${a}`);this.socket.send(o)}else this.socket.send(o);return Promise.resolve()}end(){this.socket.close()}}const lh=new TextEncoder,nc=Object.freeze({messageBuffer:Object.freeze({create:i=>new No(i)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(i,o)=>{if(o.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${o.charset}`);return Promise.resolve(lh.encode(JSON.stringify(i,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(i,o)=>{if(!(i instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(o.charset).decode(i)))}})}),stream:Object.freeze({asReadableStream:i=>new sh(i),asWritableStream:i=>new ah(i)}),console,timer:Object.freeze({setTimeout(i,o,...a){return setTimeout(i,o,...a)},clearTimeout(i){clearTimeout(i)},setImmediate(i,...o){return setTimeout(i,0,...o)},clearImmediate(i){clearTimeout(i)}})});function Ns(){return nc}(function(i){function o(){rh.default.install(nc)}i.install=o})(Ns||(Ns={}));wa.default=Ns;var Os={},Ca={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.stringArray=dt.array=dt.func=dt.error=dt.number=dt.string=dt.boolean=void 0;function uh(i){return i===!0||i===!1}dt.boolean=uh;function rc(i){return typeof i=="string"||i instanceof String}dt.string=rc;function ch(i){return typeof i=="number"||i instanceof Number}dt.number=ch;function fh(i){return i instanceof Error}dt.error=fh;function dh(i){return typeof i=="function"}dt.func=dh;function ic(i){return Array.isArray(i)}dt.array=ic;function hh(i){return ic(i)&&i.every(o=>rc(o))}dt.stringArray=hh;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isResponseMessage=i.isNotificationMessage=i.isRequestMessage=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType=i.RequestType0=i.AbstractMessageSignature=i.ParameterStructures=i.ResponseError=i.ErrorCodes=void 0;const o=dt;var a;(function(R){R.ParseError=-32700,R.InvalidRequest=-32600,R.MethodNotFound=-32601,R.InvalidParams=-32602,R.InternalError=-32603,R.jsonrpcReservedErrorRangeStart=-32099,R.serverErrorStart=R.jsonrpcReservedErrorRangeStart,R.MessageWriteError=-32099,R.MessageReadError=-32098,R.ServerNotInitialized=-32002,R.UnknownErrorCode=-32001,R.jsonrpcReservedErrorRangeEnd=-32e3,R.serverErrorEnd=R.jsonrpcReservedErrorRangeEnd})(a=i.ErrorCodes||(i.ErrorCodes={}));class l extends Error{constructor(Z,Ee,he){super(Ee),this.code=o.number(Z)?Z:a.UnknownErrorCode,this.data=he,Object.setPrototypeOf(this,l.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}i.ResponseError=l;class u{constructor(Z){this.kind=Z}static is(Z){return Z===u.auto||Z===u.byName||Z===u.byPosition}toString(){return this.kind}}i.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class f{constructor(Z,Ee){this.method=Z,this.numberOfParams=Ee}get parameterStructures(){return u.auto}}i.AbstractMessageSignature=f;class g extends f{constructor(Z){super(Z,0)}}i.RequestType0=g;class b extends f{constructor(Z,Ee=u.auto){super(Z,1),this._parameterStructures=Ee}get parameterStructures(){return this._parameterStructures}}i.RequestType=b;class w extends f{constructor(Z,Ee=u.auto){super(Z,1),this._parameterStructures=Ee}get parameterStructures(){return this._parameterStructures}}i.RequestType1=w;class k extends f{constructor(Z){super(Z,2)}}i.RequestType2=k;class T extends f{constructor(Z){super(Z,3)}}i.RequestType3=T;class N extends f{constructor(Z){super(Z,4)}}i.RequestType4=N;class E extends f{constructor(Z){super(Z,5)}}i.RequestType5=E;class M extends f{constructor(Z){super(Z,6)}}i.RequestType6=M;class $ extends f{constructor(Z){super(Z,7)}}i.RequestType7=$;class Y extends f{constructor(Z){super(Z,8)}}i.RequestType8=Y;class V extends f{constructor(Z){super(Z,9)}}i.RequestType9=V;class _ extends f{constructor(Z,Ee=u.auto){super(Z,1),this._parameterStructures=Ee}get parameterStructures(){return this._parameterStructures}}i.NotificationType=_;class P extends f{constructor(Z){super(Z,0)}}i.NotificationType0=P;class L extends f{constructor(Z,Ee=u.auto){super(Z,1),this._parameterStructures=Ee}get parameterStructures(){return this._parameterStructures}}i.NotificationType1=L;class y extends f{constructor(Z){super(Z,2)}}i.NotificationType2=y;class W extends f{constructor(Z){super(Z,3)}}i.NotificationType3=W;class j extends f{constructor(Z){super(Z,4)}}i.NotificationType4=j;class A extends f{constructor(Z){super(Z,5)}}i.NotificationType5=A;class X extends f{constructor(Z){super(Z,6)}}i.NotificationType6=X;class ue extends f{constructor(Z){super(Z,7)}}i.NotificationType7=ue;class oe extends f{constructor(Z){super(Z,8)}}i.NotificationType8=oe;class ve extends f{constructor(Z){super(Z,9)}}i.NotificationType9=ve;function Ne(R){const Z=R;return Z&&o.string(Z.method)&&(o.string(Z.id)||o.number(Z.id))}i.isRequestMessage=Ne;function q(R){const Z=R;return Z&&o.string(Z.method)&&R.id===void 0}i.isNotificationMessage=q;function z(R){const Z=R;return Z&&(Z.result!==void 0||!!Z.error)&&(o.string(Z.id)||o.number(Z.id)||Z.id===null)}i.isResponseMessage=z})(Ca);var Ta={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationTokenSource=i.CancellationToken=void 0;const o=On,a=dt,l=br;var u;(function(w){w.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:l.Event.None}),w.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:l.Event.None});function k(T){const N=T;return N&&(N===w.None||N===w.Cancelled||a.boolean(N.isCancellationRequested)&&!!N.onCancellationRequested)}w.is=k})(u=i.CancellationToken||(i.CancellationToken={}));const f=Object.freeze(function(w,k){const T=o.default().timer.setTimeout(w.bind(k),0);return{dispose(){o.default().timer.clearTimeout(T)}}});class g{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?f:(this._emitter||(this._emitter=new l.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class b{get token(){return this._token||(this._token=new g),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof g&&this._token.dispose():this._token=u.None}}i.CancellationTokenSource=b})(Ta);var oc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=void 0;const o=On,a=dt,l=br;(function(b){function w(k){let T=k;return T&&a.func(T.listen)&&a.func(T.dispose)&&a.func(T.onError)&&a.func(T.onClose)&&a.func(T.onPartialMessage)}b.is=w})(i.MessageReader||(i.MessageReader={}));class u{constructor(){this.errorEmitter=new l.Emitter,this.closeEmitter=new l.Emitter,this.partialMessageEmitter=new l.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(w){this.errorEmitter.fire(this.asError(w))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(w){this.partialMessageEmitter.fire(w)}asError(w){return w instanceof Error?w:new Error(`Reader received error. Reason: ${a.string(w.message)?w.message:"unknown"}`)}}i.AbstractMessageReader=u;var f;(function(b){function w(k){var T;let N,E;const M=new Map;let $;const Y=new Map;if(k===void 0||typeof k=="string")N=k!=null?k:"utf-8";else{if(N=(T=k.charset)!==null&&T!==void 0?T:"utf-8",k.contentDecoder!==void 0&&(E=k.contentDecoder,M.set(E.name,E)),k.contentDecoders!==void 0)for(const V of k.contentDecoders)M.set(V.name,V);if(k.contentTypeDecoder!==void 0&&($=k.contentTypeDecoder,Y.set($.name,$)),k.contentTypeDecoders!==void 0)for(const V of k.contentTypeDecoders)Y.set(V.name,V)}return $===void 0&&($=o.default().applicationJson.decoder,Y.set($.name,$)),{charset:N,contentDecoder:E,contentDecoders:M,contentTypeDecoder:$,contentTypeDecoders:Y}}b.fromOptions=w})(f||(f={}));class g extends u{constructor(w,k){super(),this.readable=w,this.options=f.fromOptions(k),this.buffer=o.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(w){this._partialMessageTimeout=w}get partialMessageTimeout(){return this._partialMessageTimeout}listen(w){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=w;const k=this.readable.onData(T=>{this.onData(T)});return this.readable.onError(T=>this.fireError(T)),this.readable.onClose(()=>this.fireClose()),k}onData(w){for(this.buffer.append(w);;){if(this.nextMessageLength===-1){const N=this.buffer.tryReadHeaders();if(!N)return;const E=N.get("Content-Length");if(!E)throw new Error("Header must provide a Content-Length property.");const M=parseInt(E);if(isNaN(M))throw new Error("Content-Length value must be a number.");this.nextMessageLength=M}const k=this.buffer.tryReadBody(this.nextMessageLength);if(k===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let T;this.options.contentDecoder!==void 0?T=this.options.contentDecoder.decode(k):T=Promise.resolve(k),T.then(N=>{this.options.contentTypeDecoder.decode(N,this.options).then(E=>{this.callback(E)},E=>{this.fireError(E)})},N=>{this.fireError(N)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(o.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=o.default().timer.setTimeout((w,k)=>{this.partialMessageTimer=void 0,w===this.messageToken&&(this.firePartialMessage({messageToken:w,waitingTime:k}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}i.ReadableStreamMessageReader=g})(oc);var sc={},Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Semaphore=void 0;const ph=On;class gh{constructor(o=1){if(o<=0)throw new Error("Capacity must be greater than 0");this._capacity=o,this._active=0,this._waiting=[]}lock(o){return new Promise((a,l)=>{this._waiting.push({thunk:o,resolve:a,reject:l}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||ph.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const o=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const a=o.thunk();a instanceof Promise?a.then(l=>{this._active--,o.resolve(l),this.runNext()},l=>{this._active--,o.reject(l),this.runNext()}):(this._active--,o.resolve(a),this.runNext())}catch(a){this._active--,o.reject(a),this.runNext()}}}Oo.Semaphore=gh;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=void 0;const o=On,a=dt,l=Oo,u=br,f="Content-Length: ",g=`\r
`;(function(T){function N(E){let M=E;return M&&a.func(M.dispose)&&a.func(M.onClose)&&a.func(M.onError)&&a.func(M.write)}T.is=N})(i.MessageWriter||(i.MessageWriter={}));class b{constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(N,E,M){this.errorEmitter.fire([this.asError(N),E,M])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(N){return N instanceof Error?N:new Error(`Writer received error. Reason: ${a.string(N.message)?N.message:"unknown"}`)}}i.AbstractMessageWriter=b;var w;(function(T){function N(E){var M,$;return E===void 0||typeof E=="string"?{charset:E!=null?E:"utf-8",contentTypeEncoder:o.default().applicationJson.encoder}:{charset:(M=E.charset)!==null&&M!==void 0?M:"utf-8",contentEncoder:E.contentEncoder,contentTypeEncoder:($=E.contentTypeEncoder)!==null&&$!==void 0?$:o.default().applicationJson.encoder}}T.fromOptions=N})(w||(w={}));class k extends b{constructor(N,E){super(),this.writable=N,this.options=w.fromOptions(E),this.errorCount=0,this.writeSemaphore=new l.Semaphore(1),this.writable.onError(M=>this.fireError(M)),this.writable.onClose(()=>this.fireClose())}async write(N){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(N,this.options).then(M=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(M):M).then(M=>{const $=[];return $.push(f,M.byteLength.toString(),g),$.push(g),this.doWrite(N,$,M)},M=>{throw this.fireError(M),M}))}async doWrite(N,E,M){try{return await this.writable.write(E.join(""),"ascii"),this.writable.write(M)}catch($){return this.handleError($,N),Promise.reject($)}}handleError(N,E){this.errorCount++,this.fireError(N,E,this.errorCount)}end(){this.writable.end()}}i.WriteableStreamMessageWriter=k})(sc);var ac={},lc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LRUCache=i.LinkedMap=i.Touch=void 0;var o;(function(u){u.None=0,u.First=1,u.AsOld=u.First,u.Last=2,u.AsNew=u.Last})(o=i.Touch||(i.Touch={}));class a{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var f;return(f=this._head)===null||f===void 0?void 0:f.value}get last(){var f;return(f=this._tail)===null||f===void 0?void 0:f.value}has(f){return this._map.has(f)}get(f,g=o.None){const b=this._map.get(f);if(!!b)return g!==o.None&&this.touch(b,g),b.value}set(f,g,b=o.None){let w=this._map.get(f);if(w)w.value=g,b!==o.None&&this.touch(w,b);else{switch(w={key:f,value:g,next:void 0,previous:void 0},b){case o.None:this.addItemLast(w);break;case o.First:this.addItemFirst(w);break;case o.Last:this.addItemLast(w);break;default:this.addItemLast(w);break}this._map.set(f,w),this._size++}return this}delete(f){return!!this.remove(f)}remove(f){const g=this._map.get(f);if(!!g)return this._map.delete(f),this.removeItem(g),this._size--,g.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const f=this._head;return this._map.delete(f.key),this.removeItem(f),this._size--,f.value}forEach(f,g){const b=this._state;let w=this._head;for(;w;){if(g?f.bind(g)(w.value,w.key,this):f(w.value,w.key,this),this._state!==b)throw new Error("LinkedMap got modified during iteration.");w=w.next}}keys(){const f=this,g=this._state;let b=this._head;const w={[Symbol.iterator](){return w},next(){if(f._state!==g)throw new Error("LinkedMap got modified during iteration.");if(b){const k={value:b.key,done:!1};return b=b.next,k}else return{value:void 0,done:!0}}};return w}values(){const f=this,g=this._state;let b=this._head;const w={[Symbol.iterator](){return w},next(){if(f._state!==g)throw new Error("LinkedMap got modified during iteration.");if(b){const k={value:b.value,done:!1};return b=b.next,k}else return{value:void 0,done:!0}}};return w}entries(){const f=this,g=this._state;let b=this._head;const w={[Symbol.iterator](){return w},next(){if(f._state!==g)throw new Error("LinkedMap got modified during iteration.");if(b){const k={value:[b.key,b.value],done:!1};return b=b.next,k}else return{value:void 0,done:!0}}};return w}[Symbol.iterator](){return this.entries()}trimOld(f){if(f>=this.size)return;if(f===0){this.clear();return}let g=this._head,b=this.size;for(;g&&b>f;)this._map.delete(g.key),g=g.next,b--;this._head=g,this._size=b,g&&(g.previous=void 0),this._state++}addItemFirst(f){if(!this._head&&!this._tail)this._tail=f;else if(this._head)f.next=this._head,this._head.previous=f;else throw new Error("Invalid list");this._head=f,this._state++}addItemLast(f){if(!this._head&&!this._tail)this._head=f;else if(this._tail)f.previous=this._tail,this._tail.next=f;else throw new Error("Invalid list");this._tail=f,this._state++}removeItem(f){if(f===this._head&&f===this._tail)this._head=void 0,this._tail=void 0;else if(f===this._head){if(!f.next)throw new Error("Invalid list");f.next.previous=void 0,this._head=f.next}else if(f===this._tail){if(!f.previous)throw new Error("Invalid list");f.previous.next=void 0,this._tail=f.previous}else{const g=f.next,b=f.previous;if(!g||!b)throw new Error("Invalid list");g.previous=b,b.next=g}f.next=void 0,f.previous=void 0,this._state++}touch(f,g){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(g!==o.First&&g!==o.Last)){if(g===o.First){if(f===this._head)return;const b=f.next,w=f.previous;f===this._tail?(w.next=void 0,this._tail=w):(b.previous=w,w.next=b),f.previous=void 0,f.next=this._head,this._head.previous=f,this._head=f,this._state++}else if(g===o.Last){if(f===this._tail)return;const b=f.next,w=f.previous;f===this._head?(b.previous=void 0,this._head=b):(b.previous=w,w.next=b),f.next=void 0,f.previous=this._tail,this._tail.next=f,this._tail=f,this._state++}}}toJSON(){const f=[];return this.forEach((g,b)=>{f.push([b,g])}),f}fromJSON(f){this.clear();for(const[g,b]of f)this.set(g,b)}}i.LinkedMap=a;class l extends a{constructor(f,g=1){super(),this._limit=f,this._ratio=Math.min(Math.max(0,g),1)}get limit(){return this._limit}set limit(f){this._limit=f,this.checkTrim()}get ratio(){return this._ratio}set ratio(f){this._ratio=Math.min(Math.max(0,f),1),this.checkTrim()}get(f,g=o.AsNew){return super.get(f,g)}peek(f){return super.get(f,o.None)}set(f,g){return super.set(f,g,o.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}i.LRUCache=l})(lc);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.ConnectionOptions=i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.Trace=i.NullLogger=i.ProgressType=void 0;const o=On,a=dt,l=Ca,u=lc,f=br,g=Ta;var b;(function(A){A.type=new l.NotificationType("$/cancelRequest")})(b||(b={}));var w;(function(A){A.type=new l.NotificationType("$/progress")})(w||(w={}));class k{constructor(){}}i.ProgressType=k;var T;(function(A){function X(ue){return a.func(ue)}A.is=X})(T||(T={})),i.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var N;(function(A){A[A.Off=0]="Off",A[A.Messages=1]="Messages",A[A.Verbose=2]="Verbose"})(N=i.Trace||(i.Trace={})),function(A){function X(oe){if(!a.string(oe))return A.Off;switch(oe=oe.toLowerCase(),oe){case"off":return A.Off;case"messages":return A.Messages;case"verbose":return A.Verbose;default:return A.Off}}A.fromString=X;function ue(oe){switch(oe){case A.Off:return"off";case A.Messages:return"messages";case A.Verbose:return"verbose";default:return"off"}}A.toString=ue}(N=i.Trace||(i.Trace={}));var E;(function(A){A.Text="text",A.JSON="json"})(E=i.TraceFormat||(i.TraceFormat={})),function(A){function X(ue){return ue=ue.toLowerCase(),ue==="json"?A.JSON:A.Text}A.fromString=X}(E=i.TraceFormat||(i.TraceFormat={}));var M;(function(A){A.type=new l.NotificationType("$/setTrace")})(M=i.SetTraceNotification||(i.SetTraceNotification={}));var $;(function(A){A.type=new l.NotificationType("$/logTrace")})($=i.LogTraceNotification||(i.LogTraceNotification={}));var Y;(function(A){A[A.Closed=1]="Closed",A[A.Disposed=2]="Disposed",A[A.AlreadyListening=3]="AlreadyListening"})(Y=i.ConnectionErrors||(i.ConnectionErrors={}));class V extends Error{constructor(X,ue){super(ue),this.code=X,Object.setPrototypeOf(this,V.prototype)}}i.ConnectionError=V;var _;(function(A){function X(ue){const oe=ue;return oe&&a.func(oe.cancelUndispatched)}A.is=X})(_=i.ConnectionStrategy||(i.ConnectionStrategy={}));var P;(function(A){A.Message=Object.freeze({createCancellationTokenSource(ue){return new g.CancellationTokenSource}});function X(ue){const oe=ue;return oe&&a.func(oe.createCancellationTokenSource)}A.is=X})(P=i.CancellationReceiverStrategy||(i.CancellationReceiverStrategy={}));var L;(function(A){A.Message=Object.freeze({sendCancellation(ue,oe){ue.sendNotification(b.type,{id:oe})},cleanup(ue){}});function X(ue){const oe=ue;return oe&&a.func(oe.sendCancellation)&&a.func(oe.cleanup)}A.is=X})(L=i.CancellationSenderStrategy||(i.CancellationSenderStrategy={}));var y;(function(A){A.Message=Object.freeze({receiver:P.Message,sender:L.Message});function X(ue){const oe=ue;return oe&&P.is(oe.receiver)&&L.is(oe.sender)}A.is=X})(y=i.CancellationStrategy||(i.CancellationStrategy={})),function(A){function X(ue){const oe=ue;return oe&&(y.is(oe.cancellationStrategy)||_.is(oe.connectionStrategy))}A.is=X}(i.ConnectionOptions||(i.ConnectionOptions={}));var W;(function(A){A[A.New=1]="New",A[A.Listening=2]="Listening",A[A.Closed=3]="Closed",A[A.Disposed=4]="Disposed"})(W||(W={}));function j(A,X,ue,oe){const ve=ue!==void 0?ue:i.NullLogger;let Ne=0,q=0,z=0;const R="2.0";let Z;const Ee=Object.create(null);let he;const ke=Object.create(null),_e=new Map;let Oe,pt=new u.LinkedMap,$e=Object.create(null),Fe=Object.create(null),xe=N.Off,ae=E.Text,re,Ce=W.New;const De=new f.Emitter,kn=new f.Emitter,Ae=new f.Emitter,ot=new f.Emitter,Ut=new f.Emitter,Dt=oe&&oe.cancellationStrategy?oe.cancellationStrategy:y.Message;function Re(D){if(D===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+D.toString()}function xt(D){return D===null?"res-unknown-"+(++z).toString():"res-"+D.toString()}function Yt(){return"not-"+(++q).toString()}function st(D,G){l.isRequestMessage(G)?D.set(Re(G.id),G):l.isResponseMessage(G)?D.set(xt(G.id),G):D.set(Yt(),G)}function gt(D){}function Cn(){return Ce===W.Listening}function Zt(){return Ce===W.Closed}function Jt(){return Ce===W.Disposed}function nr(){(Ce===W.New||Ce===W.Listening)&&(Ce=W.Closed,kn.fire(void 0))}function Qr(D){De.fire([D,void 0,void 0])}function rr(D){De.fire(D)}A.onClose(nr),A.onError(Qr),X.onClose(nr),X.onError(rr);function ir(){Oe||pt.size===0||(Oe=o.default().timer.setImmediate(()=>{Oe=void 0,rn()}))}function rn(){if(pt.size===0)return;const D=pt.shift();try{l.isRequestMessage(D)?It(D):l.isNotificationMessage(D)?An(D):l.isResponseMessage(D)?Xe(D):Pt(D)}finally{ir()}}const Vr=D=>{try{if(l.isNotificationMessage(D)&&D.method===b.type.method){const G=Re(D.params.id),ee=pt.get(G);if(l.isRequestMessage(ee)){const pe=oe==null?void 0:oe.connectionStrategy,Ie=pe&&pe.cancelUndispatched?pe.cancelUndispatched(ee,gt):void 0;if(Ie&&(Ie.error!==void 0||Ie.result!==void 0)){pt.delete(G),Ie.id=ee.id,fn(Ie,D.method,Date.now()),X.write(Ie);return}}}st(pt,D)}finally{ir()}};function It(D){if(Jt())return;function G(Pe,He,Le){const Ve={jsonrpc:R,id:D.id};Pe instanceof l.ResponseError?Ve.error=Pe.toJson():Ve.result=Pe===void 0?null:Pe,fn(Ve,He,Le),X.write(Ve)}function ee(Pe,He,Le){const Ve={jsonrpc:R,id:D.id,error:Pe.toJson()};fn(Ve,He,Le),X.write(Ve)}function pe(Pe,He,Le){Pe===void 0&&(Pe=null);const Ve={jsonrpc:R,id:D.id,result:Pe};fn(Ve,He,Le),X.write(Ve)}Rt(D);const Ie=Ee[D.method];let Ge,Je;Ie&&(Ge=Ie.type,Je=Ie.handler);const Qe=Date.now();if(Je||Z){const Pe=String(D.id),He=Dt.receiver.createCancellationTokenSource(Pe);Fe[Pe]=He;try{let Le;if(Je)if(D.params===void 0){if(Ge!==void 0&&Ge.numberOfParams!==0){ee(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${D.method} defines ${Ge.numberOfParams} params but recevied none.`),D.method,Qe);return}Le=Je(He.token)}else if(Array.isArray(D.params)){if(Ge!==void 0&&Ge.parameterStructures===l.ParameterStructures.byName){ee(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by name but received parameters by position`),D.method,Qe);return}Le=Je(...D.params,He.token)}else{if(Ge!==void 0&&Ge.parameterStructures===l.ParameterStructures.byPosition){ee(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by position but received parameters by name`),D.method,Qe);return}Le=Je(D.params,He.token)}else Z&&(Le=Z(D.method,D.params,He.token));const Ve=Le;Le?Ve.then?Ve.then(et=>{delete Fe[Pe],G(et,D.method,Qe)},et=>{delete Fe[Pe],et instanceof l.ResponseError?ee(et,D.method,Qe):et&&a.string(et.message)?ee(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${et.message}`),D.method,Qe):ee(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,Qe)}):(delete Fe[Pe],G(Le,D.method,Qe)):(delete Fe[Pe],pe(Le,D.method,Qe))}catch(Le){delete Fe[Pe],Le instanceof l.ResponseError?G(Le,D.method,Qe):Le&&a.string(Le.message)?ee(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${Le.message}`),D.method,Qe):ee(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,Qe)}}else ee(new l.ResponseError(l.ErrorCodes.MethodNotFound,`Unhandled method ${D.method}`),D.method,Qe)}function Xe(D){if(!Jt())if(D.id===null)D.error?ve.error(`Received response message without id: Error is: 
${JSON.stringify(D.error,void 0,4)}`):ve.error("Received response message without id. No further error information provided.");else{const G=String(D.id),ee=$e[G];if(nt(D,ee),ee){delete $e[G];try{if(D.error){const pe=D.error;ee.reject(new l.ResponseError(pe.code,pe.message,pe.data))}else if(D.result!==void 0)ee.resolve(D.result);else throw new Error("Should never happen.")}catch(pe){pe.message?ve.error(`Response handler '${ee.method}' failed with message: ${pe.message}`):ve.error(`Response handler '${ee.method}' failed unexpectedly.`)}}}}function An(D){if(Jt())return;let G,ee;if(D.method===b.type.method)ee=pe=>{const Ie=pe.id,Ge=Fe[String(Ie)];Ge&&Ge.cancel()};else{const pe=ke[D.method];pe&&(ee=pe.handler,G=pe.type)}if(ee||he)try{be(D),ee?D.params===void 0?(G!==void 0&&G.numberOfParams!==0&&G.parameterStructures!==l.ParameterStructures.byName&&ve.error(`Notification ${D.method} defines ${G.numberOfParams} params but recevied none.`),ee()):Array.isArray(D.params)?(G!==void 0&&(G.parameterStructures===l.ParameterStructures.byName&&ve.error(`Notification ${D.method} defines parameters by name but received parameters by position`),G.numberOfParams!==D.params.length&&ve.error(`Notification ${D.method} defines ${G.numberOfParams} params but received ${D.params.length} argumennts`)),ee(...D.params)):(G!==void 0&&G.parameterStructures===l.ParameterStructures.byPosition&&ve.error(`Notification ${D.method} defines parameters by position but received parameters by name`),ee(D.params)):he&&he(D.method,D.params)}catch(pe){pe.message?ve.error(`Notification handler '${D.method}' failed with message: ${pe.message}`):ve.error(`Notification handler '${D.method}' failed unexpectedly.`)}else Ae.fire(D)}function Pt(D){if(!D){ve.error("Received empty message.");return}ve.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(D,null,4)}`);const G=D;if(a.string(G.id)||a.number(G.id)){const ee=String(G.id),pe=$e[ee];pe&&pe.reject(new Error("The received response has neither a result nor an error property."))}}function cn(D){if(!(xe===N.Off||!re))if(ae===E.Text){let G;xe===N.Verbose&&D.params&&(G=`Params: ${JSON.stringify(D.params,null,4)}

`),re.log(`Sending request '${D.method} - (${D.id})'.`,G)}else Qt("send-request",D)}function me(D){if(!(xe===N.Off||!re))if(ae===E.Text){let G;xe===N.Verbose&&(D.params?G=`Params: ${JSON.stringify(D.params,null,4)}

`:G=`No parameters provided.

`),re.log(`Sending notification '${D.method}'.`,G)}else Qt("send-notification",D)}function fn(D,G,ee){if(!(xe===N.Off||!re))if(ae===E.Text){let pe;xe===N.Verbose&&(D.error&&D.error.data?pe=`Error data: ${JSON.stringify(D.error.data,null,4)}

`:D.result?pe=`Result: ${JSON.stringify(D.result,null,4)}

`:D.error===void 0&&(pe=`No result returned.

`)),re.log(`Sending response '${G} - (${D.id})'. Processing request took ${Date.now()-ee}ms`,pe)}else Qt("send-response",D)}function Rt(D){if(!(xe===N.Off||!re))if(ae===E.Text){let G;xe===N.Verbose&&D.params&&(G=`Params: ${JSON.stringify(D.params,null,4)}

`),re.log(`Received request '${D.method} - (${D.id})'.`,G)}else Qt("receive-request",D)}function be(D){if(!(xe===N.Off||!re||D.method===$.type.method))if(ae===E.Text){let G;xe===N.Verbose&&(D.params?G=`Params: ${JSON.stringify(D.params,null,4)}

`:G=`No parameters provided.

`),re.log(`Received notification '${D.method}'.`,G)}else Qt("receive-notification",D)}function nt(D,G){if(!(xe===N.Off||!re))if(ae===E.Text){let ee;if(xe===N.Verbose&&(D.error&&D.error.data?ee=`Error data: ${JSON.stringify(D.error.data,null,4)}

`:D.result?ee=`Result: ${JSON.stringify(D.result,null,4)}

`:D.error===void 0&&(ee=`No result returned.

`)),G){const pe=D.error?` Request failed: ${D.error.message} (${D.error.code}).`:"";re.log(`Received response '${G.method} - (${D.id})' in ${Date.now()-G.timerStart}ms.${pe}`,ee)}else re.log(`Received response ${D.id} without active response promise.`,ee)}else Qt("receive-response",D)}function Qt(D,G){if(!re||xe===N.Off)return;const ee={isLSPMessage:!0,type:D,message:G,timestamp:Date.now()};re.log(ee)}function Ze(){if(Zt())throw new V(Y.Closed,"Connection is closed.");if(Jt())throw new V(Y.Disposed,"Connection is disposed.")}function on(){if(Cn())throw new V(Y.AlreadyListening,"Connection is already listening")}function vt(){if(!Cn())throw new Error("Call listen() first.")}function sn(D){return D===void 0?null:D}function Nt(D){if(D!==null)return D}function Tn(D){return D!=null&&!Array.isArray(D)&&typeof D=="object"}function an(D,G){switch(D){case l.ParameterStructures.auto:return Tn(G)?Nt(G):[sn(G)];case l.ParameterStructures.byName:if(!Tn(G))throw new Error("Recevied parameters by name but param is not an object literal.");return Nt(G);case l.ParameterStructures.byPosition:return[sn(G)];default:throw new Error(`Unknown parameter structure ${D.toString()}`)}}function or(D,G){let ee;const pe=D.numberOfParams;switch(pe){case 0:ee=void 0;break;case 1:ee=an(D.parameterStructures,G[0]);break;default:ee=[];for(let Ie=0;Ie<G.length&&Ie<pe;Ie++)ee.push(sn(G[Ie]));if(G.length<pe)for(let Ie=G.length;Ie<pe;Ie++)ee.push(null);break}return ee}const ln={sendNotification:(D,...G)=>{Ze();let ee,pe;if(a.string(D)){ee=D;const Ge=G[0];let Je=0,Qe=l.ParameterStructures.auto;l.ParameterStructures.is(Ge)&&(Je=1,Qe=Ge);let Pe=G.length;const He=Pe-Je;switch(He){case 0:pe=void 0;break;case 1:pe=an(Qe,G[Je]);break;default:if(Qe===l.ParameterStructures.byName)throw new Error(`Recevied ${He} parameters for 'by Name' notification parameter structure.`);pe=G.slice(Je,Pe).map(Le=>sn(Le));break}}else{const Ge=G;ee=D.method,pe=or(D,Ge)}const Ie={jsonrpc:R,method:ee,params:pe};me(Ie),X.write(Ie)},onNotification:(D,G)=>{Ze();let ee;return a.func(D)?he=D:G&&(a.string(D)?(ee=D,ke[D]={type:void 0,handler:G}):(ee=D.method,ke[D.method]={type:D,handler:G})),{dispose:()=>{ee!==void 0?delete ke[ee]:he=void 0}}},onProgress:(D,G,ee)=>{if(_e.has(G))throw new Error(`Progress handler for token ${G} already registered`);return _e.set(G,ee),{dispose:()=>{_e.delete(G)}}},sendProgress:(D,G,ee)=>{ln.sendNotification(w.type,{token:G,value:ee})},onUnhandledProgress:ot.event,sendRequest:(D,...G)=>{Ze(),vt();let ee,pe,Ie;if(a.string(D)){ee=D;const Pe=G[0],He=G[G.length-1];let Le=0,Ve=l.ParameterStructures.auto;l.ParameterStructures.is(Pe)&&(Le=1,Ve=Pe);let et=G.length;g.CancellationToken.is(He)&&(et=et-1,Ie=He);const $t=et-Le;switch($t){case 0:pe=void 0;break;case 1:pe=an(Ve,G[Le]);break;default:if(Ve===l.ParameterStructures.byName)throw new Error(`Recevied ${$t} parameters for 'by Name' request parameter structure.`);pe=G.slice(Le,et).map(Wt=>sn(Wt));break}}else{const Pe=G;ee=D.method,pe=or(D,Pe);const He=D.numberOfParams;Ie=g.CancellationToken.is(Pe[He])?Pe[He]:void 0}const Ge=Ne++;let Je;return Ie&&(Je=Ie.onCancellationRequested(()=>{Dt.sender.sendCancellation(ln,Ge)})),new Promise((Pe,He)=>{const Le={jsonrpc:R,id:Ge,method:ee,params:pe},Ve=Wt=>{Pe(Wt),Dt.sender.cleanup(Ge),Je==null||Je.dispose()},et=Wt=>{He(Wt),Dt.sender.cleanup(Ge),Je==null||Je.dispose()};let $t={method:ee,timerStart:Date.now(),resolve:Ve,reject:et};cn(Le);try{X.write(Le)}catch(Wt){$t.reject(new l.ResponseError(l.ErrorCodes.MessageWriteError,Wt.message?Wt.message:"Unknown reason")),$t=null}$t&&($e[String(Ge)]=$t)})},onRequest:(D,G)=>{Ze();let ee=null;return T.is(D)?(ee=void 0,Z=D):a.string(D)?(ee=null,G!==void 0&&(ee=D,Ee[D]={handler:G,type:void 0})):G!==void 0&&(ee=D.method,Ee[D.method]={type:D,handler:G}),{dispose:()=>{ee!==null&&(ee!==void 0?delete Ee[ee]:Z=void 0)}}},trace:(D,G,ee)=>{let pe=!1,Ie=E.Text;ee!==void 0&&(a.boolean(ee)?pe=ee:(pe=ee.sendNotification||!1,Ie=ee.traceFormat||E.Text)),xe=D,ae=Ie,xe===N.Off?re=void 0:re=G,pe&&!Zt()&&!Jt()&&ln.sendNotification(M.type,{value:N.toString(D)})},onError:De.event,onClose:kn.event,onUnhandledNotification:Ae.event,onDispose:Ut.event,end:()=>{X.end()},dispose:()=>{if(Jt())return;Ce=W.Disposed,Ut.fire(void 0);const D=new Error("Connection got disposed.");Object.keys($e).forEach(G=>{$e[G].reject(D)}),$e=Object.create(null),Fe=Object.create(null),pt=new u.LinkedMap,a.func(X.dispose)&&X.dispose(),a.func(A.dispose)&&A.dispose()},listen:()=>{Ze(),on(),Ce=W.Listening,A.listen(Vr)},inspect:()=>{o.default().console.log("inspect")}};return ln.onNotification($.type,D=>{xe===N.Off||!re||re.log(D.message,xe===N.Verbose?D.verbose:void 0)}),ln.onNotification(w.type,D=>{const G=_e.get(D.token);G?G(D.value):ot.fire(D)}),ln}i.createMessageConnection=j})(ac);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.Trace=i.ProgressType=i.createMessageConnection=i.NullLogger=i.ConnectionOptions=i.ConnectionStrategy=i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=i.CancellationToken=i.CancellationTokenSource=i.Emitter=i.Event=i.Disposable=i.ParameterStructures=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.ErrorCodes=i.ResponseError=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType0=i.RequestType=i.RAL=void 0,i.CancellationStrategy=void 0;const o=Ca;Object.defineProperty(i,"RequestType",{enumerable:!0,get:function(){return o.RequestType}}),Object.defineProperty(i,"RequestType0",{enumerable:!0,get:function(){return o.RequestType0}}),Object.defineProperty(i,"RequestType1",{enumerable:!0,get:function(){return o.RequestType1}}),Object.defineProperty(i,"RequestType2",{enumerable:!0,get:function(){return o.RequestType2}}),Object.defineProperty(i,"RequestType3",{enumerable:!0,get:function(){return o.RequestType3}}),Object.defineProperty(i,"RequestType4",{enumerable:!0,get:function(){return o.RequestType4}}),Object.defineProperty(i,"RequestType5",{enumerable:!0,get:function(){return o.RequestType5}}),Object.defineProperty(i,"RequestType6",{enumerable:!0,get:function(){return o.RequestType6}}),Object.defineProperty(i,"RequestType7",{enumerable:!0,get:function(){return o.RequestType7}}),Object.defineProperty(i,"RequestType8",{enumerable:!0,get:function(){return o.RequestType8}}),Object.defineProperty(i,"RequestType9",{enumerable:!0,get:function(){return o.RequestType9}}),Object.defineProperty(i,"ResponseError",{enumerable:!0,get:function(){return o.ResponseError}}),Object.defineProperty(i,"ErrorCodes",{enumerable:!0,get:function(){return o.ErrorCodes}}),Object.defineProperty(i,"NotificationType",{enumerable:!0,get:function(){return o.NotificationType}}),Object.defineProperty(i,"NotificationType0",{enumerable:!0,get:function(){return o.NotificationType0}}),Object.defineProperty(i,"NotificationType1",{enumerable:!0,get:function(){return o.NotificationType1}}),Object.defineProperty(i,"NotificationType2",{enumerable:!0,get:function(){return o.NotificationType2}}),Object.defineProperty(i,"NotificationType3",{enumerable:!0,get:function(){return o.NotificationType3}}),Object.defineProperty(i,"NotificationType4",{enumerable:!0,get:function(){return o.NotificationType4}}),Object.defineProperty(i,"NotificationType5",{enumerable:!0,get:function(){return o.NotificationType5}}),Object.defineProperty(i,"NotificationType6",{enumerable:!0,get:function(){return o.NotificationType6}}),Object.defineProperty(i,"NotificationType7",{enumerable:!0,get:function(){return o.NotificationType7}}),Object.defineProperty(i,"NotificationType8",{enumerable:!0,get:function(){return o.NotificationType8}}),Object.defineProperty(i,"NotificationType9",{enumerable:!0,get:function(){return o.NotificationType9}}),Object.defineProperty(i,"ParameterStructures",{enumerable:!0,get:function(){return o.ParameterStructures}});const a=ka;Object.defineProperty(i,"Disposable",{enumerable:!0,get:function(){return a.Disposable}});const l=br;Object.defineProperty(i,"Event",{enumerable:!0,get:function(){return l.Event}}),Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return l.Emitter}});const u=Ta;Object.defineProperty(i,"CancellationTokenSource",{enumerable:!0,get:function(){return u.CancellationTokenSource}}),Object.defineProperty(i,"CancellationToken",{enumerable:!0,get:function(){return u.CancellationToken}});const f=oc;Object.defineProperty(i,"MessageReader",{enumerable:!0,get:function(){return f.MessageReader}}),Object.defineProperty(i,"AbstractMessageReader",{enumerable:!0,get:function(){return f.AbstractMessageReader}}),Object.defineProperty(i,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return f.ReadableStreamMessageReader}});const g=sc;Object.defineProperty(i,"MessageWriter",{enumerable:!0,get:function(){return g.MessageWriter}}),Object.defineProperty(i,"AbstractMessageWriter",{enumerable:!0,get:function(){return g.AbstractMessageWriter}}),Object.defineProperty(i,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return g.WriteableStreamMessageWriter}});const b=ac;Object.defineProperty(i,"ConnectionStrategy",{enumerable:!0,get:function(){return b.ConnectionStrategy}}),Object.defineProperty(i,"ConnectionOptions",{enumerable:!0,get:function(){return b.ConnectionOptions}}),Object.defineProperty(i,"NullLogger",{enumerable:!0,get:function(){return b.NullLogger}}),Object.defineProperty(i,"createMessageConnection",{enumerable:!0,get:function(){return b.createMessageConnection}}),Object.defineProperty(i,"ProgressType",{enumerable:!0,get:function(){return b.ProgressType}}),Object.defineProperty(i,"Trace",{enumerable:!0,get:function(){return b.Trace}}),Object.defineProperty(i,"TraceFormat",{enumerable:!0,get:function(){return b.TraceFormat}}),Object.defineProperty(i,"SetTraceNotification",{enumerable:!0,get:function(){return b.SetTraceNotification}}),Object.defineProperty(i,"LogTraceNotification",{enumerable:!0,get:function(){return b.LogTraceNotification}}),Object.defineProperty(i,"ConnectionErrors",{enumerable:!0,get:function(){return b.ConnectionErrors}}),Object.defineProperty(i,"ConnectionError",{enumerable:!0,get:function(){return b.ConnectionError}}),Object.defineProperty(i,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return b.CancellationReceiverStrategy}}),Object.defineProperty(i,"CancellationSenderStrategy",{enumerable:!0,get:function(){return b.CancellationSenderStrategy}}),Object.defineProperty(i,"CancellationStrategy",{enumerable:!0,get:function(){return b.CancellationStrategy}});const w=On;i.RAL=w.default})(Os);(function(i){var o=nn&&nn.__createBinding||(Object.create?function(w,k,T,N){N===void 0&&(N=T),Object.defineProperty(w,N,{enumerable:!0,get:function(){return k[T]}})}:function(w,k,T,N){N===void 0&&(N=T),w[N]=k[T]}),a=nn&&nn.__exportStar||function(w,k){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call(k,T)&&o(k,w,T)};Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.BrowserMessageWriter=i.BrowserMessageReader=void 0,wa.default.install();const u=Os;a(Os,i);class f extends u.AbstractMessageReader{constructor(k){super(),this._onData=new u.Emitter,this._messageListener=T=>{this._onData.fire(T.data)},k.addEventListener("error",T=>this.fireError(T)),k.onmessage=this._messageListener}listen(k){return this._onData.event(k)}}i.BrowserMessageReader=f;class g extends u.AbstractMessageWriter{constructor(k){super(),this.context=k,this.errorCount=0,k.addEventListener("error",T=>this.fireError(T))}write(k){try{return this.context.postMessage(k),Promise.resolve()}catch(T){return this.handleError(T,k),Promise.reject(T)}}handleError(k,T){this.errorCount++,this.fireError(k,T,this.errorCount)}end(){}}i.BrowserMessageWriter=g;function b(w,k,T,N){return T===void 0&&(T=u.NullLogger),u.ConnectionStrategy.is(N)&&(N={connectionStrategy:N}),u.createMessageConnection(w,k,T,N)}i.createMessageConnection=b})(ht);var Pu=ht,uc={},As;(function(i){i.MIN_VALUE=-2147483648,i.MAX_VALUE=2147483647})(As||(As={}));var Pi;(function(i){i.MIN_VALUE=0,i.MAX_VALUE=2147483647})(Pi||(Pi={}));var bn;(function(i){function o(l,u){return l===Number.MAX_VALUE&&(l=Pi.MAX_VALUE),u===Number.MAX_VALUE&&(u=Pi.MAX_VALUE),{line:l,character:u}}i.create=o;function a(l){var u=l;return F.objectLiteral(u)&&F.uinteger(u.line)&&F.uinteger(u.character)}i.is=a})(bn||(bn={}));var St;(function(i){function o(l,u,f,g){if(F.uinteger(l)&&F.uinteger(u)&&F.uinteger(f)&&F.uinteger(g))return{start:bn.create(l,u),end:bn.create(f,g)};if(bn.is(l)&&bn.is(u))return{start:l,end:u};throw new Error("Range#create called with invalid arguments["+l+", "+u+", "+f+", "+g+"]")}i.create=o;function a(l){var u=l;return F.objectLiteral(u)&&bn.is(u.start)&&bn.is(u.end)}i.is=a})(St||(St={}));var ko;(function(i){function o(l,u){return{uri:l,range:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&St.is(u.range)&&(F.string(u.uri)||F.undefined(u.uri))}i.is=a})(ko||(ko={}));var Is;(function(i){function o(l,u,f,g){return{targetUri:l,targetRange:u,targetSelectionRange:f,originSelectionRange:g}}i.create=o;function a(l){var u=l;return F.defined(u)&&St.is(u.targetRange)&&F.string(u.targetUri)&&(St.is(u.targetSelectionRange)||F.undefined(u.targetSelectionRange))&&(St.is(u.originSelectionRange)||F.undefined(u.originSelectionRange))}i.is=a})(Is||(Is={}));var Co;(function(i){function o(l,u,f,g){return{red:l,green:u,blue:f,alpha:g}}i.create=o;function a(l){var u=l;return F.numberRange(u.red,0,1)&&F.numberRange(u.green,0,1)&&F.numberRange(u.blue,0,1)&&F.numberRange(u.alpha,0,1)}i.is=a})(Co||(Co={}));var Ws;(function(i){function o(l,u){return{range:l,color:u}}i.create=o;function a(l){var u=l;return St.is(u.range)&&Co.is(u.color)}i.is=a})(Ws||(Ws={}));var Hs;(function(i){function o(l,u,f){return{label:l,textEdit:u,additionalTextEdits:f}}i.create=o;function a(l){var u=l;return F.string(u.label)&&(F.undefined(u.textEdit)||jn.is(u))&&(F.undefined(u.additionalTextEdits)||F.typedArray(u.additionalTextEdits,jn.is))}i.is=a})(Hs||(Hs={}));var Fs;(function(i){i.Comment="comment",i.Imports="imports",i.Region="region"})(Fs||(Fs={}));var qs;(function(i){function o(l,u,f,g,b){var w={startLine:l,endLine:u};return F.defined(f)&&(w.startCharacter=f),F.defined(g)&&(w.endCharacter=g),F.defined(b)&&(w.kind=b),w}i.create=o;function a(l){var u=l;return F.uinteger(u.startLine)&&F.uinteger(u.startLine)&&(F.undefined(u.startCharacter)||F.uinteger(u.startCharacter))&&(F.undefined(u.endCharacter)||F.uinteger(u.endCharacter))&&(F.undefined(u.kind)||F.string(u.kind))}i.is=a})(qs||(qs={}));var To;(function(i){function o(l,u){return{location:l,message:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&ko.is(u.location)&&F.string(u.message)}i.is=a})(To||(To={}));var zs;(function(i){i.Error=1,i.Warning=2,i.Information=3,i.Hint=4})(zs||(zs={}));var Bs;(function(i){i.Unnecessary=1,i.Deprecated=2})(Bs||(Bs={}));var js;(function(i){function o(a){var l=a;return l!=null&&F.string(l.href)}i.is=o})(js||(js={}));var Ni;(function(i){function o(l,u,f,g,b,w){var k={range:l,message:u};return F.defined(f)&&(k.severity=f),F.defined(g)&&(k.code=g),F.defined(b)&&(k.source=b),F.defined(w)&&(k.relatedInformation=w),k}i.create=o;function a(l){var u,f=l;return F.defined(f)&&St.is(f.range)&&F.string(f.message)&&(F.number(f.severity)||F.undefined(f.severity))&&(F.integer(f.code)||F.string(f.code)||F.undefined(f.code))&&(F.undefined(f.codeDescription)||F.string((u=f.codeDescription)===null||u===void 0?void 0:u.href))&&(F.string(f.source)||F.undefined(f.source))&&(F.undefined(f.relatedInformation)||F.typedArray(f.relatedInformation,To.is))}i.is=a})(Ni||(Ni={}));var jr;(function(i){function o(l,u){for(var f=[],g=2;g<arguments.length;g++)f[g-2]=arguments[g];var b={title:l,command:u};return F.defined(f)&&f.length>0&&(b.arguments=f),b}i.create=o;function a(l){var u=l;return F.defined(u)&&F.string(u.title)&&F.string(u.command)}i.is=a})(jr||(jr={}));var jn;(function(i){function o(f,g){return{range:f,newText:g}}i.replace=o;function a(f,g){return{range:{start:f,end:f},newText:g}}i.insert=a;function l(f){return{range:f,newText:""}}i.del=l;function u(f){var g=f;return F.objectLiteral(g)&&F.string(g.newText)&&St.is(g.range)}i.is=u})(jn||(jn={}));var yr;(function(i){function o(l,u,f){var g={label:l};return u!==void 0&&(g.needsConfirmation=u),f!==void 0&&(g.description=f),g}i.create=o;function a(l){var u=l;return u!==void 0&&F.objectLiteral(u)&&F.string(u.label)&&(F.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(F.string(u.description)||u.description===void 0)}i.is=a})(yr||(yr={}));var Mt;(function(i){function o(a){var l=a;return typeof l=="string"}i.is=o})(Mt||(Mt={}));var Bn;(function(i){function o(f,g,b){return{range:f,newText:g,annotationId:b}}i.replace=o;function a(f,g,b){return{range:{start:f,end:f},newText:g,annotationId:b}}i.insert=a;function l(f,g){return{range:f,newText:"",annotationId:g}}i.del=l;function u(f){var g=f;return jn.is(g)&&(yr.is(g.annotationId)||Mt.is(g.annotationId))}i.is=u})(Bn||(Bn={}));var Oi;(function(i){function o(l,u){return{textDocument:l,edits:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&Ai.is(u.textDocument)&&Array.isArray(u.edits)}i.is=a})(Oi||(Oi={}));var Ur;(function(i){function o(l,u,f){var g={kind:"create",uri:l};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(g.options=u),f!==void 0&&(g.annotationId=f),g}i.create=o;function a(l){var u=l;return u&&u.kind==="create"&&F.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||F.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||F.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}i.is=a})(Ur||(Ur={}));var $r;(function(i){function o(l,u,f,g){var b={kind:"rename",oldUri:l,newUri:u};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(b.options=f),g!==void 0&&(b.annotationId=g),b}i.create=o;function a(l){var u=l;return u&&u.kind==="rename"&&F.string(u.oldUri)&&F.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||F.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||F.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}i.is=a})($r||($r={}));var Gr;(function(i){function o(l,u,f){var g={kind:"delete",uri:l};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(g.options=u),f!==void 0&&(g.annotationId=f),g}i.create=o;function a(l){var u=l;return u&&u.kind==="delete"&&F.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||F.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||F.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}i.is=a})(Gr||(Gr={}));var So;(function(i){function o(a){var l=a;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(u){return F.string(u.kind)?Ur.is(u)||$r.is(u)||Gr.is(u):Oi.is(u)}))}i.is=o})(So||(So={}));var vo=function(){function i(o,a){this.edits=o,this.changeAnnotations=a}return i.prototype.insert=function(o,a,l){var u,f;if(l===void 0?u=jn.insert(o,a):Mt.is(l)?(f=l,u=Bn.insert(o,a,l)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(l),u=Bn.insert(o,a,f)),this.edits.push(u),f!==void 0)return f},i.prototype.replace=function(o,a,l){var u,f;if(l===void 0?u=jn.replace(o,a):Mt.is(l)?(f=l,u=Bn.replace(o,a,l)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(l),u=Bn.replace(o,a,f)),this.edits.push(u),f!==void 0)return f},i.prototype.delete=function(o,a){var l,u;if(a===void 0?l=jn.del(o):Mt.is(a)?(u=a,l=Bn.del(o,a)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(a),l=Bn.del(o,u)),this.edits.push(l),u!==void 0)return u},i.prototype.add=function(o){this.edits.push(o)},i.prototype.all=function(){return this.edits},i.prototype.clear=function(){this.edits.splice(0,this.edits.length)},i.prototype.assertChangeAnnotations=function(o){if(o===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},i}(),Nu=function(){function i(o){this._annotations=o===void 0?Object.create(null):o,this._counter=0,this._size=0}return i.prototype.all=function(){return this._annotations},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),i.prototype.manage=function(o,a){var l;if(Mt.is(o)?l=o:(l=this.nextId(),a=o),this._annotations[l]!==void 0)throw new Error("Id "+l+" is already in use.");if(a===void 0)throw new Error("No annotation provided for id "+l);return this._annotations[l]=a,this._size++,l},i.prototype.nextId=function(){return this._counter++,this._counter.toString()},i}(),vh=function(){function i(o){var a=this;this._textEditChanges=Object.create(null),o!==void 0?(this._workspaceEdit=o,o.documentChanges?(this._changeAnnotations=new Nu(o.changeAnnotations),o.changeAnnotations=this._changeAnnotations.all(),o.documentChanges.forEach(function(l){if(Oi.is(l)){var u=new vo(l.edits,a._changeAnnotations);a._textEditChanges[l.textDocument.uri]=u}})):o.changes&&Object.keys(o.changes).forEach(function(l){var u=new vo(o.changes[l]);a._textEditChanges[l]=u})):this._workspaceEdit={}}return Object.defineProperty(i.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),i.prototype.getTextEditChange=function(o){if(Ai.is(o)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a={uri:o.uri,version:o.version},l=this._textEditChanges[a.uri];if(!l){var u=[],f={textDocument:a,edits:u};this._workspaceEdit.documentChanges.push(f),l=new vo(u,this._changeAnnotations),this._textEditChanges[a.uri]=l}return l}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[o];if(!l){var u=[];this._workspaceEdit.changes[o]=u,l=new vo(u),this._textEditChanges[o]=l}return l}},i.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Nu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},i.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},i.prototype.createFile=function(o,a,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;yr.is(a)||Mt.is(a)?u=a:l=a;var f,g;if(u===void 0?f=Ur.create(o,l):(g=Mt.is(u)?u:this._changeAnnotations.manage(u),f=Ur.create(o,l,g)),this._workspaceEdit.documentChanges.push(f),g!==void 0)return g},i.prototype.renameFile=function(o,a,l,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;yr.is(l)||Mt.is(l)?f=l:u=l;var g,b;if(f===void 0?g=$r.create(o,a,u):(b=Mt.is(f)?f:this._changeAnnotations.manage(f),g=$r.create(o,a,u,b)),this._workspaceEdit.documentChanges.push(g),b!==void 0)return b},i.prototype.deleteFile=function(o,a,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;yr.is(a)||Mt.is(a)?u=a:l=a;var f,g;if(u===void 0?f=Gr.create(o,l):(g=Mt.is(u)?u:this._changeAnnotations.manage(u),f=Gr.create(o,l,g)),this._workspaceEdit.documentChanges.push(f),g!==void 0)return g},i}(),Us;(function(i){function o(l){return{uri:l}}i.create=o;function a(l){var u=l;return F.defined(u)&&F.string(u.uri)}i.is=a})(Us||(Us={}));var $s;(function(i){function o(l,u){return{uri:l,version:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&F.string(u.uri)&&F.integer(u.version)}i.is=a})($s||($s={}));var Ai;(function(i){function o(l,u){return{uri:l,version:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&F.string(u.uri)&&(u.version===null||F.integer(u.version))}i.is=a})(Ai||(Ai={}));var Gs;(function(i){function o(l,u,f,g){return{uri:l,languageId:u,version:f,text:g}}i.create=o;function a(l){var u=l;return F.defined(u)&&F.string(u.uri)&&F.string(u.languageId)&&F.integer(u.version)&&F.string(u.text)}i.is=a})(Gs||(Gs={}));var Kr;(function(i){i.PlainText="plaintext",i.Markdown="markdown"})(Kr||(Kr={}));(function(i){function o(a){var l=a;return l===i.PlainText||l===i.Markdown}i.is=o})(Kr||(Kr={}));var xo;(function(i){function o(a){var l=a;return F.objectLiteral(a)&&Kr.is(l.kind)&&F.string(l.value)}i.is=o})(xo||(xo={}));var Ks;(function(i){i.Text=1,i.Method=2,i.Function=3,i.Constructor=4,i.Field=5,i.Variable=6,i.Class=7,i.Interface=8,i.Module=9,i.Property=10,i.Unit=11,i.Value=12,i.Enum=13,i.Keyword=14,i.Snippet=15,i.Color=16,i.File=17,i.Reference=18,i.Folder=19,i.EnumMember=20,i.Constant=21,i.Struct=22,i.Event=23,i.Operator=24,i.TypeParameter=25})(Ks||(Ks={}));var Xs;(function(i){i.PlainText=1,i.Snippet=2})(Xs||(Xs={}));var Ys;(function(i){i.Deprecated=1})(Ys||(Ys={}));var Zs;(function(i){function o(l,u,f){return{newText:l,insert:u,replace:f}}i.create=o;function a(l){var u=l;return u&&F.string(u.newText)&&St.is(u.insert)&&St.is(u.replace)}i.is=a})(Zs||(Zs={}));var Js;(function(i){i.asIs=1,i.adjustIndentation=2})(Js||(Js={}));var Qs;(function(i){function o(a){return{label:a}}i.create=o})(Qs||(Qs={}));var Vs;(function(i){function o(a,l){return{items:a||[],isIncomplete:!!l}}i.create=o})(Vs||(Vs={}));var Ii;(function(i){function o(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i.fromPlainText=o;function a(l){var u=l;return F.string(u)||F.objectLiteral(u)&&F.string(u.language)&&F.string(u.value)}i.is=a})(Ii||(Ii={}));var ea;(function(i){function o(a){var l=a;return!!l&&F.objectLiteral(l)&&(xo.is(l.contents)||Ii.is(l.contents)||F.typedArray(l.contents,Ii.is))&&(a.range===void 0||St.is(a.range))}i.is=o})(ea||(ea={}));var ta;(function(i){function o(a,l){return l?{label:a,documentation:l}:{label:a}}i.create=o})(ta||(ta={}));var na;(function(i){function o(a,l){for(var u=[],f=2;f<arguments.length;f++)u[f-2]=arguments[f];var g={label:a};return F.defined(l)&&(g.documentation=l),F.defined(u)?g.parameters=u:g.parameters=[],g}i.create=o})(na||(na={}));var ra;(function(i){i.Text=1,i.Read=2,i.Write=3})(ra||(ra={}));var ia;(function(i){function o(a,l){var u={range:a};return F.number(l)&&(u.kind=l),u}i.create=o})(ia||(ia={}));var oa;(function(i){i.File=1,i.Module=2,i.Namespace=3,i.Package=4,i.Class=5,i.Method=6,i.Property=7,i.Field=8,i.Constructor=9,i.Enum=10,i.Interface=11,i.Function=12,i.Variable=13,i.Constant=14,i.String=15,i.Number=16,i.Boolean=17,i.Array=18,i.Object=19,i.Key=20,i.Null=21,i.EnumMember=22,i.Struct=23,i.Event=24,i.Operator=25,i.TypeParameter=26})(oa||(oa={}));var sa;(function(i){i.Deprecated=1})(sa||(sa={}));var aa;(function(i){function o(a,l,u,f,g){var b={name:a,kind:l,location:{uri:f,range:u}};return g&&(b.containerName=g),b}i.create=o})(aa||(aa={}));var la;(function(i){function o(l,u,f,g,b,w){var k={name:l,detail:u,kind:f,range:g,selectionRange:b};return w!==void 0&&(k.children=w),k}i.create=o;function a(l){var u=l;return u&&F.string(u.name)&&F.number(u.kind)&&St.is(u.range)&&St.is(u.selectionRange)&&(u.detail===void 0||F.string(u.detail))&&(u.deprecated===void 0||F.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}i.is=a})(la||(la={}));var ua;(function(i){i.Empty="",i.QuickFix="quickfix",i.Refactor="refactor",i.RefactorExtract="refactor.extract",i.RefactorInline="refactor.inline",i.RefactorRewrite="refactor.rewrite",i.Source="source",i.SourceOrganizeImports="source.organizeImports",i.SourceFixAll="source.fixAll"})(ua||(ua={}));var ca;(function(i){function o(l,u){var f={diagnostics:l};return u!=null&&(f.only=u),f}i.create=o;function a(l){var u=l;return F.defined(u)&&F.typedArray(u.diagnostics,Ni.is)&&(u.only===void 0||F.typedArray(u.only,F.string))}i.is=a})(ca||(ca={}));var fa;(function(i){function o(l,u,f){var g={title:l},b=!0;return typeof u=="string"?(b=!1,g.kind=u):jr.is(u)?g.command=u:g.edit=u,b&&f!==void 0&&(g.kind=f),g}i.create=o;function a(l){var u=l;return u&&F.string(u.title)&&(u.diagnostics===void 0||F.typedArray(u.diagnostics,Ni.is))&&(u.kind===void 0||F.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||jr.is(u.command))&&(u.isPreferred===void 0||F.boolean(u.isPreferred))&&(u.edit===void 0||So.is(u.edit))}i.is=a})(fa||(fa={}));var da;(function(i){function o(l,u){var f={range:l};return F.defined(u)&&(f.data=u),f}i.create=o;function a(l){var u=l;return F.defined(u)&&St.is(u.range)&&(F.undefined(u.command)||jr.is(u.command))}i.is=a})(da||(da={}));var ha;(function(i){function o(l,u){return{tabSize:l,insertSpaces:u}}i.create=o;function a(l){var u=l;return F.defined(u)&&F.uinteger(u.tabSize)&&F.boolean(u.insertSpaces)}i.is=a})(ha||(ha={}));var pa;(function(i){function o(l,u,f){return{range:l,target:u,data:f}}i.create=o;function a(l){var u=l;return F.defined(u)&&St.is(u.range)&&(F.undefined(u.target)||F.string(u.target))}i.is=a})(pa||(pa={}));var ga;(function(i){function o(l,u){return{range:l,parent:u}}i.create=o;function a(l){var u=l;return u!==void 0&&St.is(u.range)&&(u.parent===void 0||i.is(u.parent))}i.is=a})(ga||(ga={}));var mh=[`
`,`\r
`,"\r"],va;(function(i){function o(f,g,b,w){return new yh(f,g,b,w)}i.create=o;function a(f){var g=f;return!!(F.defined(g)&&F.string(g.uri)&&(F.undefined(g.languageId)||F.string(g.languageId))&&F.uinteger(g.lineCount)&&F.func(g.getText)&&F.func(g.positionAt)&&F.func(g.offsetAt))}i.is=a;function l(f,g){for(var b=f.getText(),w=u(g,function($,Y){var V=$.range.start.line-Y.range.start.line;return V===0?$.range.start.character-Y.range.start.character:V}),k=b.length,T=w.length-1;T>=0;T--){var N=w[T],E=f.offsetAt(N.range.start),M=f.offsetAt(N.range.end);if(M<=k)b=b.substring(0,E)+N.newText+b.substring(M,b.length);else throw new Error("Overlapping edit");k=E}return b}i.applyEdits=l;function u(f,g){if(f.length<=1)return f;var b=f.length/2|0,w=f.slice(0,b),k=f.slice(b);u(w,g),u(k,g);for(var T=0,N=0,E=0;T<w.length&&N<k.length;){var M=g(w[T],k[N]);M<=0?f[E++]=w[T++]:f[E++]=k[N++]}for(;T<w.length;)f[E++]=w[T++];for(;N<k.length;)f[E++]=k[N++];return f}})(va||(va={}));var yh=function(){function i(o,a,l,u){this._uri=o,this._languageId=a,this._version=l,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),i.prototype.getText=function(o){if(o){var a=this.offsetAt(o.start),l=this.offsetAt(o.end);return this._content.substring(a,l)}return this._content},i.prototype.update=function(o,a){this._content=o.text,this._version=a,this._lineOffsets=void 0},i.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var o=[],a=this._content,l=!0,u=0;u<a.length;u++){l&&(o.push(u),l=!1);var f=a.charAt(u);l=f==="\r"||f===`
`,f==="\r"&&u+1<a.length&&a.charAt(u+1)===`
`&&u++}l&&a.length>0&&o.push(a.length),this._lineOffsets=o}return this._lineOffsets},i.prototype.positionAt=function(o){o=Math.max(Math.min(o,this._content.length),0);var a=this.getLineOffsets(),l=0,u=a.length;if(u===0)return bn.create(0,o);for(;l<u;){var f=Math.floor((l+u)/2);a[f]>o?u=f:l=f+1}var g=l-1;return bn.create(g,o-a[g])},i.prototype.offsetAt=function(o){var a=this.getLineOffsets();if(o.line>=a.length)return this._content.length;if(o.line<0)return 0;var l=a[o.line],u=o.line+1<a.length?a[o.line+1]:this._content.length;return Math.max(Math.min(l+o.character,u),l)},Object.defineProperty(i.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),i}(),F;(function(i){var o=Object.prototype.toString;function a(M){return typeof M!="undefined"}i.defined=a;function l(M){return typeof M=="undefined"}i.undefined=l;function u(M){return M===!0||M===!1}i.boolean=u;function f(M){return o.call(M)==="[object String]"}i.string=f;function g(M){return o.call(M)==="[object Number]"}i.number=g;function b(M,$,Y){return o.call(M)==="[object Number]"&&$<=M&&M<=Y}i.numberRange=b;function w(M){return o.call(M)==="[object Number]"&&-2147483648<=M&&M<=2147483647}i.integer=w;function k(M){return o.call(M)==="[object Number]"&&0<=M&&M<=2147483647}i.uinteger=k;function T(M){return o.call(M)==="[object Function]"}i.func=T;function N(M){return M!==null&&typeof M=="object"}i.objectLiteral=N;function E(M,$){return Array.isArray(M)&&M.every($)}i.typedArray=E})(F||(F={}));var bh=Object.freeze(Object.defineProperty({__proto__:null,get integer(){return As},get uinteger(){return Pi},get Position(){return bn},get Range(){return St},get Location(){return ko},get LocationLink(){return Is},get Color(){return Co},get ColorInformation(){return Ws},get ColorPresentation(){return Hs},get FoldingRangeKind(){return Fs},get FoldingRange(){return qs},get DiagnosticRelatedInformation(){return To},get DiagnosticSeverity(){return zs},get DiagnosticTag(){return Bs},get CodeDescription(){return js},get Diagnostic(){return Ni},get Command(){return jr},get TextEdit(){return jn},get ChangeAnnotation(){return yr},get ChangeAnnotationIdentifier(){return Mt},get AnnotatedTextEdit(){return Bn},get TextDocumentEdit(){return Oi},get CreateFile(){return Ur},get RenameFile(){return $r},get DeleteFile(){return Gr},get WorkspaceEdit(){return So},WorkspaceChange:vh,get TextDocumentIdentifier(){return Us},get VersionedTextDocumentIdentifier(){return $s},get OptionalVersionedTextDocumentIdentifier(){return Ai},get TextDocumentItem(){return Gs},get MarkupKind(){return Kr},get MarkupContent(){return xo},get CompletionItemKind(){return Ks},get InsertTextFormat(){return Xs},get CompletionItemTag(){return Ys},get InsertReplaceEdit(){return Zs},get InsertTextMode(){return Js},get CompletionItem(){return Qs},get CompletionList(){return Vs},get MarkedString(){return Ii},get Hover(){return ea},get ParameterInformation(){return ta},get SignatureInformation(){return na},get DocumentHighlightKind(){return ra},get DocumentHighlight(){return ia},get SymbolKind(){return oa},get SymbolTag(){return sa},get SymbolInformation(){return aa},get DocumentSymbol(){return la},get CodeActionKind(){return ua},get CodeActionContext(){return ca},get CodeAction(){return fa},get CodeLens(){return da},get FormattingOptions(){return ha},get DocumentLink(){return pa},get SelectionRange(){return ga},EOL:mh,get TextDocument(){return va}},Symbol.toStringTag,{value:"Module"})),wh=Ad(bh),Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ProtocolNotificationType=Ue.ProtocolNotificationType0=Ue.ProtocolRequestType=Ue.ProtocolRequestType0=Ue.RegistrationType=void 0;const Xr=ht;class kh{constructor(o){this.method=o}}Ue.RegistrationType=kh;class Ch extends Xr.RequestType0{constructor(o){super(o)}}Ue.ProtocolRequestType0=Ch;class Th extends Xr.RequestType{constructor(o){super(o,Xr.ParameterStructures.byName)}}Ue.ProtocolRequestType=Th;class Sh extends Xr.NotificationType0{constructor(o){super(o)}}Ue.ProtocolNotificationType0=Sh;class xh extends Xr.NotificationType{constructor(o){super(o,Xr.ParameterStructures.byName)}}Ue.ProtocolNotificationType=xh;var cc={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.objectLiteral=ft.typedArray=ft.stringArray=ft.array=ft.func=ft.error=ft.number=ft.string=ft.boolean=void 0;function Rh(i){return i===!0||i===!1}ft.boolean=Rh;function fc(i){return typeof i=="string"||i instanceof String}ft.string=fc;function _h(i){return typeof i=="number"||i instanceof Number}ft.number=_h;function Lh(i){return i instanceof Error}ft.error=Lh;function Eh(i){return typeof i=="function"}ft.func=Eh;function dc(i){return Array.isArray(i)}ft.array=dc;function Mh(i){return dc(i)&&i.every(o=>fc(o))}ft.stringArray=Mh;function Dh(i,o){return Array.isArray(i)&&i.every(o)}ft.typedArray=Dh;function Ph(i){return i!==null&&typeof i=="object"}ft.objectLiteral=Ph;var hc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ImplementationRequest=void 0;const o=Ue;(function(a){a.method="textDocument/implementation",a.type=new o.ProtocolRequestType(a.method)})(i.ImplementationRequest||(i.ImplementationRequest={}))})(hc);var pc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeDefinitionRequest=void 0;const o=Ue;(function(a){a.method="textDocument/typeDefinition",a.type=new o.ProtocolRequestType(a.method)})(i.TypeDefinitionRequest||(i.TypeDefinitionRequest={}))})(pc);var gc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=void 0;const o=Ue;(function(a){a.type=new o.ProtocolRequestType0("workspace/workspaceFolders")})(i.WorkspaceFoldersRequest||(i.WorkspaceFoldersRequest={})),function(a){a.type=new o.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(i.DidChangeWorkspaceFoldersNotification||(i.DidChangeWorkspaceFoldersNotification={}))})(gc);var vc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurationRequest=void 0;const o=Ue;(function(a){a.type=new o.ProtocolRequestType("workspace/configuration")})(i.ConfigurationRequest||(i.ConfigurationRequest={}))})(vc);var mc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorPresentationRequest=i.DocumentColorRequest=void 0;const o=Ue;(function(a){a.method="textDocument/documentColor",a.type=new o.ProtocolRequestType(a.method)})(i.DocumentColorRequest||(i.DocumentColorRequest={})),function(a){a.type=new o.ProtocolRequestType("textDocument/colorPresentation")}(i.ColorPresentationRequest||(i.ColorPresentationRequest={}))})(mc);var yc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.FoldingRangeRequest=i.FoldingRangeKind=void 0;const o=Ue;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(i.FoldingRangeKind||(i.FoldingRangeKind={})),function(a){a.method="textDocument/foldingRange",a.type=new o.ProtocolRequestType(a.method)}(i.FoldingRangeRequest||(i.FoldingRangeRequest={}))})(yc);var bc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DeclarationRequest=void 0;const o=Ue;(function(a){a.method="textDocument/declaration",a.type=new o.ProtocolRequestType(a.method)})(i.DeclarationRequest||(i.DeclarationRequest={}))})(bc);var wc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRangeRequest=void 0;const o=Ue;(function(a){a.method="textDocument/selectionRange",a.type=new o.ProtocolRequestType(a.method)})(i.SelectionRangeRequest||(i.SelectionRangeRequest={}))})(wc);var kc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=void 0;const o=ht,a=Ue;(function(l){l.type=new o.ProgressType;function u(f){return f===l.type}l.is=u})(i.WorkDoneProgress||(i.WorkDoneProgress={})),function(l){l.type=new a.ProtocolRequestType("window/workDoneProgress/create")}(i.WorkDoneProgressCreateRequest||(i.WorkDoneProgressCreateRequest={})),function(l){l.type=new a.ProtocolNotificationType("window/workDoneProgress/cancel")}(i.WorkDoneProgressCancelNotification||(i.WorkDoneProgressCancelNotification={}))})(kc);var Cc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.CallHierarchyPrepareRequest=void 0;const o=Ue;(function(a){a.method="textDocument/prepareCallHierarchy",a.type=new o.ProtocolRequestType(a.method)})(i.CallHierarchyPrepareRequest||(i.CallHierarchyPrepareRequest={})),function(a){a.method="callHierarchy/incomingCalls",a.type=new o.ProtocolRequestType(a.method)}(i.CallHierarchyIncomingCallsRequest||(i.CallHierarchyIncomingCallsRequest={})),function(a){a.method="callHierarchy/outgoingCalls",a.type=new o.ProtocolRequestType(a.method)}(i.CallHierarchyOutgoingCallsRequest||(i.CallHierarchyOutgoingCallsRequest={}))})(Cc);var Tc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.SemanticTokensRegistrationType=i.TokenFormat=i.SemanticTokens=i.SemanticTokenModifiers=i.SemanticTokenTypes=void 0;const o=Ue;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator"})(i.SemanticTokenTypes||(i.SemanticTokenTypes={})),function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"}(i.SemanticTokenModifiers||(i.SemanticTokenModifiers={})),function(a){function l(u){const f=u;return f!==void 0&&(f.resultId===void 0||typeof f.resultId=="string")&&Array.isArray(f.data)&&(f.data.length===0||typeof f.data[0]=="number")}a.is=l}(i.SemanticTokens||(i.SemanticTokens={})),function(a){a.Relative="relative"}(i.TokenFormat||(i.TokenFormat={})),function(a){a.method="textDocument/semanticTokens",a.type=new o.RegistrationType(a.method)}(i.SemanticTokensRegistrationType||(i.SemanticTokensRegistrationType={})),function(a){a.method="textDocument/semanticTokens/full",a.type=new o.ProtocolRequestType(a.method)}(i.SemanticTokensRequest||(i.SemanticTokensRequest={})),function(a){a.method="textDocument/semanticTokens/full/delta",a.type=new o.ProtocolRequestType(a.method)}(i.SemanticTokensDeltaRequest||(i.SemanticTokensDeltaRequest={})),function(a){a.method="textDocument/semanticTokens/range",a.type=new o.ProtocolRequestType(a.method)}(i.SemanticTokensRangeRequest||(i.SemanticTokensRangeRequest={})),function(a){a.method="workspace/semanticTokens/refresh",a.type=new o.ProtocolRequestType0(a.method)}(i.SemanticTokensRefreshRequest||(i.SemanticTokensRefreshRequest={}))})(Tc);var Sc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ShowDocumentRequest=void 0;const o=Ue;(function(a){a.method="window/showDocument",a.type=new o.ProtocolRequestType(a.method)})(i.ShowDocumentRequest||(i.ShowDocumentRequest={}))})(Sc);var xc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LinkedEditingRangeRequest=void 0;const o=Ue;(function(a){a.method="textDocument/linkedEditingRange",a.type=new o.ProtocolRequestType(a.method)})(i.LinkedEditingRangeRequest||(i.LinkedEditingRangeRequest={}))})(xc);var Rc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.DidRenameFilesNotification=i.WillRenameFilesRequest=i.DidCreateFilesNotification=i.WillCreateFilesRequest=i.FileOperationPatternKind=void 0;const o=Ue;(function(a){a.file="file",a.folder="folder"})(i.FileOperationPatternKind||(i.FileOperationPatternKind={})),function(a){a.method="workspace/willCreateFiles",a.type=new o.ProtocolRequestType(a.method)}(i.WillCreateFilesRequest||(i.WillCreateFilesRequest={})),function(a){a.method="workspace/didCreateFiles",a.type=new o.ProtocolNotificationType(a.method)}(i.DidCreateFilesNotification||(i.DidCreateFilesNotification={})),function(a){a.method="workspace/willRenameFiles",a.type=new o.ProtocolRequestType(a.method)}(i.WillRenameFilesRequest||(i.WillRenameFilesRequest={})),function(a){a.method="workspace/didRenameFiles",a.type=new o.ProtocolNotificationType(a.method)}(i.DidRenameFilesNotification||(i.DidRenameFilesNotification={})),function(a){a.method="workspace/didDeleteFiles",a.type=new o.ProtocolNotificationType(a.method)}(i.DidDeleteFilesNotification||(i.DidDeleteFilesNotification={})),function(a){a.method="workspace/willDeleteFiles",a.type=new o.ProtocolRequestType(a.method)}(i.WillDeleteFilesRequest||(i.WillDeleteFilesRequest={}))})(Rc);var _c={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=void 0;const o=Ue;(function(a){a.document="document",a.project="project",a.group="group",a.scheme="scheme",a.global="global"})(i.UniquenessLevel||(i.UniquenessLevel={})),function(a){a.import="import",a.export="export",a.local="local"}(i.MonikerKind||(i.MonikerKind={})),function(a){a.method="textDocument/moniker",a.type=new o.ProtocolRequestType(a.method)}(i.MonikerRequest||(i.MonikerRequest={}))})(_c);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocumentLinkRequest=i.CodeLensRefreshRequest=i.CodeLensResolveRequest=i.CodeLensRequest=i.WorkspaceSymbolRequest=i.CodeActionResolveRequest=i.CodeActionRequest=i.DocumentSymbolRequest=i.DocumentHighlightRequest=i.ReferencesRequest=i.DefinitionRequest=i.SignatureHelpRequest=i.SignatureHelpTriggerKind=i.HoverRequest=i.CompletionResolveRequest=i.CompletionRequest=i.CompletionTriggerKind=i.PublishDiagnosticsNotification=i.WatchKind=i.FileChangeType=i.DidChangeWatchedFilesNotification=i.WillSaveTextDocumentWaitUntilRequest=i.WillSaveTextDocumentNotification=i.TextDocumentSaveReason=i.DidSaveTextDocumentNotification=i.DidCloseTextDocumentNotification=i.DidChangeTextDocumentNotification=i.TextDocumentContentChangeEvent=i.DidOpenTextDocumentNotification=i.TextDocumentSyncKind=i.TelemetryEventNotification=i.LogMessageNotification=i.ShowMessageRequest=i.ShowMessageNotification=i.MessageType=i.DidChangeConfigurationNotification=i.ExitNotification=i.ShutdownRequest=i.InitializedNotification=i.InitializeError=i.InitializeRequest=i.WorkDoneProgressOptions=i.TextDocumentRegistrationOptions=i.StaticRegistrationOptions=i.FailureHandlingKind=i.ResourceOperationKind=i.UnregistrationRequest=i.RegistrationRequest=i.DocumentSelector=i.DocumentFilter=void 0,i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.WillRenameFilesRequest=i.DidRenameFilesNotification=i.WillCreateFilesRequest=i.DidCreateFilesNotification=i.FileOperationPatternKind=i.LinkedEditingRangeRequest=i.ShowDocumentRequest=i.SemanticTokensRegistrationType=i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.TokenFormat=i.SemanticTokens=i.SemanticTokenModifiers=i.SemanticTokenTypes=i.CallHierarchyPrepareRequest=i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=i.SelectionRangeRequest=i.DeclarationRequest=i.FoldingRangeRequest=i.ColorPresentationRequest=i.DocumentColorRequest=i.ConfigurationRequest=i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=i.TypeDefinitionRequest=i.ImplementationRequest=i.ApplyWorkspaceEditRequest=i.ExecuteCommandRequest=i.PrepareRenameRequest=i.RenameRequest=i.PrepareSupportDefaultBehavior=i.DocumentOnTypeFormattingRequest=i.DocumentRangeFormattingRequest=i.DocumentFormattingRequest=i.DocumentLinkResolveRequest=void 0;const o=ft,a=Ue,l=hc;Object.defineProperty(i,"ImplementationRequest",{enumerable:!0,get:function(){return l.ImplementationRequest}});const u=pc;Object.defineProperty(i,"TypeDefinitionRequest",{enumerable:!0,get:function(){return u.TypeDefinitionRequest}});const f=gc;Object.defineProperty(i,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return f.WorkspaceFoldersRequest}}),Object.defineProperty(i,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return f.DidChangeWorkspaceFoldersNotification}});const g=vc;Object.defineProperty(i,"ConfigurationRequest",{enumerable:!0,get:function(){return g.ConfigurationRequest}});const b=mc;Object.defineProperty(i,"DocumentColorRequest",{enumerable:!0,get:function(){return b.DocumentColorRequest}}),Object.defineProperty(i,"ColorPresentationRequest",{enumerable:!0,get:function(){return b.ColorPresentationRequest}});const w=yc;Object.defineProperty(i,"FoldingRangeRequest",{enumerable:!0,get:function(){return w.FoldingRangeRequest}});const k=bc;Object.defineProperty(i,"DeclarationRequest",{enumerable:!0,get:function(){return k.DeclarationRequest}});const T=wc;Object.defineProperty(i,"SelectionRangeRequest",{enumerable:!0,get:function(){return T.SelectionRangeRequest}});const N=kc;Object.defineProperty(i,"WorkDoneProgress",{enumerable:!0,get:function(){return N.WorkDoneProgress}}),Object.defineProperty(i,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return N.WorkDoneProgressCreateRequest}}),Object.defineProperty(i,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return N.WorkDoneProgressCancelNotification}});const E=Cc;Object.defineProperty(i,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return E.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(i,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return E.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(i,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return E.CallHierarchyPrepareRequest}});const M=Tc;Object.defineProperty(i,"SemanticTokenTypes",{enumerable:!0,get:function(){return M.SemanticTokenTypes}}),Object.defineProperty(i,"SemanticTokenModifiers",{enumerable:!0,get:function(){return M.SemanticTokenModifiers}}),Object.defineProperty(i,"SemanticTokens",{enumerable:!0,get:function(){return M.SemanticTokens}}),Object.defineProperty(i,"TokenFormat",{enumerable:!0,get:function(){return M.TokenFormat}}),Object.defineProperty(i,"SemanticTokensRequest",{enumerable:!0,get:function(){return M.SemanticTokensRequest}}),Object.defineProperty(i,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return M.SemanticTokensDeltaRequest}}),Object.defineProperty(i,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return M.SemanticTokensRangeRequest}}),Object.defineProperty(i,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return M.SemanticTokensRefreshRequest}}),Object.defineProperty(i,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return M.SemanticTokensRegistrationType}});const $=Sc;Object.defineProperty(i,"ShowDocumentRequest",{enumerable:!0,get:function(){return $.ShowDocumentRequest}});const Y=xc;Object.defineProperty(i,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Y.LinkedEditingRangeRequest}});const V=Rc;Object.defineProperty(i,"FileOperationPatternKind",{enumerable:!0,get:function(){return V.FileOperationPatternKind}}),Object.defineProperty(i,"DidCreateFilesNotification",{enumerable:!0,get:function(){return V.DidCreateFilesNotification}}),Object.defineProperty(i,"WillCreateFilesRequest",{enumerable:!0,get:function(){return V.WillCreateFilesRequest}}),Object.defineProperty(i,"DidRenameFilesNotification",{enumerable:!0,get:function(){return V.DidRenameFilesNotification}}),Object.defineProperty(i,"WillRenameFilesRequest",{enumerable:!0,get:function(){return V.WillRenameFilesRequest}}),Object.defineProperty(i,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return V.DidDeleteFilesNotification}}),Object.defineProperty(i,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return V.WillDeleteFilesRequest}});const _=_c;Object.defineProperty(i,"UniquenessLevel",{enumerable:!0,get:function(){return _.UniquenessLevel}}),Object.defineProperty(i,"MonikerKind",{enumerable:!0,get:function(){return _.MonikerKind}}),Object.defineProperty(i,"MonikerRequest",{enumerable:!0,get:function(){return _.MonikerRequest}});var P;(function(y){function W(j){const A=j;return o.string(A.language)||o.string(A.scheme)||o.string(A.pattern)}y.is=W})(P=i.DocumentFilter||(i.DocumentFilter={}));var L;(function(y){function W(j){if(!Array.isArray(j))return!1;for(let A of j)if(!o.string(A)&&!P.is(A))return!1;return!0}y.is=W})(L=i.DocumentSelector||(i.DocumentSelector={})),function(y){y.type=new a.ProtocolRequestType("client/registerCapability")}(i.RegistrationRequest||(i.RegistrationRequest={})),function(y){y.type=new a.ProtocolRequestType("client/unregisterCapability")}(i.UnregistrationRequest||(i.UnregistrationRequest={})),function(y){y.Create="create",y.Rename="rename",y.Delete="delete"}(i.ResourceOperationKind||(i.ResourceOperationKind={})),function(y){y.Abort="abort",y.Transactional="transactional",y.TextOnlyTransactional="textOnlyTransactional",y.Undo="undo"}(i.FailureHandlingKind||(i.FailureHandlingKind={})),function(y){function W(j){const A=j;return A&&o.string(A.id)&&A.id.length>0}y.hasId=W}(i.StaticRegistrationOptions||(i.StaticRegistrationOptions={})),function(y){function W(j){const A=j;return A&&(A.documentSelector===null||L.is(A.documentSelector))}y.is=W}(i.TextDocumentRegistrationOptions||(i.TextDocumentRegistrationOptions={})),function(y){function W(A){const X=A;return o.objectLiteral(X)&&(X.workDoneProgress===void 0||o.boolean(X.workDoneProgress))}y.is=W;function j(A){const X=A;return X&&o.boolean(X.workDoneProgress)}y.hasWorkDoneProgress=j}(i.WorkDoneProgressOptions||(i.WorkDoneProgressOptions={})),function(y){y.type=new a.ProtocolRequestType("initialize")}(i.InitializeRequest||(i.InitializeRequest={})),function(y){y.unknownProtocolVersion=1}(i.InitializeError||(i.InitializeError={})),function(y){y.type=new a.ProtocolNotificationType("initialized")}(i.InitializedNotification||(i.InitializedNotification={})),function(y){y.type=new a.ProtocolRequestType0("shutdown")}(i.ShutdownRequest||(i.ShutdownRequest={})),function(y){y.type=new a.ProtocolNotificationType0("exit")}(i.ExitNotification||(i.ExitNotification={})),function(y){y.type=new a.ProtocolNotificationType("workspace/didChangeConfiguration")}(i.DidChangeConfigurationNotification||(i.DidChangeConfigurationNotification={})),function(y){y.Error=1,y.Warning=2,y.Info=3,y.Log=4}(i.MessageType||(i.MessageType={})),function(y){y.type=new a.ProtocolNotificationType("window/showMessage")}(i.ShowMessageNotification||(i.ShowMessageNotification={})),function(y){y.type=new a.ProtocolRequestType("window/showMessageRequest")}(i.ShowMessageRequest||(i.ShowMessageRequest={})),function(y){y.type=new a.ProtocolNotificationType("window/logMessage")}(i.LogMessageNotification||(i.LogMessageNotification={})),function(y){y.type=new a.ProtocolNotificationType("telemetry/event")}(i.TelemetryEventNotification||(i.TelemetryEventNotification={})),function(y){y.None=0,y.Full=1,y.Incremental=2}(i.TextDocumentSyncKind||(i.TextDocumentSyncKind={})),function(y){y.method="textDocument/didOpen",y.type=new a.ProtocolNotificationType(y.method)}(i.DidOpenTextDocumentNotification||(i.DidOpenTextDocumentNotification={})),function(y){function W(A){let X=A;return X!=null&&typeof X.text=="string"&&X.range!==void 0&&(X.rangeLength===void 0||typeof X.rangeLength=="number")}y.isIncremental=W;function j(A){let X=A;return X!=null&&typeof X.text=="string"&&X.range===void 0&&X.rangeLength===void 0}y.isFull=j}(i.TextDocumentContentChangeEvent||(i.TextDocumentContentChangeEvent={})),function(y){y.method="textDocument/didChange",y.type=new a.ProtocolNotificationType(y.method)}(i.DidChangeTextDocumentNotification||(i.DidChangeTextDocumentNotification={})),function(y){y.method="textDocument/didClose",y.type=new a.ProtocolNotificationType(y.method)}(i.DidCloseTextDocumentNotification||(i.DidCloseTextDocumentNotification={})),function(y){y.method="textDocument/didSave",y.type=new a.ProtocolNotificationType(y.method)}(i.DidSaveTextDocumentNotification||(i.DidSaveTextDocumentNotification={})),function(y){y.Manual=1,y.AfterDelay=2,y.FocusOut=3}(i.TextDocumentSaveReason||(i.TextDocumentSaveReason={})),function(y){y.method="textDocument/willSave",y.type=new a.ProtocolNotificationType(y.method)}(i.WillSaveTextDocumentNotification||(i.WillSaveTextDocumentNotification={})),function(y){y.method="textDocument/willSaveWaitUntil",y.type=new a.ProtocolRequestType(y.method)}(i.WillSaveTextDocumentWaitUntilRequest||(i.WillSaveTextDocumentWaitUntilRequest={})),function(y){y.type=new a.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(i.DidChangeWatchedFilesNotification||(i.DidChangeWatchedFilesNotification={})),function(y){y.Created=1,y.Changed=2,y.Deleted=3}(i.FileChangeType||(i.FileChangeType={})),function(y){y.Create=1,y.Change=2,y.Delete=4}(i.WatchKind||(i.WatchKind={})),function(y){y.type=new a.ProtocolNotificationType("textDocument/publishDiagnostics")}(i.PublishDiagnosticsNotification||(i.PublishDiagnosticsNotification={})),function(y){y.Invoked=1,y.TriggerCharacter=2,y.TriggerForIncompleteCompletions=3}(i.CompletionTriggerKind||(i.CompletionTriggerKind={})),function(y){y.method="textDocument/completion",y.type=new a.ProtocolRequestType(y.method)}(i.CompletionRequest||(i.CompletionRequest={})),function(y){y.method="completionItem/resolve",y.type=new a.ProtocolRequestType(y.method)}(i.CompletionResolveRequest||(i.CompletionResolveRequest={})),function(y){y.method="textDocument/hover",y.type=new a.ProtocolRequestType(y.method)}(i.HoverRequest||(i.HoverRequest={})),function(y){y.Invoked=1,y.TriggerCharacter=2,y.ContentChange=3}(i.SignatureHelpTriggerKind||(i.SignatureHelpTriggerKind={})),function(y){y.method="textDocument/signatureHelp",y.type=new a.ProtocolRequestType(y.method)}(i.SignatureHelpRequest||(i.SignatureHelpRequest={})),function(y){y.method="textDocument/definition",y.type=new a.ProtocolRequestType(y.method)}(i.DefinitionRequest||(i.DefinitionRequest={})),function(y){y.method="textDocument/references",y.type=new a.ProtocolRequestType(y.method)}(i.ReferencesRequest||(i.ReferencesRequest={})),function(y){y.method="textDocument/documentHighlight",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentHighlightRequest||(i.DocumentHighlightRequest={})),function(y){y.method="textDocument/documentSymbol",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentSymbolRequest||(i.DocumentSymbolRequest={})),function(y){y.method="textDocument/codeAction",y.type=new a.ProtocolRequestType(y.method)}(i.CodeActionRequest||(i.CodeActionRequest={})),function(y){y.method="codeAction/resolve",y.type=new a.ProtocolRequestType(y.method)}(i.CodeActionResolveRequest||(i.CodeActionResolveRequest={})),function(y){y.method="workspace/symbol",y.type=new a.ProtocolRequestType(y.method)}(i.WorkspaceSymbolRequest||(i.WorkspaceSymbolRequest={})),function(y){y.method="textDocument/codeLens",y.type=new a.ProtocolRequestType(y.method)}(i.CodeLensRequest||(i.CodeLensRequest={})),function(y){y.method="codeLens/resolve",y.type=new a.ProtocolRequestType(y.method)}(i.CodeLensResolveRequest||(i.CodeLensResolveRequest={})),function(y){y.method="workspace/codeLens/refresh",y.type=new a.ProtocolRequestType0(y.method)}(i.CodeLensRefreshRequest||(i.CodeLensRefreshRequest={})),function(y){y.method="textDocument/documentLink",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentLinkRequest||(i.DocumentLinkRequest={})),function(y){y.method="documentLink/resolve",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentLinkResolveRequest||(i.DocumentLinkResolveRequest={})),function(y){y.method="textDocument/formatting",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentFormattingRequest||(i.DocumentFormattingRequest={})),function(y){y.method="textDocument/rangeFormatting",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentRangeFormattingRequest||(i.DocumentRangeFormattingRequest={})),function(y){y.method="textDocument/onTypeFormatting",y.type=new a.ProtocolRequestType(y.method)}(i.DocumentOnTypeFormattingRequest||(i.DocumentOnTypeFormattingRequest={})),function(y){y.Identifier=1}(i.PrepareSupportDefaultBehavior||(i.PrepareSupportDefaultBehavior={})),function(y){y.method="textDocument/rename",y.type=new a.ProtocolRequestType(y.method)}(i.RenameRequest||(i.RenameRequest={})),function(y){y.method="textDocument/prepareRename",y.type=new a.ProtocolRequestType(y.method)}(i.PrepareRenameRequest||(i.PrepareRenameRequest={})),function(y){y.type=new a.ProtocolRequestType("workspace/executeCommand")}(i.ExecuteCommandRequest||(i.ExecuteCommandRequest={})),function(y){y.type=new a.ProtocolRequestType("workspace/applyEdit")}(i.ApplyWorkspaceEditRequest||(i.ApplyWorkspaceEditRequest={}))})(cc);var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.createProtocolConnection=void 0;const Ou=ht;function Nh(i,o,a,l){return Ou.ConnectionStrategy.is(l)&&(l={connectionStrategy:l}),Ou.createMessageConnection(i,o,a,l)}Ao.createProtocolConnection=Nh;(function(i){var o=nn&&nn.__createBinding||(Object.create?function(u,f,g,b){b===void 0&&(b=g),Object.defineProperty(u,b,{enumerable:!0,get:function(){return f[g]}})}:function(u,f,g,b){b===void 0&&(b=g),u[b]=f[g]}),a=nn&&nn.__exportStar||function(u,f){for(var g in u)g!=="default"&&!Object.prototype.hasOwnProperty.call(f,g)&&o(f,u,g)};Object.defineProperty(i,"__esModule",{value:!0}),i.LSPErrorCodes=i.createProtocolConnection=void 0,a(ht,i),a(wh,i),a(Ue,i),a(cc,i);var l=Ao;Object.defineProperty(i,"createProtocolConnection",{enumerable:!0,get:function(){return l.createProtocolConnection}}),function(u){u.lspReservedErrorRangeStart=-32899,u.ContentModified=-32801,u.RequestCancelled=-32800,u.lspReservedErrorRangeEnd=-32800}(i.LSPErrorCodes||(i.LSPErrorCodes={}))})(uc);(function(i){var o=nn&&nn.__createBinding||(Object.create?function(f,g,b,w){w===void 0&&(w=b),Object.defineProperty(f,w,{enumerable:!0,get:function(){return g[b]}})}:function(f,g,b,w){w===void 0&&(w=b),f[w]=g[b]}),a=nn&&nn.__exportStar||function(f,g){for(var b in f)b!=="default"&&!Object.prototype.hasOwnProperty.call(g,b)&&o(g,f,b)};Object.defineProperty(i,"__esModule",{value:!0}),i.createProtocolConnection=void 0;const l=Pu;a(Pu,i),a(uc,i);function u(f,g,b,w){return l.createMessageConnection(f,g,b,w)}i.createProtocolConnection=u})(de);const Oh=i=>{let o="initial";const a=[],l=new ht.Emitter,u=new ht.Emitter,f=new ht.Emitter,g=new ht.Emitter,b=E=>{o==="initial"?a.push({message:E}):o==="listening"&&g.fire(JSON.parse(E))},w=E=>{o==="initial"?a.push({error:E}):o==="listening"&&l.fire(E)},k=()=>{o==="listening"&&u.fire(),o="closed"},T=E=>b(E.data),N=E=>{E.code!==1e3&&w(new Error(`WebSocket Error (${E.code}): ${E.reason}`)),k()};return i.addEventListener("message",T),i.addEventListener("close",N),{get onError(){return l.event},get onClose(){return u.event},get onPartialMessage(){return f.event},listen(E){if(o!=="initial")throw new Error("Already listening");const M=g.event(E);if(o="listening",a.length===0)return M;for(const $ of a)$.message?b($.message):$.error&&w($.error);return a.length=0,M},dispose(){i.removeEventListener("message",T),i.removeEventListener("close",N),l.dispose(),u.dispose(),f.dispose(),a.length=0}}},Ah=i=>{const o=new ht.Emitter,a=new ht.Emitter,l=()=>{a.fire()};i.addEventListener("close",l);let u=0;return{get onError(){return o.event},get onClose(){return a.event},async write(f){try{i.send(JSON.stringify(f))}catch(g){o.fire([Ih(g),f,++u])}},end(){},dispose(){o.dispose(),a.dispose(),i.removeEventListener("close",l)}}},Ih=i=>i instanceof Error?i:new Error((i==null?void 0:i.message)||"Unknown error"),Wh=(i,o=Hh())=>new Promise(a=>{i.onopen=()=>{const l=ht.createMessageConnection(Oh(i),Ah(i),o);l.onDispose(()=>i.close()),l.onClose(()=>l.dispose()),a(l)}}),Hh=()=>({error:i=>console.error(i),warn:i=>console.warn(i),info:i=>console.info(i),log:i=>console.log(i)}),Fh=i=>{const o=new ht.Emitter,a=new ht.Emitter,l=new ht.Emitter,u=new ht.Emitter,f=b=>{o.fire(b.data)},g=b=>{a.fire(b)};return i.addEventListener("message",f),i.addEventListener("error",g),i.addEventListener("messageerror",g),{get onError(){return a.event},get onClose(){return l.event},get onPartialMessage(){return u.event},listen(b){return o.event(b)},dispose(){i.removeEventListener("message",f),i.removeEventListener("error",g),i.removeEventListener("messageerror",g),o.dispose(),a.dispose(),l.dispose(),u.dispose()}}},qh=i=>{const o=new ht.Emitter,a=new ht.Emitter;let l=0;const u=f=>{o.fire([Au(f),void 0,++l])};return i.addEventListener("error",u),{get onError(){return o.event},get onClose(){return a.event},async write(f){try{i.postMessage(f)}catch(g){o.fire([Au(g),f,++l])}},end(){},dispose(){i.removeEventListener("error",u),o.dispose(),a.dispose()}}},Au=i=>i instanceof Error?i:new Error((i==null?void 0:i.message)||"Unknown error"),zh=(i,o=Bh())=>{const a=ht.createMessageConnection(Fh(i),qh(i),o);return a.onClose(()=>a.dispose()),Promise.resolve(a)},Bh=()=>({error:i=>console.error(i),warn:i=>console.warn(i),info:i=>console.info(i),log:i=>console.log(i)}),Iu=i=>{let o;i.onRequest(de.RegistrationRequest.type,({registrations:k})=>{for(const{method:T,registerOptions:N}of k){const E=Wu[T];E&&(o[E]=N!=null?N:!0)}}),i.onRequest(de.UnregistrationRequest.type,({unregisterations:k})=>{for(const{method:T}of k){const N=Wu[T];N&&(o[N]=void 0)}});const a=(k,T)=>(N,E)=>k()?i.sendRequest(T,N,E):Promise.resolve(null),l=(k,T)=>N=>k()?i.sendNotification(T,N):void 0,u=k=>T=>i.sendNotification(k,T),f=k=>T=>{i.onNotification(k,T)},g=()=>{var k;const T=(k=o.textDocumentSync)!==null&&k!==void 0?k:de.TextDocumentSyncKind.None;return typeof T!="number"&&!!T.willSave},b=()=>{var k;const T=(k=o.textDocumentSync)!==null&&k!==void 0?k:de.TextDocumentSyncKind.None;return typeof T!="number"&&!!T.willSaveWaitUntil},w=()=>{var k;const T=(k=o.textDocumentSync)!==null&&k!==void 0?k:de.TextDocumentSyncKind.None;return typeof T=="number"?T!==de.TextDocumentSyncKind.None:!!T.save};return{listen:()=>i.listen(),dispose:()=>i.dispose(),initialize:async k=>{const T=await i.sendRequest(de.InitializeRequest.type,k);return o=T.capabilities,T},initialized:()=>i.sendNotification(de.InitializedNotification.type,{}),shutdown:()=>i.sendRequest(de.ShutdownRequest.type),exit:()=>i.sendNotification(de.ExitNotification.type),onError:k=>i.onError(([T,N,E])=>k(T,N,E)),onClose:k=>i.onClose(()=>k()),onLogMessage:f(de.LogMessageNotification.type),onShowMessage:f(de.ShowMessageNotification.type),onDiagnostics:f(de.PublishDiagnosticsNotification.type),textDocumentOpened:u(de.DidOpenTextDocumentNotification.type),textDocumentClosed:u(de.DidCloseTextDocumentNotification.type),textDocumentChanged:u(de.DidChangeTextDocumentNotification.type),textDocumentWillSave:l(g,de.WillSaveTextDocumentNotification.type),getEditsBeforeSave:a(b,de.WillSaveTextDocumentWaitUntilRequest.type),textDocumentSaved:l(w,de.DidSaveTextDocumentNotification.type),configurationChanged:u(de.DidChangeConfigurationNotification.type),watchedFilesChanged:u(de.DidChangeWatchedFilesNotification.type),getCompletion:a(()=>!!o.completionProvider,de.CompletionRequest.type),getCompletionItemDetails:a(()=>{var k;return!!(!((k=o.completionProvider)===null||k===void 0)&&k.resolveProvider)},de.CompletionResolveRequest.type),getHoverInfo:a(()=>!!o.hoverProvider,de.HoverRequest.type),getSignatureHelp:a(()=>!!o.signatureHelpProvider,de.SignatureHelpRequest.type),getDeclaration:a(()=>!!o.declarationProvider,de.DeclarationRequest.type),getDefinition:a(()=>!!o.definitionProvider,de.DefinitionRequest.type),getTypeDefinition:a(()=>!!o.typeDefinitionProvider,de.TypeDefinitionRequest.type),getImplementation:a(()=>!!o.implementationProvider,de.ImplementationRequest.type),getReferences:a(()=>!!o.referencesProvider,de.ReferencesRequest.type),getDocumentHighlight:a(()=>!!o.documentHighlightProvider,de.DocumentHighlightRequest.type),getDocumentSymbol:a(()=>!!o.documentSymbolProvider,de.DocumentSymbolRequest.type),getCodeAction:a(()=>!!o.codeActionProvider,de.CodeActionRequest.type),getCodeLens:a(()=>!!o.codeLensProvider,de.CodeLensRequest.type),resolveCodeLens:a(()=>{var k;return!!(!((k=o.codeLensProvider)===null||k===void 0)&&k.resolveProvider)},de.CodeLensResolveRequest.type),getDocumentLink:a(()=>!!o.documentLinkProvider,de.DocumentLinkRequest.type),resolveDocumentLink:a(()=>{var k;return!!(!((k=o.documentLinkProvider)===null||k===void 0)&&k.resolveProvider)},de.DocumentLinkResolveRequest.type),getColorSymbols:a(()=>!!o.colorProvider,de.DocumentColorRequest.type),getFoldingRanges:a(()=>!!o.foldingRangeProvider,de.FoldingRangeRequest.type),getSelectionRanges:a(()=>!!o.selectionRangeProvider,de.SelectionRangeRequest.type),getWorkspaceSymbols:a(()=>!!o.workspaceSymbolProvider,de.WorkspaceSymbolRequest.type),get syncsIncrementally(){var k,T;let N=(k=o.textDocumentSync)!==null&&k!==void 0?k:de.TextDocumentSyncKind.None;return typeof N!="number"&&(N=(T=N.change)!==null&&T!==void 0?T:de.TextDocumentSyncKind.None),N===de.TextDocumentSyncKind.Incremental},get completionTriggers(){var k;return((k=o.completionProvider)===null||k===void 0?void 0:k.triggerCharacters)||[]},get signatureHelpTriggers(){var k;return((k=o.signatureHelpProvider)===null||k===void 0?void 0:k.triggerCharacters)||[]},get signatureHelpRetriggers(){var k;return((k=o.signatureHelpProvider)===null||k===void 0?void 0:k.retriggerCharacters)||[]}}},Wu={"textDocument/codeAction":"codeActionProvider","textDocument/codeLens":"codeLensProvider","textDocument/color":"colorProvider","textDocument/completion":"completionProvider","textDocument/declaration":"declarationProvider","textDocument/definition":"definitionProvider","textDocument/documentFormatting":"documentFormattingProvider","textDocument/documentHighlight":"documentHighlightProvider","textDocument/documentLink":"documentLinkProvider","textDocument/documentOnTypeFormatting":"documentOnTypeFormattingProvider","textDocument/documentRangeFormatting":"documentRangeFormattingProvider","textDocument/documentSymbol":"documentSymbolProvider","textDocument/executeCommand":"executeCommandProvider","textDocument/foldingRange":"foldingRangeProvider","textDocument/hover":"hoverProvider","textDocument/implementation":"implementationProvider","textDocument/references":"referencesProvider","textDocument/rename":"renameProvider","textDocument/signatureHelp":"signatureHelpProvider","textDocument/typeDefinition":"typeDefinitionProvider","textDocument/workspaceSymbol":"workspaceSymbolProvider"},jh=Object.freeze({allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5}),Uh=0,Hu=1,$h=2,Fu=3;class Gh{constructor(o,a,l={}){this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=Uh,this.OPEN=Hu,this.CLOSING=$h,this.CLOSED=Fu,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},this.url=o,a==null||typeof a=="string"||Array.isArray(a)?this.protocols=a:l=a,this.options=Object.assign({},jh,l),this.openNewWebSocket()}get binaryType(){return this.binaryTypeInternal||"blob"}set binaryType(o){this.binaryTypeInternal=o,this.ws&&(this.ws.binaryType=o)}get bufferedAmount(){let o=this.ws?this.ws.bufferedAmount:0,a=!1;return this.messageBuffer.forEach(l=>{const u=Kh(l);u!=null?o+=u:a=!0}),a&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),o}get extensions(){return this.ws?this.ws.extensions:this.lastKnownExtensions}get protocol(){return this.ws?this.ws.protocol:this.lastKnownProtocol}get readyState(){return this.isClosed?Fu:Hu}close(o,a){this.disposeSocket(o,a),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")}send(o){this.ws&&this.ws.readyState===this.OPEN?this.ws.send(o):this.messageBuffer.push(o)}reconnect(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)}addEventListener(o,a){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(a)}dispatchEvent(o){return this.dispatchEventOfType(o.type,o)}removeEventListener(o,a){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(l=>l!==a))}openNewWebSocket(){if(this.isClosed)return;const{connectTimeout:o}=this.options;this.debugLog(`Opening new WebSocket to ${this.url}.`);const a=new WebSocket(this.url,this.protocols);a.onclose=l=>this.handleClose(l),a.onerror=l=>this.handleError(l),a.onmessage=l=>this.handleMessage(l),a.onopen=l=>this.handleOpen(l),this.connectTimeoutId=setTimeout(()=>{this.clearConnectTimeout(),this.disposeSocket(),this.handleClose(void 0)},o),this.ws=a}handleOpen(o){if(!this.ws||this.isClosed)return;const{allClearResetTime:a}=this.options;this.debugLog("WebSocket opened."),this.binaryTypeInternal!=null?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",o):(this.dispatchEventOfType("open",o),this.hasBeenOpened=!0,this.messageBuffer.forEach(l=>this.send(l))),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(()=>{this.clearAllClearTimeout(),this.nextRetryTime=0,this.reconnectCount=0;const l=a/1e3|0;this.debugLog(`WebSocket remained open for ${l}s. Resetting retry time and count`)},a)}handleMessage(o){this.isClosed||this.dispatchEventOfType("message",o)}handleClose(o){if(this.isClosed)return;const{maxReconnectAttempts:a}=this.options;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.ws=void 0),this.dispatchEventOfType("down",o),this.reconnectCount>=a){const l=`Failed to reconnect after ${a} attempts. Closing permanently.`;this.stopReconnecting(o,l)}else this.reestablishConnection()}handleError(o){this.dispatchEventOfType("error",o),this.debugLog("WebSocket encountered an error.")}reestablishConnection(){const{minReconnectDelay:o,maxReconnectDelay:a,reconnectBackoffFactor:l}=this.options;this.reconnectCount++;const u=this.nextRetryTime;this.nextRetryTime=Math.max(o,Math.min(this.nextRetryTime*l,a)),setTimeout(()=>this.openNewWebSocket(),u);const f=u/1e3|0;this.debugLog(`WebSocket was closed. Re-opening in ${f}s.`)}stopReconnecting(o,a){this.debugLog(a),this.shutdown(),o&&this.dispatchEventOfType("close",o)}shutdown(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[]}disposeSocket(o,a){!this.ws||(this.ws.onerror=mo,this.ws.onclose=mo,this.ws.onmessage=mo,this.ws.onopen=mo,this.ws.close(o,a),this.ws=void 0)}clearAllTimeouts(){this.clearConnectTimeout(),this.clearAllClearTimeout()}clearConnectTimeout(){this.connectTimeoutId!=null&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)}clearAllClearTimeout(){this.allClearTimeoutId!=null&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)}dispatchEventOfType(o,a){switch(o){case"close":this.onclose&&this.onclose(a);break;case"error":this.onerror&&this.onerror(a);break;case"message":this.onmessage&&this.onmessage(a);break;case"open":this.onopen&&this.onopen(a);break;case"down":this.ondown&&this.ondown(a);break;case"reopen":this.onreopen&&this.onreopen(a);break}return o in this.listeners&&this.listeners[o].slice().forEach(l=>this.callListener(l,a)),!a||!a.defaultPrevented}callListener(o,a){typeof o=="function"?o.call(this,a):o.handleEvent.call(this,a)}debugLog(o){this.options.debug&&console.debug(o)}}function Kh(i){return typeof i=="string"?2*i.length:i instanceof ArrayBuffer?i.byteLength:i instanceof Blob?i.size:void 0}const mo=()=>{},Sa=i=>i.replace(Xh,Yh),Xh=/[&<>'"]/g,Yh=i=>i==="&"?"&amp;":i==="<"?"&lt;":i===">"?"&gt;":i==="'"?"&#39;":"&quot;",mn=({line:i,ch:o})=>({line:i,character:o}),Zh=(i,o)=>({start:mn(i),end:mn(o)}),Jh=i=>({range:Zh(i.from,i.to),text:i.text.join(`
`)}),Ro=({line:i,character:o})=>({line:i,ch:o}),Gn=({start:i,end:o})=>[Ro(i),Ro(o)],Qh=i=>{switch(i){case 1:return"error";case 2:return"warning";case 3:return"information";case 4:return"hint"}},_o=(i,o=a=>a)=>i?typeof i=="string"?Sa(i):Lc(i,o):"",Vh=(i,o)=>Array.isArray(i)?i.map(a=>qu(a,o)).join(`
`):de.MarkedString.is(i)?qu(i,o):Lc(i,o),Lc=(i,o)=>i.kind==="markdown"?o(i.value):Sa(i.value),qu=(i,o)=>typeof i=="string"?i.replace(/\\(?=[-.])/g,""):o(["```"+i.language,i.value,"```"].join(`
`)),zu=(()=>{const i=["","text","method","function","constructor","field","variable","class","interface","module","property","unit","value","enum","keyword","snippet","color","file","reference","folder","enum-member","constant","struct","event","operator","type-parameter"];return o=>i[o!=null?o:0]||"unknown"})(),ep=(()=>{const i=["","file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enum-member","struct","event","operator","type-parameter"];return o=>i[o!=null?o:0]||"unknown"})(),tp=i=>({items:i,isIncomplete:!1}),Ec="cmw-gutter",Lo=new WeakMap,np=(i,o)=>{if(Mc(i),o.length===0)return;const a=Lo.get(i)||{marks:[]};for(const l of o){const[u,f]=Gn(l.range),g=Qh(l.severity||3);a.marks.push(i.markText(u,f,{className:`cmw-mark-${g}`}));const b=document.createElement("div");b.classList.add(`cmw-guttermark-${g}`),b.style.width="10px",b.style.fontSize="8px",b.style.textAlign="center",b.title=l.message,b.innerText="\u2B24",i.setGutterMarker(u.line,Ec,b)}Lo.set(i,a)},Mc=i=>{const o=Lo.get(i);if(!!o){i.clearGutter(Ec);for(const a of o.marks)a.clear();o.marks.length=0,Lo.delete(i)}},Dc=(i,o,a)=>{const l=document.createElement("div");l.classList.add("cmw-tooltip"),l.style.cssText=[`left: ${o}px;`,`top: ${a}px;`].join(" "),l.appendChild(i);const u=document.createElement("div");return u.classList.add("cmw-tooltip-close"),u.addEventListener("click",()=>{l.remove()}),l.appendChild(u),document.body.appendChild(l),requestAnimationFrame(()=>{l.style.top=`${a-l.offsetHeight}px`}),l},Yr=new WeakMap,rp=(i,o,a,l,u=f=>f)=>{if(Br(i),Array.isArray(l.contents)&&l.contents.length===0)return;const f=Vh(l.contents,u);if(!f)return;const g=Yr.get(i)||{};let b=a;if(l.range){let T=a;[b,T]=Gn(l.range),g.marker=i.markText(b,T,{css:"text-decoration: underline"})}const w=document.createElement("div");w.innerHTML=f;const k=i.charCoords(b,"page");g.tooltip=Dc(w,k.left,k.top),g.mouseLeaveAllListener=o,o.addElement(g.tooltip),Yr.set(i,g)},Br=i=>{const o=Yr.get(i);!o||(o.marker&&o.marker.clear(),o.mouseLeaveAllListener&&o.tooltip&&o.mouseLeaveAllListener.removeElement(o.tooltip),o.tooltip&&o.tooltip.remove(),Yr.delete(i))},ip=i=>{var o;return!(!((o=Yr.get(i))===null||o===void 0)&&o.disabled)},op=i=>{Br(i),Yr.set(i,{disabled:!0})},sp=i=>{Br(i)},Eo=new WeakMap,ap=(i,o)=>{const a=Eo.get(i)||{marks:[]};for(const{kind:l,range:u}of o){const[f,g]=Gn(u);a.marks.push(i.markText(f,g,{className:"cmw-highlight"}))}Eo.set(i,a)},Ls=i=>{const o=Eo.get(i);if(!!o){if(o.marks&&o.marks.length>0){for(const a of o.marks)a.clear();o.marks.length=0}Eo.delete(i)}},xa=(i,o,a)=>{const l=i.getCursor(),u=i.markText(l,l,{clearWhenEmpty:!1}),f=o.map(g=>i.markText(...Gn(g.range),{clearWhenEmpty:!1}));i.operation(()=>{for(let g=0;g<o.length;++g){const b=f[g],w=b.find();i.replaceRange(o[g].newText,w.from,w.to,a),b.clear()}}),i.setCursor(u.find().to),u.clear()},Bu=(i,o,a,l=0)=>{const u=i.markText(o,a,{className:"cmw-highlight"});return typeof l=="number"&&l>0&&setTimeout(()=>{u.clear()},l),u};class un{constructor(){this.value="",this.pos=0}static isDigitCharacter(o){return o>=48&&o<=57}static isVariableCharacter(o){return o===95||o>=97&&o<=122||o>=65&&o<=90}text(o){this.value=o,this.pos=0}tokenText(o){return this.value.substr(o.pos,o.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let o=this.pos,a=0,l=this.value.charCodeAt(o),u;if(u=un._table[l],typeof u=="number")return this.pos+=1,{type:u,pos:o,len:1};if(un.isDigitCharacter(l)){u=8;do a+=1,l=this.value.charCodeAt(o+a);while(un.isDigitCharacter(l));return this.pos+=a,{type:u,pos:o,len:a}}if(un.isVariableCharacter(l)){u=9;do l=this.value.charCodeAt(o+ ++a);while(un.isVariableCharacter(l)||un.isDigitCharacter(l));return this.pos+=a,{type:u,pos:o,len:a}}u=10;do a+=1,l=this.value.charCodeAt(o+a);while(!isNaN(l)&&typeof un._table[l]=="undefined"&&!un.isDigitCharacter(l)&&!un.isVariableCharacter(l));return this.pos+=a,{type:u,pos:o,len:a}}}un._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Jr{constructor(){this._children=[]}appendChild(o){return o instanceof jt&&this._children[this._children.length-1]instanceof jt?this._children[this._children.length-1].value+=o.value:(o.parent=this,this._children.push(o)),this}replace(o,a){const{parent:l}=o,u=l.children.indexOf(o),f=l.children.slice(0);f.splice(u,1,...a),l._children=f,function g(b,w){for(const k of b)k.parent=w,g(k.children,k)}(a,l)}get children(){return this._children}get snippet(){let o=this;for(;;){if(!o)return;if(o instanceof Io)return o;o=o.parent}}toString(){return this.children.reduce((o,a)=>o+a.toString(),"")}len(){return 0}}class jt extends Jr{constructor(o){super(),this.value=o}static escape(o){return o.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return jt.escape(this.value)}len(){return this.value.length}clone(){return new jt(this.value)}}class Pc extends Jr{}class Pn extends Pc{constructor(o){super(),this.index=o}static compareByIndex(o,a){return o.index===a.index?0:o.isFinalTabstop?1:a.isFinalTabstop||o.index<a.index?-1:o.index>a.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Hi?this._children[0]:void 0}toTextmateString(){let o="";return this.transform&&(o=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${o}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${o}}`:`\${${this.index}:${this.children.map(a=>a.toTextmateString()).join("")}${o}}`}clone(){let o=new Pn(this.index);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(a=>a.clone()),o}}class Hi extends Jr{constructor(){super(...arguments),this.options=[]}appendChild(o){return o instanceof jt&&(o.parent=this,this.options.push(o)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(o=>o.value.replace(/\||,/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let o=new Hi;return this.options.forEach(o.appendChild,o),o}}class Ra extends Jr{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(o){const a=this;let l=!1,u=o.replace(this.regexp,function(){return l=!0,a._replace(Array.prototype.slice.call(arguments,0,-2))});return!l&&this._children.some(f=>f instanceof yn&&Boolean(f.elseValue))&&(u=this._replace([])),u}_replace(o){let a="";for(const l of this._children)if(l instanceof yn){let u=o[l.index]||"";u=l.resolve(u),a+=u}else a+=l.toString();return a}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(o=>o.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let o=new Ra;return o.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),o._children=this.children.map(a=>a.clone()),o}}class yn extends Jr{constructor(o,a,l,u){super(),this.index=o,this.shorthandName=a,this.ifValue=l,this.elseValue=u}resolve(o){return this.shorthandName==="upcase"?o?o.toLocaleUpperCase():"":this.shorthandName==="downcase"?o?o.toLocaleLowerCase():"":this.shorthandName==="capitalize"?o?o[0].toLocaleUpperCase()+o.substr(1):"":this.shorthandName==="pascalcase"?o?this._toPascalCase(o):"":Boolean(o)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(o)&&typeof this.elseValue=="string"?this.elseValue:o||""}_toPascalCase(o){const a=o.match(/[a-z]+/gi);return a?a.map(function(l){return l.charAt(0).toUpperCase()+l.substr(1).toLowerCase()}).join(""):o}toTextmateString(){let o="${";return o+=this.index,this.shorthandName?o+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?o+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?o+=`:+${this.ifValue}`:this.elseValue&&(o+=`:-${this.elseValue}`),o+="}",o}clone(){return new yn(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class Wi extends Pc{constructor(o){super(),this.name=o}resolve(o){let a=o.resolve(this);return this.transform&&(a=this.transform.resolve(a||"")),a!==void 0?(this._children=[new jt(a)],!0):!1}toTextmateString(){let o="";return this.transform&&(o=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${o}}`:`\${${this.name}:${this.children.map(a=>a.toTextmateString()).join("")}${o}}`}clone(){const o=new Wi(this.name);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(a=>a.clone()),o}}function ju(i,o){const a=[...i];for(;a.length>0;){const l=a.shift();if(!o(l))break;a.unshift(...l.children)}}class Io extends Jr{get placeholderInfo(){if(!this._placeholders){let o=[],a;this.walk(function(l){return l instanceof Pn&&(o.push(l),a=!a||a.index<l.index?l:a),!0}),this._placeholders={all:o,last:a}}return this._placeholders}get placeholders(){const{all:o}=this.placeholderInfo;return o}offset(o){let a=0,l=!1;return this.walk(u=>u===o?(l=!0,!1):(a+=u.len(),!0)),l?a:-1}fullLen(o){let a=0;return ju([o],l=>(a+=l.len(),!0)),a}enclosingPlaceholders(o){let a=[],{parent:l}=o;for(;l;)l instanceof Pn&&a.push(l),l=l.parent;return a}resolveVariables(o){return this.walk(a=>(a instanceof Wi&&a.resolve(o)&&(this._placeholders=void 0),!0)),this}appendChild(o){return this._placeholders=void 0,super.appendChild(o)}replace(o,a){return this._placeholders=void 0,super.replace(o,a)}toTextmateString(){return this.children.reduce((o,a)=>o+a.toTextmateString(),"")}clone(){let o=new Io;return this._children=this.children.map(a=>a.clone()),o}walk(o){ju(this.children,o)}}class lp{constructor(){this._scanner=new un,this._token={type:14,pos:0,len:0}}static escape(o){return o.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(o){return/\${?CLIPBOARD/.test(o)}text(o){return this.parse(o).toString()}parse(o,a,l){this._scanner.text(o),this._token=this._scanner.next();const u=new Io;for(;this._parse(u););const f=new Map,g=[];let b=0;u.walk(w=>(w instanceof Pn&&(b+=1,w.isFinalTabstop?f.set(0,void 0):!f.has(w.index)&&w.children.length>0?f.set(w.index,w.children):g.push(w)),!0));for(const w of g){const k=f.get(w.index);if(k){const T=new Pn(w.index);T.transform=w.transform;for(const N of k)T.appendChild(N.clone());u.replace(w,[T])}}return l||(l=b>0&&a),!f.has(0)&&l&&u.appendChild(new Pn(0)),u}_accept(o,a){if(o===void 0||this._token.type===o){let l=a?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),l}return!1}_backTo(o){return this._scanner.pos=o.pos+o.len,this._token=o,!1}_until(o){const a=this._token;for(;this._token.type!==o;){if(this._token.type===14)return!1;if(this._token.type===5){const u=this._scanner.next();if(u.type!==0&&u.type!==4&&u.type!==5)return!1}this._token=this._scanner.next()}const l=this._scanner.value.substring(a.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),l}_parse(o){return this._parseEscaped(o)||this._parseTabstopOrVariableName(o)||this._parseComplexPlaceholder(o)||this._parseComplexVariable(o)||this._parseAnything(o)}_parseEscaped(o){let a;return(a=this._accept(5,!0))?(a=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||a,o.appendChild(new jt(a)),!0):!1}_parseTabstopOrVariableName(o){let a;const l=this._token;return this._accept(0)&&(a=this._accept(9,!0)||this._accept(8,!0))?(o.appendChild(/^\d+$/.test(a)?new Pn(Number(a)):new Wi(a)),!0):this._backTo(l)}_parseComplexPlaceholder(o){let a;const l=this._token;if(!(this._accept(0)&&this._accept(3)&&(a=this._accept(8,!0))))return this._backTo(l);const f=new Pn(Number(a));if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(f),!0;if(!this._parse(f))return o.appendChild(new jt("${"+a+":")),f.children.forEach(o.appendChild,o),!0}else if(f.index>0&&this._accept(7)){const g=new Hi;for(;;){if(this._parseChoiceElement(g)){if(this._accept(2))continue;if(this._accept(7)&&(f.appendChild(g),this._accept(4)))return o.appendChild(f),!0}return this._backTo(l),!1}}else return this._accept(6)?this._parseTransform(f)?(o.appendChild(f),!0):(this._backTo(l),!1):this._accept(4)?(o.appendChild(f),!0):this._backTo(l)}_parseChoiceElement(o){const a=this._token,l=[];for(;!(this._token.type===2||this._token.type===7);){let u;if((u=this._accept(5,!0))?u=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||u:u=this._accept(void 0,!0),!u)return this._backTo(a),!1;l.push(u)}return l.length===0?(this._backTo(a),!1):(o.appendChild(new jt(l.join(""))),!0)}_parseComplexVariable(o){let a;const l=this._token;if(!(this._accept(0)&&this._accept(3)&&(a=this._accept(9,!0))))return this._backTo(l);const f=new Wi(a);if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(f),!0;if(!this._parse(f))return o.appendChild(new jt("${"+a+":")),f.children.forEach(o.appendChild,o),!0}else return this._accept(6)?this._parseTransform(f)?(o.appendChild(f),!0):(this._backTo(l),!1):this._accept(4)?(o.appendChild(f),!0):this._backTo(l)}_parseTransform(o){let a=new Ra,l="",u="";for(;!this._accept(6);){let f;if(f=this._accept(5,!0)){f=this._accept(6,!0)||f,l+=f;continue}if(this._token.type!==14){l+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let f;if(f=this._accept(5,!0)){f=this._accept(5,!0)||this._accept(6,!0)||f,a.appendChild(new jt(f));continue}if(!(this._parseFormatString(a)||this._parseAnything(a)))return!1}for(;!this._accept(4);){if(this._token.type!==14){u+=this._accept(void 0,!0);continue}return!1}try{a.regexp=new RegExp(l,u)}catch{return!1}return o.transform=a,!0}_parseFormatString(o){const a=this._token;if(!this._accept(0))return!1;let l=!1;this._accept(3)&&(l=!0);let u=this._accept(8,!0);if(u)if(l){if(this._accept(4))return o.appendChild(new yn(Number(u))),!0;if(!this._accept(1))return this._backTo(a),!1}else return o.appendChild(new yn(Number(u))),!0;else return this._backTo(a),!1;if(this._accept(6)){let f=this._accept(9,!0);return!f||!this._accept(4)?(this._backTo(a),!1):(o.appendChild(new yn(Number(u),f)),!0)}else if(this._accept(11)){let f=this._until(4);if(f)return o.appendChild(new yn(Number(u),void 0,f,void 0)),!0}else if(this._accept(12)){let f=this._until(4);if(f)return o.appendChild(new yn(Number(u),void 0,void 0,f)),!0}else if(this._accept(13)){let f=this._until(1);if(f){let g=this._until(4);if(g)return o.appendChild(new yn(Number(u),void 0,f,g)),!0}}else{let f=this._until(4);if(f)return o.appendChild(new yn(Number(u),void 0,void 0,f)),!0}return this._backTo(a),!1}_parseAnything(o){return this._token.type!==14?(o.appendChild(new jt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const up=(i,o)=>{if(i.length===0)return[];const a=cp(i.slice(),o),l=[[a[0]]];for(let u=1;u<a.length;++u)o(a[u-1],a[u])!==0?l.push([a[u]]):l[l.length-1].push(a[u]);return l},cp=(i,o)=>{for(let a=1;a<i.length;++a)if(o(i[a-1],i[a])>0){let l=a;const u=i[l];do i[l]=i[--l];while(l>0&&o(i[l-1],u)>0);i[l]=u}return i},fp=(i,o,a,l,u)=>{const f=new lp().parse(o,!0,!0);hp(i,a,f),i.replaceRange(f.toString(),a,l,"complete");const g=new Map,b=i.indexFromPos(a);for(const Y of f.placeholders)g.set(Y,i.markText(...dp(i,b,f,Y),{className:"cmw-snippet-tabstop",collapsed:!1,clearWhenEmpty:!1,inclusiveLeft:!0,inclusiveRight:!0}));if(u&&xa(i,u,"+complete"),f.placeholders.length===0)return;let w=0;const k=up(f.placeholders,Pn.compareByIndex);let T=null;if(k.length>1){const Y=document.createElement("span");Y.className="cmw-snippet-final-tabstop";const V=k[k.length-1],_=V[V.length-1];T=i.setBookmark(i.posFromIndex(b+f.offset(_)+f.fullLen(_)),{widget:Y,insertLeft:!0})}const N=Y=>{const V=k[Y],P=V[0].isFinalTabstop,L=V.map(y=>{const{from:W,to:j}=g.get(y).find();return{anchor:W,head:j}});i.setSelections(L,P?L.length-1:0,{scroll:!0,origin:"snippet"})},E=()=>{M()},M=()=>{i.removeKeyMap($),i.off("mousedown",E);const Y=k[k.length-1],V=Y[Y.length-1],_=g.get(V).find();i.setCursor(_.to);for(const P of g.values())P.clear();g.clear(),T&&T.clear(),k.length=0},$=Nn.exports.normalizeKeyMap({Tab:Y=>{w+1<=k.length-1&&N(++w),w>=k.length-1&&M()},"Shift-Tab":Y=>{w-1>=0&&N(--w)},Enter:Y=>{M()},Esc:Y=>{M()}});i.addKeyMap($),i.on("mousedown",E),N(0),k.length===1&&k[0].length===1&&M()},dp=(i,o,a,l)=>{const u=o+a.offset(l);return[i.posFromIndex(u),i.posFromIndex(u+a.fullLen(l))]},hp=(i,o,a)=>{const l=Uu(i.getLine(o.line),0,o.ch);a.walk(u=>{if(u instanceof jt&&!(u.parent instanceof Hi)){const f=u.value.split(/\r?\n|\r/);for(let b=1;b<f.length;++b){const w=Uu(f[b]);let k=l+w;if(i.getOption("indentWithTabs")){const T=i.getOption("indentUnit")||2;k=k.replace(/\t/g," ".repeat(T));const N=Math.floor(k.length/T);k="	".repeat(N)+" ".repeat(k.length-N*T)}f[b]=k+f[b].substr(w.length)}const g=f.join(i.lineSeparator());g!==u.value&&u.parent.replace(u,[new jt(g)])}return!0})},Uu=(i,o=0,a=i.length)=>{for(let l=o;l<a;++l)if(i[l]!==" "&&i[l]!=="	")return i.substring(o,l);return i.substring(o,a)};class pp{constructor({uri:o,editor:a,conn:l,renderMarkdown:u}){this.pendingRequest=null,this.uri=o,this.editor=a,this.conn=l,this.renderMarkdown=u}invoke(){this.request({triggerKind:de.CompletionTriggerKind.Invoked})}retriggerForIncomplete(){this.request({triggerKind:de.CompletionTriggerKind.TriggerForIncompleteCompletions})}triggerWith(o){this.request({triggerKind:de.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o})}onChange(){const o=this.editor.getCursor();if(o.ch===0)return!0;const a=this.editor.getLine(o.line)[o.ch-1];if(this.conn.completionTriggers.includes(a))return this.triggerWith(a),!0;if(this.isComplete())return!0;const l=this.editor.getTokenTypeAt(o);if(l){if(/\b(?:variable|property|type)\b/.test(l))return this.isActive()?this.retriggerForIncomplete():this.invoke(),!0;if(this.isActive()&&l==="string")return this.retriggerForIncomplete(),!0}return!1}request(o){this.cancelPending();const a=new de.CancellationTokenSource;this.pendingRequest=a,this.conn.getCompletion({textDocument:{uri:this.uri},position:mn(this.editor.getCursor()),context:o},this.pendingRequest.token).then(l=>{if(this.pendingRequest===a)this.pendingRequest=null;else return;!l||(Array.isArray(l)&&(l=tp(l)),l.items.length!==0&&new gp({list:l,editor:this.editor,invoked:o.triggerKind!==de.CompletionTriggerKind.TriggerCharacter,renderMarkdown:this.renderMarkdown,resolveItem:(u,f)=>this.conn.getCompletionItemDetails(u,f).then(g=>g||u)}).show())})}close(){this.cancelPending(),this.editor.closeHint()}isActive(){var o;return!!(!((o=this.editor.state)===null||o===void 0)&&o.completionActive)}isComplete(){var o,a,l;return!!(!((l=(a=(o=this.editor.state)===null||o===void 0?void 0:o.completionActive)===null||a===void 0?void 0:a.options)===null||l===void 0)&&l.updateOnCursorActivity)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}class gp{constructor({editor:o,invoked:a,list:l,renderMarkdown:u,resolveItem:f}){this.tooltip=null,this.detailsCache=new WeakMap,this.pendingRequest=null,this.renderItem=(g,b,w)=>{const k=w.item;let N=`hsl(${Math.floor((k.kind||0)/30*180+180)}, 75%, 50%)`;if(k.kind===de.CompletionItemKind.Color){const M=_o(k.documentation);if(M){const $=M.match(/#[\da-f]{6}/i);$&&(N=$[0])}}const E=g.appendChild(document.createElement("div"));E.style.color=N,E.className=["cmw-icon",`cmw-icon--${zu(k.kind)}`].join(" "),g.appendChild(document.createTextNode(k.label))},this.onHintsClose=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsUpdate=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsSelect=(g,b)=>{this.cancelPending(),this.removeTooltip();const w=g.item,k=this.detailsCache.get(w);if(k)this.addTooltip(b,k);else{const T=new de.CancellationTokenSource;this.pendingRequest=T,this.resolveItem(w,this.pendingRequest.token).then(N=>{if(this.removeTooltip(),this.pendingRequest===T)this.pendingRequest=null;else return;const E=this.cacheDetails(Object.assign(w,N));this.detailsCache.set(w,E),this.addTooltip(b,E)})}},this.editor=o,this.list=l,this.invoked=a,this.updates=0,this.renderMarkdown=u,this.resolveItem=f}show(){this.editor.showHint({completeSingle:!1,updateOnCursorActivity:!this.list.isIncomplete,hint:()=>this.update()})}update(){const{from:o,to:a,items:l}=this.getState(),u=l.map(g=>({text:"",displayText:g.label,hint:w=>{let k=g.insertText||g.label,T={line:o.line,ch:o.ch},N={line:a.line,ch:a.ch};if(g.textEdit){const E=g.textEdit,M=Gn(de.TextEdit.is(E)?E.range:E.replace);M[0].ch<T.ch&&(T.ch=M[0].ch),M[1].ch>N.ch&&(N.ch=M[1].ch),this.editor.replaceRange(this.editor.getRange(M[0],M[1]),T,N,"complete"),[T,N]=M,k=E.newText}if(g.insertTextFormat===de.InsertTextFormat.Snippet)return fp(w,k,T,N,g.additionalTextEdits);w.replaceRange(k,T,N,"+complete"),g.additionalTextEdits&&xa(w,g.additionalTextEdits,"+complete"),w.scrollIntoView(null),w.closeHint()},render:this.renderItem,item:g})),f={from:o,to:a,list:u};return Di.on(f,"close",this.onHintsClose),Di.on(f,"update",this.onHintsUpdate),Di.on(f,"select",this.onHintsSelect),f}getState(){const o=this.editor.getCursor();if(this.updates++>0||this.invoked){const a=this.editor.getTokenAt(o);if(a.type==="string"){const g=this.list.items.find(b=>b.textEdit);if(g){const b=g.textEdit,w=Gn(de.TextEdit.is(b)?b.range:b.replace);a.start=w[0].ch,a.end=o.ch}else{const b=a.string[0],w=a.string[a.string.length-1];(b==='"'||b==="'")&&(b===w?(a.start+=1,a.end-=1):(a.start+=1,a.end=o.ch))}}const l={line:o.line,ch:a.start},u={line:o.line,ch:a.end},f=this.editor.getRange(l,u);return{from:l,to:u,items:vp(this.list.items,f,50)}}else return{from:o,to:o,items:this.list.items}}cacheDetails(o){return{kind:o.kind&&zu(o.kind),detail:o.detail&&Sa(o.detail),documentation:o.documentation&&_o(o.documentation,this.renderMarkdown)}}tooltipContent(o){let a="";return o.detail&&(a+=`<code>${o.detail}</code>`),o.documentation&&(a+=`<div>${o.documentation}</div>`),a}addTooltip(o,a){if(!o.isConnected)return;const l=this.tooltipContent(a);if(!l)return;const u=o.parentNode,f=u.getBoundingClientRect().right+window.pageXOffset,g=u.getBoundingClientRect().top+window.pageYOffset,b=document.createElement("div");b.innerHTML=l;const w=document.createElement("div");w.classList.add("cmw-completion-item-doc"),w.style.cssText=`
    z-index: 10;
    position: absolute;
    left: ${f}px;
    top: ${g}px;
    font-size: 12px;
    padding: 2px;
    max-height: 400px;
    max-width: 400px;
    overflow: auto;
    `,w.appendChild(b),document.body.appendChild(w),this.tooltip=w}removeTooltip(){this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}const vp=(i,o,a=30)=>{const l=i.reduce((u,f)=>(u[f.label]=yp(f.filterText||f.label,o),u),{});return i.slice().sort((u,f)=>l[f.label]-l[u.label]).slice(0,a)},mp=.5,yp=(i,o)=>{const a=i.length,l=o.length,u=Math.min(a,l);if(u===0)return 0;let f=0;for(;i[f]===o[f]&&++f<u;);const g=(a+l)/(2*a*l),b=u===f?u:a<l?$u(o,i):$u(i,o);return g*b**2+f*mp},$u=(i,o)=>{const a=i.length,l=o.length,u=[0];for(let f=1;f<=l;++f)u[f]=0;for(let f=1;f<=a;++f)for(let g=1,b=u[0];g<=l;++g){const w=u[g];u[g]=i[f-1]===o[g-1]?b+1:Math.max(u[g-1],u[g]),b=w}return u[l]},Nc=i=>i.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),Mo=new WeakMap,bp=(i,o,a,l,u=f=>f)=>{var f;(f=a.activeSignature)!==null&&f!==void 0||(a.activeSignature=0);const g=a.signatures[a.activeSignature];if(!g)return;const b=Mo.get(i)||{},w=document.createElement("div"),k=document.createElement("div");let T=!1;if(a.activeParameter!==null&&g.parameters){const M=Math.min(a.activeParameter,g.parameters.length-1),$=g.parameters[M],Y="text-decoration: underline; font-weight: 500;";if(Array.isArray($.label)){const[_,P]=$.label;k.innerHTML=[g.label.slice(0,_),`<span style="${Y}">`,g.label.slice(_,P),"</span>",g.label.slice(P)].join("")}else k.innerHTML=g.label.replace(new RegExp("("+Nc($.label)+")"),`<span style="${Y}">$1</span>`);w.appendChild(k);const V=_o($.documentation,u);if(V){T=!0;const _=document.createElement("div");_.style.marginTop="4px",_.innerHTML=V,w.appendChild(_)}}else k.innerText=g.label,w.appendChild(k);const N=_o(g.documentation,u);if(N){const M=document.createElement("div");T&&(M.style.marginTop="8px"),M.innerHTML=N,w.appendChild(M)}const E=i.charCoords(l,"page");b.tooltip=Dc(w,E.left,E.top),b.mouseLeaveAllListener=o,o.addElement(b.tooltip),Mo.set(i,b)},Dn=i=>{const o=Mo.get(i);!o||(o.mouseLeaveAllListener&&o.tooltip&&o.mouseLeaveAllListener.removeElement(o.tooltip),o.tooltip&&o.tooltip.remove(),Mo.delete(i))},qr=(i,o,a)=>{const l=Array.isArray(a)?a[0]:a;if(de.Location.is(l)){if(l.uri===o){const u=Ro(l.range.start);Bu(i,...Gn(l.range),1500),i.setCursor(u,{scroll:!0}),i.focus()}}else if(de.LocationLink.is(l)&&l.targetUri===o){const u=Ro(l.targetSelectionRange.start);Bu(i,...Gn(l.targetRange),1500),i.setCursor(u,{scroll:!0}),i.focus()}},wp=(i,{getSuggestions:o,onSelect:a,onUpdate:l,onCancel:u,render:f=kp,className:g="",debounceTimeout:b=0})=>{const w=document;let k=[],T="",N,E=-1,M=0,$;const Y=w.createElement("div"),V=Y.style;Y.className=g,V.position="absolute";const _=()=>{Y.parentNode||w.body.appendChild(Y)},P=()=>{const he=Y.parentNode;he&&he.removeChild(Y)},L=()=>!!Y.parentNode,y=()=>{M++,k=[],T="",N=void 0,E=-1,P()},W=()=>{$&&window.clearTimeout($)},j=()=>{if(!L())return;V.height="auto",V.width=i.offsetWidth+"px";const he=()=>{const ke=w.documentElement,_e=ke.clientTop||w.body.clientTop||0,Oe=ke.clientLeft||w.body.clientLeft||0,pt=window.pageYOffset||ke.scrollTop,$e=window.pageXOffset||ke.scrollLeft,Fe=i.getBoundingClientRect(),xe=Fe.top+i.offsetHeight+pt-_e,ae=Fe.left+$e-Oe;V.top=xe+"px",V.left=ae+"px";const re=Math.max(0,window.innerHeight-(Fe.top+i.offsetHeight));V.top=xe+"px",V.bottom="",V.left=ae+"px",V.maxHeight=re+"px"};he(),he()},A=()=>{if(Y.textContent="",k.length===0){y();return}const he=w.createDocumentFragment();for(const ke of k){const _e=f(ke,T);if(!_e)return;_e.addEventListener("click",Oe=>{a(ke),y(),Oe.preventDefault(),Oe.stopPropagation()}),ke===N&&(_e.className+=" selected"),he.appendChild(_e)}Y.appendChild(he),_(),j(),Ne()},X=()=>{L()&&A()},ue=()=>{X()},oe=he=>{he.target!==Y?X():he.preventDefault()},ve=he=>{Z()},Ne=()=>{const he=Y.getElementsByClassName("selected");if(he.length===0)return;const ke=he[0];if(ke.offsetTop<Y.scrollTop)Y.scrollTop=ke.offsetTop;else{const _e=ke.offsetTop+ke.offsetHeight,Oe=Y.scrollTop+Y.offsetHeight;_e>Oe&&(Y.scrollTop+=_e-Oe)}},q=he=>{const ke=k.length;ke===0?(N=void 0,E=-1):(E=(he%ke+ke)%ke,N=k[E],N&&l&&l(N),A())},z=he=>{const ke=he.key;switch(ke){case"Esc":case"Escape":y(),he.preventDefault(),he.stopPropagation(),u&&u();return;case"Up":case"Down":case"ArrowUp":case"ArrowDown":{const _e=ke==="ArrowUp"||ke==="Up"?-1:1;he.preventDefault(),q(E+_e);return}case"Enter":N&&(a(N),y()),he.preventDefault();return}},R=()=>{Z(!1)},Z=(he=!0)=>{const ke=++M,_e=i.value;W(),$=window.setTimeout(()=>{o(_e).then(Oe=>{M===ke&&(k=Oe,T=_e,k.length===0?(E=-1,N=void 0):(E=0,N=k[0],N&&l&&l(N)),A())})},he?b:0)},Ee=()=>{setTimeout(()=>{w.activeElement!==i&&y()},200)};return Y.addEventListener("mousedown",he=>{he.stopPropagation(),he.preventDefault()}),Y.addEventListener("focus",()=>i.focus()),i.addEventListener("keydown",z),i.addEventListener("input",ve),i.addEventListener("blur",Ee),i.addEventListener("focus",R),window.addEventListener("resize",ue),w.addEventListener("scroll",oe,!0),()=>{i.removeEventListener("focus",R),i.removeEventListener("keydown",z),i.removeEventListener("input",ve),i.removeEventListener("blur",Ee),window.removeEventListener("resize",ue),w.removeEventListener("scroll",oe,!0),W(),y()}},kp=(i,o)=>{const a=document.createElement("div");return a.textContent=i.label,a},Cp=(i,o,a)=>{if(a.length===0)return;let l=null;const u=Tp(a)?a.flatMap(N=>[Gu(N,o),...(N.children||[]).map(E=>Gu(E,o))]):a.map(N=>Sp(N)),g=i.getWrapperElement().appendChild(document.createElement("div")),b=g.appendChild(document.createElement("input"));g.className="cmw-document-symbols",b.className="cmw-document-symbols-input";const w=wp(b,{className:"cmw-document-symbols-list",getSuggestions:async N=>{if(N==="")return u.slice();const E=u.reduce((M,$)=>(M[$.label]=xp($.label,N),M),{});return u.slice().filter(M=>E[M.label]>0).sort((M,$)=>E[$.label]-E[M.label])},render:(N,E)=>{const M=document.createElement("div"),$=M.appendChild(document.createElement("div")),Y=Math.floor((N.kind||0)/30*180+180);return $.style.color=`hsl(${Y}, 75%, 50%)`,$.className=`cmw-icon cmw-icon--${ep(N.kind)}`,M.insertAdjacentHTML("beforeend",N.label.replace(new RegExp("("+Nc(E)+")","i"),'<span class="matched">$1</span>')),M},onSelect:N=>{T(),qr(i,o,N.location)},onUpdate:N=>{l&&l.clear();const E=N.location;E.uri===o&&(l=i.markText(...Gn(E.range),{className:"cmw-highlight"}))},onCancel:()=>{b.blur(),T()}});let k=!1;const T=()=>{k||(k=!0,l&&l.clear(),w(),g.remove(),i.focus())};g.addEventListener("focusout",N=>{N.relatedTarget!==null&&T()}),b.focus()},Tp=i=>i.every(o=>de.DocumentSymbol.is(o)),Sp=(i,o)=>({label:i.name,kind:i.kind,location:i.location}),Gu=(i,o)=>({label:i.name,kind:i.kind,location:{uri:o,range:i.range}}),xp=(i,o)=>{const a=i.toLowerCase(),l=o.toLowerCase(),u=a.includes(l)?1:0,f=i.includes(o)?1:0,g=a.startsWith(l)?2:0,b=i.startsWith(o)?3:0;return u+f+g+b},Rp=(i,o)=>a=>(i.addEventListener(o,a),()=>{i.removeEventListener(o,a)}),Es=i=>o=>a=>o(l=>a(i(l))),_p=(i=(o,a)=>o===a)=>o=>a=>{let l=null;return o(u=>{(!l||!i(l.value,u))&&(l={value:u},a(u))})},Ku=i=>o=>a=>{let l=null;return o(u=>{l!==null&&(clearTimeout(l),l=null),l=setTimeout(()=>a(u),i)})},Lp=i=>o=>a=>{let l=null;const u=[];return o(f=>{l!==null&&(clearTimeout(l),l=null),u.push(f),l=setTimeout(()=>{a(u.slice()),u.length=0},i)})},Xu=i=>o=>a=>o(l=>{i(l)&&a(l)}),Ms=(i,...o)=>o.reduce((a,l)=>l(a),i),ma=(i,o)=>a=>{const l=(...u)=>{a(u)};return i.on(o,l),()=>{i.off(o,l)}},mr=(i,o,a)=>ma(i,o)(a),Oc=(i,o,...a)=>{Nn.exports.signal(i,o,...a)};class Ep{constructor(o){this.onMouseLeaveAll=o,this.listeners=[]}addElement(o){if(this.listeners.find(l=>l.element===o))return;const a={element:o,over:!1,onEnter:()=>{a.over=!0},onLeave:()=>{a.over=!1,this.checkHoverState()}};this.listeners.push(a),o.addEventListener("mouseenter",a.onEnter),o.addEventListener("mouseleave",a.onLeave)}removeElement(o){const a=this.listeners.findIndex(u=>u.element===o),l=a!==-1;if(l){const u=this.listeners[a];this.listeners.splice(a,1),u.element.removeEventListener("mouseenter",u.onEnter),u.element.removeEventListener("mouseleave",u.onLeave),this.checkHoverState()}return l}dispose(){this.listeners.forEach(o=>{this.removeElement(o.element)})}checkHoverState(){window.setTimeout(()=>{this.listeners.every(o=>!o.over)&&this.onMouseLeaveAll()},500)}}const Mp=i=>new Promise(o=>setTimeout(o,i)),Do=new WeakMap,Dp=(i,o,a,l)=>{Do.has(i)&&bo(i);const u=document.createElement("div");u.className="cmw-context-menu",u.style.cssText=["z-index: 10;","position: absolute;","white-space: nowrap;","transition: opacity 200ms;"].join("");for(let w=0;w<l.length;++w){const k=l[w];for(const{label:T,handler:N}of k){const E=u.appendChild(document.createElement("div"));E.className="cmw-context-menu-item",E.appendChild(document.createTextNode(T)),N?E.addEventListener("click",M=>{M.preventDefault(),bo(i),N()}):E.setAttribute("disabled","")}if(w+1<l.length){const T=u.appendChild(document.createElement("hr"));T.className="cmw-context-menu-item-separator"}}u.style.opacity="0",document.body.appendChild(u);const f=u.offsetWidth+10,g=u.offsetHeight+10;u.style.left=Math.min(o,window.innerWidth-f)+"px",u.style.top=Math.min(a,window.innerHeight-g)+"px",u.style.opacity="1",Oc(i,"cmw:contextMenuOpened",i);const b=w=>{(!(w.target instanceof Node)||!u.contains(w.target))&&(bo(i),document.removeEventListener("mousedown",b))};document.addEventListener("mousedown",b),Do.set(i,{menu:u})},bo=i=>{const o=Do.get(i);!o||(o.menu&&o.menu.remove(),Do.delete(i),Oc(i,"cmw:contextMenuClosed",i))},Yu=50;class Pp{constructor(o){var a,l,u;this.connectionToUris=new WeakMap,this.editors=Object.create(null),this.connectionPromises=Object.create(null),this.connections=Object.create(null),this.documentVersions=Object.create(null),this.subscriptionDisposers=new WeakMap,this.completionHandlers=new WeakMap,this.configs=o.configs||{},this.rootUri=o.rootUri+(o.rootUri.endsWith("/")?"":"/"),this.getConnectionString=o.getConnectionString.bind(void 0),this.getLanguageAssociation=o.getLanguageAssociation.bind(void 0),this.canHandleMarkdown=typeof o.renderMarkdown=="function";const f=o.renderMarkdown||(g=>g);this.renderMarkdown=f.bind(void 0),this.popupsEnabled=!0,this.onDisconnected=((a=o.onDisconnected)===null||a===void 0?void 0:a.bind(void 0))||(g=>{}),this.onReconnected=((l=o.onReconnected)===null||l===void 0?void 0:l.bind(void 0))||(g=>Promise.resolve()),this.onConnectionFailed=((u=o.onConnectionFailed)===null||u===void 0?void 0:u.bind(void 0))||(g=>{})}enablePopups(o=!0){this.popupsEnabled=o,o||this.hideAllPopups()}dispose(){for(const o of Object.values(this.editors))this.removeEventHandlers(o);this.editors=Object.create(null),this.documentVersions=Object.create(null);for(const o of Object.values(this.connections))o.dispose(),this.connectionToUris.delete(o);this.connections=Object.create(null),this.connectionPromises=Object.create(null)}async openTextDocument(o,a){var l;const u=this.getDocumentUri(o),f=this.getLanguageAssociation(u);if(!f)return;const g=f.languageServerIds[0];if(!g)return;const b=await this.getConnection(g);if(!b)return;this.editors[u]=a,this.documentVersions[u]=0;const w=f.languageId;b.textDocumentOpened({textDocument:{uri:u,languageId:w,text:a.getValue(),version:++this.documentVersions[u]}}),(l=this.connectionToUris.get(b))===null||l===void 0||l.add(u),this.addEventHandlers(u,a,b)}addEventHandlers(o,a,l){const u=new pp({uri:o,editor:a,conn:l,renderMarkdown:this.renderMarkdown});this.completionHandlers.set(a,u);const f=[],g=new Ep(()=>{this.hideTooltips(a)});g.addElement(a.getWrapperElement()),f.push(()=>{g.dispose()});const b=L=>{Dn(L),u.invoke()},w=Ms(ma(a,"changes"),Lp(Yu),Es(L=>{const y=L[0][0];l.textDocumentChanged({textDocument:{uri:o,version:++this.documentVersions[o]},contentChanges:l.syncsIncrementally?L.flatMap(([j,A])=>A.map(Jh)):[{text:y.getValue()}]});const W=L[L.length-1][1];return[y,W[W.length-1]]}),Xu(([L,y])=>y.origin==="+delete"||y.text.every(W=>W.length===0)?(u.close(),Dn(L),!1):!(y.origin==="complete"||y.origin==="+complete")));f.push(w(([L,y])=>{if(!this.popupsEnabled||u.onChange())return;const W=L.getCursor();if(W.ch===0)return;const j=L.getLine(W.line)[W.ch-1];if(l.signatureHelpTriggers.includes(j)||l.signatureHelpRetriggers.includes(j)){u.close(),Dn(L),l.getSignatureHelp({textDocument:{uri:o},position:mn(W),context:{triggerKind:de.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:j,isRetrigger:!1}}).then(A=>{!A||A.signatures.length===0||bp(L,g,A,W,this.renderMarkdown)});return}u.close(),Dn(L)}));const k=Ms(ma(a,"cursorActivity"),Ku(100),Es(([L])=>[L,L.getCursor()]));f.push(k(([L,y])=>{const W=this.popupsEnabled&&L.getTokenTypeAt(y);if(W&&/\b(?:variable|property)\b/.test(W))l.getDocumentHighlight({textDocument:{uri:o},position:mn(y)}).then(j=>{Ls(L),j&&ap(L,j)});else if(Ls(L),y.ch>0){const j=L.getLine(y.line)[y.ch-1];!l.signatureHelpTriggers.includes(j)&&!l.signatureHelpRetriggers.includes(j)&&Dn(L)}else Dn(L)}));const T=Ms(Rp(a.getWrapperElement(),"mouseover"),Xu(()=>ip(a)),Ku(100),Es(L=>a.coordsChar({left:L.pageX,top:L.pageY},"page")),_p((L,y)=>{if(L.line!==y.line)return!1;if(L.ch===y.ch)return!0;const W=a.getTokenAt(L),j=a.getTokenAt(y);return W.string===j.string&&W.start===j.start&&W.end===j.end}));f.push(T(L=>{Br(a);const y=a.getTokenAt(L);y.type==="comment"||y.string.length===0||y.type===null||!this.popupsEnabled||l.getHoverInfo({textDocument:{uri:o},position:mn(L)}).then(W=>{W&&(Dn(a),rp(a,g,L,W,this.renderMarkdown))})}));const N=([L])=>{this.hideAllPopups(L)},E=([L])=>{this.hideTooltips(L)};f.push(mr(a,"cmw:contextMenuOpened",([L])=>{op(L),u.close(),Dn(L)}),mr(a,"cmw:contextMenuClosed",([L])=>{sp(L)}),mr(a,"refresh",N),mr(a,"blur",E),mr(a,"changes",E),mr(a,"viewportChange",E));const M=(L,y=L.getCursor())=>{l.getDefinition({textDocument:{uri:o},position:mn(y)}).then(W=>{W&&qr(L,o,W)})},$=(L,y=L.getCursor())=>{l.getDeclaration({textDocument:{uri:o},position:mn(y)}).then(W=>{W&&qr(L,o,W)})},Y=(L,y=L.getCursor())=>{l.getTypeDefinition({textDocument:{uri:o},position:mn(y)}).then(W=>{W&&qr(L,o,W)})},V=(L,y=L.getCursor())=>{l.getReferences({textDocument:{uri:o},position:mn(y),context:{includeDeclaration:!0}}).then(W=>{W&&qr(L,o,W)})},_=(L,y=L.getCursor())=>{l.getImplementation({textDocument:{uri:o},position:mn(y)}).then(W=>{W&&qr(L,o,W)})};f.push(mr(a,"contextmenu",([L,y])=>{y.preventDefault();const W=L.coordsChar({left:y.pageX,top:y.pageY},"page");Dp(L,y.pageX,y.pageY,[[{label:"Go to Definition",handler:()=>{M(L,W)}},{label:"Go to Type Definition",handler:()=>{Y(L,W)}},{label:"Go to Implementations",handler:()=>{_(L,W)}},{label:"Go to References",handler:()=>{V(L,W)}},{label:"Go to Symbol...",handler:()=>{l.getDocumentSymbol({textDocument:{uri:o}}).then(j=>{j&&Cp(L,o,j)})}}],[{label:"Copy"},{label:"Cut"}]])}));const P=Nn.exports.normalizeKeyMap({"Ctrl-Space":L=>{b(L)},"Alt-G D":L=>{M(L)},"Alt-G H":L=>{$(L)},"Alt-G T":L=>{Y(L)},"Alt-G I":L=>{_(L)},"Alt-G R":L=>{V(L)}});a.addKeyMap(P),f.push(()=>{a.removeKeyMap(P)}),this.subscriptionDisposers.set(a,f)}hideAllPopups(o){if(o){this.hideTooltips(o);const a=this.completionHandlers.get(o);a&&a.close(),bo(o)}else Object.values(this.editors).forEach(a=>this.hideAllPopups(a))}hideTooltips(o){o?(Br(o),Dn(o)):Object.values(this.editors).forEach(a=>this.hideTooltips(a))}async closeTextDocument(o){var a;const l=this.getDocumentUri(o),u=this.getLanguageAssociation(l);if(!u)return;const f=u.languageServerIds[0];if(!f)return;const g=await this.getConnection(f);!g||(this.detachEditor(l),g.textDocumentClosed({textDocument:{uri:l}}),(a=this.connectionToUris.get(g))===null||a===void 0||a.delete(l))}detachEditor(o){const a=this.editors[o];delete this.editors[o],delete this.documentVersions[o],this.removeEventHandlers(a)}async saveTextDocument(o){const a=this.getDocumentUri(o),l=this.getLanguageAssociation(a);if(!l)return;const u=l.languageServerIds[0];if(!u)return;const f=await this.getConnection(u);if(!f)return;const g=this.editors[a];if(!g)return;f.textDocumentWillSave({textDocument:{uri:a},reason:de.TextDocumentSaveReason.Manual});const b=await f.getEditsBeforeSave({textDocument:{uri:a},reason:de.TextDocumentSaveReason.Manual});b&&(xa(g,b,"beforeSave"),await Mp(Yu*1.5)),f.textDocumentSaved({textDocument:{uri:a},text:g.getValue()})}async notifyFilesChanged(o){for(const a of Object.values(this.connections))a.watchedFilesChanged({changes:o})}getConnection(o){return this.connectionPromises[o]||(this.connectionPromises[o]=(async()=>{const a=await this.getConnectionString(o);return a?(this.connections[o]=await this.openConnection(o,a,async(l,u)=>{await this.initConnection(l,this.configs[o],u)}),this.connections[o]):null})()),this.connectionPromises[o]}removeEventHandlers(o){const a=this.subscriptionDisposers.get(o);if(a){for(const u of a)u();a.length=0,this.subscriptionDisposers.delete(o)}Mc(o),Br(o),Ls(o),Dn(o);const l=this.completionHandlers.get(o);l&&(l.close(),this.completionHandlers.delete(o))}async initConnection(o,a,l){var u;l||o.listen(),await o.initialize({capabilities:{textDocument:{synchronization:{dynamicRegistration:!0,willSave:!0,willSaveWaitUntil:!0,didSave:!0},completion:{dynamicRegistration:!0,completionItem:{snippetSupport:!0,insertReplaceSupport:!0,commitCharactersSupport:!1,documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],deprecatedSupport:!0,preselectSupport:!0,resolveSupport:{properties:["documentation","detail"]}},contextSupport:!0},hover:{dynamicRegistration:!0,contentFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"]},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],parameterInformation:{labelOffsetSupport:!0}},contextSupport:!0},declaration:{dynamicRegistration:!0,linkSupport:!1},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0,linkSupport:!0},implementation:{dynamicRegistration:!0,linkSupport:!0},references:{dynamicRegistration:!0},documentHighlight:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[de.DiagnosticTag.Unnecessary,de.DiagnosticTag.Deprecated]}},moniker:{}},workspace:{didChangeConfiguration:{dynamicRegistration:!0},didChangeWatchedFiles:{dynamicRegistration:!1}}},initializationOptions:(u=a==null?void 0:a.initOptions)!==null&&u!==void 0?u:null,processId:null,rootUri:this.rootUri,workspaceFolders:null}),o.initialized();const f=a==null?void 0:a.settings;return f&&o.configurationChanged({settings:f}),l||o.onDiagnostics(({uri:g,diagnostics:b})=>{const w=this.editors[g];w&&np(w,b)}),o}getDocumentUri(o){return o.startsWith(this.rootUri)?o:this.rootUri+o.replace(/^\/+/,"")}async openConnection(o,a,l){if(/^wss?:\/\//.test(a)){const u=new Gh(a,{maxReconnectAttempts:10,debug:!0}),f=await Wh(u),g=Iu(f),b=[];let w=!1;return await l(g,!1),this.connectionToUris.set(g,new Set),u.addEventListener("down",k=>{if(w)console.debug(`cmw:ws:${o} connection is still down`);else{w=!0,console.debug(`cmw:ws:${o} connection went down`);const T=this.connectionToUris.get(g);for(const N of T){const E=this.editors[N];E&&(this.detachEditor(N),b.push([N,E]))}T.clear(),this.onDisconnected(o)}}),u.addEventListener("reopen",()=>{w=!1,console.debug(`cmw:ws:${o} connection reopened, reinitializing`),l(g,!0).then(async()=>{await this.onReconnected(o);for(const[k,T]of b)this.openTextDocument(k,T);b.length=0})}),u.addEventListener("close",k=>{b.length=0,k&&k.code!==1e3&&(console.warn(`cmw:ws:${o} connection failed`),this.onConnectionFailed(o))}),g}else{const u=await zh(new Worker(a)),f=Iu(u);return await l(f,!1),f}}}const Np={json:"application/json",typescript:"text/typescript",javascript:"text/javascript",html:"text/html",css:"text/css"},Op=(i,o)=>{const a=Np[o]||"text/plain",l=document.createElement("div");return Di.runMode(i,a,l,{tabSize:4}),l.innerHTML};Se.use({renderer:{code(i,o){return o||(o="text"),i=Op(i,o),`<pre><code class="cm-s-idea language-${o}">${i}</code></pre>`}}});const Ap=JSON.stringify({compilerOptions:{target:"es2017",module:"commonjs",strict:!0,esModuleInterop:!0,skipLibCheck:!0,forceConsistentCasingInFileNames:!0}},null,2),Ip=i=>{const o=document.querySelector(i);if(!o)throw new Error(`No element matching ${i}`);return o},Wp={theme:"idea",gutters:["cmw-gutter"],lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0},Hp=Di(Ip("#editor"),{...Wp,mode:"application/json",value:Ap}),Zu="json-worker",Fp=new Pp({rootUri:"inmemory://workspace/",getLanguageAssociation:i=>i.endsWith(".json")?{languageId:"json",languageServerIds:[Zu]}:null,getConnectionString:async i=>{switch(i){case Zu:return"worker.js";default:return""}},renderMarkdown:i=>Se(i)});Fp.openTextDocument("tsconfig.json",Hp);
