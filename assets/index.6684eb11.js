const fd=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function a(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerpolicy&&(h.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?h.credentials="include":u.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(u){if(u.ep)return;u.ep=!0;const h=a(u);fetch(u.href,h)}};fd();var an=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dd(i){if(i.__esModule)return i;var s=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(a){var c=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(s,a,c.get?c:{enumerable:!0,get:function(){return i[a]}})}),s}var Pn={exports:{}};(function(i,s){(function(a,c){i.exports=c()})(an,function(){var a=navigator.userAgent,c=navigator.platform,u=/gecko\/\d/i.test(a),h=/MSIE \d/.test(a),y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(a),k=/Edge\/(\d+)/.exec(a),C=h||y||k,E=C&&(h?document.documentMode||6:+(k||y)[1]),N=!k&&/WebKit\//.test(a),H=N&&/Qt\/\d+\.\d+/.test(a),O=!k&&/Chrome\//.test(a),j=/Opera\//.test(a),Q=/Apple Computer/.test(navigator.vendor),ae=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(a),fe=/PhantomJS/.test(a),P=Q&&(/Mobile\/\w+/.test(a)||navigator.maxTouchPoints>2),I=/Android/.test(a),F=P||I||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(a),b=P||/Mac/.test(c),U=/\bCrOS\b/.test(a),V=/win/i.test(c),q=j&&a.match(/Version\/(\d*\.\d*)/);q&&(q=Number(q[1])),q&&q>=15&&(j=!1,N=!0);var re=b&&(H||j&&(q==null||q<12.11)),De=u||C&&E>=9;function ge(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Se=function(e,t){var r=e.className,n=ge(t).exec(r);if(n){var o=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(o?n[1]+o:"")}};function $e(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function G(e,t){return $e(e).appendChild(t)}function K(e,t,r,n){var o=document.createElement(e);if(r&&(o.className=r),n&&(o.style.cssText=n),typeof t=="string")o.appendChild(document.createTextNode(t));else if(t)for(var l=0;l<t.length;++l)o.appendChild(t[l]);return o}function _(e,t,r,n){var o=K(e,t,r,n);return o.setAttribute("role","presentation"),o}var ie;document.createRange?ie=function(e,t,r,n){var o=document.createRange();return o.setEnd(n||e,r),o.setStart(e,t),o}:ie=function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch{return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};function Ie(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function Ce(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function Le(e,t){var r=e.className;ge(t).test(r)||(e.className+=(r?" ":"")+t)}function Ee(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!ge(r[n]).test(t)&&(t+=" "+r[n]);return t}var Ge=function(e){e.select()};P?Ge=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:C&&(Ge=function(e){try{e.select()}catch{}});function at(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Je(e,t,r){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(r!==!1||!t.hasOwnProperty(n))&&(t[n]=e[n]);return t}function We(e,t,r,n,o){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var l=n||0,f=o||0;;){var d=e.indexOf("	",l);if(d<0||d>=t)return f+(t-l);f+=d-l,f+=r-f%r,l=d+1}}var Ne=function(){this.id=null,this.f=null,this.time=0,this.handler=at(this.onTimeout,this)};Ne.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Ne.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};function ve(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}var de=50,Fe={toString:function(){return"CodeMirror.Pass"}},He={scroll:!1},Ke={origin:"*mouse"},qe={origin:"+move"};function be(e,t,r){for(var n=0,o=0;;){var l=e.indexOf("	",n);l==-1&&(l=e.length);var f=l-n;if(l==e.length||o+f>=t)return n+Math.min(f,t-o);if(o+=l-n,o+=r-o%r,n=l+1,o>=t)return n}}var ye=[""];function Ct(e){for(;ye.length<=e;)ye.push(Oe(ye)+" ");return ye[e]}function Oe(e){return e[e.length-1]}function kt(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function _t(e,t,r){for(var n=0,o=r(t);n<e.length&&r(e[n])<=o;)n++;e.splice(n,0,t)}function et(){}function dt(e,t){var r;return Object.create?r=Object.create(e):(et.prototype=e,r=new et),t&&Je(t,r),r}var hn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function zt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||hn.test(e))}function $t(e,t){return t?t.source.indexOf("\\w")>-1&&zt(e)?!0:t.test(e):zt(e)}function On(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Gn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function pn(e){return e.charCodeAt(0)>=768&&Gn.test(e)}function Sn(e,t,r){for(;(r<0?t>0:t<e.length)&&pn(e.charAt(t));)t+=r;return t}function Gt(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var o=(t+r)/2,l=n<0?Math.ceil(o):Math.floor(o);if(l==t)return e(l)?t:r;e(l)?r=l:t=l+n}}function Kn(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var o=!1,l=0;l<e.length;++l){var f=e[l];(f.from<r&&f.to>t||t==r&&f.to==t)&&(n(Math.max(f.from,t),Math.min(f.to,r),f.level==1?"rtl":"ltr",l),o=!0)}o||n(t,r,"ltr")}var Pt=null;function rt(e,t,r){var n;Pt=null;for(var o=0;o<e.length;++o){var l=e[o];if(l.from<t&&l.to>t)return o;l.to==t&&(l.from!=l.to&&r=="before"?n=o:Pt=o),l.from==t&&(l.from!=l.to&&r!="before"?n=o:Pt=o)}return n!=null?n:Pt}var mn=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(g){return g<=247?e.charAt(g):1424<=g&&g<=1524?"R":1536<=g&&g<=1785?t.charAt(g-1536):1774<=g&&g<=2220?"r":8192<=g&&g<=8203?"w":g==8204?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,f=/[Lb1n]/,d=/[1n]/;function p(g,T,A){this.level=g,this.from=T,this.to=A}return function(g,T){var A=T=="ltr"?"L":"R";if(g.length==0||T=="ltr"&&!n.test(g))return!1;for(var z=g.length,W=[],$=0;$<z;++$)W.push(r(g.charCodeAt($)));for(var J=0,se=A;J<z;++J){var ue=W[J];ue=="m"?W[J]=se:se=ue}for(var pe=0,ce=A;pe<z;++pe){var we=W[pe];we=="1"&&ce=="r"?W[pe]="n":l.test(we)&&(ce=we,we=="r"&&(W[pe]="R"))}for(var _e=1,Te=W[0];_e<z-1;++_e){var Ue=W[_e];Ue=="+"&&Te=="1"&&W[_e+1]=="1"?W[_e]="1":Ue==","&&Te==W[_e+1]&&(Te=="1"||Te=="n")&&(W[_e]=Te),Te=Ue}for(var tt=0;tt<z;++tt){var xt=W[tt];if(xt==",")W[tt]="N";else if(xt=="%"){var lt=void 0;for(lt=tt+1;lt<z&&W[lt]=="%";++lt);for(var sn=tt&&W[tt-1]=="!"||lt<z&&W[lt]=="1"?"1":"N",Vt=tt;Vt<lt;++Vt)W[Vt]=sn;tt=lt-1}}for(var gt=0,Qt=A;gt<z;++gt){var Ft=W[gt];Qt=="L"&&Ft=="1"?W[gt]="L":l.test(Ft)&&(Qt=Ft)}for(var yt=0;yt<z;++yt)if(o.test(W[yt])){var vt=void 0;for(vt=yt+1;vt<z&&o.test(W[vt]);++vt);for(var ft=(yt?W[yt-1]:A)=="L",en=(vt<z?W[vt]:A)=="L",Nr=ft==en?ft?"L":"R":A,nr=yt;nr<vt;++nr)W[nr]=Nr;yt=vt-1}for(var Ht=[],Ln,At=0;At<z;)if(f.test(W[At])){var ps=At;for(++At;At<z&&f.test(W[At]);++At);Ht.push(new p(0,ps,At))}else{var zn=At,dr=Ht.length,hr=T=="rtl"?1:0;for(++At;At<z&&W[At]!="L";++At);for(var Ut=zn;Ut<At;)if(d.test(W[Ut])){zn<Ut&&(Ht.splice(dr,0,new p(1,zn,Ut)),dr+=hr);var Or=Ut;for(++Ut;Ut<At&&d.test(W[Ut]);++Ut);Ht.splice(dr,0,new p(2,Or,Ut)),dr+=hr,zn=Ut}else++Ut;zn<At&&Ht.splice(dr,0,new p(1,zn,At))}return T=="ltr"&&(Ht[0].level==1&&(Ln=g.match(/^\s+/))&&(Ht[0].from=Ln[0].length,Ht.unshift(new p(0,0,Ln[0].length))),Oe(Ht).level==1&&(Ln=g.match(/\s+$/))&&(Oe(Ht).to-=Ln[0].length,Ht.push(new p(0,z-Ln[0].length,z)))),T=="rtl"?Ht.reverse():Ht}}();function Rt(e,t){var r=e.order;return r==null&&(r=e.order=mn(e.text,t)),r}var ln=[],xe=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||ln).concat(r)}};function Nt(e,t){return e._handlers&&e._handlers[t]||ln}function ut(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,o=n&&n[t];if(o){var l=ve(o,r);l>-1&&(n[t]=o.slice(0,l).concat(o.slice(l+1)))}}}function Re(e,t){var r=Nt(e,t);if(!!r.length)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<r.length;++o)r[o].apply(null,n)}function it(e,t,r){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Re(e,r||t.type,e,t),Lt(t)||t.codemirrorIgnore}function Kt(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)ve(r,t[n])==-1&&r.push(t[n])}function ot(e,t){return Nt(e,t).length>0}function Ot(e){e.prototype.on=function(t,r){xe(this,t,r)},e.prototype.off=function(t,r){ut(this,t,r)}}function ht(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Xt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Lt(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function gn(e){ht(e),Xt(e)}function nn(e){return e.target||e.srcElement}function ze(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),b&&e.ctrlKey&&t==1&&(t=3),t}var rn=function(){if(C&&E<9)return!1;var e=K("div");return"draggable"in e||"dragDrop"in e}(),w;function S(e){if(w==null){var t=K("span","\u200B");G(e,K("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(w=t.offsetWidth<=1&&t.offsetHeight>2&&!(C&&E<8))}var r=w?K("span","\u200B"):K("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var L;function m(e){if(L!=null)return L;var t=G(e,document.createTextNode("A\u062EA")),r=ie(t,0,1).getBoundingClientRect(),n=ie(t,1,2).getBoundingClientRect();return $e(e),!r||r.left==r.right?!1:L=n.right-r.right<3}var D=`

b`.split(/\n/).length!=3?function(e){for(var t=0,r=[],n=e.length;t<=n;){var o=e.indexOf(`
`,t);o==-1&&(o=e.length);var l=e.slice(t,e.charAt(o-1)=="\r"?o-1:o),f=l.indexOf("\r");f!=-1?(r.push(l.slice(0,f)),t+=f+1):(r.push(l),t=o+1)}return r}:function(e){return e.split(/\r\n?|\n/)},x=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},M=function(){var e=K("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),B=null;function te(e){if(B!=null)return B;var t=G(e,K("span","x")),r=t.getBoundingClientRect(),n=ie(t,0,1).getBoundingClientRect();return B=Math.abs(r.left-n.left)>1}var Z={},ee={};function he(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Z[e]=t}function Ae(e,t){ee[e]=t}function Ze(e){if(typeof e=="string"&&ee.hasOwnProperty(e))e=ee[e];else if(e&&typeof e.name=="string"&&ee.hasOwnProperty(e.name)){var t=ee[e.name];typeof t=="string"&&(t={name:t}),e=dt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ze("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ze("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function je(e,t){t=Ze(t);var r=Z[t.name];if(!r)return je(e,"text/plain");var n=r(e,t);if(Me.hasOwnProperty(t.name)){var o=Me[t.name];for(var l in o)!o.hasOwnProperty(l)||(n.hasOwnProperty(l)&&(n["_"+l]=n[l]),n[l]=o[l])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)n[f]=t.modeProps[f];return n}var Me={};function ct(e,t){var r=Me.hasOwnProperty(e)?Me[e]:Me[e]={};Je(t,r)}function mt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var o=t[n];o instanceof Array&&(o=o.concat([])),r[n]=o}return r}function un(e,t){for(var r;e.innerMode&&(r=e.innerMode(t),!(!r||r.mode==e));)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Yt(e,t,r){return e.startState?e.startState(t,r):!0}var Be=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Be.prototype.eol=function(){return this.pos>=this.string.length},Be.prototype.sol=function(){return this.pos==this.lineStart},Be.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Be.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Be.prototype.eat=function(e){var t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e.test?e.test(t):e(t)),r)return++this.pos,t},Be.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Be.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Be.prototype.skipToEnd=function(){this.pos=this.string.length},Be.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Be.prototype.backUp=function(e){this.pos-=e},Be.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=We(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},Be.prototype.indentation=function(){return We(this.string,null,this.tabSize)-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},Be.prototype.match=function(e,t,r){if(typeof e=="string"){var n=function(f){return r?f.toLowerCase():f},o=this.string.substr(this.pos,e.length);if(n(o)==n(e))return t!==!1&&(this.pos+=e.length),!0}else{var l=this.string.slice(this.pos).match(e);return l&&l.index>0?null:(l&&t!==!1&&(this.pos+=l[0].length),l)}},Be.prototype.current=function(){return this.string.slice(this.start,this.pos)},Be.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Be.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Be.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function le(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var o=r.children[n],l=o.chunkSize();if(t<l){r=o;break}t-=l}return r.lines[t]}function cn(e,t,r){var n=[],o=t.line;return e.iter(t.line,r.line+1,function(l){var f=l.text;o==r.line&&(f=f.slice(0,r.ch)),o==t.line&&(f=f.slice(t.ch)),n.push(f),++o}),n}function yn(e,t,r){var n=[];return e.iter(t,r,function(o){n.push(o.text)}),n}function Bt(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ye(e){if(e.parent==null)return null;for(var t=e.parent,r=ve(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var o=0;n.children[o]!=t;++o)r+=n.children[o].chunkSize();return r+t.first}function En(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var o=e.children[n],l=o.height;if(t<l){e=o;continue e}t-=l,r+=o.chunkSize()}return r}while(!e.lines);for(var f=0;f<e.lines.length;++f){var d=e.lines[f],p=d.height;if(t<p)break;t-=p}return r+f}function rr(e,t){return t>=e.first&&t<e.first+e.size}function Xr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ne(e,t,r){if(r===void 0&&(r=null),!(this instanceof ne))return new ne(e,t,r);this.line=e,this.ch=t,this.sticky=r}function v(e,t){return e.line-t.line||e.ch-t.ch}function R(e,t){return e.sticky==t.sticky&&v(e,t)==0}function Y(e){return ne(e.line,e.ch)}function oe(e,t){return v(e,t)<0?t:e}function Pe(e,t){return v(e,t)<0?e:t}function Xe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return ne(e.first,0);var r=e.first+e.size-1;return t.line>r?ne(r,le(e,r).text.length):It(t,le(e,t.line).text.length)}function It(e,t){var r=e.ch;return r==null||r>t?ne(e.line,t):r<0?ne(e.line,0):e}function fn(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=me(e,t[n]);return r}var mr=function(e,t){this.state=e,this.lookAhead=t},xn=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};xn.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},xn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},xn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},xn.fromSaved=function(e,t,r){return t instanceof mr?new xn(e,mt(e.mode,t.state),r,t.lookAhead):new xn(e,mt(e.mode,t),r)},xn.prototype.save=function(e){var t=e!==!1?mt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mr(t,this.maxLookAhead):t};function ha(e,t,r,n){var o=[e.state.modeGen],l={};ba(e,t.text,e.doc.mode,r,function(g,T){return o.push(g,T)},l,n);for(var f=r.state,d=function(g){r.baseTokens=o;var T=e.state.overlays[g],A=1,z=0;r.state=!0,ba(e,t.text,T.mode,r,function(W,$){for(var J=A;z<W;){var se=o[A];se>W&&o.splice(A,1,W,o[A+1],se),A+=2,z=Math.min(W,se)}if(!!$)if(T.opaque)o.splice(J,A-J,W,"overlay "+$),A=J+2;else for(;J<A;J+=2){var ue=o[J+1];o[J+1]=(ue?ue+" ":"")+"overlay "+$}},l),r.state=f,r.baseTokens=null,r.baseTokenPos=1},p=0;p<e.state.overlays.length;++p)d(p);return{styles:o,classes:l.bgClass||l.textClass?l:null}}function pa(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Yr(e,Ye(t)),o=t.text.length>e.options.maxHighlightLength&&mt(e.doc.mode,n.state),l=ha(e,t,n);o&&(n.state=o),t.stateAfter=n.save(!o),t.styles=l.styles,l.classes?t.styleClasses=l.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Yr(e,t,r){var n=e.doc,o=e.display;if(!n.mode.startState)return new xn(n,!0,t);var l=dc(e,t,r),f=l>n.first&&le(n,l-1).stateAfter,d=f?xn.fromSaved(n,f,l):new xn(n,Yt(n.mode),l);return n.iter(l,t,function(p){So(e,p.text,d);var g=d.line;p.stateAfter=g==t-1||g%5==0||g>=o.viewFrom&&g<o.viewTo?d.save():null,d.nextLine()}),r&&(n.modeFrontier=d.line),d}function So(e,t,r,n){var o=e.doc.mode,l=new Be(t,e.options.tabSize,r);for(l.start=l.pos=n||0,t==""&&ga(o,r.state);!l.eol();)Eo(o,l,r.state),l.start=l.pos}function ga(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var r=un(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function Eo(e,t,r,n){for(var o=0;o<10;o++){n&&(n[0]=un(e,r).mode);var l=e.token(t,r);if(t.pos>t.start)return l}throw new Error("Mode "+e.name+" failed to advance stream.")}var va=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function ma(e,t,r,n){var o=e.doc,l=o.mode,f;t=me(o,t);var d=le(o,t.line),p=Yr(e,t.line,r),g=new Be(d.text,e.options.tabSize,p),T;for(n&&(T=[]);(n||g.pos<t.ch)&&!g.eol();)g.start=g.pos,f=Eo(l,g,p.state),n&&T.push(new va(g,f,mt(o.mode,p.state)));return n?T:new va(g,f,p.state)}function ya(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";t[n]==null?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function ba(e,t,r,n,o,l,f){var d=r.flattenSpans;d==null&&(d=e.options.flattenSpans);var p=0,g=null,T=new Be(t,e.options.tabSize,n),A,z=e.options.addModeClass&&[null];for(t==""&&ya(ga(r,n.state),l);!T.eol();){if(T.pos>e.options.maxHighlightLength?(d=!1,f&&So(e,t,n,T.pos),T.pos=t.length,A=null):A=ya(Eo(r,T,n.state,z),l),z){var W=z[0].name;W&&(A="m-"+(A?W+" "+A:W))}if(!d||g!=A){for(;p<T.start;)p=Math.min(T.start,p+5e3),o(p,g);g=A}T.start=T.pos}for(;p<T.pos;){var $=Math.min(T.pos,p+5e3);o($,g),p=$}}function dc(e,t,r){for(var n,o,l=e.doc,f=r?-1:t-(e.doc.mode.innerMode?1e3:100),d=t;d>f;--d){if(d<=l.first)return l.first;var p=le(l,d-1),g=p.stateAfter;if(g&&(!r||d+(g instanceof mr?g.lookAhead:0)<=l.modeFrontier))return d;var T=We(p.text,null,e.options.tabSize);(o==null||n>T)&&(o=d-1,n=T)}return o}function hc(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var o=le(e,n).stateAfter;if(o&&(!(o instanceof mr)||n+o.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}var wa=!1,Bn=!1;function pc(){wa=!0}function gc(){Bn=!0}function Ri(e,t,r){this.marker=e,this.from=t,this.to=r}function Zr(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function vc(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function mc(e,t,r){var n=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));n&&n.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],n&&n.add(e.markedSpans)),t.marker.attachLine(e)}function yc(e,t,r){var n;if(e)for(var o=0;o<e.length;++o){var l=e[o],f=l.marker,d=l.from==null||(f.inclusiveLeft?l.from<=t:l.from<t);if(d||l.from==t&&f.type=="bookmark"&&(!r||!l.marker.insertLeft)){var p=l.to==null||(f.inclusiveRight?l.to>=t:l.to>t);(n||(n=[])).push(new Ri(f,l.from,p?null:l.to))}}return n}function bc(e,t,r){var n;if(e)for(var o=0;o<e.length;++o){var l=e[o],f=l.marker,d=l.to==null||(f.inclusiveRight?l.to>=t:l.to>t);if(d||l.from==t&&f.type=="bookmark"&&(!r||l.marker.insertLeft)){var p=l.from==null||(f.inclusiveLeft?l.from<=t:l.from<t);(n||(n=[])).push(new Ri(f,p?null:l.from-t,l.to==null?null:l.to-t))}}return n}function xo(e,t){if(t.full)return null;var r=rr(e,t.from.line)&&le(e,t.from.line).markedSpans,n=rr(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!r&&!n)return null;var o=t.from.ch,l=t.to.ch,f=v(t.from,t.to)==0,d=yc(r,o,f),p=bc(n,l,f),g=t.text.length==1,T=Oe(t.text).length+(g?o:0);if(d)for(var A=0;A<d.length;++A){var z=d[A];if(z.to==null){var W=Zr(p,z.marker);W?g&&(z.to=W.to==null?null:W.to+T):z.to=o}}if(p)for(var $=0;$<p.length;++$){var J=p[$];if(J.to!=null&&(J.to+=T),J.from==null){var se=Zr(d,J.marker);se||(J.from=T,g&&(d||(d=[])).push(J))}else J.from+=T,g&&(d||(d=[])).push(J)}d&&(d=Da(d)),p&&p!=d&&(p=Da(p));var ue=[d];if(!g){var pe=t.text.length-2,ce;if(pe>0&&d)for(var we=0;we<d.length;++we)d[we].to==null&&(ce||(ce=[])).push(new Ri(d[we].marker,null,null));for(var _e=0;_e<pe;++_e)ue.push(ce);ue.push(p)}return ue}function Da(e){for(var t=0;t<e.length;++t){var r=e[t];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function wc(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(W){if(W.markedSpans)for(var $=0;$<W.markedSpans.length;++$){var J=W.markedSpans[$].marker;J.readOnly&&(!n||ve(n,J)==-1)&&(n||(n=[])).push(J)}}),!n)return null;for(var o=[{from:t,to:r}],l=0;l<n.length;++l)for(var f=n[l],d=f.find(0),p=0;p<o.length;++p){var g=o[p];if(!(v(g.to,d.from)<0||v(g.from,d.to)>0)){var T=[p,1],A=v(g.from,d.from),z=v(g.to,d.to);(A<0||!f.inclusiveLeft&&!A)&&T.push({from:g.from,to:d.from}),(z>0||!f.inclusiveRight&&!z)&&T.push({from:d.to,to:g.to}),o.splice.apply(o,T),p+=T.length-3}}return o}function Ca(e){var t=e.markedSpans;if(!!t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function ka(e,t){if(!!t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Li(e){return e.inclusiveLeft?-1:0}function Fi(e){return e.inclusiveRight?1:0}function Ao(e,t){var r=e.lines.length-t.lines.length;if(r!=0)return r;var n=e.find(),o=t.find(),l=v(n.from,o.from)||Li(e)-Li(t);if(l)return-l;var f=v(n.to,o.to)||Fi(e)-Fi(t);return f||t.id-e.id}function Ta(e,t){var r=Bn&&e.markedSpans,n;if(r)for(var o=void 0,l=0;l<r.length;++l)o=r[l],o.marker.collapsed&&(t?o.from:o.to)==null&&(!n||Ao(n,o.marker)<0)&&(n=o.marker);return n}function Sa(e){return Ta(e,!0)}function Mi(e){return Ta(e,!1)}function Dc(e,t){var r=Bn&&e.markedSpans,n;if(r)for(var o=0;o<r.length;++o){var l=r[o];l.marker.collapsed&&(l.from==null||l.from<t)&&(l.to==null||l.to>t)&&(!n||Ao(n,l.marker)<0)&&(n=l.marker)}return n}function Ea(e,t,r,n,o){var l=le(e,t),f=Bn&&l.markedSpans;if(f)for(var d=0;d<f.length;++d){var p=f[d];if(!!p.marker.collapsed){var g=p.marker.find(0),T=v(g.from,r)||Li(p.marker)-Li(o),A=v(g.to,n)||Fi(p.marker)-Fi(o);if(!(T>=0&&A<=0||T<=0&&A>=0)&&(T<=0&&(p.marker.inclusiveRight&&o.inclusiveLeft?v(g.to,r)>=0:v(g.to,r)>0)||T>=0&&(p.marker.inclusiveRight&&o.inclusiveLeft?v(g.from,n)<=0:v(g.from,n)<0)))return!0}}}function An(e){for(var t;t=Sa(e);)e=t.find(-1,!0).line;return e}function Cc(e){for(var t;t=Mi(e);)e=t.find(1,!0).line;return e}function kc(e){for(var t,r;t=Mi(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function _o(e,t){var r=le(e,t),n=An(r);return r==n?t:Ye(n)}function xa(e,t){if(t>e.lastLine())return t;var r=le(e,t),n;if(!Xn(e,r))return t;for(;n=Mi(r);)r=n.find(1,!0).line;return Ye(r)+1}function Xn(e,t){var r=Bn&&t.markedSpans;if(r){for(var n=void 0,o=0;o<r.length;++o)if(n=r[o],!!n.marker.collapsed){if(n.from==null)return!0;if(!n.marker.widgetNode&&n.from==0&&n.marker.inclusiveLeft&&Ro(e,t,n))return!0}}}function Ro(e,t,r){if(r.to==null){var n=r.marker.find(1,!0);return Ro(e,n.line,Zr(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var o=void 0,l=0;l<t.markedSpans.length;++l)if(o=t.markedSpans[l],o.marker.collapsed&&!o.marker.widgetNode&&o.from==r.to&&(o.to==null||o.to!=r.from)&&(o.marker.inclusiveLeft||r.marker.inclusiveRight)&&Ro(e,t,o))return!0}function In(e){e=An(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var o=r.lines[n];if(o==e)break;t+=o.height}for(var l=r.parent;l;r=l,l=r.parent)for(var f=0;f<l.children.length;++f){var d=l.children[f];if(d==r)break;t+=d.height}return t}function Pi(e){if(e.height==0)return 0;for(var t=e.text.length,r,n=e;r=Sa(n);){var o=r.find(0,!0);n=o.from.line,t+=o.from.ch-o.to.ch}for(n=e;r=Mi(n);){var l=r.find(0,!0);t-=n.text.length-l.from.ch,n=l.to.line,t+=n.text.length-l.to.ch}return t}function Lo(e){var t=e.display,r=e.doc;t.maxLine=le(r,r.first),t.maxLineLength=Pi(t.maxLine),t.maxLineChanged=!0,r.iter(function(n){var o=Pi(n);o>t.maxLineLength&&(t.maxLineLength=o,t.maxLine=n)})}var yr=function(e,t,r){this.text=e,ka(this,t),this.height=r?r(this):1};yr.prototype.lineNo=function(){return Ye(this)},Ot(yr);function Tc(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Ca(e),ka(e,r);var o=n?n(e):1;o!=e.height&&Bt(e,o)}function Sc(e){e.parent=null,Ca(e)}var Ec={},xc={};function Aa(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?xc:Ec;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function _a(e,t){var r=_("span",null,null,N?"padding-right: .1px":null),n={pre:_("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var l=o?t.rest[o-1]:t.line,f=void 0;n.pos=0,n.addToken=_c,m(e.display.measure)&&(f=Rt(l,e.doc.direction))&&(n.addToken=Lc(n.addToken,f)),n.map=[];var d=t!=e.display.externalMeasured&&Ye(l);Fc(l,n,pa(e,l,d)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=Ee(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=Ee(l.styleClasses.textClass,n.textClass||""))),n.map.length==0&&n.map.push(0,0,n.content.appendChild(S(e.display.measure))),o==0?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(N){var p=n.content.lastChild;(/\bcm-tab\b/.test(p.className)||p.querySelector&&p.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Re(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Ee(n.pre.className,n.textClass||"")),n}function Ac(e){var t=K("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function _c(e,t,r,n,o,l,f){if(!!t){var d=e.splitSpaces?Rc(t,e.trailingSpace):t,p=e.cm.state.specialChars,g=!1,T;if(!p.test(t))e.col+=t.length,T=document.createTextNode(d),e.map.push(e.pos,e.pos+t.length,T),C&&E<9&&(g=!0),e.pos+=t.length;else{T=document.createDocumentFragment();for(var A=0;;){p.lastIndex=A;var z=p.exec(t),W=z?z.index-A:t.length-A;if(W){var $=document.createTextNode(d.slice(A,A+W));C&&E<9?T.appendChild(K("span",[$])):T.appendChild($),e.map.push(e.pos,e.pos+W,$),e.col+=W,e.pos+=W}if(!z)break;A+=W+1;var J=void 0;if(z[0]=="	"){var se=e.cm.options.tabSize,ue=se-e.col%se;J=T.appendChild(K("span",Ct(ue),"cm-tab")),J.setAttribute("role","presentation"),J.setAttribute("cm-text","	"),e.col+=ue}else z[0]=="\r"||z[0]==`
`?(J=T.appendChild(K("span",z[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),J.setAttribute("cm-text",z[0]),e.col+=1):(J=e.cm.options.specialCharPlaceholder(z[0]),J.setAttribute("cm-text",z[0]),C&&E<9?T.appendChild(K("span",[J])):T.appendChild(J),e.col+=1);e.map.push(e.pos,e.pos+1,J),e.pos++}}if(e.trailingSpace=d.charCodeAt(t.length-1)==32,r||n||o||g||l||f){var pe=r||"";n&&(pe+=n),o&&(pe+=o);var ce=K("span",[T],pe,l);if(f)for(var we in f)f.hasOwnProperty(we)&&we!="style"&&we!="class"&&ce.setAttribute(we,f[we]);return e.content.appendChild(ce)}e.content.appendChild(T)}}function Rc(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",o=0;o<e.length;o++){var l=e.charAt(o);l==" "&&r&&(o==e.length-1||e.charCodeAt(o+1)==32)&&(l="\xA0"),n+=l,r=l==" "}return n}function Lc(e,t){return function(r,n,o,l,f,d,p){o=o?o+" cm-force-border":"cm-force-border";for(var g=r.pos,T=g+n.length;;){for(var A=void 0,z=0;z<t.length&&(A=t[z],!(A.to>g&&A.from<=g));z++);if(A.to>=T)return e(r,n,o,l,f,d,p);e(r,n.slice(0,A.to-g),o,l,null,d,p),l=null,n=n.slice(A.to-g),g=A.to}}}function Ra(e,t,r,n){var o=!n&&r.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!n&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",r.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function Fc(e,t,r){var n=e.markedSpans,o=e.text,l=0;if(!n){for(var f=1;f<r.length;f+=2)t.addToken(t,o.slice(l,l=r[f]),Aa(r[f+1],t.cm.options));return}for(var d=o.length,p=0,g=1,T="",A,z,W=0,$,J,se,ue,pe;;){if(W==p){$=J=se=z="",pe=null,ue=null,W=1/0;for(var ce=[],we=void 0,_e=0;_e<n.length;++_e){var Te=n[_e],Ue=Te.marker;if(Ue.type=="bookmark"&&Te.from==p&&Ue.widgetNode)ce.push(Ue);else if(Te.from<=p&&(Te.to==null||Te.to>p||Ue.collapsed&&Te.to==p&&Te.from==p)){if(Te.to!=null&&Te.to!=p&&W>Te.to&&(W=Te.to,J=""),Ue.className&&($+=" "+Ue.className),Ue.css&&(z=(z?z+";":"")+Ue.css),Ue.startStyle&&Te.from==p&&(se+=" "+Ue.startStyle),Ue.endStyle&&Te.to==W&&(we||(we=[])).push(Ue.endStyle,Te.to),Ue.title&&((pe||(pe={})).title=Ue.title),Ue.attributes)for(var tt in Ue.attributes)(pe||(pe={}))[tt]=Ue.attributes[tt];Ue.collapsed&&(!ue||Ao(ue.marker,Ue)<0)&&(ue=Te)}else Te.from>p&&W>Te.from&&(W=Te.from)}if(we)for(var xt=0;xt<we.length;xt+=2)we[xt+1]==W&&(J+=" "+we[xt]);if(!ue||ue.from==p)for(var lt=0;lt<ce.length;++lt)Ra(t,0,ce[lt]);if(ue&&(ue.from||0)==p){if(Ra(t,(ue.to==null?d+1:ue.to)-p,ue.marker,ue.from==null),ue.to==null)return;ue.to==p&&(ue=!1)}}if(p>=d)break;for(var sn=Math.min(d,W);;){if(T){var Vt=p+T.length;if(!ue){var gt=Vt>sn?T.slice(0,sn-p):T;t.addToken(t,gt,A?A+$:$,se,p+gt.length==W?J:"",z,pe)}if(Vt>=sn){T=T.slice(sn-p),p=sn;break}p=Vt,se=""}T=o.slice(l,l=r[g++]),A=Aa(r[g++],t.cm.options)}}}function La(e,t,r){this.line=t,this.rest=kc(t),this.size=this.rest?Ye(Oe(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Xn(e,t)}function Ni(e,t,r){for(var n=[],o,l=t;l<r;l=o){var f=new La(e.doc,le(e.doc,l),l);o=l+f.size,n.push(f)}return n}var br=null;function Mc(e){br?br.ops.push(e):e.ownsGroup=br={ops:[e],delayedCallbacks:[]}}function Pc(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var o=e.ops[n];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(r<t.length)}function Nc(e,t){var r=e.ownsGroup;if(!!r)try{Pc(r)}finally{br=null,t(r)}}var Jr=null;function Tt(e,t){var r=Nt(e,t);if(!!r.length){var n=Array.prototype.slice.call(arguments,2),o;br?o=br.delayedCallbacks:Jr?o=Jr:(o=Jr=[],setTimeout(Oc,0));for(var l=function(d){o.push(function(){return r[d].apply(null,n)})},f=0;f<r.length;++f)l(f)}}function Oc(){var e=Jr;Jr=null;for(var t=0;t<e.length;++t)e[t]()}function Fa(e,t,r,n){for(var o=0;o<t.changes.length;o++){var l=t.changes[o];l=="text"?Ic(e,t):l=="gutter"?Pa(e,t,r,n):l=="class"?Fo(e,t):l=="widget"&&Wc(e,t,n)}t.changes=null}function Vr(e){return e.node==e.text&&(e.node=K("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),C&&E<8&&(e.node.style.zIndex=2)),e.node}function Bc(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=Vr(t);t.background=n.insertBefore(K("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}function Ma(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):_a(e,t)}function Ic(e,t){var r=t.text.className,n=Ma(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Fo(e,t)):r&&(t.text.className=r)}function Fo(e,t){Bc(e,t),t.line.wrapClass?Vr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Pa(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Vr(t);t.gutterBackground=K("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var f=Vr(t),d=t.gutter=K("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(d.setAttribute("aria-hidden","true"),e.display.input.setUneditable(d),f.insertBefore(d,t.text),t.line.gutterClass&&(d.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!l||!l["CodeMirror-linenumbers"])&&(t.lineNumber=d.appendChild(K("div",Xr(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var p=0;p<e.display.gutterSpecs.length;++p){var g=e.display.gutterSpecs[p].className,T=l.hasOwnProperty(g)&&l[g];T&&d.appendChild(K("div",[T],"CodeMirror-gutter-elt","left: "+n.gutterLeft[g]+"px; width: "+n.gutterWidth[g]+"px"))}}}function Wc(e,t,r){t.alignable&&(t.alignable=null);for(var n=ge("CodeMirror-linewidget"),o=t.node.firstChild,l=void 0;o;o=l)l=o.nextSibling,n.test(o.className)&&t.node.removeChild(o);Na(e,t,r)}function Hc(e,t,r,n){var o=Ma(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),Fo(e,t),Pa(e,t,r,n),Na(e,t,n),t.node}function Na(e,t,r){if(Oa(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)Oa(e,t.rest[n],t,r,!1)}function Oa(e,t,r,n,o){if(!!t.widgets)for(var l=Vr(r),f=0,d=t.widgets;f<d.length;++f){var p=d[f],g=K("div",[p.node],"CodeMirror-linewidget"+(p.className?" "+p.className:""));p.handleMouseEvents||g.setAttribute("cm-ignore-events","true"),qc(p,g,r,n),e.display.input.setUneditable(g),o&&p.above?l.insertBefore(g,r.gutter||r.text):l.appendChild(g),Tt(p,"redraw")}}function qc(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var o=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(o-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Qr(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ie(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),G(t.display.measure,K("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function Wn(e,t){for(var r=nn(t);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Oi(e){return e.lineSpace.offsetTop}function Mo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ba(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=G(e.measure,K("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(e.cachedPaddingH=n),n}function _n(e){return de-e.display.nativeBarWidth}function ir(e){return e.display.scroller.clientWidth-_n(e)-e.display.barWidth}function Po(e){return e.display.scroller.clientHeight-_n(e)-e.display.barHeight}function zc(e,t,r){var n=e.options.lineWrapping,o=n&&ir(e);if(!t.measure.heights||n&&t.measure.width!=o){var l=t.measure.heights=[];if(n){t.measure.width=o;for(var f=t.text.firstChild.getClientRects(),d=0;d<f.length-1;d++){var p=f[d],g=f[d+1];Math.abs(p.bottom-g.bottom)>2&&l.push((p.bottom+g.top)/2-r.top)}}l.push(r.bottom-r.top)}}function Ia(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var o=0;o<e.rest.length;o++)if(Ye(e.rest[o])>r)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}function jc(e,t){t=An(t);var r=Ye(t),n=e.display.externalMeasured=new La(e.doc,t,r);n.lineN=r;var o=n.built=_a(e,n);return n.text=o.pre,G(e.display.lineMeasure,o.pre),n}function Wa(e,t,r,n){return Rn(e,wr(e,t),r,n)}function No(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ar(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function wr(e,t){var r=Ye(t),n=No(e,r);n&&!n.text?n=null:n&&n.changes&&(Fa(e,n,r,Ho(e)),e.curOp.forceUpdate=!0),n||(n=jc(e,t));var o=Ia(n,t,r);return{line:t,view:n,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Rn(e,t,r,n,o){t.before&&(r=-1);var l=r+(n||""),f;return t.cache.hasOwnProperty(l)?f=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(zc(e,t.view,t.rect),t.hasHeights=!0),f=$c(e,t,r,n),f.bogus||(t.cache[l]=f)),{left:f.left,right:f.right,top:o?f.rtop:f.top,bottom:o?f.rbottom:f.bottom}}var Ha={left:0,right:0,top:0,bottom:0};function qa(e,t,r){for(var n,o,l,f,d,p,g=0;g<e.length;g+=3)if(d=e[g],p=e[g+1],t<d?(o=0,l=1,f="left"):t<p?(o=t-d,l=o+1):(g==e.length-3||t==p&&e[g+3]>t)&&(l=p-d,o=l-1,t>=p&&(f="right")),o!=null){if(n=e[g+2],d==p&&r==(n.insertLeft?"left":"right")&&(f=r),r=="left"&&o==0)for(;g&&e[g-2]==e[g-3]&&e[g-1].insertLeft;)n=e[(g-=3)+2],f="left";if(r=="right"&&o==p-d)for(;g<e.length-3&&e[g+3]==e[g+4]&&!e[g+5].insertLeft;)n=e[(g+=3)+2],f="right";break}return{node:n,start:o,end:l,collapse:f,coverStart:d,coverEnd:p}}function Uc(e,t){var r=Ha;if(t=="left")for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var o=e.length-1;o>=0&&(r=e[o]).left==r.right;o--);return r}function $c(e,t,r,n){var o=qa(t.map,r,n),l=o.node,f=o.start,d=o.end,p=o.collapse,g;if(l.nodeType==3){for(var T=0;T<4;T++){for(;f&&pn(t.line.text.charAt(o.coverStart+f));)--f;for(;o.coverStart+d<o.coverEnd&&pn(t.line.text.charAt(o.coverStart+d));)++d;if(C&&E<9&&f==0&&d==o.coverEnd-o.coverStart?g=l.parentNode.getBoundingClientRect():g=Uc(ie(l,f,d).getClientRects(),n),g.left||g.right||f==0)break;d=f,f=f-1,p="right"}C&&E<11&&(g=Gc(e.display.measure,g))}else{f>0&&(p=n="right");var A;e.options.lineWrapping&&(A=l.getClientRects()).length>1?g=A[n=="right"?A.length-1:0]:g=l.getBoundingClientRect()}if(C&&E<9&&!f&&(!g||!g.left&&!g.right)){var z=l.parentNode.getClientRects()[0];z?g={left:z.left,right:z.left+Cr(e.display),top:z.top,bottom:z.bottom}:g=Ha}for(var W=g.top-t.rect.top,$=g.bottom-t.rect.top,J=(W+$)/2,se=t.view.measure.heights,ue=0;ue<se.length-1&&!(J<se[ue]);ue++);var pe=ue?se[ue-1]:0,ce=se[ue],we={left:(p=="right"?g.right:g.left)-t.rect.left,right:(p=="left"?g.left:g.right)-t.rect.left,top:pe,bottom:ce};return!g.left&&!g.right&&(we.bogus=!0),e.options.singleCursorHeightPerLine||(we.rtop=W,we.rbottom=$),we}function Gc(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!te(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function za(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ja(e){e.display.externalMeasure=null,$e(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)za(e.display.view[t])}function ei(e){ja(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ua(){return O&&I?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $a(){return O&&I?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Oo(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=Qr(e.widgets[r]));return t}function Bi(e,t,r,n,o){if(!o){var l=Oo(t);r.top+=l,r.bottom+=l}if(n=="line")return r;n||(n="local");var f=In(t);if(n=="local"?f+=Oi(e.display):f-=e.display.viewOffset,n=="page"||n=="window"){var d=e.display.lineSpace.getBoundingClientRect();f+=d.top+(n=="window"?0:$a());var p=d.left+(n=="window"?0:Ua());r.left+=p,r.right+=p}return r.top+=f,r.bottom+=f,r}function Ga(e,t,r){if(r=="div")return t;var n=t.left,o=t.top;if(r=="page")n-=Ua(),o-=$a();else if(r=="local"||!r){var l=e.display.sizer.getBoundingClientRect();n+=l.left,o+=l.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:n-f.left,top:o-f.top}}function Ii(e,t,r,n,o){return n||(n=le(e.doc,t.line)),Bi(e,n,Wa(e,n,t.ch,o),r)}function bn(e,t,r,n,o,l){n=n||le(e.doc,t.line),o||(o=wr(e,n));function f($,J){var se=Rn(e,o,$,J?"right":"left",l);return J?se.left=se.right:se.right=se.left,Bi(e,n,se,r)}var d=Rt(n,e.doc.direction),p=t.ch,g=t.sticky;if(p>=n.text.length?(p=n.text.length,g="before"):p<=0&&(p=0,g="after"),!d)return f(g=="before"?p-1:p,g=="before");function T($,J,se){var ue=d[J],pe=ue.level==1;return f(se?$-1:$,pe!=se)}var A=rt(d,p,g),z=Pt,W=T(p,A,g=="before");return z!=null&&(W.other=T(p,z,g!="before")),W}function Ka(e,t){var r=0;t=me(e.doc,t),e.options.lineWrapping||(r=Cr(e.display)*t.ch);var n=le(e.doc,t.line),o=In(n)+Oi(e.display);return{left:r,right:r,top:o,bottom:o+n.height}}function Bo(e,t,r,n,o){var l=ne(e,t,r);return l.xRel=o,n&&(l.outside=n),l}function Io(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return Bo(n.first,0,null,-1,-1);var o=En(n,r),l=n.first+n.size-1;if(o>l)return Bo(n.first+n.size-1,le(n,l).text.length,null,1,1);t<0&&(t=0);for(var f=le(n,o);;){var d=Kc(e,f,o,t,r),p=Dc(f,d.ch+(d.xRel>0||d.outside>0?1:0));if(!p)return d;var g=p.find(1);if(g.line==o)return g;f=le(n,o=g.line)}}function Xa(e,t,r,n){n-=Oo(t);var o=t.text.length,l=Gt(function(f){return Rn(e,r,f-1).bottom<=n},o,0);return o=Gt(function(f){return Rn(e,r,f).top>n},l,o),{begin:l,end:o}}function Ya(e,t,r,n){r||(r=wr(e,t));var o=Bi(e,t,Rn(e,r,n),"line").top;return Xa(e,t,r,o)}function Wo(e,t,r,n){return e.bottom<=r?!1:e.top>r?!0:(n?e.left:e.right)>t}function Kc(e,t,r,n,o){o-=In(t);var l=wr(e,t),f=Oo(t),d=0,p=t.text.length,g=!0,T=Rt(t,e.doc.direction);if(T){var A=(e.options.lineWrapping?Yc:Xc)(e,t,r,l,T,n,o);g=A.level!=1,d=g?A.from:A.to-1,p=g?A.to:A.from-1}var z=null,W=null,$=Gt(function(_e){var Te=Rn(e,l,_e);return Te.top+=f,Te.bottom+=f,Wo(Te,n,o,!1)?(Te.top<=o&&Te.left<=n&&(z=_e,W=Te),!0):!1},d,p),J,se,ue=!1;if(W){var pe=n-W.left<W.right-n,ce=pe==g;$=z+(ce?0:1),se=ce?"after":"before",J=pe?W.left:W.right}else{!g&&($==p||$==d)&&$++,se=$==0?"after":$==t.text.length?"before":Rn(e,l,$-(g?1:0)).bottom+f<=o==g?"after":"before";var we=bn(e,ne(r,$,se),"line",t,l);J=we.left,ue=o<we.top?-1:o>=we.bottom?1:0}return $=Sn(t.text,$,1),Bo(r,$,se,ue,n-J)}function Xc(e,t,r,n,o,l,f){var d=Gt(function(A){var z=o[A],W=z.level!=1;return Wo(bn(e,ne(r,W?z.to:z.from,W?"before":"after"),"line",t,n),l,f,!0)},0,o.length-1),p=o[d];if(d>0){var g=p.level!=1,T=bn(e,ne(r,g?p.from:p.to,g?"after":"before"),"line",t,n);Wo(T,l,f,!0)&&T.top>f&&(p=o[d-1])}return p}function Yc(e,t,r,n,o,l,f){var d=Xa(e,t,n,f),p=d.begin,g=d.end;/\s/.test(t.text.charAt(g-1))&&g--;for(var T=null,A=null,z=0;z<o.length;z++){var W=o[z];if(!(W.from>=g||W.to<=p)){var $=W.level!=1,J=Rn(e,n,$?Math.min(g,W.to)-1:Math.max(p,W.from)).right,se=J<l?l-J+1e9:J-l;(!T||A>se)&&(T=W,A=se)}}return T||(T=o[o.length-1]),T.from<p&&(T={from:p,to:T.to,level:T.level}),T.to>g&&(T={from:T.from,to:g,level:T.level}),T}var or;function Dr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(or==null){or=K("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)or.appendChild(document.createTextNode("x")),or.appendChild(K("br"));or.appendChild(document.createTextNode("x"))}G(e.measure,or);var r=or.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),$e(e.measure),r||1}function Cr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=K("span","xxxxxxxxxx"),r=K("pre",[t],"CodeMirror-line-like");G(e.measure,r);var n=t.getBoundingClientRect(),o=(n.right-n.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function Ho(e){for(var t=e.display,r={},n={},o=t.gutters.clientLeft,l=t.gutters.firstChild,f=0;l;l=l.nextSibling,++f){var d=e.display.gutterSpecs[f].className;r[d]=l.offsetLeft+l.clientLeft+o,n[d]=l.clientWidth}return{fixedPos:qo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function qo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Za(e){var t=Dr(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Cr(e.display)-3);return function(o){if(Xn(e.doc,o))return 0;var l=0;if(o.widgets)for(var f=0;f<o.widgets.length;f++)o.widgets[f].height&&(l+=o.widgets[f].height);return r?l+(Math.ceil(o.text.length/n)||1)*t:l+t}}function zo(e){var t=e.doc,r=Za(e);t.iter(function(n){var o=r(n);o!=n.height&&Bt(n,o)})}function sr(e,t,r,n){var o=e.display;if(!r&&nn(t).getAttribute("cm-not-content")=="true")return null;var l,f,d=o.lineSpace.getBoundingClientRect();try{l=t.clientX-d.left,f=t.clientY-d.top}catch{return null}var p=Io(e,l,f),g;if(n&&p.xRel>0&&(g=le(e.doc,p.line).text).length==p.ch){var T=We(g,g.length,e.options.tabSize)-g.length;p=ne(p.line,Math.max(0,Math.round((l-Ba(e.display).left)/Cr(e.display))-T))}return p}function ar(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function Zt(e,t,r,n){t==null&&(t=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),n||(n=0);var o=e.display;if(n&&r<o.viewTo&&(o.updateLineNumbers==null||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)Bn&&_o(e.doc,t)<o.viewTo&&Zn(e);else if(r<=o.viewFrom)Bn&&xa(e.doc,r+n)>o.viewFrom?Zn(e):(o.viewFrom+=n,o.viewTo+=n);else if(t<=o.viewFrom&&r>=o.viewTo)Zn(e);else if(t<=o.viewFrom){var l=Wi(e,r,r+n,1);l?(o.view=o.view.slice(l.index),o.viewFrom=l.lineN,o.viewTo+=n):Zn(e)}else if(r>=o.viewTo){var f=Wi(e,t,t,-1);f?(o.view=o.view.slice(0,f.index),o.viewTo=f.lineN):Zn(e)}else{var d=Wi(e,t,t,-1),p=Wi(e,r,r+n,1);d&&p?(o.view=o.view.slice(0,d.index).concat(Ni(e,d.lineN,p.lineN)).concat(o.view.slice(p.index)),o.viewTo+=n):Zn(e)}var g=o.externalMeasured;g&&(r<g.lineN?g.lineN+=n:t<g.lineN+g.size&&(o.externalMeasured=null))}function Yn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var l=n.view[ar(e,t)];if(l.node!=null){var f=l.changes||(l.changes=[]);ve(f,r)==-1&&f.push(r)}}}function Zn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Wi(e,t,r,n){var o=ar(e,t),l,f=e.display.view;if(!Bn||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var d=e.display.viewFrom,p=0;p<o;p++)d+=f[p].size;if(d!=t){if(n>0){if(o==f.length-1)return null;l=d+f[o].size-t,o++}else l=d-t;t+=l,r+=l}for(;_o(e.doc,r)!=r;){if(o==(n<0?0:f.length-1))return null;r+=n*f[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function Zc(e,t,r){var n=e.display,o=n.view;o.length==0||t>=n.viewTo||r<=n.viewFrom?(n.view=Ni(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=Ni(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(ar(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(Ni(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,ar(e,r)))),n.viewTo=r}function Ja(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var o=t[n];!o.hidden&&(!o.node||o.changes)&&++r}return r}function ti(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Va(e,t){t===void 0&&(t=!0);for(var r=e.doc,n={},o=n.cursors=document.createDocumentFragment(),l=n.selection=document.createDocumentFragment(),f=0;f<r.sel.ranges.length;f++)if(!(!t&&f==r.sel.primIndex)){var d=r.sel.ranges[f];if(!(d.from().line>=e.display.viewTo||d.to().line<e.display.viewFrom)){var p=d.empty();(p||e.options.showCursorWhenSelecting)&&Qa(e,d.head,o),p||Jc(e,d,l)}}return n}function Qa(e,t,r){var n=bn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(K("div","\xA0","CodeMirror-cursor"));if(o.style.left=n.left+"px",o.style.top=n.top+"px",o.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var l=Ii(e,t,"div",null,null);l.right-l.left>0&&(o.style.width=l.right-l.left+"px")}if(n.other){var f=r.appendChild(K("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=n.other.left+"px",f.style.top=n.other.top+"px",f.style.height=(n.other.bottom-n.other.top)*.85+"px"}}function Hi(e,t){return e.top-t.top||e.left-t.left}function Jc(e,t,r){var n=e.display,o=e.doc,l=document.createDocumentFragment(),f=Ba(e.display),d=f.left,p=Math.max(n.sizerWidth,ir(e)-n.sizer.offsetLeft)-f.right,g=o.direction=="ltr";function T(ce,we,_e,Te){we<0&&(we=0),we=Math.round(we),Te=Math.round(Te),l.appendChild(K("div",null,"CodeMirror-selected","position: absolute; left: "+ce+`px;
                             top: `+we+"px; width: "+(_e==null?p-ce:_e)+`px;
                             height: `+(Te-we)+"px"))}function A(ce,we,_e){var Te=le(o,ce),Ue=Te.text.length,tt,xt;function lt(gt,Qt){return Ii(e,ne(ce,gt),"div",Te,Qt)}function sn(gt,Qt,Ft){var yt=Ya(e,Te,null,gt),vt=Qt=="ltr"==(Ft=="after")?"left":"right",ft=Ft=="after"?yt.begin:yt.end-(/\s/.test(Te.text.charAt(yt.end-1))?2:1);return lt(ft,vt)[vt]}var Vt=Rt(Te,o.direction);return Kn(Vt,we||0,_e==null?Ue:_e,function(gt,Qt,Ft,yt){var vt=Ft=="ltr",ft=lt(gt,vt?"left":"right"),en=lt(Qt-1,vt?"right":"left"),Nr=we==null&&gt==0,nr=_e==null&&Qt==Ue,Ht=yt==0,Ln=!Vt||yt==Vt.length-1;if(en.top-ft.top<=3){var At=(g?Nr:nr)&&Ht,ps=(g?nr:Nr)&&Ln,zn=At?d:(vt?ft:en).left,dr=ps?p:(vt?en:ft).right;T(zn,ft.top,dr-zn,ft.bottom)}else{var hr,Ut,Or,gs;vt?(hr=g&&Nr&&Ht?d:ft.left,Ut=g?p:sn(gt,Ft,"before"),Or=g?d:sn(Qt,Ft,"after"),gs=g&&nr&&Ln?p:en.right):(hr=g?sn(gt,Ft,"before"):d,Ut=!g&&Nr&&Ht?p:ft.right,Or=!g&&nr&&Ln?d:en.left,gs=g?sn(Qt,Ft,"after"):p),T(hr,ft.top,Ut-hr,ft.bottom),ft.bottom<en.top&&T(d,ft.bottom,null,en.top),T(Or,en.top,gs-Or,en.bottom)}(!tt||Hi(ft,tt)<0)&&(tt=ft),Hi(en,tt)<0&&(tt=en),(!xt||Hi(ft,xt)<0)&&(xt=ft),Hi(en,xt)<0&&(xt=en)}),{start:tt,end:xt}}var z=t.from(),W=t.to();if(z.line==W.line)A(z.line,z.ch,W.ch);else{var $=le(o,z.line),J=le(o,W.line),se=An($)==An(J),ue=A(z.line,z.ch,se?$.text.length+1:null).end,pe=A(W.line,se?0:null,W.ch).start;se&&(ue.top<pe.top-2?(T(ue.right,ue.top,null,ue.bottom),T(d,pe.top,pe.left,pe.bottom)):T(ue.right,ue.top,pe.left-ue.right,ue.bottom)),ue.bottom<pe.top&&T(d,ue.bottom,null,pe.top)}r.appendChild(l)}function jo(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||kr(e),t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function el(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||$o(e))}function Uo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&kr(e))},100)}function $o(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Re(e,"focus",e,t),e.state.focused=!0,Le(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),N&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),jo(e))}function kr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Re(e,"blur",e,t),e.state.focused=!1,Se(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function qi(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=Math.max(0,t.scroller.getBoundingClientRect().top),o=t.lineDiv.getBoundingClientRect().top,l=0,f=0;f<t.view.length;f++){var d=t.view[f],p=e.options.lineWrapping,g=void 0,T=0;if(!d.hidden){if(o+=d.line.height,C&&E<8){var A=d.node.offsetTop+d.node.offsetHeight;g=A-r,r=A}else{var z=d.node.getBoundingClientRect();g=z.bottom-z.top,!p&&d.text.firstChild&&(T=d.text.firstChild.getBoundingClientRect().right-z.left-1)}var W=d.line.height-g;if((W>.005||W<-.005)&&(o<n&&(l-=W),Bt(d.line,g),tl(d.line),d.rest))for(var $=0;$<d.rest.length;$++)tl(d.rest[$]);if(T>e.display.sizerWidth){var J=Math.ceil(T/Cr(e.display));J>e.display.maxLineLength&&(e.display.maxLineLength=J,e.display.maxLine=d.line,e.display.maxLineChanged=!0)}}}Math.abs(l)>2&&(t.scroller.scrollTop+=l)}function tl(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function zi(e,t,r){var n=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Oi(e));var o=r&&r.bottom!=null?r.bottom:n+e.wrapper.clientHeight,l=En(t,n),f=En(t,o);if(r&&r.ensure){var d=r.ensure.from.line,p=r.ensure.to.line;d<l?(l=d,f=En(t,In(le(t,d))+e.wrapper.clientHeight)):Math.min(p,t.lastLine())>=f&&(l=En(t,In(le(t,p))-e.wrapper.clientHeight),f=p)}return{from:l,to:Math.max(f,l+1)}}function Vc(e,t){if(!it(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),o=null;if(t.top+n.top<0?o=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),o!=null&&!fe){var l=K("div","\u200B",null,`position: absolute;
                         top: `+(t.top-r.viewOffset-Oi(e.display))+`px;
                         height: `+(t.bottom-t.top+_n(e)+r.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(l),l.scrollIntoView(o),e.display.lineSpace.removeChild(l)}}}function Qc(e,t,r,n){n==null&&(n=0);var o;!e.options.lineWrapping&&t==r&&(r=t.sticky=="before"?ne(t.line,t.ch+1,"before"):t,t=t.ch?ne(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var l=0;l<5;l++){var f=!1,d=bn(e,t),p=!r||r==t?d:bn(e,r);o={left:Math.min(d.left,p.left),top:Math.min(d.top,p.top)-n,right:Math.max(d.left,p.left),bottom:Math.max(d.bottom,p.bottom)+n};var g=Go(e,o),T=e.doc.scrollTop,A=e.doc.scrollLeft;if(g.scrollTop!=null&&(ri(e,g.scrollTop),Math.abs(e.doc.scrollTop-T)>1&&(f=!0)),g.scrollLeft!=null&&(lr(e,g.scrollLeft),Math.abs(e.doc.scrollLeft-A)>1&&(f=!0)),!f)break}return o}function ef(e,t){var r=Go(e,t);r.scrollTop!=null&&ri(e,r.scrollTop),r.scrollLeft!=null&&lr(e,r.scrollLeft)}function Go(e,t){var r=e.display,n=Dr(e.display);t.top<0&&(t.top=0);var o=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:r.scroller.scrollTop,l=Po(e),f={};t.bottom-t.top>l&&(t.bottom=t.top+l);var d=e.doc.height+Mo(r),p=t.top<n,g=t.bottom>d-n;if(t.top<o)f.scrollTop=p?0:t.top;else if(t.bottom>o+l){var T=Math.min(t.top,(g?d:t.bottom)-l);T!=o&&(f.scrollTop=T)}var A=e.options.fixedGutter?0:r.gutters.offsetWidth,z=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:r.scroller.scrollLeft-A,W=ir(e)-r.gutters.offsetWidth,$=t.right-t.left>W;return $&&(t.right=t.left+W),t.left<10?f.scrollLeft=0:t.left<z?f.scrollLeft=Math.max(0,t.left+A-($?0:10)):t.right>W+z-3&&(f.scrollLeft=t.right+($?0:10)-W),f}function Ko(e,t){t!=null&&(ji(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Tr(e){ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function ni(e,t,r){(t!=null||r!=null)&&ji(e),t!=null&&(e.curOp.scrollLeft=t),r!=null&&(e.curOp.scrollTop=r)}function tf(e,t){ji(e),e.curOp.scrollToPos=t}function ji(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=Ka(e,t.from),n=Ka(e,t.to);nl(e,r,n,t.margin)}}function nl(e,t,r,n){var o=Go(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});ni(e,o.scrollLeft,o.scrollTop)}function ri(e,t){Math.abs(e.doc.scrollTop-t)<2||(u||Yo(e,{top:t}),rl(e,t,!0),u&&Yo(e),si(e,100))}function rl(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function lr(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n)&&(e.doc.scrollLeft=t,ll(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ii(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Mo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+_n(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var ur=function(e,t,r){this.cm=r;var n=this.vert=K("div",[K("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=K("div",[K("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=o.tabIndex=-1,e(n),e(o),xe(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),xe(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,C&&E<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ur.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var o=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var l=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+l)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(n==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},ur.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ur.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ur.prototype.zeroWidthHack=function(){var e=b&&!ae?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ne,this.disableVert=new Ne},ur.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto";function n(){var o=e.getBoundingClientRect(),l=r=="vert"?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1);l!=e?e.style.pointerEvents="none":t.set(1e3,n)}t.set(1e3,n)},ur.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var oi=function(){};oi.prototype.update=function(){return{bottom:0,right:0}},oi.prototype.setScrollLeft=function(){},oi.prototype.setScrollTop=function(){},oi.prototype.clear=function(){};function Sr(e,t){t||(t=ii(e));var r=e.display.barWidth,n=e.display.barHeight;il(e,t);for(var o=0;o<4&&r!=e.display.barWidth||n!=e.display.barHeight;o++)r!=e.display.barWidth&&e.options.lineWrapping&&qi(e),il(e,ii(e)),r=e.display.barWidth,n=e.display.barHeight}function il(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}var ol={native:ur,null:oi};function sl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Se(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ol[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),xe(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){r=="horizontal"?lr(e,t):ri(e,t)},e),e.display.scrollbars.addClass&&Le(e.display.wrapper,e.display.scrollbars.addClass)}var nf=0;function cr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nf,markArrays:null},Mc(e.curOp)}function fr(e){var t=e.curOp;t&&Nc(t,function(r){for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;rf(r)})}function rf(e){for(var t=e.ops,r=0;r<t.length;r++)of(t[r]);for(var n=0;n<t.length;n++)sf(t[n]);for(var o=0;o<t.length;o++)af(t[o]);for(var l=0;l<t.length;l++)lf(t[l]);for(var f=0;f<t.length;f++)uf(t[f])}function of(e){var t=e.cm,r=t.display;ff(t),e.updateMaxLine&&Lo(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Ui(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function sf(e){e.updatedDisplay=e.mustUpdate&&Xo(e.cm,e.update)}function af(e){var t=e.cm,r=t.display;e.updatedDisplay&&qi(t),e.barMeasure=ii(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Wa(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+_n(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-ir(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function lf(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&lr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==Ce();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Sr(t,e.barMeasure),e.updatedDisplay&&Jo(t,e.barMeasure),e.selectionChanged&&jo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&el(e.cm)}function uf(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&al(t,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&rl(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&lr(t,e.scrollLeft,!0,!0),e.scrollToPos){var o=Qc(t,me(n,e.scrollToPos.from),me(n,e.scrollToPos.to),e.scrollToPos.margin);Vc(t,o)}var l=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(l)for(var d=0;d<l.length;++d)l[d].lines.length||Re(l[d],"hide");if(f)for(var p=0;p<f.length;++p)f[p].lines.length&&Re(f[p],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Re(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function on(e,t){if(e.curOp)return t();cr(e);try{return t()}finally{fr(e)}}function St(e,t){return function(){if(e.curOp)return t.apply(e,arguments);cr(e);try{return t.apply(e,arguments)}finally{fr(e)}}}function jt(e){return function(){if(this.curOp)return e.apply(this,arguments);cr(this);try{return e.apply(this,arguments)}finally{fr(this)}}}function Et(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);cr(t);try{return e.apply(this,arguments)}finally{fr(t)}}}function si(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,at(cf,e))}function cf(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Yr(e,t.highlightFrontier),o=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(l){if(n.line>=e.display.viewFrom){var f=l.styles,d=l.text.length>e.options.maxHighlightLength?mt(t.mode,n.state):null,p=ha(e,l,n,!0);d&&(n.state=d),l.styles=p.styles;var g=l.styleClasses,T=p.classes;T?l.styleClasses=T:g&&(l.styleClasses=null);for(var A=!f||f.length!=l.styles.length||g!=T&&(!g||!T||g.bgClass!=T.bgClass||g.textClass!=T.textClass),z=0;!A&&z<f.length;++z)A=f[z]!=l.styles[z];A&&o.push(n.line),l.stateAfter=n.save(),n.nextLine()}else l.text.length<=e.options.maxHighlightLength&&So(e,l.text,n),l.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return si(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),o.length&&on(e,function(){for(var l=0;l<o.length;l++)Yn(e,o[l],"text")})}}var Ui=function(e,t,r){var n=e.display;this.viewport=t,this.visible=zi(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=ir(e),this.force=r,this.dims=Ho(e),this.events=[]};Ui.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},Ui.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Re.apply(null,this.events[e])};function ff(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=_n(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=_n(e)+"px",t.scrollbarsClipped=!0)}function df(e){if(e.hasFocus())return null;var t=Ce();if(!t||!Ie(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&Ie(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function hf(e){if(!(!e||!e.activeElt||e.activeElt==Ce())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Ie(document.body,e.anchorNode)&&Ie(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}function Xo(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return Zn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&Ja(e)==0)return!1;ul(e)&&(Zn(e),t.dims=Ho(e));var o=n.first+n.size,l=Math.max(t.visible.from-e.options.viewportMargin,n.first),f=Math.min(o,t.visible.to+e.options.viewportMargin);r.viewFrom<l&&l-r.viewFrom<20&&(l=Math.max(n.first,r.viewFrom)),r.viewTo>f&&r.viewTo-f<20&&(f=Math.min(o,r.viewTo)),Bn&&(l=_o(e.doc,l),f=xa(e.doc,f));var d=l!=r.viewFrom||f!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Zc(e,l,f),r.viewOffset=In(le(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var p=Ja(e);if(!d&&p==0&&!t.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var g=df(e);return p>4&&(r.lineDiv.style.display="none"),pf(e,r.updateLineNumbers,t.dims),p>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,hf(g),$e(r.cursorDiv),$e(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,d&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,si(e,400)),r.updateLineNumbers=null,!0}function al(e,t){for(var r=t.viewport,n=!0;;n=!1){if(!n||!e.options.lineWrapping||t.oldDisplayWidth==ir(e)){if(r&&r.top!=null&&(r={top:Math.min(e.doc.height+Mo(e.display)-Po(e),r.top)}),t.visible=zi(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else n&&(t.visible=zi(e.display,e.doc,r));if(!Xo(e,t))break;qi(e);var o=ii(e);ti(e),Sr(e,o),Jo(e,o),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Yo(e,t){var r=new Ui(e,t);if(Xo(e,r)){qi(e),al(e,r);var n=ii(e);ti(e),Sr(e,n),Jo(e,n),r.finish()}}function pf(e,t,r){var n=e.display,o=e.options.lineNumbers,l=n.lineDiv,f=l.firstChild;function d($){var J=$.nextSibling;return N&&b&&e.display.currentWheelTarget==$?$.style.display="none":$.parentNode.removeChild($),J}for(var p=n.view,g=n.viewFrom,T=0;T<p.length;T++){var A=p[T];if(!A.hidden)if(!A.node||A.node.parentNode!=l){var z=Hc(e,A,g,r);l.insertBefore(z,f)}else{for(;f!=A.node;)f=d(f);var W=o&&t!=null&&t<=g&&A.lineNumber;A.changes&&(ve(A.changes,"gutter")>-1&&(W=!1),Fa(e,A,g,r)),W&&($e(A.lineNumber),A.lineNumber.appendChild(document.createTextNode(Xr(e.options,g)))),f=A.node.nextSibling}g+=A.size}for(;f;)f=d(f)}function Zo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Tt(e,"gutterChanged",e)}function Jo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+_n(e)+"px"}function ll(e){var t=e.display,r=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var n=qo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,l=n+"px",f=0;f<r.length;f++)if(!r[f].hidden){e.options.fixedGutter&&(r[f].gutter&&(r[f].gutter.style.left=l),r[f].gutterBackground&&(r[f].gutterBackground.style.left=l));var d=r[f].alignable;if(d)for(var p=0;p<d.length;p++)d[p].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=n+o+"px")}}function ul(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=Xr(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var o=n.measure.appendChild(K("div",[K("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=o.firstChild.offsetWidth,f=o.offsetWidth-l;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(l,n.lineGutter.offsetWidth-f)+1,n.lineNumWidth=n.lineNumInnerWidth+f,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",Zo(e.display),!0}return!1}function Vo(e,t){for(var r=[],n=!1,o=0;o<e.length;o++){var l=e[o],f=null;if(typeof l!="string"&&(f=l.style,l=l.className),l=="CodeMirror-linenumbers")if(t)n=!0;else continue;r.push({className:l,style:f})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function cl(e){var t=e.gutters,r=e.gutterSpecs;$e(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var o=r[n],l=o.className,f=o.style,d=t.appendChild(K("div",null,"CodeMirror-gutter "+l));f&&(d.style.cssText=f),l=="CodeMirror-linenumbers"&&(e.lineGutter=d,d.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",Zo(e)}function ai(e){cl(e.display),Zt(e),ll(e)}function gf(e,t,r,n){var o=this;this.input=r,o.scrollbarFiller=K("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=K("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=_("div",null,"CodeMirror-code"),o.selectionDiv=K("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=K("div",null,"CodeMirror-cursors"),o.measure=K("div",null,"CodeMirror-measure"),o.lineMeasure=K("div",null,"CodeMirror-measure"),o.lineSpace=_("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=_("div",[o.lineSpace],"CodeMirror-lines");o.mover=K("div",[l],null,"position: relative"),o.sizer=K("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=K("div",null,null,"position: absolute; height: "+de+"px; width: 1px;"),o.gutters=K("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=K("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=K("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),C&&E<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),!N&&!(u&&F)&&(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Vo(n.gutters,n.lineNumbers),cl(o),r.init(o)}var $i=0,Hn=null;C?Hn=-.53:u?Hn=15:O?Hn=-.7:Q&&(Hn=-1/3);function fl(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:t,y:r}}function vf(e){var t=fl(e);return t.x*=Hn,t.y*=Hn,t}function dl(e,t){var r=fl(t),n=r.x,o=r.y,l=Hn;t.deltaMode===0&&(n=t.deltaX,o=t.deltaY,l=1);var f=e.display,d=f.scroller,p=d.scrollWidth>d.clientWidth,g=d.scrollHeight>d.clientHeight;if(!!(n&&p||o&&g)){if(o&&b&&N){e:for(var T=t.target,A=f.view;T!=d;T=T.parentNode)for(var z=0;z<A.length;z++)if(A[z].node==T){e.display.currentWheelTarget=T;break e}}if(n&&!u&&!j&&l!=null){o&&g&&ri(e,Math.max(0,d.scrollTop+o*l)),lr(e,Math.max(0,d.scrollLeft+n*l)),(!o||o&&g)&&ht(t),f.wheelStartX=null;return}if(o&&l!=null){var W=o*l,$=e.doc.scrollTop,J=$+f.wrapper.clientHeight;W<0?$=Math.max(0,$+W-50):J=Math.min(e.doc.height,J+W+50),Yo(e,{top:$,bottom:J})}$i<20&&t.deltaMode!==0&&(f.wheelStartX==null?(f.wheelStartX=d.scrollLeft,f.wheelStartY=d.scrollTop,f.wheelDX=n,f.wheelDY=o,setTimeout(function(){if(f.wheelStartX!=null){var se=d.scrollLeft-f.wheelStartX,ue=d.scrollTop-f.wheelStartY,pe=ue&&f.wheelDY&&ue/f.wheelDY||se&&f.wheelDX&&se/f.wheelDX;f.wheelStartX=f.wheelStartY=null,pe&&(Hn=(Hn*$i+pe)/($i+1),++$i)}},200)):(f.wheelDX+=n,f.wheelDY+=o))}}var dn=function(e,t){this.ranges=e,this.primIndex=t};dn.prototype.primary=function(){return this.ranges[this.primIndex]},dn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!R(r.anchor,n.anchor)||!R(r.head,n.head))return!1}return!0},dn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ve(Y(this.ranges[t].anchor),Y(this.ranges[t].head));return new dn(e,this.primIndex)},dn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},dn.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(v(t,n.from())>=0&&v(e,n.to())<=0)return r}return-1};var Ve=function(e,t){this.anchor=e,this.head=t};Ve.prototype.from=function(){return Pe(this.anchor,this.head)},Ve.prototype.to=function(){return oe(this.anchor,this.head)},Ve.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function wn(e,t,r){var n=e&&e.options.selectionsMayTouch,o=t[r];t.sort(function(z,W){return v(z.from(),W.from())}),r=ve(t,o);for(var l=1;l<t.length;l++){var f=t[l],d=t[l-1],p=v(d.to(),f.from());if(n&&!f.empty()?p>0:p>=0){var g=Pe(d.from(),f.from()),T=oe(d.to(),f.to()),A=d.empty()?f.from()==f.head:d.from()==d.head;l<=r&&--r,t.splice(--l,2,new Ve(A?T:g,A?g:T))}}return new dn(t,r)}function Jn(e,t){return new dn([new Ve(e,t||e)],0)}function Vn(e){return e.text?ne(e.from.line+e.text.length-1,Oe(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function hl(e,t){if(v(e,t.from)<0)return e;if(v(e,t.to)<=0)return Vn(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Vn(t).ch-t.to.ch),ne(r,n)}function Qo(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];r.push(new Ve(hl(o.anchor,t),hl(o.head,t)))}return wn(e.cm,r,e.sel.primIndex)}function pl(e,t,r){return e.line==t.line?ne(r.line,e.ch-t.ch+r.ch):ne(r.line+(e.line-t.line),e.ch)}function mf(e,t,r){for(var n=[],o=ne(e.first,0),l=o,f=0;f<t.length;f++){var d=t[f],p=pl(d.from,o,l),g=pl(Vn(d),o,l);if(o=d.to,l=g,r=="around"){var T=e.sel.ranges[f],A=v(T.head,T.anchor)<0;n[f]=new Ve(A?g:p,A?p:g)}else n[f]=new Ve(p,p)}return new dn(n,e.sel.primIndex)}function es(e){e.doc.mode=je(e.options,e.doc.modeOption),li(e)}function li(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,si(e,100),e.state.modeGen++,e.curOp&&Zt(e)}function gl(e,t){return t.from.ch==0&&t.to.ch==0&&Oe(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ts(e,t,r,n){function o(pe){return r?r[pe]:null}function l(pe,ce,we){Tc(pe,ce,we,n),Tt(pe,"change",pe,t)}function f(pe,ce){for(var we=[],_e=pe;_e<ce;++_e)we.push(new yr(g[_e],o(_e),n));return we}var d=t.from,p=t.to,g=t.text,T=le(e,d.line),A=le(e,p.line),z=Oe(g),W=o(g.length-1),$=p.line-d.line;if(t.full)e.insert(0,f(0,g.length)),e.remove(g.length,e.size-g.length);else if(gl(e,t)){var J=f(0,g.length-1);l(A,A.text,W),$&&e.remove(d.line,$),J.length&&e.insert(d.line,J)}else if(T==A)if(g.length==1)l(T,T.text.slice(0,d.ch)+z+T.text.slice(p.ch),W);else{var se=f(1,g.length-1);se.push(new yr(z+T.text.slice(p.ch),W,n)),l(T,T.text.slice(0,d.ch)+g[0],o(0)),e.insert(d.line+1,se)}else if(g.length==1)l(T,T.text.slice(0,d.ch)+g[0]+A.text.slice(p.ch),o(0)),e.remove(d.line+1,$);else{l(T,T.text.slice(0,d.ch)+g[0],o(0)),l(A,z+A.text.slice(p.ch),W);var ue=f(1,g.length-1);$>1&&e.remove(d.line+1,$-1),e.insert(d.line+1,ue)}Tt(e,"change",e,t)}function Qn(e,t,r){function n(o,l,f){if(o.linked)for(var d=0;d<o.linked.length;++d){var p=o.linked[d];if(p.doc!=l){var g=f&&p.sharedHist;r&&!g||(t(p.doc,g),n(p.doc,o,g))}}}n(e,null,!0)}function vl(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,zo(e),es(e),ml(e),e.options.direction=t.direction,e.options.lineWrapping||Lo(e),e.options.mode=t.modeOption,Zt(e)}function ml(e){(e.doc.direction=="rtl"?Le:Se)(e.display.lineDiv,"CodeMirror-rtl")}function yf(e){on(e,function(){ml(e),Zt(e)})}function Gi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ns(e,t){var r={from:Y(t.from),to:Vn(t),text:cn(e,t.from,t.to)};return wl(e,r,t.from.line,t.to.line+1),Qn(e,function(n){return wl(n,r,t.from.line,t.to.line+1)},!0),r}function yl(e){for(;e.length;){var t=Oe(e);if(t.ranges)e.pop();else break}}function bf(e,t){if(t)return yl(e.done),Oe(e.done);if(e.done.length&&!Oe(e.done).ranges)return Oe(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Oe(e.done)}function bl(e,t,r,n){var o=e.history;o.undone.length=0;var l=+new Date,f,d;if((o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&o.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(f=bf(o,o.lastOp==n)))d=Oe(f.changes),v(t.from,t.to)==0&&v(t.from,d.to)==0?d.to=Vn(t):f.changes.push(ns(e,t));else{var p=Oe(o.done);for((!p||!p.ranges)&&Ki(e.sel,o.done),f={changes:[ns(e,t)],generation:o.generation},o.done.push(f);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(r),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=l,o.lastOp=o.lastSelOp=n,o.lastOrigin=o.lastSelOrigin=t.origin,d||Re(e,"historyAdded")}function wf(e,t,r,n){var o=t.charAt(0);return o=="*"||o=="+"&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Df(e,t,r,n){var o=e.history,l=n&&n.origin;r==o.lastSelOp||l&&o.lastSelOrigin==l&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==l||wf(e,l,Oe(o.done),t))?o.done[o.done.length-1]=t:Ki(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=l,o.lastSelOp=r,n&&n.clearRedo!==!1&&yl(o.undone)}function Ki(e,t){var r=Oe(t);r&&r.ranges&&r.equals(e)||t.push(e)}function wl(e,t,r,n){var o=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(f){f.markedSpans&&((o||(o=t["spans_"+e.id]={}))[l]=f.markedSpans),++l})}function Cf(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function kf(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],o=0;o<t.text.length;++o)n.push(Cf(r[o]));return n}function Dl(e,t){var r=kf(e,t),n=xo(e,t);if(!r)return n;if(!n)return r;for(var o=0;o<r.length;++o){var l=r[o],f=n[o];if(l&&f){e:for(var d=0;d<f.length;++d){for(var p=f[d],g=0;g<l.length;++g)if(l[g].marker==p.marker)continue e;l.push(p)}}else f&&(r[o]=f)}return r}function Er(e,t,r){for(var n=[],o=0;o<e.length;++o){var l=e[o];if(l.ranges){n.push(r?dn.prototype.deepCopy.call(l):l);continue}var f=l.changes,d=[];n.push({changes:d});for(var p=0;p<f.length;++p){var g=f[p],T=void 0;if(d.push({from:g.from,to:g.to,text:g.text}),t)for(var A in g)(T=A.match(/^spans_(\d+)$/))&&ve(t,Number(T[1]))>-1&&(Oe(d)[A]=g[A],delete g[A])}}return n}function rs(e,t,r,n){if(n){var o=e.anchor;if(r){var l=v(t,o)<0;l!=v(r,o)<0?(o=t,t=r):l!=v(t,r)<0&&(t=r)}return new Ve(o,t)}else return new Ve(r||t,t)}function Xi(e,t,r,n,o){o==null&&(o=e.cm&&(e.cm.display.shift||e.extend)),Wt(e,new dn([rs(e.sel.primary(),t,r,o)],0),n)}function Cl(e,t,r){for(var n=[],o=e.cm&&(e.cm.display.shift||e.extend),l=0;l<e.sel.ranges.length;l++)n[l]=rs(e.sel.ranges[l],t[l],null,o);var f=wn(e.cm,n,e.sel.primIndex);Wt(e,f,r)}function is(e,t,r,n){var o=e.sel.ranges.slice(0);o[t]=r,Wt(e,wn(e.cm,o,e.sel.primIndex),n)}function kl(e,t,r,n){Wt(e,Jn(t,r),n)}function Tf(e,t,r){var n={ranges:t.ranges,update:function(o){this.ranges=[];for(var l=0;l<o.length;l++)this.ranges[l]=new Ve(me(e,o[l].anchor),me(e,o[l].head))},origin:r&&r.origin};return Re(e,"beforeSelectionChange",e,n),e.cm&&Re(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?wn(e.cm,n.ranges,n.ranges.length-1):t}function Tl(e,t,r){var n=e.history.done,o=Oe(n);o&&o.ranges?(n[n.length-1]=t,Yi(e,t,r)):Wt(e,t,r)}function Wt(e,t,r){Yi(e,t,r),Df(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Yi(e,t,r){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=Tf(e,t,r));var n=r&&r.bias||(v(t.primary().head,e.sel.primary().head)<0?-1:1);Sl(e,xl(e,t,n,!0)),!(r&&r.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Tr(e.cm)}function Sl(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Kt(e.cm)),Tt(e,"cursorActivity",e))}function El(e){Sl(e,xl(e,e.sel,null,!1))}function xl(e,t,r,n){for(var o,l=0;l<t.ranges.length;l++){var f=t.ranges[l],d=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[l],p=Zi(e,f.anchor,d&&d.anchor,r,n),g=Zi(e,f.head,d&&d.head,r,n);(o||p!=f.anchor||g!=f.head)&&(o||(o=t.ranges.slice(0,l)),o[l]=new Ve(p,g))}return o?wn(e.cm,o,t.primIndex):t}function xr(e,t,r,n,o){var l=le(e,t.line);if(l.markedSpans)for(var f=0;f<l.markedSpans.length;++f){var d=l.markedSpans[f],p=d.marker,g="selectLeft"in p?!p.selectLeft:p.inclusiveLeft,T="selectRight"in p?!p.selectRight:p.inclusiveRight;if((d.from==null||(g?d.from<=t.ch:d.from<t.ch))&&(d.to==null||(T?d.to>=t.ch:d.to>t.ch))){if(o&&(Re(p,"beforeCursorEnter"),p.explicitlyCleared))if(l.markedSpans){--f;continue}else break;if(!p.atomic)continue;if(r){var A=p.find(n<0?1:-1),z=void 0;if((n<0?T:g)&&(A=Al(e,A,-n,A&&A.line==t.line?l:null)),A&&A.line==t.line&&(z=v(A,r))&&(n<0?z<0:z>0))return xr(e,A,t,n,o)}var W=p.find(n<0?-1:1);return(n<0?g:T)&&(W=Al(e,W,n,W.line==t.line?l:null)),W?xr(e,W,t,n,o):null}}return t}function Zi(e,t,r,n,o){var l=n||1,f=xr(e,t,r,l,o)||!o&&xr(e,t,r,l,!0)||xr(e,t,r,-l,o)||!o&&xr(e,t,r,-l,!0);return f||(e.cantEdit=!0,ne(e.first,0))}function Al(e,t,r,n){return r<0&&t.ch==0?t.line>e.first?me(e,ne(t.line-1)):null:r>0&&t.ch==(n||le(e,t.line)).text.length?t.line<e.first+e.size-1?ne(t.line+1,0):null:new ne(t.line,t.ch+r)}function _l(e){e.setSelection(ne(e.firstLine(),0),ne(e.lastLine()),He)}function Rl(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(o,l,f,d){o&&(n.from=me(e,o)),l&&(n.to=me(e,l)),f&&(n.text=f),d!==void 0&&(n.origin=d)}),Re(e,"beforeChange",e,n),e.cm&&Re(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ar(e,t,r){if(e.cm){if(!e.cm.curOp)return St(e.cm,Ar)(e,t,r);if(e.cm.state.suppressEdits)return}if(!((ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))&&(t=Rl(e,t,!0),!t))){var n=wa&&!r&&wc(e,t.from,t.to);if(n)for(var o=n.length-1;o>=0;--o)Ll(e,{from:n[o].from,to:n[o].to,text:o?[""]:t.text,origin:t.origin});else Ll(e,t)}}function Ll(e,t){if(!(t.text.length==1&&t.text[0]==""&&v(t.from,t.to)==0)){var r=Qo(e,t);bl(e,t,r,e.cm?e.cm.curOp.id:NaN),ui(e,t,r,xo(e,t));var n=[];Qn(e,function(o,l){!l&&ve(n,o.history)==-1&&(Nl(o.history,t),n.push(o.history)),ui(o,t,null,xo(o,t))})}}function Ji(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!(n&&!r)){for(var o=e.history,l,f=e.sel,d=t=="undo"?o.done:o.undone,p=t=="undo"?o.undone:o.done,g=0;g<d.length&&(l=d[g],!(r?l.ranges&&!l.equals(e.sel):!l.ranges));g++);if(g!=d.length){for(o.lastOrigin=o.lastSelOrigin=null;;)if(l=d.pop(),l.ranges){if(Ki(l,p),r&&!l.equals(e.sel)){Wt(e,l,{clearRedo:!1});return}f=l}else if(n){d.push(l);return}else break;var T=[];Ki(f,p),p.push({changes:T,generation:o.generation}),o.generation=l.generation||++o.maxGeneration;for(var A=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),z=function(J){var se=l.changes[J];if(se.origin=t,A&&!Rl(e,se,!1))return d.length=0,{};T.push(ns(e,se));var ue=J?Qo(e,se):Oe(d);ui(e,se,ue,Dl(e,se)),!J&&e.cm&&e.cm.scrollIntoView({from:se.from,to:Vn(se)});var pe=[];Qn(e,function(ce,we){!we&&ve(pe,ce.history)==-1&&(Nl(ce.history,se),pe.push(ce.history)),ui(ce,se,null,Dl(ce,se))})},W=l.changes.length-1;W>=0;--W){var $=z(W);if($)return $.v}}}}function Fl(e,t){if(t!=0&&(e.first+=t,e.sel=new dn(kt(e.sel.ranges,function(o){return new Ve(ne(o.anchor.line+t,o.anchor.ch),ne(o.head.line+t,o.head.ch))}),e.sel.primIndex),e.cm)){Zt(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Yn(e.cm,n,"gutter")}}function ui(e,t,r,n){if(e.cm&&!e.cm.curOp)return St(e.cm,ui)(e,t,r,n);if(t.to.line<e.first){Fl(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Fl(e,o),t={from:ne(e.first,0),to:ne(t.to.line+o,t.to.ch),text:[Oe(t.text)],origin:t.origin}}var l=e.lastLine();t.to.line>l&&(t={from:t.from,to:ne(l,le(e,l).text.length),text:[t.text[0]],origin:t.origin}),t.removed=cn(e,t.from,t.to),r||(r=Qo(e,t)),e.cm?Sf(e.cm,t,n):ts(e,t,n),Yi(e,r,He),e.cantEdit&&Zi(e,ne(e.firstLine(),0))&&(e.cantEdit=!1)}}function Sf(e,t,r){var n=e.doc,o=e.display,l=t.from,f=t.to,d=!1,p=l.line;e.options.lineWrapping||(p=Ye(An(le(n,l.line))),n.iter(p,f.line+1,function(W){if(W==o.maxLine)return d=!0,!0})),n.sel.contains(t.from,t.to)>-1&&Kt(e),ts(n,t,r,Za(e)),e.options.lineWrapping||(n.iter(p,l.line+t.text.length,function(W){var $=Pi(W);$>o.maxLineLength&&(o.maxLine=W,o.maxLineLength=$,o.maxLineChanged=!0,d=!1)}),d&&(e.curOp.updateMaxLine=!0)),hc(n,l.line),si(e,400);var g=t.text.length-(f.line-l.line)-1;t.full?Zt(e):l.line==f.line&&t.text.length==1&&!gl(e.doc,t)?Yn(e,l.line,"text"):Zt(e,l.line,f.line+1,g);var T=ot(e,"changes"),A=ot(e,"change");if(A||T){var z={from:l,to:f,text:t.text,removed:t.removed,origin:t.origin};A&&Tt(e,"change",e,z),T&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(z)}e.display.selForContextMenu=null}function _r(e,t,r,n,o){var l;n||(n=r),v(n,r)<0&&(l=[n,r],r=l[0],n=l[1]),typeof t=="string"&&(t=e.splitLines(t)),Ar(e,{from:r,to:n,text:t,origin:o})}function Ml(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Pl(e,t,r,n){for(var o=0;o<e.length;++o){var l=e[o],f=!0;if(l.ranges){l.copied||(l=e[o]=l.deepCopy(),l.copied=!0);for(var d=0;d<l.ranges.length;d++)Ml(l.ranges[d].anchor,t,r,n),Ml(l.ranges[d].head,t,r,n);continue}for(var p=0;p<l.changes.length;++p){var g=l.changes[p];if(r<g.from.line)g.from=ne(g.from.line+n,g.from.ch),g.to=ne(g.to.line+n,g.to.ch);else if(t<=g.to.line){f=!1;break}}f||(e.splice(0,o+1),o=0)}}function Nl(e,t){var r=t.from.line,n=t.to.line,o=t.text.length-(n-r)-1;Pl(e.done,r,n,o),Pl(e.undone,r,n,o)}function ci(e,t,r,n){var o=t,l=t;return typeof t=="number"?l=le(e,Xe(e,t)):o=Ye(t),o==null?null:(n(l,o)&&e.cm&&Yn(e.cm,o,r),l)}function fi(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}fi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var o=this.lines[r];this.height-=o.height,Sc(o),Tt(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}};function di(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}di.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],o=n.chunkSize();if(e<o){var l=Math.min(t,o-e),f=n.height;if(n.removeInner(e,l),this.height-=f-n.height,o==l&&(this.children.splice(r--,1),n.parent=null),(t-=l)==0)break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof fi))){var d=[];this.collapse(d),this.children=[new fi(d)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var o=this.children[n],l=o.chunkSize();if(e<=l){if(o.insertInner(e,t,r),o.lines&&o.lines.length>50){for(var f=o.lines.length%25+25,d=f;d<o.lines.length;){var p=new fi(o.lines.slice(d,d+=25));o.height-=p.height,this.children.splice(++n,0,p),p.parent=this}o.lines=o.lines.slice(0,f),this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new di(t);if(e.parent){e.size-=r.size,e.height-=r.height;var o=ve(e.parent.children,e);e.parent.children.splice(o+1,0,r)}else{var n=new di(e.children);n.parent=e,e.children=[n,r],e=n}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var o=this.children[n],l=o.chunkSize();if(e<l){var f=Math.min(t,l-e);if(o.iterN(e,f,r))return!0;if((t-=f)==0)break;e=0}else e-=l}}};var hi=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};hi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=Ye(r);if(!(n==null||!t)){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(r.widgets=null);var l=Qr(this);Bt(r,Math.max(0,r.height-l)),e&&(on(e,function(){Ol(e,r,-l),Yn(e,n,"widget")}),Tt(e,"lineWidgetCleared",e,this,n))}},hi.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var o=Qr(this)-t;!o||(Xn(this.doc,n)||Bt(n,n.height+o),r&&on(r,function(){r.curOp.forceUpdate=!0,Ol(r,n,o),Tt(r,"lineWidgetChanged",r,e,Ye(n))}))},Ot(hi);function Ol(e,t,r){In(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ko(e,r)}function Ef(e,t,r,n){var o=new hi(e,r,n),l=e.cm;return l&&o.noHScroll&&(l.display.alignWidgets=!0),ci(e,t,"widget",function(f){var d=f.widgets||(f.widgets=[]);if(o.insertAt==null?d.push(o):d.splice(Math.min(d.length,Math.max(0,o.insertAt)),0,o),o.line=f,l&&!Xn(e,f)){var p=In(f)<e.scrollTop;Bt(f,f.height+Qr(o)),p&&Ko(l,o.height),l.curOp.forceUpdate=!0}return!0}),l&&Tt(l,"lineWidgetAdded",l,o,typeof t=="number"?t:Ye(t)),o}var Bl=0,er=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Bl};er.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&cr(e),ot(this,"clear")){var r=this.find();r&&Tt(this,"clear",r.from,r.to)}for(var n=null,o=null,l=0;l<this.lines.length;++l){var f=this.lines[l],d=Zr(f.markedSpans,this);e&&!this.collapsed?Yn(e,Ye(f),"text"):e&&(d.to!=null&&(o=Ye(f)),d.from!=null&&(n=Ye(f))),f.markedSpans=vc(f.markedSpans,d),d.from==null&&this.collapsed&&!Xn(this.doc,f)&&e&&Bt(f,Dr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var p=0;p<this.lines.length;++p){var g=An(this.lines[p]),T=Pi(g);T>e.display.maxLineLength&&(e.display.maxLine=g,e.display.maxLineLength=T,e.display.maxLineChanged=!0)}n!=null&&e&&this.collapsed&&Zt(e,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&El(e.doc)),e&&Tt(e,"markerCleared",e,this,n,o),t&&fr(e),this.parent&&this.parent.clear()}},er.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var r,n,o=0;o<this.lines.length;++o){var l=this.lines[o],f=Zr(l.markedSpans,this);if(f.from!=null&&(r=ne(t?l:Ye(l),f.from),e==-1))return r;if(f.to!=null&&(n=ne(t?l:Ye(l),f.to),e==1))return n}return r&&{from:r,to:n}},er.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;!t||!n||on(n,function(){var o=t.line,l=Ye(t.line),f=No(n,l);if(f&&(za(f),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Xn(r.doc,o)&&r.height!=null){var d=r.height;r.height=null;var p=Qr(r)-d;p&&Bt(o,o.height+p)}Tt(n,"markerChanged",n,e)})},er.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ve(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},er.prototype.detachLine=function(e){if(this.lines.splice(ve(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ot(er);function Rr(e,t,r,n,o){if(n&&n.shared)return xf(e,t,r,n,o);if(e.cm&&!e.cm.curOp)return St(e.cm,Rr)(e,t,r,n,o);var l=new er(e,o),f=v(t,r);if(n&&Je(n,l,!1),f>0||f==0&&l.clearWhenEmpty!==!1)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=_("span",[l.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(Ea(e,t.line,t,r,l)||t.line!=r.line&&Ea(e,r.line,t,r,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");gc()}l.addToHistory&&bl(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var d=t.line,p=e.cm,g;if(e.iter(d,r.line+1,function(A){p&&l.collapsed&&!p.options.lineWrapping&&An(A)==p.display.maxLine&&(g=!0),l.collapsed&&d!=t.line&&Bt(A,0),mc(A,new Ri(l,d==t.line?t.ch:null,d==r.line?r.ch:null),e.cm&&e.cm.curOp),++d}),l.collapsed&&e.iter(t.line,r.line+1,function(A){Xn(e,A)&&Bt(A,0)}),l.clearOnEnter&&xe(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(pc(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++Bl,l.atomic=!0),p){if(g&&(p.curOp.updateMaxLine=!0),l.collapsed)Zt(p,t.line,r.line+1);else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title)for(var T=t.line;T<=r.line;T++)Yn(p,T,"text");l.atomic&&El(p.doc),Tt(p,"markerAdded",p,l)}return l}var pi=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};pi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Tt(this,"clear")}},pi.prototype.find=function(e,t){return this.primary.find(e,t)},Ot(pi);function xf(e,t,r,n,o){n=Je(n),n.shared=!1;var l=[Rr(e,t,r,n,o)],f=l[0],d=n.widgetNode;return Qn(e,function(p){d&&(n.widgetNode=d.cloneNode(!0)),l.push(Rr(p,me(p,t),me(p,r),n,o));for(var g=0;g<p.linked.length;++g)if(p.linked[g].isParent)return;f=Oe(l)}),new pi(l,f)}function Il(e){return e.findMarks(ne(e.first,0),e.clipPos(ne(e.lastLine())),function(t){return t.parent})}function Af(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.find(),l=e.clipPos(o.from),f=e.clipPos(o.to);if(v(l,f)){var d=Rr(e,l,f,n.primary,n.primary.type);n.markers.push(d),d.parent=n}}}function _f(e){for(var t=function(n){var o=e[n],l=[o.primary.doc];Qn(o.primary.doc,function(p){return l.push(p)});for(var f=0;f<o.markers.length;f++){var d=o.markers[f];ve(l,d.doc)==-1&&(d.parent=null,o.markers.splice(f--,1))}},r=0;r<e.length;r++)t(r)}var Rf=0,Jt=function(e,t,r,n,o){if(!(this instanceof Jt))return new Jt(e,t,r,n,o);r==null&&(r=0),di.call(this,[new fi([new yr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var l=ne(r,0);this.sel=Jn(l),this.history=new Gi(null),this.id=++Rf,this.modeOption=t,this.lineSep=n,this.direction=o=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),ts(this,{from:l,to:l,text:e}),Wt(this,Jn(l),He)};Jt.prototype=dt(di.prototype,{constructor:Jt,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=yn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Et(function(e){var t=ne(this.first,0),r=this.first+this.size-1;Ar(this,{from:t,to:ne(r,le(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&ni(this.cm,0,0),Wt(this,Jn(t),He)}),replaceRange:function(e,t,r,n){t=me(this,t),r=r?me(this,r):t,_r(this,e,t,r,n)},getRange:function(e,t,r){var n=cn(this,me(this,e),me(this,t));return r===!1?n:r===""?n.join(""):n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(rr(this,e))return le(this,e)},getLineNumber:function(e){return Ye(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=le(this,e)),An(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t=this.sel.primary(),r;return e==null||e=="head"?r=t.head:e=="anchor"?r=t.anchor:e=="end"||e=="to"||e===!1?r=t.to():r=t.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Et(function(e,t,r){kl(this,me(this,typeof e=="number"?ne(e,t||0):e),null,r)}),setSelection:Et(function(e,t,r){kl(this,me(this,e),me(this,t||e),r)}),extendSelection:Et(function(e,t,r){Xi(this,me(this,e),t&&me(this,t),r)}),extendSelections:Et(function(e,t){Cl(this,fn(this,e),t)}),extendSelectionsBy:Et(function(e,t){var r=kt(this.sel.ranges,e);Cl(this,fn(this,r),t)}),setSelections:Et(function(e,t,r){if(!!e.length){for(var n=[],o=0;o<e.length;o++)n[o]=new Ve(me(this,e[o].anchor),me(this,e[o].head||e[o].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Wt(this,wn(this.cm,n,t),r)}}),addSelection:Et(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new Ve(me(this,e),me(this,t||e))),Wt(this,wn(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r,n=0;n<t.length;n++){var o=cn(this,t[n].from(),t[n].to());r=r?r.concat(o):o}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var o=cn(this,r[n].from(),r[n].to());e!==!1&&(o=o.join(e||this.lineSeparator())),t[n]=o}return t},replaceSelection:function(e,t,r){for(var n=[],o=0;o<this.sel.ranges.length;o++)n[o]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Et(function(e,t,r){for(var n=[],o=this.sel,l=0;l<o.ranges.length;l++){var f=o.ranges[l];n[l]={from:f.from(),to:f.to(),text:this.splitLines(e[l]),origin:r}}for(var d=t&&t!="end"&&mf(this,n,t),p=n.length-1;p>=0;p--)Ar(this,n[p]);d?Tl(this,d):this.cm&&Tr(this.cm)}),undo:Et(function(){Ji(this,"undo")}),redo:Et(function(){Ji(this,"redo")}),undoSelection:Et(function(){Ji(this,"undo",!0)}),redoSelection:Et(function(){Ji(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new Gi(this.history),Qn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Er(this.history.done),undone:Er(this.history.undone)}},setHistory:function(e){var t=this.history=new Gi(this.history);t.done=Er(e.done.slice(0),null,!0),t.undone=Er(e.undone.slice(0),null,!0)},setGutterMarker:Et(function(e,t,r){return ci(this,e,"gutter",function(n){var o=n.gutterMarkers||(n.gutterMarkers={});return o[t]=r,!r&&On(o)&&(n.gutterMarkers=null),!0})}),clearGutter:Et(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&ci(t,r,"gutter",function(){return r.gutterMarkers[e]=null,On(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!rr(this,e)||(t=e,e=le(this,e),!e))return null}else if(t=Ye(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Et(function(e,t,r){return ci(this,e,t=="gutter"?"gutter":"class",function(n){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!n[o])n[o]=r;else{if(ge(r).test(n[o]))return!1;n[o]+=" "+r}return!0})}),removeLineClass:Et(function(e,t,r){return ci(this,e,t=="gutter"?"gutter":"class",function(n){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",l=n[o];if(l)if(r==null)n[o]=null;else{var f=l.match(ge(r));if(!f)return!1;var d=f.index+f[0].length;n[o]=l.slice(0,f.index)+(!f.index||d==l.length?"":" ")+l.slice(d)||null}else return!1;return!0})}),addLineWidget:Et(function(e,t,r){return Ef(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Rr(this,me(this,e),me(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=me(this,e),Rr(this,e,e,r,"bookmark")},findMarksAt:function(e){e=me(this,e);var t=[],r=le(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var o=r[n];(o.from==null||o.from<=e.ch)&&(o.to==null||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,r){e=me(this,e),t=me(this,t);var n=[],o=e.line;return this.iter(e.line,t.line+1,function(l){var f=l.markedSpans;if(f)for(var d=0;d<f.length;d++){var p=f[d];!(p.to!=null&&o==e.line&&e.ch>=p.to||p.from==null&&o!=e.line||p.from!=null&&o==t.line&&p.from>=t.ch)&&(!r||r(p.marker))&&n.push(p.marker.parent||p.marker)}++o}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)r[n].from!=null&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(o){var l=o.text.length+n;if(l>e)return t=e,!0;e-=l,++r}),me(this,ne(r,t))},indexFromPos:function(e){e=me(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(n){t+=n.text.length+r}),t},copy:function(e){var t=new Jt(yn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<r&&(r=e.to);var n=new Jt(yn(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Af(n,Il(this)),n},unlinkDoc:function(e){if(e instanceof st&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),_f(Il(this));break}}if(e.history==this.history){var n=[e.id];Qn(e,function(o){return n.push(o.id)},!0),e.history=new Gi(null),e.history.done=Er(this.history.done,n),e.history.undone=Er(this.history.undone,n)}},iterLinkedDocs:function(e){Qn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):D(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Et(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&yf(this.cm))})}),Jt.prototype.eachLine=Jt.prototype.iter;var Wl=0;function Lf(e){var t=this;if(Hl(t),!(it(t,e)||Wn(t.display,e))){ht(e),C&&(Wl=+new Date);var r=sr(t,e,!0),n=e.dataTransfer.files;if(!(!r||t.isReadOnly()))if(n&&n.length&&window.FileReader&&window.File)for(var o=n.length,l=Array(o),f=0,d=function(){++f==o&&St(t,function(){r=me(t.doc,r);var W={from:r,to:r,text:t.doc.splitLines(l.filter(function($){return $!=null}).join(t.doc.lineSeparator())),origin:"paste"};Ar(t.doc,W),Tl(t.doc,Jn(me(t.doc,r),me(t.doc,Vn(W))))})()},p=function(W,$){if(t.options.allowDropFileTypes&&ve(t.options.allowDropFileTypes,W.type)==-1){d();return}var J=new FileReader;J.onerror=function(){return d()},J.onload=function(){var se=J.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(se)){d();return}l[$]=se,d()},J.readAsText(W)},g=0;g<n.length;g++)p(n[g],g);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var T=e.dataTransfer.getData("Text");if(T){var A;if(t.state.draggingText&&!t.state.draggingText.copy&&(A=t.listSelections()),Yi(t.doc,Jn(r,r)),A)for(var z=0;z<A.length;++z)_r(t.doc,"",A[z].anchor,A[z].head,"drag");t.replaceSelection(T,"around","paste"),t.display.input.focus()}}catch{}}}}function Ff(e,t){if(C&&(!e.state.draggingText||+new Date-Wl<100)){gn(t);return}if(!(it(e,t)||Wn(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Q)){var r=K("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",j&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),j&&r.parentNode.removeChild(r)}}function Mf(e,t){var r=sr(e,t);if(!!r){var n=document.createDocumentFragment();Qa(e,r,n),e.display.dragCursor||(e.display.dragCursor=K("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),G(e.display.dragCursor,n)}}function Hl(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ql(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var o=t[n].CodeMirror;o&&r.push(o)}r.length&&r[0].operation(function(){for(var l=0;l<r.length;l++)e(r[l])})}}var zl=!1;function Pf(){zl||(Nf(),zl=!0)}function Nf(){var e;xe(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,ql(Of)},100))}),xe(window,"blur",function(){return ql(kr)})}function Of(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var tr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},gi=0;gi<10;gi++)tr[gi+48]=tr[gi+96]=String(gi);for(var Vi=65;Vi<=90;Vi++)tr[Vi]=String.fromCharCode(Vi);for(var vi=1;vi<=12;vi++)tr[vi+111]=tr[vi+63235]="F"+vi;var qn={};qn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qn.default=b?qn.macDefault:qn.pcDefault;function Bf(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var r,n,o,l,f=0;f<t.length-1;f++){var d=t[f];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))n=!0;else if(/^s(hift)?$/i.test(d))o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(e="Alt-"+e),n&&(e="Ctrl-"+e),l&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function If(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(n=="..."){delete e[r];continue}for(var o=kt(r.split(" "),Bf),l=0;l<o.length;l++){var f=void 0,d=void 0;l==o.length-1?(d=o.join(" "),f=n):(d=o.slice(0,l+1).join(" "),f="...");var p=t[d];if(!p)t[d]=f;else if(p!=f)throw new Error("Inconsistent bindings for "+d)}delete e[r]}for(var g in t)e[g]=t[g];return e}function Lr(e,t,r,n){t=Qi(t);var o=t.call?t.call(e,n):t[e];if(o===!1)return"nothing";if(o==="...")return"multi";if(o!=null&&r(o))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Lr(e,t.fallthrough,r,n);for(var l=0;l<t.fallthrough.length;l++){var f=Lr(e,t.fallthrough[l],r,n);if(f)return f}}}function jl(e){var t=typeof e=="string"?e:tr[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Ul(e,t,r){var n=e;return t.altKey&&n!="Alt"&&(e="Alt-"+e),(re?t.metaKey:t.ctrlKey)&&n!="Ctrl"&&(e="Ctrl-"+e),(re?t.ctrlKey:t.metaKey)&&n!="Mod"&&(e="Cmd-"+e),!r&&t.shiftKey&&n!="Shift"&&(e="Shift-"+e),e}function $l(e,t){if(j&&e.keyCode==34&&e.char)return!1;var r=tr[e.keyCode];return r==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(r=e.code),Ul(r,e,t))}function Qi(e){return typeof e=="string"?qn[e]:e}function Fr(e,t){for(var r=e.doc.sel.ranges,n=[],o=0;o<r.length;o++){for(var l=t(r[o]);n.length&&v(l.from,Oe(n).to)<=0;){var f=n.pop();if(v(f.from,l.from)<0){l.from=f.from;break}}n.push(l)}on(e,function(){for(var d=n.length-1;d>=0;d--)_r(e.doc,"",n[d].from,n[d].to,"+delete");Tr(e)})}function os(e,t,r){var n=Sn(e.text,t+r,r);return n<0||n>e.text.length?null:n}function ss(e,t,r){var n=os(e,t.ch,r);return n==null?null:new ne(t.line,n,r<0?"after":"before")}function as(e,t,r,n,o){if(e){t.doc.direction=="rtl"&&(o=-o);var l=Rt(r,t.doc.direction);if(l){var f=o<0?Oe(l):l[0],d=o<0==(f.level==1),p=d?"after":"before",g;if(f.level>0||t.doc.direction=="rtl"){var T=wr(t,r);g=o<0?r.text.length-1:0;var A=Rn(t,T,g).top;g=Gt(function(z){return Rn(t,T,z).top==A},o<0==(f.level==1)?f.from:f.to-1,g),p=="before"&&(g=os(r,g,1))}else g=o<0?f.to:f.from;return new ne(n,g,p)}}return new ne(n,o<0?r.text.length:0,o<0?"before":"after")}function Wf(e,t,r,n){var o=Rt(t,e.doc.direction);if(!o)return ss(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var l=rt(o,r.ch,r.sticky),f=o[l];if(e.doc.direction=="ltr"&&f.level%2==0&&(n>0?f.to>r.ch:f.from<r.ch))return ss(t,r,n);var d=function(ue,pe){return os(t,ue instanceof ne?ue.ch:ue,pe)},p,g=function(ue){return e.options.lineWrapping?(p=p||wr(e,t),Ya(e,t,p,ue)):{begin:0,end:t.text.length}},T=g(r.sticky=="before"?d(r,-1):r.ch);if(e.doc.direction=="rtl"||f.level==1){var A=f.level==1==n<0,z=d(r,A?1:-1);if(z!=null&&(A?z<=f.to&&z<=T.end:z>=f.from&&z>=T.begin)){var W=A?"before":"after";return new ne(r.line,z,W)}}var $=function(ue,pe,ce){for(var we=function(tt,xt){return xt?new ne(r.line,d(tt,1),"before"):new ne(r.line,tt,"after")};ue>=0&&ue<o.length;ue+=pe){var _e=o[ue],Te=pe>0==(_e.level!=1),Ue=Te?ce.begin:d(ce.end,-1);if(_e.from<=Ue&&Ue<_e.to||(Ue=Te?_e.from:d(_e.to,-1),ce.begin<=Ue&&Ue<ce.end))return we(Ue,Te)}},J=$(l+n,n,T);if(J)return J;var se=n>0?T.end:d(T.begin,-1);return se!=null&&!(n>0&&se==t.text.length)&&(J=$(n>0?0:o.length-1,n,g(se)),J)?J:null}var mi={selectAll:_l,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),He)},killLine:function(e){return Fr(e,function(t){if(t.empty()){var r=le(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:ne(t.head.line+1,0)}:{from:t.head,to:ne(t.head.line,r)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Fr(e,function(t){return{from:ne(t.from().line,0),to:me(e.doc,ne(t.to().line+1,0))}})},delLineLeft:function(e){return Fr(e,function(t){return{from:ne(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Fr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){return Fr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ne(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ne(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Gl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Kl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Hf(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},qe)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},qe)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?Kl(e,t.head):n},qe)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,o=0;o<r.length;o++){var l=r[o].from(),f=We(e.getLine(l.line),l.ch,n);t.push(Ct(n-f%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return on(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(!!t[n].empty()){var o=t[n].head,l=le(e.doc,o.line).text;if(l){if(o.ch==l.length&&(o=new ne(o.line,o.ch-1)),o.ch>0)o=new ne(o.line,o.ch+1),e.replaceRange(l.charAt(o.ch-1)+l.charAt(o.ch-2),ne(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var f=le(e.doc,o.line-1).text;f&&(o=new ne(o.line,1),e.replaceRange(l.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),ne(o.line-1,f.length-1),o,"+transpose"))}}r.push(new Ve(o,o))}e.setSelections(r)})},newlineAndIndent:function(e){return on(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);Tr(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Gl(e,t){var r=le(e.doc,t),n=An(r);return n!=r&&(t=Ye(n)),as(!0,e,n,t,1)}function Hf(e,t){var r=le(e.doc,t),n=Cc(r);return n!=r&&(t=Ye(n)),as(!0,e,r,t,-1)}function Kl(e,t){var r=Gl(e,t.line),n=le(e.doc,r.line),o=Rt(n,e.doc.direction);if(!o||o[0].level==0){var l=Math.max(r.ch,n.text.search(/\S/)),f=t.line==r.line&&t.ch<=l&&t.ch;return ne(r.line,f?0:l,r.sticky)}return r}function eo(e,t,r){if(typeof t=="string"&&(t=mi[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),o=t(e)!=Fe}finally{e.display.shift=n,e.state.suppressEdits=!1}return o}function qf(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var o=Lr(t,e.state.keyMaps[n],r,e);if(o)return o}return e.options.extraKeys&&Lr(t,e.options.extraKeys,r,e)||Lr(t,e.options.keyMap,r,e)}var zf=new Ne;function yi(e,t,r,n){var o=e.state.keySeq;if(o){if(jl(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:zf.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),Xl(e,o+" "+t,r,n))return!0}return Xl(e,t,r,n)}function Xl(e,t,r,n){var o=qf(e,t,n);return o=="multi"&&(e.state.keySeq=t),o=="handled"&&Tt(e,"keyHandled",e,t,r),(o=="handled"||o=="multi")&&(ht(r),jo(e)),!!o}function Yl(e,t){var r=$l(t,!0);return r?t.shiftKey&&!e.state.keySeq?yi(e,"Shift-"+r,t,function(n){return eo(e,n,!0)})||yi(e,r,t,function(n){if(typeof n=="string"?/^go[A-Z]/.test(n):n.motion)return eo(e,n)}):yi(e,r,t,function(n){return eo(e,n)}):!1}function jf(e,t,r){return yi(e,"'"+r+"'",t,function(n){return eo(e,n,!0)})}var ls=null;function Zl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=Ce(),!it(t,e))){C&&E<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var n=Yl(t,e);j&&(ls=n?r:null,!n&&r==88&&!M&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),u&&!b&&!n&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Uf(t)}}function Uf(e){var t=e.display.lineDiv;Le(t,"CodeMirror-crosshair");function r(n){(n.keyCode==18||!n.altKey)&&(Se(t,"CodeMirror-crosshair"),ut(document,"keyup",r),ut(document,"mouseover",r))}xe(document,"keyup",r),xe(document,"mouseover",r)}function Jl(e){e.keyCode==16&&(this.doc.sel.shift=!1),it(this,e)}function Vl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Wn(t.display,e)||it(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(j&&r==ls){ls=null,ht(e);return}if(!(j&&(!e.which||e.which<10)&&Yl(t,e))){var o=String.fromCharCode(n==null?r:n);o!="\b"&&(jf(t,e,o)||t.display.input.onKeyPress(e))}}}var $f=400,us=function(e,t,r){this.time=e,this.pos=t,this.button=r};us.prototype.compare=function(e,t,r){return this.time+$f>e&&v(t,this.pos)==0&&r==this.button};var bi,wi;function Gf(e,t){var r=+new Date;return wi&&wi.compare(r,e,t)?(bi=wi=null,"triple"):bi&&bi.compare(r,e,t)?(wi=new us(r,e,t),bi=null,"double"):(bi=new us(r,e,t),wi=null,"single")}function Ql(e){var t=this,r=t.display;if(!(it(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,Wn(r,e)){N||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));return}if(!cs(t,e)){var n=sr(t,e),o=ze(e),l=n?Gf(n,o):"single";window.focus(),o==1&&t.state.selectingText&&t.state.selectingText(e),!(n&&Kf(t,o,n,l,e))&&(o==1?n?Yf(t,n,l,e):nn(e)==r.scroller&&ht(e):o==2?(n&&Xi(t.doc,n),setTimeout(function(){return r.input.focus()},20)):o==3&&(De?t.display.input.onContextMenu(e):Uo(t)))}}}function Kf(e,t,r,n,o){var l="Click";return n=="double"?l="Double"+l:n=="triple"&&(l="Triple"+l),l=(t==1?"Left":t==2?"Middle":"Right")+l,yi(e,Ul(l,o),o,function(f){if(typeof f=="string"&&(f=mi[f]),!f)return!1;var d=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),d=f(e,r)!=Fe}finally{e.state.suppressEdits=!1}return d})}function Xf(e,t,r){var n=e.getOption("configureMouse"),o=n?n(e,t,r):{};if(o.unit==null){var l=U?r.shiftKey&&r.metaKey:r.altKey;o.unit=l?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(o.extend==null||e.doc.extend)&&(o.extend=e.doc.extend||r.shiftKey),o.addNew==null&&(o.addNew=b?r.metaKey:r.ctrlKey),o.moveOnDrag==null&&(o.moveOnDrag=!(b?r.altKey:r.ctrlKey)),o}function Yf(e,t,r,n){C?setTimeout(at(el,e),0):e.curOp.focus=Ce();var o=Xf(e,r,n),l=e.doc.sel,f;e.options.dragDrop&&rn&&!e.isReadOnly()&&r=="single"&&(f=l.contains(t))>-1&&(v((f=l.ranges[f]).from(),t)<0||t.xRel>0)&&(v(f.to(),t)>0||t.xRel<0)?Zf(e,n,t,o):Jf(e,n,t,o)}function Zf(e,t,r,n){var o=e.display,l=!1,f=St(e,function(g){N&&(o.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Uo(e)),ut(o.wrapper.ownerDocument,"mouseup",f),ut(o.wrapper.ownerDocument,"mousemove",d),ut(o.scroller,"dragstart",p),ut(o.scroller,"drop",f),l||(ht(g),n.addNew||Xi(e.doc,r,null,null,n.extend),N&&!Q||C&&E==9?setTimeout(function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()},20):o.input.focus())}),d=function(g){l=l||Math.abs(t.clientX-g.clientX)+Math.abs(t.clientY-g.clientY)>=10},p=function(){return l=!0};N&&(o.scroller.draggable=!0),e.state.draggingText=f,f.copy=!n.moveOnDrag,xe(o.wrapper.ownerDocument,"mouseup",f),xe(o.wrapper.ownerDocument,"mousemove",d),xe(o.scroller,"dragstart",p),xe(o.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return o.input.focus()},20),o.scroller.dragDrop&&o.scroller.dragDrop()}function eu(e,t,r){if(r=="char")return new Ve(t,t);if(r=="word")return e.findWordAt(t);if(r=="line")return new Ve(ne(t.line,0),me(e.doc,ne(t.line+1,0)));var n=r(e,t);return new Ve(n.from,n.to)}function Jf(e,t,r,n){C&&Uo(e);var o=e.display,l=e.doc;ht(t);var f,d,p=l.sel,g=p.ranges;if(n.addNew&&!n.extend?(d=l.sel.contains(r),d>-1?f=g[d]:f=new Ve(r,r)):(f=l.sel.primary(),d=l.sel.primIndex),n.unit=="rectangle")n.addNew||(f=new Ve(r,r)),r=sr(e,t,!0,!0),d=-1;else{var T=eu(e,r,n.unit);n.extend?f=rs(f,T.anchor,T.head,n.extend):f=T}n.addNew?d==-1?(d=g.length,Wt(l,wn(e,g.concat([f]),d),{scroll:!1,origin:"*mouse"})):g.length>1&&g[d].empty()&&n.unit=="char"&&!n.extend?(Wt(l,wn(e,g.slice(0,d).concat(g.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),p=l.sel):is(l,d,f,Ke):(d=0,Wt(l,new dn([f],0),Ke),p=l.sel);var A=r;function z(ce){if(v(A,ce)!=0)if(A=ce,n.unit=="rectangle"){for(var we=[],_e=e.options.tabSize,Te=We(le(l,r.line).text,r.ch,_e),Ue=We(le(l,ce.line).text,ce.ch,_e),tt=Math.min(Te,Ue),xt=Math.max(Te,Ue),lt=Math.min(r.line,ce.line),sn=Math.min(e.lastLine(),Math.max(r.line,ce.line));lt<=sn;lt++){var Vt=le(l,lt).text,gt=be(Vt,tt,_e);tt==xt?we.push(new Ve(ne(lt,gt),ne(lt,gt))):Vt.length>gt&&we.push(new Ve(ne(lt,gt),ne(lt,be(Vt,xt,_e))))}we.length||we.push(new Ve(r,r)),Wt(l,wn(e,p.ranges.slice(0,d).concat(we),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ce)}else{var Qt=f,Ft=eu(e,ce,n.unit),yt=Qt.anchor,vt;v(Ft.anchor,yt)>0?(vt=Ft.head,yt=Pe(Qt.from(),Ft.anchor)):(vt=Ft.anchor,yt=oe(Qt.to(),Ft.head));var ft=p.ranges.slice(0);ft[d]=Vf(e,new Ve(me(l,yt),vt)),Wt(l,wn(e,ft,d),Ke)}}var W=o.wrapper.getBoundingClientRect(),$=0;function J(ce){var we=++$,_e=sr(e,ce,!0,n.unit=="rectangle");if(!!_e)if(v(_e,A)!=0){e.curOp.focus=Ce(),z(_e);var Te=zi(o,l);(_e.line>=Te.to||_e.line<Te.from)&&setTimeout(St(e,function(){$==we&&J(ce)}),150)}else{var Ue=ce.clientY<W.top?-20:ce.clientY>W.bottom?20:0;Ue&&setTimeout(St(e,function(){$==we&&(o.scroller.scrollTop+=Ue,J(ce))}),50)}}function se(ce){e.state.selectingText=!1,$=1/0,ce&&(ht(ce),o.input.focus()),ut(o.wrapper.ownerDocument,"mousemove",ue),ut(o.wrapper.ownerDocument,"mouseup",pe),l.history.lastSelOrigin=null}var ue=St(e,function(ce){ce.buttons===0||!ze(ce)?se(ce):J(ce)}),pe=St(e,se);e.state.selectingText=pe,xe(o.wrapper.ownerDocument,"mousemove",ue),xe(o.wrapper.ownerDocument,"mouseup",pe)}function Vf(e,t){var r=t.anchor,n=t.head,o=le(e.doc,r.line);if(v(r,n)==0&&r.sticky==n.sticky)return t;var l=Rt(o);if(!l)return t;var f=rt(l,r.ch,r.sticky),d=l[f];if(d.from!=r.ch&&d.to!=r.ch)return t;var p=f+(d.from==r.ch==(d.level!=1)?0:1);if(p==0||p==l.length)return t;var g;if(n.line!=r.line)g=(n.line-r.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var T=rt(l,n.ch,n.sticky),A=T-f||(n.ch-r.ch)*(d.level==1?-1:1);T==p-1||T==p?g=A<0:g=A>0}var z=l[p+(g?-1:0)],W=g==(z.level==1),$=W?z.from:z.to,J=W?"after":"before";return r.ch==$&&r.sticky==J?t:new Ve(new ne(r.line,$,J),n)}function tu(e,t,r,n){var o,l;if(t.touches)o=t.touches[0].clientX,l=t.touches[0].clientY;else try{o=t.clientX,l=t.clientY}catch{return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ht(t);var f=e.display,d=f.lineDiv.getBoundingClientRect();if(l>d.bottom||!ot(e,r))return Lt(t);l-=d.top-f.viewOffset;for(var p=0;p<e.display.gutterSpecs.length;++p){var g=f.gutters.childNodes[p];if(g&&g.getBoundingClientRect().right>=o){var T=En(e.doc,l),A=e.display.gutterSpecs[p];return Re(e,r,e,T,A.className,t),Lt(t)}}}function cs(e,t){return tu(e,t,"gutterClick",!0)}function nu(e,t){Wn(e.display,t)||Qf(e,t)||it(e,t,"contextmenu")||De||e.display.input.onContextMenu(t)}function Qf(e,t){return ot(e,"gutterContextMenu")?tu(e,t,"gutterContextMenu",!1):!1}function ru(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ei(e)}var Mr={toString:function(){return"CodeMirror.Init"}},iu={},to={};function ed(e){var t=e.optionHandlers;function r(n,o,l,f){e.defaults[n]=o,l&&(t[n]=f?function(d,p,g){g!=Mr&&l(d,p,g)}:l)}e.defineOption=r,e.Init=Mr,r("value","",function(n,o){return n.setValue(o)},!0),r("mode",null,function(n,o){n.doc.modeOption=o,es(n)},!0),r("indentUnit",2,es,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(n){li(n),ei(n),Zt(n)},!0),r("lineSeparator",null,function(n,o){if(n.doc.lineSep=o,!!o){var l=[],f=n.doc.first;n.doc.iter(function(p){for(var g=0;;){var T=p.text.indexOf(o,g);if(T==-1)break;g=T+o.length,l.push(ne(f,T))}f++});for(var d=l.length-1;d>=0;d--)_r(n.doc,o,l[d],ne(l[d].line,l[d].ch+o.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(n,o,l){n.state.specialChars=new RegExp(o.source+(o.test("	")?"":"|	"),"g"),l!=Mr&&n.refresh()}),r("specialCharPlaceholder",Ac,function(n){return n.refresh()},!0),r("electricChars",!0),r("inputStyle",F?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(n,o){return n.getInputField().spellcheck=o},!0),r("autocorrect",!1,function(n,o){return n.getInputField().autocorrect=o},!0),r("autocapitalize",!1,function(n,o){return n.getInputField().autocapitalize=o},!0),r("rtlMoveVisually",!V),r("wholeLineUpdateBefore",!0),r("theme","default",function(n){ru(n),ai(n)},!0),r("keyMap","default",function(n,o,l){var f=Qi(o),d=l!=Mr&&Qi(l);d&&d.detach&&d.detach(n,f),f.attach&&f.attach(n,d||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,nd,!0),r("gutters",[],function(n,o){n.display.gutterSpecs=Vo(o,n.options.lineNumbers),ai(n)},!0),r("fixedGutter",!0,function(n,o){n.display.gutters.style.left=o?qo(n.display)+"px":"0",n.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(n){return Sr(n)},!0),r("scrollbarStyle","native",function(n){sl(n),Sr(n),n.display.scrollbars.setScrollTop(n.doc.scrollTop),n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0),r("lineNumbers",!1,function(n,o){n.display.gutterSpecs=Vo(n.options.gutters,o),ai(n)},!0),r("firstLineNumber",1,ai,!0),r("lineNumberFormatter",function(n){return n},ai,!0),r("showCursorWhenSelecting",!1,ti,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(n,o){o=="nocursor"&&(kr(n),n.display.input.blur()),n.display.input.readOnlyChanged(o)}),r("screenReaderLabel",null,function(n,o){o=o===""?null:o,n.display.input.screenReaderLabelChanged(o)}),r("disableInput",!1,function(n,o){o||n.display.input.reset()},!0),r("dragDrop",!0,td),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,ti,!0),r("singleCursorHeightPerLine",!0,ti,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,li,!0),r("addModeClass",!1,li,!0),r("pollInterval",100),r("undoDepth",200,function(n,o){return n.doc.history.undoDepth=o}),r("historyEventDelay",1250),r("viewportMargin",10,function(n){return n.refresh()},!0),r("maxHighlightLength",1e4,li,!0),r("moveInputWithCursor",!0,function(n,o){o||n.display.input.resetPosition()}),r("tabindex",null,function(n,o){return n.display.input.getField().tabIndex=o||""}),r("autofocus",null),r("direction","ltr",function(n,o){return n.doc.setDirection(o)},!0),r("phrases",null)}function td(e,t,r){var n=r&&r!=Mr;if(!t!=!n){var o=e.display.dragFunctions,l=t?xe:ut;l(e.display.scroller,"dragstart",o.start),l(e.display.scroller,"dragenter",o.enter),l(e.display.scroller,"dragover",o.over),l(e.display.scroller,"dragleave",o.leave),l(e.display.scroller,"drop",o.drop)}}function nd(e){e.options.lineWrapping?(Le(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Se(e.display.wrapper,"CodeMirror-wrap"),Lo(e)),zo(e),Zt(e),ei(e),setTimeout(function(){return Sr(e)},100)}function st(e,t){var r=this;if(!(this instanceof st))return new st(e,t);this.options=t=t?Je(t):{},Je(iu,t,!1);var n=t.value;typeof n=="string"?n=new Jt(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var o=new st.inputStyles[t.inputStyle](this),l=this.display=new gf(e,n,o,t);l.wrapper.CodeMirror=this,ru(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),sl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ne,keySeq:null,specialChars:null},t.autofocus&&!F&&l.input.focus(),C&&E<11&&setTimeout(function(){return r.display.input.reset(!0)},20),rd(this),Pf(),cr(this),this.curOp.forceUpdate=!0,vl(this,n),t.autofocus&&!F||this.hasFocus()?setTimeout(function(){r.hasFocus()&&!r.state.focused&&$o(r)},20):kr(this);for(var f in to)to.hasOwnProperty(f)&&to[f](this,t[f],Mr);ul(this),t.finishInit&&t.finishInit(this);for(var d=0;d<fs.length;++d)fs[d](this);fr(this),N&&t.lineWrapping&&getComputedStyle(l.lineDiv).textRendering=="optimizelegibility"&&(l.lineDiv.style.textRendering="auto")}st.defaults=iu,st.optionHandlers=to;function rd(e){var t=e.display;xe(t.scroller,"mousedown",St(e,Ql)),C&&E<11?xe(t.scroller,"dblclick",St(e,function(p){if(!it(e,p)){var g=sr(e,p);if(!(!g||cs(e,p)||Wn(e.display,p))){ht(p);var T=e.findWordAt(g);Xi(e.doc,T.anchor,T.head)}}})):xe(t.scroller,"dblclick",function(p){return it(e,p)||ht(p)}),xe(t.scroller,"contextmenu",function(p){return nu(e,p)}),xe(t.input.getField(),"contextmenu",function(p){t.scroller.contains(p.target)||nu(e,p)});var r,n={end:0};function o(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),n=t.activeTouch,n.end=+new Date)}function l(p){if(p.touches.length!=1)return!1;var g=p.touches[0];return g.radiusX<=1&&g.radiusY<=1}function f(p,g){if(g.left==null)return!0;var T=g.left-p.left,A=g.top-p.top;return T*T+A*A>20*20}xe(t.scroller,"touchstart",function(p){if(!it(e,p)&&!l(p)&&!cs(e,p)){t.input.ensurePolled(),clearTimeout(r);var g=+new Date;t.activeTouch={start:g,moved:!1,prev:g-n.end<=300?n:null},p.touches.length==1&&(t.activeTouch.left=p.touches[0].pageX,t.activeTouch.top=p.touches[0].pageY)}}),xe(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),xe(t.scroller,"touchend",function(p){var g=t.activeTouch;if(g&&!Wn(t,p)&&g.left!=null&&!g.moved&&new Date-g.start<300){var T=e.coordsChar(t.activeTouch,"page"),A;!g.prev||f(g,g.prev)?A=new Ve(T,T):!g.prev.prev||f(g,g.prev.prev)?A=e.findWordAt(T):A=new Ve(ne(T.line,0),me(e.doc,ne(T.line+1,0))),e.setSelection(A.anchor,A.head),e.focus(),ht(p)}o()}),xe(t.scroller,"touchcancel",o),xe(t.scroller,"scroll",function(){t.scroller.clientHeight&&(ri(e,t.scroller.scrollTop),lr(e,t.scroller.scrollLeft,!0),Re(e,"scroll",e))}),xe(t.scroller,"mousewheel",function(p){return dl(e,p)}),xe(t.scroller,"DOMMouseScroll",function(p){return dl(e,p)}),xe(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(p){it(e,p)||gn(p)},over:function(p){it(e,p)||(Mf(e,p),gn(p))},start:function(p){return Ff(e,p)},drop:St(e,Lf),leave:function(p){it(e,p)||Hl(e)}};var d=t.input.getField();xe(d,"keyup",function(p){return Jl.call(e,p)}),xe(d,"keydown",St(e,Zl)),xe(d,"keypress",St(e,Vl)),xe(d,"focus",function(p){return $o(e,p)}),xe(d,"blur",function(p){return kr(e,p)})}var fs=[];st.defineInitHook=function(e){return fs.push(e)};function Di(e,t,r,n){var o=e.doc,l;r==null&&(r="add"),r=="smart"&&(o.mode.indent?l=Yr(e,t).state:r="prev");var f=e.options.tabSize,d=le(o,t),p=We(d.text,null,f);d.stateAfter&&(d.stateAfter=null);var g=d.text.match(/^\s*/)[0],T;if(!n&&!/\S/.test(d.text))T=0,r="not";else if(r=="smart"&&(T=o.mode.indent(l,d.text.slice(g.length),d.text),T==Fe||T>150)){if(!n)return;r="prev"}r=="prev"?t>o.first?T=We(le(o,t-1).text,null,f):T=0:r=="add"?T=p+e.options.indentUnit:r=="subtract"?T=p-e.options.indentUnit:typeof r=="number"&&(T=p+r),T=Math.max(0,T);var A="",z=0;if(e.options.indentWithTabs)for(var W=Math.floor(T/f);W;--W)z+=f,A+="	";if(z<T&&(A+=Ct(T-z)),A!=g)return _r(o,A,ne(t,0),ne(t,g.length),"+input"),d.stateAfter=null,!0;for(var $=0;$<o.sel.ranges.length;$++){var J=o.sel.ranges[$];if(J.head.line==t&&J.head.ch<g.length){var se=ne(t,g.length);is(o,$,new Ve(se,se));break}}}var Dn=null;function no(e){Dn=e}function ds(e,t,r,n,o){var l=e.doc;e.display.shift=!1,n||(n=l.sel);var f=+new Date-200,d=o=="paste"||e.state.pasteIncoming>f,p=D(t),g=null;if(d&&n.ranges.length>1)if(Dn&&Dn.text.join(`
`)==t){if(n.ranges.length%Dn.text.length==0){g=[];for(var T=0;T<Dn.text.length;T++)g.push(l.splitLines(Dn.text[T]))}}else p.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(g=kt(p,function(ue){return[ue]}));for(var A=e.curOp.updateInput,z=n.ranges.length-1;z>=0;z--){var W=n.ranges[z],$=W.from(),J=W.to();W.empty()&&(r&&r>0?$=ne($.line,$.ch-r):e.state.overwrite&&!d?J=ne(J.line,Math.min(le(l,J.line).text.length,J.ch+Oe(p).length)):d&&Dn&&Dn.lineWise&&Dn.text.join(`
`)==p.join(`
`)&&($=J=ne($.line,0)));var se={from:$,to:J,text:g?g[z%g.length]:p,origin:o||(d?"paste":e.state.cutIncoming>f?"cut":"+input")};Ar(e.doc,se),Tt(e,"inputRead",e,se)}t&&!d&&su(e,t),Tr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=A),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function ou(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&on(t,function(){return ds(t,r,0,null,"paste")}),!0}function su(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var o=r.ranges[n];if(!(o.head.ch>100||n&&r.ranges[n-1].head.line==o.head.line)){var l=e.getModeAt(o.head),f=!1;if(l.electricChars){for(var d=0;d<l.electricChars.length;d++)if(t.indexOf(l.electricChars.charAt(d))>-1){f=Di(e,o.head.line,"smart");break}}else l.electricInput&&l.electricInput.test(le(e.doc,o.head.line).text.slice(0,o.head.ch))&&(f=Di(e,o.head.line,"smart"));f&&Tt(e,"electricInput",e,o.head.line)}}}function au(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var o=e.doc.sel.ranges[n].head.line,l={anchor:ne(o,0),head:ne(o+1,0)};r.push(l),t.push(e.getRange(l.anchor,l.head))}return{text:t,ranges:r}}function lu(e,t,r,n){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",n?"":"off"),e.setAttribute("spellcheck",!!t)}function uu(){var e=K("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=K("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return N?e.style.width="1000px":e.setAttribute("wrap","off"),P&&(e.style.border="1px solid black"),lu(e),t}function id(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(n,o){var l=this.options,f=l[n];l[n]==o&&n!="mode"||(l[n]=o,t.hasOwnProperty(n)&&St(this,t[n])(this,o,f),Re(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,o){this.state.keyMaps[o?"push":"unshift"](Qi(n))},removeKeyMap:function(n){for(var o=this.state.keyMaps,l=0;l<o.length;++l)if(o[l]==n||o[l].name==n)return o.splice(l,1),!0},addOverlay:jt(function(n,o){var l=n.token?n:e.getMode(this.options,n);if(l.startState)throw new Error("Overlays may not be stateful.");_t(this.state.overlays,{mode:l,modeSpec:n,opaque:o&&o.opaque,priority:o&&o.priority||0},function(f){return f.priority}),this.state.modeGen++,Zt(this)}),removeOverlay:jt(function(n){for(var o=this.state.overlays,l=0;l<o.length;++l){var f=o[l].modeSpec;if(f==n||typeof n=="string"&&f.name==n){o.splice(l,1),this.state.modeGen++,Zt(this);return}}}),indentLine:jt(function(n,o,l){typeof o!="string"&&typeof o!="number"&&(o==null?o=this.options.smartIndent?"smart":"prev":o=o?"add":"subtract"),rr(this.doc,n)&&Di(this,n,o,l)}),indentSelection:jt(function(n){for(var o=this.doc.sel.ranges,l=-1,f=0;f<o.length;f++){var d=o[f];if(d.empty())d.head.line>l&&(Di(this,d.head.line,n,!0),l=d.head.line,f==this.doc.sel.primIndex&&Tr(this));else{var p=d.from(),g=d.to(),T=Math.max(l,p.line);l=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var A=T;A<l;++A)Di(this,A,n);var z=this.doc.sel.ranges;p.ch==0&&o.length==z.length&&z[f].from().ch>0&&is(this.doc,f,new Ve(p,z[f].to()),He)}}}),getTokenAt:function(n,o){return ma(this,n,o)},getLineTokens:function(n,o){return ma(this,ne(n),o,!0)},getTokenTypeAt:function(n){n=me(this.doc,n);var o=pa(this,le(this.doc,n.line)),l=0,f=(o.length-1)/2,d=n.ch,p;if(d==0)p=o[2];else for(;;){var g=l+f>>1;if((g?o[g*2-1]:0)>=d)f=g;else if(o[g*2+1]<d)l=g+1;else{p=o[g*2+2];break}}var T=p?p.indexOf("overlay "):-1;return T<0?p:T==0?null:p.slice(0,T-1)},getModeAt:function(n){var o=this.doc.mode;return o.innerMode?e.innerMode(o,this.getTokenAt(n).state).mode:o},getHelper:function(n,o){return this.getHelpers(n,o)[0]},getHelpers:function(n,o){var l=[];if(!r.hasOwnProperty(o))return l;var f=r[o],d=this.getModeAt(n);if(typeof d[o]=="string")f[d[o]]&&l.push(f[d[o]]);else if(d[o])for(var p=0;p<d[o].length;p++){var g=f[d[o][p]];g&&l.push(g)}else d.helperType&&f[d.helperType]?l.push(f[d.helperType]):f[d.name]&&l.push(f[d.name]);for(var T=0;T<f._global.length;T++){var A=f._global[T];A.pred(d,this)&&ve(l,A.val)==-1&&l.push(A.val)}return l},getStateAfter:function(n,o){var l=this.doc;return n=Xe(l,n==null?l.first+l.size-1:n),Yr(this,n+1,o).state},cursorCoords:function(n,o){var l,f=this.doc.sel.primary();return n==null?l=f.head:typeof n=="object"?l=me(this.doc,n):l=n?f.from():f.to(),bn(this,l,o||"page")},charCoords:function(n,o){return Ii(this,me(this.doc,n),o||"page")},coordsChar:function(n,o){return n=Ga(this,n,o||"page"),Io(this,n.left,n.top)},lineAtHeight:function(n,o){return n=Ga(this,{top:n,left:0},o||"page").top,En(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,o,l){var f=!1,d;if(typeof n=="number"){var p=this.doc.first+this.doc.size-1;n<this.doc.first?n=this.doc.first:n>p&&(n=p,f=!0),d=le(this.doc,n)}else d=n;return Bi(this,d,{top:0,left:0},o||"page",l||f).top+(f?this.doc.height-In(d):0)},defaultTextHeight:function(){return Dr(this.display)},defaultCharWidth:function(){return Cr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,o,l,f,d){var p=this.display;n=bn(this,me(this.doc,n));var g=n.bottom,T=n.left;if(o.style.position="absolute",o.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(o),p.sizer.appendChild(o),f=="over")g=n.top;else if(f=="above"||f=="near"){var A=Math.max(p.wrapper.clientHeight,this.doc.height),z=Math.max(p.sizer.clientWidth,p.lineSpace.clientWidth);(f=="above"||n.bottom+o.offsetHeight>A)&&n.top>o.offsetHeight?g=n.top-o.offsetHeight:n.bottom+o.offsetHeight<=A&&(g=n.bottom),T+o.offsetWidth>z&&(T=z-o.offsetWidth)}o.style.top=g+"px",o.style.left=o.style.right="",d=="right"?(T=p.sizer.clientWidth-o.offsetWidth,o.style.right="0px"):(d=="left"?T=0:d=="middle"&&(T=(p.sizer.clientWidth-o.offsetWidth)/2),o.style.left=T+"px"),l&&ef(this,{left:T,top:g,right:T+o.offsetWidth,bottom:g+o.offsetHeight})},triggerOnKeyDown:jt(Zl),triggerOnKeyPress:jt(Vl),triggerOnKeyUp:Jl,triggerOnMouseDown:jt(Ql),execCommand:function(n){if(mi.hasOwnProperty(n))return mi[n].call(null,this)},triggerElectric:jt(function(n){su(this,n)}),findPosH:function(n,o,l,f){var d=1;o<0&&(d=-1,o=-o);for(var p=me(this.doc,n),g=0;g<o&&(p=hs(this.doc,p,d,l,f),!p.hitSide);++g);return p},moveH:jt(function(n,o){var l=this;this.extendSelectionsBy(function(f){return l.display.shift||l.doc.extend||f.empty()?hs(l.doc,f.head,n,o,l.options.rtlMoveVisually):n<0?f.from():f.to()},qe)}),deleteH:jt(function(n,o){var l=this.doc.sel,f=this.doc;l.somethingSelected()?f.replaceSelection("",null,"+delete"):Fr(this,function(d){var p=hs(f,d.head,n,o,!1);return n<0?{from:p,to:d.head}:{from:d.head,to:p}})}),findPosV:function(n,o,l,f){var d=1,p=f;o<0&&(d=-1,o=-o);for(var g=me(this.doc,n),T=0;T<o;++T){var A=bn(this,g,"div");if(p==null?p=A.left:A.left=p,g=cu(this,A,d,l),g.hitSide)break}return g},moveV:jt(function(n,o){var l=this,f=this.doc,d=[],p=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(T){if(p)return n<0?T.from():T.to();var A=bn(l,T.head,"div");T.goalColumn!=null&&(A.left=T.goalColumn),d.push(A.left);var z=cu(l,A,n,o);return o=="page"&&T==f.sel.primary()&&Ko(l,Ii(l,z,"div").top-A.top),z},qe),d.length)for(var g=0;g<f.sel.ranges.length;g++)f.sel.ranges[g].goalColumn=d[g]}),findWordAt:function(n){var o=this.doc,l=le(o,n.line).text,f=n.ch,d=n.ch;if(l){var p=this.getHelper(n,"wordChars");(n.sticky=="before"||d==l.length)&&f?--f:++d;for(var g=l.charAt(f),T=$t(g,p)?function(A){return $t(A,p)}:/\s/.test(g)?function(A){return/\s/.test(A)}:function(A){return!/\s/.test(A)&&!$t(A)};f>0&&T(l.charAt(f-1));)--f;for(;d<l.length&&T(l.charAt(d));)++d}return new Ve(ne(n.line,f),ne(n.line,d))},toggleOverwrite:function(n){n!=null&&n==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Le(this.display.cursorDiv,"CodeMirror-overwrite"):Se(this.display.cursorDiv,"CodeMirror-overwrite"),Re(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ce()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:jt(function(n,o){ni(this,n,o)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-_n(this)-this.display.barHeight,width:n.scrollWidth-_n(this)-this.display.barWidth,clientHeight:Po(this),clientWidth:ir(this)}},scrollIntoView:jt(function(n,o){n==null?(n={from:this.doc.sel.primary().head,to:null},o==null&&(o=this.options.cursorScrollMargin)):typeof n=="number"?n={from:ne(n,0),to:null}:n.from==null&&(n={from:n,to:null}),n.to||(n.to=n.from),n.margin=o||0,n.from.line!=null?tf(this,n):nl(this,n.from,n.to,n.margin)}),setSize:jt(function(n,o){var l=this,f=function(p){return typeof p=="number"||/^\d+$/.test(String(p))?p+"px":p};n!=null&&(this.display.wrapper.style.width=f(n)),o!=null&&(this.display.wrapper.style.height=f(o)),this.options.lineWrapping&&ja(this);var d=this.display.viewFrom;this.doc.iter(d,this.display.viewTo,function(p){if(p.widgets){for(var g=0;g<p.widgets.length;g++)if(p.widgets[g].noHScroll){Yn(l,d,"widget");break}}++d}),this.curOp.forceUpdate=!0,Re(this,"refresh",this)}),operation:function(n){return on(this,n)},startOperation:function(){return cr(this)},endOperation:function(){return fr(this)},refresh:jt(function(){var n=this.display.cachedTextHeight;Zt(this),this.curOp.forceUpdate=!0,ei(this),ni(this,this.doc.scrollLeft,this.doc.scrollTop),Zo(this.display),(n==null||Math.abs(n-Dr(this.display))>.5||this.options.lineWrapping)&&zo(this),Re(this,"refresh",this)}),swapDoc:jt(function(n){var o=this.doc;return o.cm=null,this.state.selectingText&&this.state.selectingText(),vl(this,n),ei(this),this.display.input.reset(),ni(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,Tt(this,"swapDoc",this,o),o}),phrase:function(n){var o=this.options.phrases;return o&&Object.prototype.hasOwnProperty.call(o,n)?o[n]:n},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ot(e),e.registerHelper=function(n,o,l){r.hasOwnProperty(n)||(r[n]=e[n]={_global:[]}),r[n][o]=l},e.registerGlobalHelper=function(n,o,l,f){e.registerHelper(n,o,f),r[n]._global.push({pred:l,val:f})}}function hs(e,t,r,n,o){var l=t,f=r,d=le(e,t.line),p=o&&e.direction=="rtl"?-r:r;function g(){var pe=t.line+p;return pe<e.first||pe>=e.first+e.size?!1:(t=new ne(pe,t.ch,t.sticky),d=le(e,pe))}function T(pe){var ce;if(n=="codepoint"){var we=d.text.charCodeAt(t.ch+(r>0?0:-1));if(isNaN(we))ce=null;else{var _e=r>0?we>=55296&&we<56320:we>=56320&&we<57343;ce=new ne(t.line,Math.max(0,Math.min(d.text.length,t.ch+r*(_e?2:1))),-r)}}else o?ce=Wf(e.cm,d,t,r):ce=ss(d,t,r);if(ce==null)if(!pe&&g())t=as(o,e.cm,d,t.line,p);else return!1;else t=ce;return!0}if(n=="char"||n=="codepoint")T();else if(n=="column")T(!0);else if(n=="word"||n=="group")for(var A=null,z=n=="group",W=e.cm&&e.cm.getHelper(t,"wordChars"),$=!0;!(r<0&&!T(!$));$=!1){var J=d.text.charAt(t.ch)||`
`,se=$t(J,W)?"w":z&&J==`
`?"n":!z||/\s/.test(J)?null:"p";if(z&&!$&&!se&&(se="s"),A&&A!=se){r<0&&(r=1,T(),t.sticky="after");break}if(se&&(A=se),r>0&&!T(!$))break}var ue=Zi(e,t,l,f,!0);return R(l,ue)&&(ue.hitSide=!0),ue}function cu(e,t,r,n){var o=e.doc,l=t.left,f;if(n=="page"){var d=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),p=Math.max(d-.5*Dr(e.display),3);f=(r>0?t.bottom:t.top)+r*p}else n=="line"&&(f=r>0?t.bottom+3:t.top-3);for(var g;g=Io(e,l,f),!!g.outside;){if(r<0?f<=0:f>=o.height){g.hitSide=!0;break}f+=r*5}return g}var Qe=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ne,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Qe.prototype.init=function(e){var t=this,r=this,n=r.cm,o=r.div=e.lineDiv;o.contentEditable=!0,lu(o,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize);function l(d){for(var p=d.target;p;p=p.parentNode){if(p==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(p.className))break}return!1}xe(o,"paste",function(d){!l(d)||it(n,d)||ou(d,n)||E<=11&&setTimeout(St(n,function(){return t.updateFromDOM()}),20)}),xe(o,"compositionstart",function(d){t.composing={data:d.data,done:!1}}),xe(o,"compositionupdate",function(d){t.composing||(t.composing={data:d.data,done:!1})}),xe(o,"compositionend",function(d){t.composing&&(d.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),xe(o,"touchstart",function(){return r.forceCompositionEnd()}),xe(o,"input",function(){t.composing||t.readFromDOMSoon()});function f(d){if(!(!l(d)||it(n,d))){if(n.somethingSelected())no({lineWise:!1,text:n.getSelections()}),d.type=="cut"&&n.replaceSelection("",null,"cut");else if(n.options.lineWiseCopyCut){var p=au(n);no({lineWise:!0,text:p.text}),d.type=="cut"&&n.operation(function(){n.setSelections(p.ranges,0,He),n.replaceSelection("",null,"cut")})}else return;if(d.clipboardData){d.clipboardData.clearData();var g=Dn.text.join(`
`);if(d.clipboardData.setData("Text",g),d.clipboardData.getData("Text")==g){d.preventDefault();return}}var T=uu(),A=T.firstChild;n.display.lineSpace.insertBefore(T,n.display.lineSpace.firstChild),A.value=Dn.text.join(`
`);var z=Ce();Ge(A),setTimeout(function(){n.display.lineSpace.removeChild(T),z.focus(),z==o&&r.showPrimarySelection()},50)}}xe(o,"copy",f),xe(o,"cut",f)},Qe.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qe.prototype.prepareSelection=function(){var e=Va(this.cm,!1);return e.focus=Ce()==this.div,e},Qe.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qe.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var l=ro(t,e.anchorNode,e.anchorOffset),f=ro(t,e.focusNode,e.focusOffset);if(!(l&&!l.bad&&f&&!f.bad&&v(Pe(l,f),n)==0&&v(oe(l,f),o)==0)){var d=t.display.view,p=n.line>=t.display.viewFrom&&fu(t,n)||{node:d[0].measure.map[2],offset:0},g=o.line<t.display.viewTo&&fu(t,o);if(!g){var T=d[d.length-1].measure,A=T.maps?T.maps[T.maps.length-1]:T.map;g={node:A[A.length-1],offset:A[A.length-2]-A[A.length-3]}}if(!p||!g){e.removeAllRanges();return}var z=e.rangeCount&&e.getRangeAt(0),W;try{W=ie(p.node,p.offset,g.offset,g.node)}catch{}W&&(!u&&t.state.focused?(e.collapse(p.node,p.offset),W.collapsed||(e.removeAllRanges(),e.addRange(W))):(e.removeAllRanges(),e.addRange(W)),z&&e.anchorNode==null?e.addRange(z):u&&this.startGracePeriod()),this.rememberSelection()}},Qe.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Qe.prototype.showMultipleSelections=function(e){G(this.cm.display.cursorDiv,e.cursors),G(this.cm.display.selectionDiv,e.selection)},Qe.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qe.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ie(this.div,t)},Qe.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Ce()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qe.prototype.blur=function(){this.div.blur()},Qe.prototype.getField=function(){return this.div},Qe.prototype.supportsTouch=function(){return!0},Qe.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):on(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function r(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,r))}this.polling.set(this.cm.options.pollInterval,r)},Qe.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qe.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(I&&O&&this.cm.display.gutterSpecs.length&&od(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var r=ro(t,e.anchorNode,e.anchorOffset),n=ro(t,e.focusNode,e.focusOffset);r&&n&&on(t,function(){Wt(t.doc,Jn(r,n),He),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Qe.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),o=r.to();if(n.ch==0&&n.line>e.firstLine()&&(n=ne(n.line-1,le(e.doc,n.line-1).length)),o.ch==le(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=ne(o.line+1,0)),n.line<t.viewFrom||o.line>t.viewTo-1)return!1;var l,f,d;n.line==t.viewFrom||(l=ar(e,n.line))==0?(f=Ye(t.view[0].line),d=t.view[0].node):(f=Ye(t.view[l].line),d=t.view[l-1].node.nextSibling);var p=ar(e,o.line),g,T;if(p==t.view.length-1?(g=t.viewTo-1,T=t.lineDiv.lastChild):(g=Ye(t.view[p+1].line)-1,T=t.view[p+1].node.previousSibling),!d)return!1;for(var A=e.doc.splitLines(sd(e,d,T,f,g)),z=cn(e.doc,ne(f,0),ne(g,le(e.doc,g).text.length));A.length>1&&z.length>1;)if(Oe(A)==Oe(z))A.pop(),z.pop(),g--;else if(A[0]==z[0])A.shift(),z.shift(),f++;else break;for(var W=0,$=0,J=A[0],se=z[0],ue=Math.min(J.length,se.length);W<ue&&J.charCodeAt(W)==se.charCodeAt(W);)++W;for(var pe=Oe(A),ce=Oe(z),we=Math.min(pe.length-(A.length==1?W:0),ce.length-(z.length==1?W:0));$<we&&pe.charCodeAt(pe.length-$-1)==ce.charCodeAt(ce.length-$-1);)++$;if(A.length==1&&z.length==1&&f==n.line)for(;W&&W>n.ch&&pe.charCodeAt(pe.length-$-1)==ce.charCodeAt(ce.length-$-1);)W--,$++;A[A.length-1]=pe.slice(0,pe.length-$).replace(/^\u200b+/,""),A[0]=A[0].slice(W).replace(/\u200b+$/,"");var _e=ne(f,W),Te=ne(g,z.length?Oe(z).length-$:0);if(A.length>1||A[0]||v(_e,Te))return _r(e.doc,A,_e,Te,"+input"),!0},Qe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qe.prototype.reset=function(){this.forceCompositionEnd()},Qe.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qe.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Qe.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&on(this.cm,function(){return Zt(e.cm)})},Qe.prototype.setUneditable=function(e){e.contentEditable="false"},Qe.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||St(this.cm,ds)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Qe.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Qe.prototype.onContextMenu=function(){},Qe.prototype.resetPosition=function(){},Qe.prototype.needsContentAttribute=!0;function fu(e,t){var r=No(e,t.line);if(!r||r.hidden)return null;var n=le(e.doc,t.line),o=Ia(r,n,t.line),l=Rt(n,e.doc.direction),f="left";if(l){var d=rt(l,t.ch);f=d%2?"right":"left"}var p=qa(o.map,t.ch,f);return p.offset=p.collapse=="right"?p.end:p.start,p}function od(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Pr(e,t){return t&&(e.bad=!0),e}function sd(e,t,r,n,o){var l="",f=!1,d=e.doc.lineSeparator(),p=!1;function g(W){return function($){return $.id==W}}function T(){f&&(l+=d,p&&(l+=d),f=p=!1)}function A(W){W&&(T(),l+=W)}function z(W){if(W.nodeType==1){var $=W.getAttribute("cm-text");if($){A($);return}var J=W.getAttribute("cm-marker"),se;if(J){var ue=e.findMarks(ne(n,0),ne(o+1,0),g(+J));ue.length&&(se=ue[0].find(0))&&A(cn(e.doc,se.from,se.to).join(d));return}if(W.getAttribute("contenteditable")=="false")return;var pe=/^(pre|div|p|li|table|br)$/i.test(W.nodeName);if(!/^br$/i.test(W.nodeName)&&W.textContent.length==0)return;pe&&T();for(var ce=0;ce<W.childNodes.length;ce++)z(W.childNodes[ce]);/^(pre|p)$/i.test(W.nodeName)&&(p=!0),pe&&(f=!0)}else W.nodeType==3&&A(W.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;z(t),t!=r;)t=t.nextSibling,p=!1;return l}function ro(e,t,r){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[r],!n)return Pr(e.clipPos(ne(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var l=e.display.view[o];if(l.node==n)return ad(l,t,r)}}function ad(e,t,r){var n=e.text.firstChild,o=!1;if(!t||!Ie(n,t))return Pr(ne(Ye(e.line),0),!0);if(t==n&&(o=!0,t=n.childNodes[r],r=0,!t)){var l=e.rest?Oe(e.rest):e.line;return Pr(ne(Ye(l),l.text.length),o)}var f=t.nodeType==3?t:null,d=t;for(!f&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(f=t.firstChild,r&&(r=f.nodeValue.length));d.parentNode!=n;)d=d.parentNode;var p=e.measure,g=p.maps;function T(se,ue,pe){for(var ce=-1;ce<(g?g.length:0);ce++)for(var we=ce<0?p.map:g[ce],_e=0;_e<we.length;_e+=3){var Te=we[_e+2];if(Te==se||Te==ue){var Ue=Ye(ce<0?e.line:e.rest[ce]),tt=we[_e]+pe;return(pe<0||Te!=se)&&(tt=we[_e+(pe?1:0)]),ne(Ue,tt)}}}var A=T(f,d,r);if(A)return Pr(A,o);for(var z=d.nextSibling,W=f?f.nodeValue.length-r:0;z;z=z.nextSibling){if(A=T(z,z.firstChild,0),A)return Pr(ne(A.line,A.ch-W),o);W+=z.textContent.length}for(var $=d.previousSibling,J=r;$;$=$.previousSibling){if(A=T($,$.firstChild,-1),A)return Pr(ne(A.line,A.ch+J),o);J+=$.textContent.length}}var pt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ne,this.hasSelection=!1,this.composing=null};pt.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var o=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),P&&(o.style.width="0px"),xe(o,"input",function(){C&&E>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()}),xe(o,"paste",function(f){it(n,f)||ou(f,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())});function l(f){if(!it(n,f)){if(n.somethingSelected())no({lineWise:!1,text:n.getSelections()});else if(n.options.lineWiseCopyCut){var d=au(n);no({lineWise:!0,text:d.text}),f.type=="cut"?n.setSelections(d.ranges,null,He):(r.prevInput="",o.value=d.text.join(`
`),Ge(o))}else return;f.type=="cut"&&(n.state.cutIncoming=+new Date)}}xe(o,"cut",l),xe(o,"copy",l),xe(e.scroller,"paste",function(f){if(!(Wn(e,f)||it(n,f))){if(!o.dispatchEvent){n.state.pasteIncoming=+new Date,r.focus();return}var d=new Event("paste");d.clipboardData=f.clipboardData,o.dispatchEvent(d)}}),xe(e.lineSpace,"selectstart",function(f){Wn(e,f)||ht(f)}),xe(o,"compositionstart",function(){var f=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:f,range:n.markText(f,n.getCursor("to"),{className:"CodeMirror-composing"})}}),xe(o,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},pt.prototype.createField=function(e){this.wrapper=uu(),this.textarea=this.wrapper.firstChild},pt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},pt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=Va(e);if(e.options.moveInputWithCursor){var o=bn(e,r.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+f.top-l.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+f.left-l.left))}return n},pt.prototype.showSelection=function(e){var t=this.cm,r=t.display;G(r.cursorDiv,e.cursors),G(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},pt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&Ge(this.textarea),C&&E>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",C&&E>=9&&(this.hasSelection=null))}},pt.prototype.getField=function(){return this.textarea},pt.prototype.supportsTouch=function(){return!1},pt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!F||Ce()!=this.textarea))try{this.textarea.focus()}catch{}},pt.prototype.blur=function(){this.textarea.blur()},pt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},pt.prototype.receivedFocus=function(){this.slowPoll()},pt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},pt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function r(){var n=t.poll();!n&&!e?(e=!0,t.polling.set(60,r)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,r)},pt.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||x(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=r.value;if(o==n&&!t.somethingSelected())return!1;if(C&&E>=9&&this.hasSelection===o||b&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var l=o.charCodeAt(0);if(l==8203&&!n&&(n="\u200B"),l==8666)return this.reset(),this.cm.execCommand("undo")}for(var f=0,d=Math.min(n.length,o.length);f<d&&n.charCodeAt(f)==o.charCodeAt(f);)++f;return on(t,function(){ds(t,o.slice(f),n.length-f,null,e.composing?"*compose":null),o.length>1e3||o.indexOf(`
`)>-1?r.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},pt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},pt.prototype.onKeyPress=function(){C&&E>=9&&(this.hasSelection=null),this.fastPoll()},pt.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var l=sr(r,e),f=n.scroller.scrollTop;if(!l||j)return;var d=r.options.resetSelectionOnContextMenu;d&&r.doc.sel.contains(l)==-1&&St(r,Wt)(r.doc,Jn(l),He);var p=o.style.cssText,g=t.wrapper.style.cssText,T=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",o.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-T.top-5)+"px; left: "+(e.clientX-T.left-5)+`px;
      z-index: 1000; background: `+(C?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var A;N&&(A=window.scrollY),n.input.focus(),N&&window.scrollTo(null,A),n.input.reset(),r.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=W,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll);function z(){if(o.selectionStart!=null){var J=r.somethingSelected(),se="\u200B"+(J?o.value:"");o.value="\u21DA",o.value=se,t.prevInput=J?"":"\u200B",o.selectionStart=1,o.selectionEnd=se.length,n.selForContextMenu=r.doc.sel}}function W(){if(t.contextMenuPending==W&&(t.contextMenuPending=!1,t.wrapper.style.cssText=g,o.style.cssText=p,C&&E<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=f),o.selectionStart!=null)){(!C||C&&E<9)&&z();var J=0,se=function(){n.selForContextMenu==r.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&t.prevInput=="\u200B"?St(r,_l)(r):J++<10?n.detectingSelectAll=setTimeout(se,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(se,200)}}if(C&&E>=9&&z(),De){gn(e);var $=function(){ut(window,"mouseup",$),setTimeout(W,20)};xe(window,"mouseup",$)}else setTimeout(W,50)},pt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},pt.prototype.setUneditable=function(){},pt.prototype.needsContentAttribute=!1;function ld(e,t){if(t=t?Je(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var r=Ce();t.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function n(){e.value=d.getValue()}var o;if(e.form&&(xe(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var l=e.form;o=l.submit;try{var f=l.submit=function(){n(),l.submit=o,l.submit(),l.submit=f}}catch{}}t.finishInit=function(p){p.save=n,p.getTextArea=function(){return e},p.toTextArea=function(){p.toTextArea=isNaN,n(),e.parentNode.removeChild(p.getWrapperElement()),e.style.display="",e.form&&(ut(e.form,"submit",n),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=o))}},e.style.display="none";var d=st(function(p){return e.parentNode.insertBefore(p,e.nextSibling)},t);return d}function ud(e){e.off=ut,e.on=xe,e.wheelEventPixels=vf,e.Doc=Jt,e.splitLines=D,e.countColumn=We,e.findColumn=be,e.isWordChar=zt,e.Pass=Fe,e.signal=Re,e.Line=yr,e.changeEnd=Vn,e.scrollbarModel=ol,e.Pos=ne,e.cmpPos=v,e.modes=Z,e.mimeModes=ee,e.resolveMode=Ze,e.getMode=je,e.modeExtensions=Me,e.extendMode=ct,e.copyState=mt,e.startState=Yt,e.innerMode=un,e.commands=mi,e.keyMap=qn,e.keyName=$l,e.isModifierKey=jl,e.lookupKey=Lr,e.normalizeKeyMap=If,e.StringStream=Be,e.SharedTextMarker=pi,e.TextMarker=er,e.LineWidget=hi,e.e_preventDefault=ht,e.e_stopPropagation=Xt,e.e_stop=gn,e.addClass=Le,e.contains=Ie,e.rmClass=Se,e.keyNames=tr}ed(st),id(st);var cd="iter insert remove copy getEditor constructor".split(" ");for(var io in Jt.prototype)Jt.prototype.hasOwnProperty(io)&&ve(cd,io)<0&&(st.prototype[io]=function(e){return function(){return e.apply(this.doc,arguments)}}(Jt.prototype[io]));return Ot(Jt),st.inputStyles={textarea:pt,contenteditable:Qe},st.defineMode=function(e){!st.defaults.mode&&e!="null"&&(st.defaults.mode=e),he.apply(this,arguments)},st.defineMIME=Ae,st.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),st.defineMIME("text/plain","null"),st.defineExtension=function(e,t){st.prototype[e]=t},st.defineDocExtension=function(e,t){Jt.prototype[e]=t},st.fromTextArea=ld,ud(st),st.version="5.63.3",st})})(Pn);var Ci=Pn.exports;(function(i,s){(function(a){a(Pn.exports)})(function(a){a.defineMode("javascript",function(c,u){var h=c.indentUnit,y=u.statementIndent,k=u.jsonld,C=u.json||k,E=u.trackScope!==!1,N=u.typescript,H=u.wordCharacters||/[\w$\xa1-\uffff]/,O=function(){function v(It){return{type:It,style:"keyword"}}var R=v("keyword a"),Y=v("keyword b"),oe=v("keyword c"),Pe=v("keyword d"),Xe=v("operator"),me={type:"atom",style:"atom"};return{if:v("if"),while:R,with:R,else:Y,do:Y,try:Y,finally:Y,return:Pe,break:Pe,continue:Pe,new:v("new"),delete:oe,void:oe,throw:oe,debugger:v("debugger"),var:v("var"),const:v("var"),let:v("var"),function:v("function"),catch:v("catch"),for:v("for"),switch:v("switch"),case:v("case"),default:v("default"),in:Xe,typeof:Xe,instanceof:Xe,true:me,false:me,null:me,undefined:me,NaN:me,Infinity:me,this:v("this"),class:v("class"),super:v("atom"),yield:oe,export:v("export"),import:v("import"),extends:oe,await:oe}}(),j=/[+\-*&%=<>!?|~^@]/,Q=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ae(v){for(var R=!1,Y,oe=!1;(Y=v.next())!=null;){if(!R){if(Y=="/"&&!oe)return;Y=="["?oe=!0:oe&&Y=="]"&&(oe=!1)}R=!R&&Y=="\\"}}var fe,P;function I(v,R,Y){return fe=v,P=Y,R}function F(v,R){var Y=v.next();if(Y=='"'||Y=="'")return R.tokenize=b(Y),R.tokenize(v,R);if(Y=="."&&v.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return I("number","number");if(Y=="."&&v.match(".."))return I("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Y))return I(Y);if(Y=="="&&v.eat(">"))return I("=>","operator");if(Y=="0"&&v.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return I("number","number");if(/\d/.test(Y))return v.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),I("number","number");if(Y=="/")return v.eat("*")?(R.tokenize=U,U(v,R)):v.eat("/")?(v.skipToEnd(),I("comment","comment")):ne(v,R,1)?(ae(v),v.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),I("regexp","string-2")):(v.eat("="),I("operator","operator",v.current()));if(Y=="`")return R.tokenize=V,V(v,R);if(Y=="#"&&v.peek()=="!")return v.skipToEnd(),I("meta","meta");if(Y=="#"&&v.eatWhile(H))return I("variable","property");if(Y=="<"&&v.match("!--")||Y=="-"&&v.match("->")&&!/\S/.test(v.string.slice(0,v.start)))return v.skipToEnd(),I("comment","comment");if(j.test(Y))return(Y!=">"||!R.lexical||R.lexical.type!=">")&&(v.eat("=")?(Y=="!"||Y=="=")&&v.eat("="):/[<>*+\-|&?]/.test(Y)&&(v.eat(Y),Y==">"&&v.eat(Y))),Y=="?"&&v.eat(".")?I("."):I("operator","operator",v.current());if(H.test(Y)){v.eatWhile(H);var oe=v.current();if(R.lastType!="."){if(O.propertyIsEnumerable(oe)){var Pe=O[oe];return I(Pe.type,Pe.style,oe)}if(oe=="async"&&v.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return I("async","keyword",oe)}return I("variable","variable",oe)}}function b(v){return function(R,Y){var oe=!1,Pe;if(k&&R.peek()=="@"&&R.match(Q))return Y.tokenize=F,I("jsonld-keyword","meta");for(;(Pe=R.next())!=null&&!(Pe==v&&!oe);)oe=!oe&&Pe=="\\";return oe||(Y.tokenize=F),I("string","string")}}function U(v,R){for(var Y=!1,oe;oe=v.next();){if(oe=="/"&&Y){R.tokenize=F;break}Y=oe=="*"}return I("comment","comment")}function V(v,R){for(var Y=!1,oe;(oe=v.next())!=null;){if(!Y&&(oe=="`"||oe=="$"&&v.eat("{"))){R.tokenize=F;break}Y=!Y&&oe=="\\"}return I("quasi","string-2",v.current())}var q="([{}])";function re(v,R){R.fatArrowAt&&(R.fatArrowAt=null);var Y=v.string.indexOf("=>",v.start);if(!(Y<0)){if(N){var oe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(v.string.slice(v.start,Y));oe&&(Y=oe.index)}for(var Pe=0,Xe=!1,me=Y-1;me>=0;--me){var It=v.string.charAt(me),fn=q.indexOf(It);if(fn>=0&&fn<3){if(!Pe){++me;break}if(--Pe==0){It=="("&&(Xe=!0);break}}else if(fn>=3&&fn<6)++Pe;else if(H.test(It))Xe=!0;else if(/["'\/`]/.test(It))for(;;--me){if(me==0)return;var mr=v.string.charAt(me-1);if(mr==It&&v.string.charAt(me-2)!="\\"){me--;break}}else if(Xe&&!Pe){++me;break}}Xe&&!Pe&&(R.fatArrowAt=me)}}var De={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ge(v,R,Y,oe,Pe,Xe){this.indented=v,this.column=R,this.type=Y,this.prev=Pe,this.info=Xe,oe!=null&&(this.align=oe)}function Se(v,R){if(!E)return!1;for(var Y=v.localVars;Y;Y=Y.next)if(Y.name==R)return!0;for(var oe=v.context;oe;oe=oe.prev)for(var Y=oe.vars;Y;Y=Y.next)if(Y.name==R)return!0}function $e(v,R,Y,oe,Pe){var Xe=v.cc;for(G.state=v,G.stream=Pe,G.marked=null,G.cc=Xe,G.style=R,v.lexical.hasOwnProperty("align")||(v.lexical.align=!0);;){var me=Xe.length?Xe.pop():C?qe:He;if(me(Y,oe)){for(;Xe.length&&Xe[Xe.length-1].lex;)Xe.pop()();return G.marked?G.marked:Y=="variable"&&Se(v,oe)?"variable-2":R}}}var G={state:null,column:null,marked:null,cc:null};function K(){for(var v=arguments.length-1;v>=0;v--)G.cc.push(arguments[v])}function _(){return K.apply(null,arguments),!0}function ie(v,R){for(var Y=R;Y;Y=Y.next)if(Y.name==v)return!0;return!1}function Ie(v){var R=G.state;if(G.marked="def",!!E){if(R.context){if(R.lexical.info=="var"&&R.context&&R.context.block){var Y=Ce(v,R.context);if(Y!=null){R.context=Y;return}}else if(!ie(v,R.localVars)){R.localVars=new Ge(v,R.localVars);return}}u.globalVars&&!ie(v,R.globalVars)&&(R.globalVars=new Ge(v,R.globalVars))}}function Ce(v,R){if(R)if(R.block){var Y=Ce(v,R.prev);return Y?Y==R.prev?R:new Ee(Y,R.vars,!0):null}else return ie(v,R.vars)?R:new Ee(R.prev,new Ge(v,R.vars),!1);else return null}function Le(v){return v=="public"||v=="private"||v=="protected"||v=="abstract"||v=="readonly"}function Ee(v,R,Y){this.prev=v,this.vars=R,this.block=Y}function Ge(v,R){this.name=v,this.next=R}var at=new Ge("this",new Ge("arguments",null));function Je(){G.state.context=new Ee(G.state.context,G.state.localVars,!1),G.state.localVars=at}function We(){G.state.context=new Ee(G.state.context,G.state.localVars,!0),G.state.localVars=null}function Ne(){G.state.localVars=G.state.context.vars,G.state.context=G.state.context.prev}Ne.lex=!0;function ve(v,R){var Y=function(){var oe=G.state,Pe=oe.indented;if(oe.lexical.type=="stat")Pe=oe.lexical.indented;else for(var Xe=oe.lexical;Xe&&Xe.type==")"&&Xe.align;Xe=Xe.prev)Pe=Xe.indented;oe.lexical=new ge(Pe,G.stream.column(),v,null,oe.lexical,R)};return Y.lex=!0,Y}function de(){var v=G.state;v.lexical.prev&&(v.lexical.type==")"&&(v.indented=v.lexical.indented),v.lexical=v.lexical.prev)}de.lex=!0;function Fe(v){function R(Y){return Y==v?_():v==";"||Y=="}"||Y==")"||Y=="]"?K():_(R)}return R}function He(v,R){return v=="var"?_(ve("vardef",R),rn,Fe(";"),de):v=="keyword a"?_(ve("form"),ye,He,de):v=="keyword b"?_(ve("form"),He,de):v=="keyword d"?G.stream.match(/^\s*$/,!1)?_():_(ve("stat"),Oe,Fe(";"),de):v=="debugger"?_(Fe(";")):v=="{"?_(ve("}"),We,Rt,de,Ne):v==";"?_():v=="if"?(G.state.lexical.info=="else"&&G.state.cc[G.state.cc.length-1]==de&&G.state.cc.pop()(),_(ve("form"),ye,He,de,x)):v=="function"?_(Z):v=="for"?_(ve("form"),We,M,He,Ne,de):v=="class"||N&&R=="interface"?(G.marked="keyword",_(ve("form",v=="class"?v:R),je,de)):v=="variable"?N&&R=="declare"?(G.marked="keyword",_(He)):N&&(R=="module"||R=="enum"||R=="type")&&G.stream.match(/^\s*\w/,!1)?(G.marked="keyword",R=="enum"?_(En):R=="type"?_(he,Fe("operator"),Re,Fe(";")):_(ve("form"),w,Fe("{"),ve("}"),Rt,de,de)):N&&R=="namespace"?(G.marked="keyword",_(ve("form"),qe,He,de)):N&&R=="abstract"?(G.marked="keyword",_(He)):_(ve("stat"),pn):v=="switch"?_(ve("form"),ye,Fe("{"),ve("}","switch"),We,Rt,de,de,Ne):v=="case"?_(qe,Fe(":")):v=="default"?_(Fe(":")):v=="catch"?_(ve("form"),Je,Ke,He,de,Ne):v=="export"?_(ve("stat"),un,de):v=="import"?_(ve("stat"),Be,de):v=="async"?_(He):R=="@"?_(qe,He):K(ve("stat"),qe,Fe(";"),de)}function Ke(v){if(v=="(")return _(Ae,Fe(")"))}function qe(v,R){return Ct(v,R,!1)}function be(v,R){return Ct(v,R,!0)}function ye(v){return v!="("?K():_(ve(")"),Oe,Fe(")"),de)}function Ct(v,R,Y){if(G.state.fatArrowAt==G.stream.start){var oe=Y?zt:hn;if(v=="(")return _(Je,ve(")"),rt(Ae,")"),de,Fe("=>"),oe,Ne);if(v=="variable")return K(Je,w,Fe("=>"),oe,Ne)}var Pe=Y?_t:kt;return De.hasOwnProperty(v)?_(Pe):v=="function"?_(Z,Pe):v=="class"||N&&R=="interface"?(G.marked="keyword",_(ve("form"),Ze,de)):v=="keyword c"||v=="async"?_(Y?be:qe):v=="("?_(ve(")"),Oe,Fe(")"),de,Pe):v=="operator"||v=="spread"?_(Y?be:qe):v=="["?_(ve("]"),Ye,de,Pe):v=="{"?mn(Gt,"}",null,Pe):v=="quasi"?K(et,Pe):v=="new"?_($t(Y)):_()}function Oe(v){return v.match(/[;\}\)\],]/)?K():K(qe)}function kt(v,R){return v==","?_(Oe):_t(v,R,!1)}function _t(v,R,Y){var oe=Y==!1?kt:_t,Pe=Y==!1?qe:be;if(v=="=>")return _(Je,Y?zt:hn,Ne);if(v=="operator")return/\+\+|--/.test(R)||N&&R=="!"?_(oe):N&&R=="<"&&G.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?_(ve(">"),rt(Re,">"),de,oe):R=="?"?_(qe,Fe(":"),Pe):_(Pe);if(v=="quasi")return K(et,oe);if(v!=";"){if(v=="(")return mn(be,")","call",oe);if(v==".")return _(Sn,oe);if(v=="[")return _(ve("]"),Oe,Fe("]"),de,oe);if(N&&R=="as")return G.marked="keyword",_(Re,oe);if(v=="regexp")return G.state.lastType=G.marked="operator",G.stream.backUp(G.stream.pos-G.stream.start-1),_(Pe)}}function et(v,R){return v!="quasi"?K():R.slice(R.length-2)!="${"?_(et):_(Oe,dt)}function dt(v){if(v=="}")return G.marked="string-2",G.state.tokenize=V,_(et)}function hn(v){return re(G.stream,G.state),K(v=="{"?He:qe)}function zt(v){return re(G.stream,G.state),K(v=="{"?He:be)}function $t(v){return function(R){return R=="."?_(v?Gn:On):R=="variable"&&N?_(gn,v?_t:kt):K(v?be:qe)}}function On(v,R){if(R=="target")return G.marked="keyword",_(kt)}function Gn(v,R){if(R=="target")return G.marked="keyword",_(_t)}function pn(v){return v==":"?_(de,He):K(kt,Fe(";"),de)}function Sn(v){if(v=="variable")return G.marked="property",_()}function Gt(v,R){if(v=="async")return G.marked="property",_(Gt);if(v=="variable"||G.style=="keyword"){if(G.marked="property",R=="get"||R=="set")return _(Kn);var Y;return N&&G.state.fatArrowAt==G.stream.start&&(Y=G.stream.match(/^\s*:\s*/,!1))&&(G.state.fatArrowAt=G.stream.pos+Y[0].length),_(Pt)}else{if(v=="number"||v=="string")return G.marked=k?"property":G.style+" property",_(Pt);if(v=="jsonld-keyword")return _(Pt);if(N&&Le(R))return G.marked="keyword",_(Gt);if(v=="[")return _(qe,ln,Fe("]"),Pt);if(v=="spread")return _(be,Pt);if(R=="*")return G.marked="keyword",_(Gt);if(v==":")return K(Pt)}}function Kn(v){return v!="variable"?K(Pt):(G.marked="property",_(Z))}function Pt(v){if(v==":")return _(be);if(v=="(")return K(Z)}function rt(v,R,Y){function oe(Pe,Xe){if(Y?Y.indexOf(Pe)>-1:Pe==","){var me=G.state.lexical;return me.info=="call"&&(me.pos=(me.pos||0)+1),_(function(It,fn){return It==R||fn==R?K():K(v)},oe)}return Pe==R||Xe==R?_():Y&&Y.indexOf(";")>-1?K(v):_(Fe(R))}return function(Pe,Xe){return Pe==R||Xe==R?_():K(v,oe)}}function mn(v,R,Y){for(var oe=3;oe<arguments.length;oe++)G.cc.push(arguments[oe]);return _(ve(R,Y),rt(v,R),de)}function Rt(v){return v=="}"?_():K(He,Rt)}function ln(v,R){if(N){if(v==":")return _(Re);if(R=="?")return _(ln)}}function xe(v,R){if(N&&(v==":"||R=="in"))return _(Re)}function Nt(v){if(N&&v==":")return G.stream.match(/^\s*\w+\s+is\b/,!1)?_(qe,ut,Re):_(Re)}function ut(v,R){if(R=="is")return G.marked="keyword",_()}function Re(v,R){if(R=="keyof"||R=="typeof"||R=="infer"||R=="readonly")return G.marked="keyword",_(R=="typeof"?be:Re);if(v=="variable"||R=="void")return G.marked="type",_(Lt);if(R=="|"||R=="&")return _(Re);if(v=="string"||v=="number"||v=="atom")return _(Lt);if(v=="[")return _(ve("]"),rt(Re,"]",","),de,Lt);if(v=="{")return _(ve("}"),Kt,de,Lt);if(v=="(")return _(rt(Xt,")"),it,Lt);if(v=="<")return _(rt(Re,">"),Re);if(v=="quasi")return K(Ot,Lt)}function it(v){if(v=="=>")return _(Re)}function Kt(v){return v.match(/[\}\)\]]/)?_():v==","||v==";"?_(Kt):K(ot,Kt)}function ot(v,R){if(v=="variable"||G.style=="keyword")return G.marked="property",_(ot);if(R=="?"||v=="number"||v=="string")return _(ot);if(v==":")return _(Re);if(v=="[")return _(Fe("variable"),xe,Fe("]"),ot);if(v=="(")return K(ee,ot);if(!v.match(/[;\}\)\],]/))return _()}function Ot(v,R){return v!="quasi"?K():R.slice(R.length-2)!="${"?_(Ot):_(Re,ht)}function ht(v){if(v=="}")return G.marked="string-2",G.state.tokenize=V,_(Ot)}function Xt(v,R){return v=="variable"&&G.stream.match(/^\s*[?:]/,!1)||R=="?"?_(Xt):v==":"?_(Re):v=="spread"?_(Xt):K(Re)}function Lt(v,R){if(R=="<")return _(ve(">"),rt(Re,">"),de,Lt);if(R=="|"||v=="."||R=="&")return _(Re);if(v=="[")return _(Re,Fe("]"),Lt);if(R=="extends"||R=="implements")return G.marked="keyword",_(Re);if(R=="?")return _(Re,Fe(":"),Re)}function gn(v,R){if(R=="<")return _(ve(">"),rt(Re,">"),de,Lt)}function nn(){return K(Re,ze)}function ze(v,R){if(R=="=")return _(Re)}function rn(v,R){return R=="enum"?(G.marked="keyword",_(En)):K(w,ln,m,D)}function w(v,R){if(N&&Le(R))return G.marked="keyword",_(w);if(v=="variable")return Ie(R),_();if(v=="spread")return _(w);if(v=="[")return mn(L,"]");if(v=="{")return mn(S,"}")}function S(v,R){return v=="variable"&&!G.stream.match(/^\s*:/,!1)?(Ie(R),_(m)):(v=="variable"&&(G.marked="property"),v=="spread"?_(w):v=="}"?K():v=="["?_(qe,Fe("]"),Fe(":"),S):_(Fe(":"),w,m))}function L(){return K(w,m)}function m(v,R){if(R=="=")return _(be)}function D(v){if(v==",")return _(rn)}function x(v,R){if(v=="keyword b"&&R=="else")return _(ve("form","else"),He,de)}function M(v,R){if(R=="await")return _(M);if(v=="(")return _(ve(")"),B,de)}function B(v){return v=="var"?_(rn,te):v=="variable"?_(te):K(te)}function te(v,R){return v==")"?_():v==";"?_(te):R=="in"||R=="of"?(G.marked="keyword",_(qe,te)):K(qe,te)}function Z(v,R){if(R=="*")return G.marked="keyword",_(Z);if(v=="variable")return Ie(R),_(Z);if(v=="(")return _(Je,ve(")"),rt(Ae,")"),de,Nt,He,Ne);if(N&&R=="<")return _(ve(">"),rt(nn,">"),de,Z)}function ee(v,R){if(R=="*")return G.marked="keyword",_(ee);if(v=="variable")return Ie(R),_(ee);if(v=="(")return _(Je,ve(")"),rt(Ae,")"),de,Nt,Ne);if(N&&R=="<")return _(ve(">"),rt(nn,">"),de,ee)}function he(v,R){if(v=="keyword"||v=="variable")return G.marked="type",_(he);if(R=="<")return _(ve(">"),rt(nn,">"),de)}function Ae(v,R){return R=="@"&&_(qe,Ae),v=="spread"?_(Ae):N&&Le(R)?(G.marked="keyword",_(Ae)):N&&v=="this"?_(ln,m):K(w,ln,m)}function Ze(v,R){return v=="variable"?je(v,R):Me(v,R)}function je(v,R){if(v=="variable")return Ie(R),_(Me)}function Me(v,R){if(R=="<")return _(ve(">"),rt(nn,">"),de,Me);if(R=="extends"||R=="implements"||N&&v==",")return R=="implements"&&(G.marked="keyword"),_(N?Re:qe,Me);if(v=="{")return _(ve("}"),ct,de)}function ct(v,R){if(v=="async"||v=="variable"&&(R=="static"||R=="get"||R=="set"||N&&Le(R))&&G.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return G.marked="keyword",_(ct);if(v=="variable"||G.style=="keyword")return G.marked="property",_(mt,ct);if(v=="number"||v=="string")return _(mt,ct);if(v=="[")return _(qe,ln,Fe("]"),mt,ct);if(R=="*")return G.marked="keyword",_(ct);if(N&&v=="(")return K(ee,ct);if(v==";"||v==",")return _(ct);if(v=="}")return _();if(R=="@")return _(qe,ct)}function mt(v,R){if(R=="!"||R=="?")return _(mt);if(v==":")return _(Re,m);if(R=="=")return _(be);var Y=G.state.lexical.prev,oe=Y&&Y.info=="interface";return K(oe?ee:Z)}function un(v,R){return R=="*"?(G.marked="keyword",_(Bt,Fe(";"))):R=="default"?(G.marked="keyword",_(qe,Fe(";"))):v=="{"?_(rt(Yt,"}"),Bt,Fe(";")):K(He)}function Yt(v,R){if(R=="as")return G.marked="keyword",_(Fe("variable"));if(v=="variable")return K(be,Yt)}function Be(v){return v=="string"?_():v=="("?K(qe):v=="."?K(kt):K(le,cn,Bt)}function le(v,R){return v=="{"?mn(le,"}"):(v=="variable"&&Ie(R),R=="*"&&(G.marked="keyword"),_(yn))}function cn(v){if(v==",")return _(le,cn)}function yn(v,R){if(R=="as")return G.marked="keyword",_(le)}function Bt(v,R){if(R=="from")return G.marked="keyword",_(qe)}function Ye(v){return v=="]"?_():K(rt(be,"]"))}function En(){return K(ve("form"),w,Fe("{"),ve("}"),rt(rr,"}"),de,de)}function rr(){return K(w,m)}function Xr(v,R){return v.lastType=="operator"||v.lastType==","||j.test(R.charAt(0))||/[,.]/.test(R.charAt(0))}function ne(v,R,Y){return R.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(R.lastType)||R.lastType=="quasi"&&/\{\s*$/.test(v.string.slice(0,v.pos-(Y||0)))}return{startState:function(v){var R={tokenize:F,lastType:"sof",cc:[],lexical:new ge((v||0)-h,0,"block",!1),localVars:u.localVars,context:u.localVars&&new Ee(null,null,!1),indented:v||0};return u.globalVars&&typeof u.globalVars=="object"&&(R.globalVars=u.globalVars),R},token:function(v,R){if(v.sol()&&(R.lexical.hasOwnProperty("align")||(R.lexical.align=!1),R.indented=v.indentation(),re(v,R)),R.tokenize!=U&&v.eatSpace())return null;var Y=R.tokenize(v,R);return fe=="comment"?Y:(R.lastType=fe=="operator"&&(P=="++"||P=="--")?"incdec":fe,$e(R,Y,fe,P,v))},indent:function(v,R){if(v.tokenize==U||v.tokenize==V)return a.Pass;if(v.tokenize!=F)return 0;var Y=R&&R.charAt(0),oe=v.lexical,Pe;if(!/^\s*else\b/.test(R))for(var Xe=v.cc.length-1;Xe>=0;--Xe){var me=v.cc[Xe];if(me==de)oe=oe.prev;else if(me!=x&&me!=Ne)break}for(;(oe.type=="stat"||oe.type=="form")&&(Y=="}"||(Pe=v.cc[v.cc.length-1])&&(Pe==kt||Pe==_t)&&!/^[,\.=+\-*:?[\(]/.test(R));)oe=oe.prev;y&&oe.type==")"&&oe.prev.type=="stat"&&(oe=oe.prev);var It=oe.type,fn=Y==It;return It=="vardef"?oe.indented+(v.lastType=="operator"||v.lastType==","?oe.info.length+1:0):It=="form"&&Y=="{"?oe.indented:It=="form"?oe.indented+h:It=="stat"?oe.indented+(Xr(v,R)?y||h:0):oe.info=="switch"&&!fn&&u.doubleIndentSwitch!=!1?oe.indented+(/^(?:case|default)\b/.test(R)?h:2*h):oe.align?oe.column+(fn?0:1):oe.indented+(fn?0:h)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:C?null:"/*",blockCommentEnd:C?null:"*/",blockCommentContinue:C?null:" * ",lineComment:C?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:C?"json":"javascript",jsonldMode:k,jsonMode:C,expressionAllowed:ne,skipExpression:function(v){$e(v,"atom","atom","true",new a.StringStream("",2,null))}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/manifest+json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();(function(i,s){(function(a){a(Pn.exports)})(function(a){var c="CodeMirror-hint",u="CodeMirror-hint-active";a.showHint=function(P,I,F){if(!I)return P.showHint(F);F&&F.async&&(I.async=!0);var b={hint:I};if(F)for(var U in F)b[U]=F[U];return P.showHint(b)},a.defineExtension("showHint",function(P){P=C(this,this.getCursor("start"),P);var I=this.listSelections();if(!(I.length>1)){if(this.somethingSelected()){if(!P.hint.supportsSelection)return;for(var F=0;F<I.length;F++)if(I[F].head.line!=I[F].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var b=this.state.completionActive=new h(this,P);!b.options.hint||(a.signal(this,"startCompletion",this),b.update(!0))}}),a.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function h(P,I){if(this.cm=P,this.options=I,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var F=this;P.on("cursorActivity",this.activityFunc=function(){F.cursorActivity()})}}var y=window.requestAnimationFrame||function(P){return setTimeout(P,1e3/60)},k=window.cancelAnimationFrame||clearTimeout;h.prototype={close:function(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&a.signal(this.data,"close"),this.widget&&this.widget.close(),a.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(P,I){var F=P.list[I],b=this;this.cm.operation(function(){F.hint?F.hint(b.cm,P,F):b.cm.replaceRange(E(F),F.from||P.from,F.to||P.to,"complete"),a.signal(P,"pick",F),b.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(k(this.debounce),this.debounce=0);var P=this.startPos;this.data&&(P=this.data.from);var I=this.cm.getCursor(),F=this.cm.getLine(I.line);if(I.line!=this.startPos.line||F.length-I.ch!=this.startLen-this.startPos.ch||I.ch<P.ch||this.cm.somethingSelected()||!I.ch||this.options.closeCharacters.test(F.charAt(I.ch-1)))this.close();else{var b=this;this.debounce=y(function(){b.update()}),this.widget&&this.widget.disable()}},update:function(P){if(this.tick!=null){var I=this,F=++this.tick;Q(this.options.hint,this.cm,this.options,function(b){I.tick==F&&I.finishUpdate(b,P)})}},finishUpdate:function(P,I){this.data&&a.signal(this.data,"update");var F=this.widget&&this.widget.picked||I&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=P,P&&P.list.length&&(F&&P.list.length==1?this.pick(P,0):(this.widget=new O(this,P),a.signal(P,"shown")))}};function C(P,I,F){var b=P.options.hintOptions,U={};for(var V in fe)U[V]=fe[V];if(b)for(var V in b)b[V]!==void 0&&(U[V]=b[V]);if(F)for(var V in F)F[V]!==void 0&&(U[V]=F[V]);return U.hint.resolve&&(U.hint=U.hint.resolve(P,I)),U}function E(P){return typeof P=="string"?P:P.text}function N(P,I){var F={Up:function(){I.moveFocus(-1)},Down:function(){I.moveFocus(1)},PageUp:function(){I.moveFocus(-I.menuSize()+1,!0)},PageDown:function(){I.moveFocus(I.menuSize()-1,!0)},Home:function(){I.setFocus(0)},End:function(){I.setFocus(I.length-1)},Enter:I.pick,Tab:I.pick,Esc:I.close},b=/Mac/.test(navigator.platform);b&&(F["Ctrl-P"]=function(){I.moveFocus(-1)},F["Ctrl-N"]=function(){I.moveFocus(1)});var U=P.options.customKeys,V=U?{}:F;function q(ge,Se){var $e;typeof Se!="string"?$e=function(G){return Se(G,I)}:F.hasOwnProperty(Se)?$e=F[Se]:$e=Se,V[ge]=$e}if(U)for(var re in U)U.hasOwnProperty(re)&&q(re,U[re]);var De=P.options.extraKeys;if(De)for(var re in De)De.hasOwnProperty(re)&&q(re,De[re]);return V}function H(P,I){for(;I&&I!=P;){if(I.nodeName.toUpperCase()==="LI"&&I.parentNode==P)return I;I=I.parentNode}}function O(P,I){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=P,this.data=I,this.picked=!1;var F=this,b=P.cm,U=b.getInputField().ownerDocument,V=U.defaultView||U.parentWindow,q=this.hints=U.createElement("ul");q.setAttribute("role","listbox"),q.setAttribute("aria-expanded","true"),q.id=this.id;var re=P.cm.options.theme;q.className="CodeMirror-hints "+re,this.selectedHint=I.selectedHint||0;for(var De=I.list,ge=0;ge<De.length;++ge){var Se=q.appendChild(U.createElement("li")),$e=De[ge],G=c+(ge!=this.selectedHint?"":" "+u);$e.className!=null&&(G=$e.className+" "+G),Se.className=G,ge==this.selectedHint&&Se.setAttribute("aria-selected","true"),Se.id=this.id+"-"+ge,Se.setAttribute("role","option"),$e.render?$e.render(Se,I,$e):Se.appendChild(U.createTextNode($e.displayText||E($e))),Se.hintId=ge}var K=P.options.container||U.body,_=b.cursorCoords(P.options.alignWithWord?I.from:null),ie=_.left,Ie=_.bottom,Ce=!0,Le=0,Ee=0;if(K!==U.body){var Ge=["absolute","relative","fixed"].indexOf(V.getComputedStyle(K).position)!==-1,at=Ge?K:K.offsetParent,Je=at.getBoundingClientRect(),We=U.body.getBoundingClientRect();Le=Je.left-We.left-at.scrollLeft,Ee=Je.top-We.top-at.scrollTop}q.style.left=ie-Le+"px",q.style.top=Ie-Ee+"px";var Ne=V.innerWidth||Math.max(U.body.offsetWidth,U.documentElement.offsetWidth),ve=V.innerHeight||Math.max(U.body.offsetHeight,U.documentElement.offsetHeight);K.appendChild(q),b.getInputField().setAttribute("aria-autocomplete","list"),b.getInputField().setAttribute("aria-owns",this.id),b.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var de=P.options.moveOnOverlap?q.getBoundingClientRect():new DOMRect,Fe=P.options.paddingForScrollbar?q.scrollHeight>q.clientHeight+1:!1,He;setTimeout(function(){He=b.getScrollInfo()});var Ke=de.bottom-ve;if(Ke>0){var qe=de.bottom-de.top,be=_.top-(_.bottom-de.top);if(be-qe>0)q.style.top=(Ie=_.top-qe-Ee)+"px",Ce=!1;else if(qe>ve){q.style.height=ve-5+"px",q.style.top=(Ie=_.bottom-de.top-Ee)+"px";var ye=b.getCursor();I.from.ch!=ye.ch&&(_=b.cursorCoords(ye),q.style.left=(ie=_.left-Le)+"px",de=q.getBoundingClientRect())}}var Ct=de.right-Ne;if(Fe&&(Ct+=b.display.nativeBarWidth),Ct>0&&(de.right-de.left>Ne&&(q.style.width=Ne-5+"px",Ct-=de.right-de.left-Ne),q.style.left=(ie=_.left-Ct-Le)+"px"),Fe)for(var Oe=q.firstChild;Oe;Oe=Oe.nextSibling)Oe.style.paddingRight=b.display.nativeBarWidth+"px";if(b.addKeyMap(this.keyMap=N(P,{moveFocus:function(et,dt){F.changeActive(F.selectedHint+et,dt)},setFocus:function(et){F.changeActive(et)},menuSize:function(){return F.screenAmount()},length:De.length,close:function(){P.close()},pick:function(){F.pick()},data:I})),P.options.closeOnUnfocus){var kt;b.on("blur",this.onBlur=function(){kt=setTimeout(function(){P.close()},100)}),b.on("focus",this.onFocus=function(){clearTimeout(kt)})}b.on("scroll",this.onScroll=function(){var et=b.getScrollInfo(),dt=b.getWrapperElement().getBoundingClientRect();He||(He=b.getScrollInfo());var hn=Ie+He.top-et.top,zt=hn-(V.pageYOffset||(U.documentElement||U.body).scrollTop);if(Ce||(zt+=q.offsetHeight),zt<=dt.top||zt>=dt.bottom)return P.close();q.style.top=hn+"px",q.style.left=ie+He.left-et.left+"px"}),a.on(q,"dblclick",function(et){var dt=H(q,et.target||et.srcElement);dt&&dt.hintId!=null&&(F.changeActive(dt.hintId),F.pick())}),a.on(q,"click",function(et){var dt=H(q,et.target||et.srcElement);dt&&dt.hintId!=null&&(F.changeActive(dt.hintId),P.options.completeOnSingleClick&&F.pick())}),a.on(q,"mousedown",function(){setTimeout(function(){b.focus()},20)});var _t=this.getSelectedHintRange();return(_t.from!==0||_t.to!==0)&&this.scrollToActive(),a.signal(I,"select",De[this.selectedHint],q.childNodes[this.selectedHint]),!0}O.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var P=this.completion.cm.getInputField();P.removeAttribute("aria-activedescendant"),P.removeAttribute("aria-owns");var I=this.completion.cm;this.completion.options.closeOnUnfocus&&(I.off("blur",this.onBlur),I.off("focus",this.onFocus)),I.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var P=this;this.keyMap={Enter:function(){P.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(P,I){if(P>=this.data.list.length?P=I?this.data.list.length-1:0:P<0&&(P=I?0:this.data.list.length-1),this.selectedHint!=P){var F=this.hints.childNodes[this.selectedHint];F&&(F.className=F.className.replace(" "+u,""),F.removeAttribute("aria-selected")),F=this.hints.childNodes[this.selectedHint=P],F.className+=" "+u,F.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",F.id),this.scrollToActive(),a.signal(this.data,"select",this.data.list[this.selectedHint],F)}},scrollToActive:function(){var P=this.getSelectedHintRange(),I=this.hints.childNodes[P.from],F=this.hints.childNodes[P.to],b=this.hints.firstChild;I.offsetTop<this.hints.scrollTop?this.hints.scrollTop=I.offsetTop-b.offsetTop:F.offsetTop+F.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=F.offsetTop+F.offsetHeight-this.hints.clientHeight+b.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var P=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-P),to:Math.min(this.data.list.length-1,this.selectedHint+P)}}};function j(P,I){if(!P.somethingSelected())return I;for(var F=[],b=0;b<I.length;b++)I[b].supportsSelection&&F.push(I[b]);return F}function Q(P,I,F,b){if(P.async)P(I,b,F);else{var U=P(I,F);U&&U.then?U.then(b):b(U)}}function ae(P,I){var F=P.getHelpers(I,"hint"),b;if(F.length){var U=function(V,q,re){var De=j(V,F);function ge(Se){if(Se==De.length)return q(null);Q(De[Se],V,re,function($e){$e&&$e.list.length>0?q($e):ge(Se+1)})}ge(0)};return U.async=!0,U.supportsSelection=!0,U}else return(b=P.getHelper(P.getCursor(),"hintWords"))?function(V){return a.hint.fromList(V,{words:b})}:a.hint.anyword?function(V,q){return a.hint.anyword(V,q)}:function(){}}a.registerHelper("hint","auto",{resolve:ae}),a.registerHelper("hint","fromList",function(P,I){var F=P.getCursor(),b=P.getTokenAt(F),U,V=a.Pos(F.line,b.start),q=F;b.start<F.ch&&/\w/.test(b.string.charAt(F.ch-b.start-1))?U=b.string.substr(0,F.ch-b.start):(U="",V=F);for(var re=[],De=0;De<I.words.length;De++){var ge=I.words[De];ge.slice(0,U.length)==U&&re.push(ge)}if(re.length)return{list:re,from:V,to:q}}),a.commands.autocomplete=a.showHint;var fe={hint:a.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};a.defineOption("hintOptions",null)})})();(function(i,s){(function(a){a(Pn.exports)})(function(a){var c=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),u=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function y(O){return O&&O.bracketRegex||/[(){}[\]]/}function k(O,j,Q){var ae=O.getLineHandle(j.line),fe=j.ch-1,P=Q&&Q.afterCursor;P==null&&(P=/(^| )cm-fat-cursor($| )/.test(O.getWrapperElement().className));var I=y(Q),F=!P&&fe>=0&&I.test(ae.text.charAt(fe))&&h[ae.text.charAt(fe)]||I.test(ae.text.charAt(fe+1))&&h[ae.text.charAt(++fe)];if(!F)return null;var b=F.charAt(1)==">"?1:-1;if(Q&&Q.strict&&b>0!=(fe==j.ch))return null;var U=O.getTokenTypeAt(u(j.line,fe+1)),V=C(O,u(j.line,fe+(b>0?1:0)),b,U,Q);return V==null?null:{from:u(j.line,fe),to:V&&V.pos,match:V&&V.ch==F.charAt(0),forward:b>0}}function C(O,j,Q,ae,fe){for(var P=fe&&fe.maxScanLineLength||1e4,I=fe&&fe.maxScanLines||1e3,F=[],b=y(fe),U=Q>0?Math.min(j.line+I,O.lastLine()+1):Math.max(O.firstLine()-1,j.line-I),V=j.line;V!=U;V+=Q){var q=O.getLine(V);if(!!q){var re=Q>0?0:q.length-1,De=Q>0?q.length:-1;if(!(q.length>P))for(V==j.line&&(re=j.ch-(Q<0?1:0));re!=De;re+=Q){var ge=q.charAt(re);if(b.test(ge)&&(ae===void 0||(O.getTokenTypeAt(u(V,re+1))||"")==(ae||""))){var Se=h[ge];if(Se&&Se.charAt(1)==">"==Q>0)F.push(ge);else if(F.length)F.pop();else return{pos:u(V,re),ch:ge}}}}}return V-Q==(Q>0?O.lastLine():O.firstLine())?!1:null}function E(O,j,Q){for(var ae=O.state.matchBrackets.maxHighlightLineLength||1e3,fe=Q&&Q.highlightNonMatching,P=[],I=O.listSelections(),F=0;F<I.length;F++){var b=I[F].empty()&&k(O,I[F].head,Q);if(b&&(b.match||fe!==!1)&&O.getLine(b.from.line).length<=ae){var U=b.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";P.push(O.markText(b.from,u(b.from.line,b.from.ch+1),{className:U})),b.to&&O.getLine(b.to.line).length<=ae&&P.push(O.markText(b.to,u(b.to.line,b.to.ch+1),{className:U}))}}if(P.length){c&&O.state.focused&&O.focus();var V=function(){O.operation(function(){for(var q=0;q<P.length;q++)P[q].clear()})};if(j)setTimeout(V,800);else return V}}function N(O){O.operation(function(){O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null),O.state.matchBrackets.currentlyHighlighted=E(O,!1,O.state.matchBrackets)})}function H(O){O.state.matchBrackets&&O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null)}a.defineOption("matchBrackets",!1,function(O,j,Q){Q&&Q!=a.Init&&(O.off("cursorActivity",N),O.off("focus",N),O.off("blur",H),H(O)),j&&(O.state.matchBrackets=typeof j=="object"?j:{},O.on("cursorActivity",N),O.on("focus",N),O.on("blur",H))}),a.defineExtension("matchBrackets",function(){E(this,!0)}),a.defineExtension("findMatchingBracket",function(O,j,Q){return(Q||typeof j=="boolean")&&(Q?(Q.strict=j,j=Q):j=j?{strict:!0}:null),k(this,O,j)}),a.defineExtension("scanForBracket",function(O,j,Q,ae){return C(this,O,j,Q,ae)})})})();(function(i,s){(function(a){a(Pn.exports)})(function(a){var c={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},u=a.Pos;a.defineOption("autoCloseBrackets",!1,function(P,I,F){F&&F!=a.Init&&(P.removeKeyMap(y),P.state.closeBrackets=null),I&&(k(h(I,"pairs")),P.state.closeBrackets=I,P.addKeyMap(y))});function h(P,I){return I=="pairs"&&typeof P=="string"?P:typeof P=="object"&&P[I]!=null?P[I]:c[I]}var y={Backspace:N,Enter:H};function k(P){for(var I=0;I<P.length;I++){var F=P.charAt(I),b="'"+F+"'";y[b]||(y[b]=C(F))}}k(c.pairs+"`");function C(P){return function(I){return Q(I,P)}}function E(P){var I=P.state.closeBrackets;if(!I||I.override)return I;var F=P.getModeAt(P.getCursor());return F.closeBrackets||I}function N(P){var I=E(P);if(!I||P.getOption("disableInput"))return a.Pass;for(var F=h(I,"pairs"),b=P.listSelections(),U=0;U<b.length;U++){if(!b[U].empty())return a.Pass;var V=ae(P,b[U].head);if(!V||F.indexOf(V)%2!=0)return a.Pass}for(var U=b.length-1;U>=0;U--){var q=b[U].head;P.replaceRange("",u(q.line,q.ch-1),u(q.line,q.ch+1),"+delete")}}function H(P){var I=E(P),F=I&&h(I,"explode");if(!F||P.getOption("disableInput"))return a.Pass;for(var b=P.listSelections(),U=0;U<b.length;U++){if(!b[U].empty())return a.Pass;var V=ae(P,b[U].head);if(!V||F.indexOf(V)%2!=0)return a.Pass}P.operation(function(){var q=P.lineSeparator()||`
`;P.replaceSelection(q+q,null),O(P,-1),b=P.listSelections();for(var re=0;re<b.length;re++){var De=b[re].head.line;P.indentLine(De,null,!0),P.indentLine(De+1,null,!0)}})}function O(P,I){for(var F=[],b=P.listSelections(),U=0,V=0;V<b.length;V++){var q=b[V];q.head==P.getCursor()&&(U=V);var re=q.head.ch||I>0?{line:q.head.line,ch:q.head.ch+I}:{line:q.head.line-1};F.push({anchor:re,head:re})}P.setSelections(F,U)}function j(P){var I=a.cmpPos(P.anchor,P.head)>0;return{anchor:new u(P.anchor.line,P.anchor.ch+(I?-1:1)),head:new u(P.head.line,P.head.ch+(I?1:-1))}}function Q(P,I){var F=E(P);if(!F||P.getOption("disableInput"))return a.Pass;var b=h(F,"pairs"),U=b.indexOf(I);if(U==-1)return a.Pass;for(var V=h(F,"closeBefore"),q=h(F,"triples"),re=b.charAt(U+1)==I,De=P.listSelections(),ge=U%2==0,Se,$e=0;$e<De.length;$e++){var G=De[$e],K=G.head,_,ie=P.getRange(K,u(K.line,K.ch+1));if(ge&&!G.empty())_="surround";else if((re||!ge)&&ie==I)re&&fe(P,K)?_="both":q.indexOf(I)>=0&&P.getRange(K,u(K.line,K.ch+3))==I+I+I?_="skipThree":_="skip";else if(re&&K.ch>1&&q.indexOf(I)>=0&&P.getRange(u(K.line,K.ch-2),K)==I+I){if(K.ch>2&&/\bstring/.test(P.getTokenTypeAt(u(K.line,K.ch-2))))return a.Pass;_="addFour"}else if(re){var Ie=K.ch==0?" ":P.getRange(u(K.line,K.ch-1),K);if(!a.isWordChar(ie)&&Ie!=I&&!a.isWordChar(Ie))_="both";else return a.Pass}else if(ge&&(ie.length===0||/\s/.test(ie)||V.indexOf(ie)>-1))_="both";else return a.Pass;if(!Se)Se=_;else if(Se!=_)return a.Pass}var Ce=U%2?b.charAt(U-1):I,Le=U%2?I:b.charAt(U+1);P.operation(function(){if(Se=="skip")O(P,1);else if(Se=="skipThree")O(P,3);else if(Se=="surround"){for(var Ee=P.getSelections(),Ge=0;Ge<Ee.length;Ge++)Ee[Ge]=Ce+Ee[Ge]+Le;P.replaceSelections(Ee,"around"),Ee=P.listSelections().slice();for(var Ge=0;Ge<Ee.length;Ge++)Ee[Ge]=j(Ee[Ge]);P.setSelections(Ee)}else Se=="both"?(P.replaceSelection(Ce+Le,null),P.triggerElectric(Ce+Le),O(P,-1)):Se=="addFour"&&(P.replaceSelection(Ce+Ce+Ce+Ce,"before"),O(P,1))})}function ae(P,I){var F=P.getRange(u(I.line,I.ch-1),u(I.line,I.ch+1));return F.length==2?F:null}function fe(P,I){var F=P.getTokenAt(u(I.line,I.ch+1));return/\bstring/.test(F.type)&&F.start==I.ch&&(I.ch==0||!/\bstring/.test(P.getTokenTypeAt(I)))}})})();(function(i,s){(function(a){a(Pn.exports)})(function(a){a.runMode=function(c,u,h,y){var k=a.getMode(a.defaults,u),C=y&&y.tabSize||a.defaults.tabSize;if(h.appendChild){var E=/MSIE \d/.test(navigator.userAgent),N=E&&(document.documentMode==null||document.documentMode<9),H=h,O=0;H.innerHTML="",h=function(F,b){if(F==`
`){H.appendChild(document.createTextNode(N?"\r":F)),O=0;return}for(var U="",V=0;;){var q=F.indexOf("	",V);if(q==-1){U+=F.slice(V),O+=F.length-V;break}else{O+=q-V,U+=F.slice(V,q);var re=C-O%C;O+=re;for(var De=0;De<re;++De)U+=" ";V=q+1}}if(b){var ge=H.appendChild(document.createElement("span"));ge.className="cm-"+b.replace(/ +/g," cm-"),ge.appendChild(document.createTextNode(U))}else H.appendChild(document.createTextNode(U))}}for(var j=a.splitLines(c),Q=y&&y.state||a.startState(k),ae=0,fe=j.length;ae<fe;++ae){ae&&h(`
`);var P=new a.StringStream(j[ae],null,{lookAhead:function(F){return j[ae+F]},baseToken:function(){}});for(!P.string&&k.blankLine&&k.blankLine(Q);!P.eol();){var I=k.token(P,Q);h(P.current(),I,ae,P.start,Q,k),P.start=P.pos}}}})})();var Lu={exports:{}};(function(i,s){(function(a,c){i.exports=c()})(an,function(){function a(w,S){for(var L=0;L<S.length;L++){var m=S[L];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(w,m.key,m)}}function c(w,S,L){return S&&a(w.prototype,S),L&&a(w,L),w}function u(w,S){if(!!w){if(typeof w=="string")return h(w,S);var L=Object.prototype.toString.call(w).slice(8,-1);if(L==="Object"&&w.constructor&&(L=w.constructor.name),L==="Map"||L==="Set")return Array.from(w);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return h(w,S)}}function h(w,S){(S==null||S>w.length)&&(S=w.length);for(var L=0,m=new Array(S);L<S;L++)m[L]=w[L];return m}function y(w,S){var L=typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(L)return(L=L.call(w)).next.bind(L);if(Array.isArray(w)||(L=u(w))||S&&w&&typeof w.length=="number"){L&&(w=L);var m=0;return function(){return m>=w.length?{done:!0}:{done:!1,value:w[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k={exports:{}};function C(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function E(w){k.exports.defaults=w}k.exports={defaults:C(),getDefaults:C,changeDefaults:E};var N=/[&<>"']/,H=/[&<>"']/g,O=/[<>"']|&(?!#?\w+;)/,j=/[<>"']|&(?!#?\w+;)/g,Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ae=function(S){return Q[S]};function fe(w,S){if(S){if(N.test(w))return w.replace(H,ae)}else if(O.test(w))return w.replace(j,ae);return w}var P=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function I(w){return w.replace(P,function(S,L){return L=L.toLowerCase(),L==="colon"?":":L.charAt(0)==="#"?L.charAt(1)==="x"?String.fromCharCode(parseInt(L.substring(2),16)):String.fromCharCode(+L.substring(1)):""})}var F=/(^|[^\[])\^/g;function b(w,S){w=w.source||w,S=S||"";var L={replace:function(D,x){return x=x.source||x,x=x.replace(F,"$1"),w=w.replace(D,x),L},getRegex:function(){return new RegExp(w,S)}};return L}var U=/[^\w:]/g,V=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function q(w,S,L){if(w){var m;try{m=decodeURIComponent(I(L)).replace(U,"").toLowerCase()}catch{return null}if(m.indexOf("javascript:")===0||m.indexOf("vbscript:")===0||m.indexOf("data:")===0)return null}S&&!V.test(L)&&(L=$e(S,L));try{L=encodeURI(L).replace(/%25/g,"%")}catch{return null}return L}var re={},De=/^[^:]+:\/*[^/]*$/,ge=/^([^:]+:)[\s\S]*$/,Se=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $e(w,S){re[" "+w]||(De.test(w)?re[" "+w]=w+"/":re[" "+w]=ie(w,"/",!0)),w=re[" "+w];var L=w.indexOf(":")===-1;return S.substring(0,2)==="//"?L?S:w.replace(ge,"$1")+S:S.charAt(0)==="/"?L?S:w.replace(Se,"$1")+S:w+S}var G={exec:function(){}};function K(w){for(var S=1,L,m;S<arguments.length;S++){L=arguments[S];for(m in L)Object.prototype.hasOwnProperty.call(L,m)&&(w[m]=L[m])}return w}function _(w,S){var L=w.replace(/\|/g,function(x,M,B){for(var te=!1,Z=M;--Z>=0&&B[Z]==="\\";)te=!te;return te?"|":" |"}),m=L.split(/ \|/),D=0;if(m.length>S)m.splice(S);else for(;m.length<S;)m.push("");for(;D<m.length;D++)m[D]=m[D].trim().replace(/\\\|/g,"|");return m}function ie(w,S,L){var m=w.length;if(m===0)return"";for(var D=0;D<m;){var x=w.charAt(m-D-1);if(x===S&&!L)D++;else if(x!==S&&L)D++;else break}return w.substr(0,m-D)}function Ie(w,S){if(w.indexOf(S[1])===-1)return-1;for(var L=w.length,m=0,D=0;D<L;D++)if(w[D]==="\\")D++;else if(w[D]===S[0])m++;else if(w[D]===S[1]&&(m--,m<0))return D;return-1}function Ce(w){w&&w.sanitize&&!w.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Le(w,S){if(S<1)return"";for(var L="";S>1;)S&1&&(L+=w),S>>=1,w+=w;return L+w}var Ee={escape:fe,unescape:I,edit:b,cleanUrl:q,resolveUrl:$e,noopTest:G,merge:K,splitCells:_,rtrim:ie,findClosingBracket:Ie,checkSanitizeDeprecation:Ce,repeatString:Le},Ge=k.exports.defaults,at=Ee.rtrim,Je=Ee.splitCells,We=Ee.escape,Ne=Ee.findClosingBracket;function ve(w,S,L){var m=S.href,D=S.title?We(S.title):null,x=w[1].replace(/\\([\[\]])/g,"$1");return w[0].charAt(0)!=="!"?{type:"link",raw:L,href:m,title:D,text:x}:{type:"image",raw:L,href:m,title:D,text:We(x)}}function de(w,S){var L=w.match(/^(\s+)(?:```)/);if(L===null)return S;var m=L[1];return S.split(`
`).map(function(D){var x=D.match(/^\s+/);if(x===null)return D;var M=x[0];return M.length>=m.length?D.slice(m.length):D}).join(`
`)}var Fe=function(){function w(L){this.options=L||Ge}var S=w.prototype;return S.space=function(m){var D=this.rules.block.newline.exec(m);if(D)return D[0].length>1?{type:"space",raw:D[0]}:{raw:`
`}},S.code=function(m){var D=this.rules.block.code.exec(m);if(D){var x=D[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:D[0],codeBlockStyle:"indented",text:this.options.pedantic?x:at(x,`
`)}}},S.fences=function(m){var D=this.rules.block.fences.exec(m);if(D){var x=D[0],M=de(x,D[3]||"");return{type:"code",raw:x,lang:D[2]?D[2].trim():D[2],text:M}}},S.heading=function(m){var D=this.rules.block.heading.exec(m);if(D){var x=D[2].trim();if(/#$/.test(x)){var M=at(x,"#");(this.options.pedantic||!M||/ $/.test(M))&&(x=M.trim())}return{type:"heading",raw:D[0],depth:D[1].length,text:x}}},S.nptable=function(m){var D=this.rules.block.nptable.exec(m);if(D){var x={type:"table",header:Je(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split(`
`):[],raw:D[0]};if(x.header.length===x.align.length){var M=x.align.length,B;for(B=0;B<M;B++)/^ *-+: *$/.test(x.align[B])?x.align[B]="right":/^ *:-+: *$/.test(x.align[B])?x.align[B]="center":/^ *:-+ *$/.test(x.align[B])?x.align[B]="left":x.align[B]=null;for(M=x.cells.length,B=0;B<M;B++)x.cells[B]=Je(x.cells[B],x.header.length);return x}}},S.hr=function(m){var D=this.rules.block.hr.exec(m);if(D)return{type:"hr",raw:D[0]}},S.blockquote=function(m){var D=this.rules.block.blockquote.exec(m);if(D){var x=D[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:D[0],text:x}}},S.list=function(m){var D=this.rules.block.list.exec(m);if(D){var x=D[0],M=D[2],B=M.length>1,te={type:"list",raw:x,ordered:B,start:B?+M.slice(0,-1):"",loose:!1,items:[]},Z=D[0].match(this.rules.block.item),ee=!1,he,Ae,Ze,je,Me,ct,mt,un,Yt,Be=Z.length;Ze=this.rules.block.listItemStart.exec(Z[0]);for(var le=0;le<Be;le++){if(he=Z[le],x=he,this.options.pedantic||(Yt=he.match(new RegExp("\\n\\s*\\n {0,"+(Ze[0].length-1)+"}\\S")),Yt&&(Me=he.length-Yt.index+Z.slice(le+1).join(`
`).length,te.raw=te.raw.substring(0,te.raw.length-Me),he=he.substring(0,Yt.index),x=he,Be=le+1)),le!==Be-1){if(je=this.rules.block.listItemStart.exec(Z[le+1]),this.options.pedantic?je[1].length>Ze[1].length:je[1].length>=Ze[0].length||je[1].length>3){Z.splice(le,2,Z[le]+(!this.options.pedantic&&je[1].length<Ze[0].length&&!Z[le].match(/\n$/)?"":`
`)+Z[le+1]),le--,Be--;continue}else(!this.options.pedantic||this.options.smartLists?je[2][je[2].length-1]!==M[M.length-1]:B===(je[2].length===1))&&(Me=Z.slice(le+1).join(`
`).length,te.raw=te.raw.substring(0,te.raw.length-Me),le=Be-1);Ze=je}Ae=he.length,he=he.replace(/^ *([*+-]|\d+[.)]) ?/,""),~he.indexOf(`
 `)&&(Ae-=he.length,he=this.options.pedantic?he.replace(/^ {1,4}/gm,""):he.replace(new RegExp("^ {1,"+Ae+"}","gm"),"")),he=at(he,`
`),le!==Be-1&&(x=x+`
`),ct=ee||/\n\n(?!\s*$)/.test(x),le!==Be-1&&(ee=x.slice(-2)===`

`,ct||(ct=ee)),ct&&(te.loose=!0),this.options.gfm&&(mt=/^\[[ xX]\] /.test(he),un=void 0,mt&&(un=he[1]!==" ",he=he.replace(/^\[[ xX]\] +/,""))),te.items.push({type:"list_item",raw:x,task:mt,checked:un,loose:ct,text:he})}return te}},S.html=function(m){var D=this.rules.block.html.exec(m);if(D)return{type:this.options.sanitize?"paragraph":"html",raw:D[0],pre:!this.options.sanitizer&&(D[1]==="pre"||D[1]==="script"||D[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(D[0]):We(D[0]):D[0]}},S.def=function(m){var D=this.rules.block.def.exec(m);if(D){D[3]&&(D[3]=D[3].substring(1,D[3].length-1));var x=D[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:x,raw:D[0],href:D[2],title:D[3]}}},S.table=function(m){var D=this.rules.block.table.exec(m);if(D){var x={type:"table",header:Je(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split(`
`):[]};if(x.header.length===x.align.length){x.raw=D[0];var M=x.align.length,B;for(B=0;B<M;B++)/^ *-+: *$/.test(x.align[B])?x.align[B]="right":/^ *:-+: *$/.test(x.align[B])?x.align[B]="center":/^ *:-+ *$/.test(x.align[B])?x.align[B]="left":x.align[B]=null;for(M=x.cells.length,B=0;B<M;B++)x.cells[B]=Je(x.cells[B].replace(/^ *\| *| *\| *$/g,""),x.header.length);return x}}},S.lheading=function(m){var D=this.rules.block.lheading.exec(m);if(D)return{type:"heading",raw:D[0],depth:D[2].charAt(0)==="="?1:2,text:D[1]}},S.paragraph=function(m){var D=this.rules.block.paragraph.exec(m);if(D)return{type:"paragraph",raw:D[0],text:D[1].charAt(D[1].length-1)===`
`?D[1].slice(0,-1):D[1]}},S.text=function(m){var D=this.rules.block.text.exec(m);if(D)return{type:"text",raw:D[0],text:D[0]}},S.escape=function(m){var D=this.rules.inline.escape.exec(m);if(D)return{type:"escape",raw:D[0],text:We(D[1])}},S.tag=function(m,D,x){var M=this.rules.inline.tag.exec(m);if(M)return!D&&/^<a /i.test(M[0])?D=!0:D&&/^<\/a>/i.test(M[0])&&(D=!1),!x&&/^<(pre|code|kbd|script)(\s|>)/i.test(M[0])?x=!0:x&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(M[0])&&(x=!1),{type:this.options.sanitize?"text":"html",raw:M[0],inLink:D,inRawBlock:x,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(M[0]):We(M[0]):M[0]}},S.link=function(m){var D=this.rules.inline.link.exec(m);if(D){var x=D[2].trim();if(!this.options.pedantic&&/^</.test(x)){if(!/>$/.test(x))return;var M=at(x.slice(0,-1),"\\");if((x.length-M.length)%2===0)return}else{var B=Ne(D[2],"()");if(B>-1){var te=D[0].indexOf("!")===0?5:4,Z=te+D[1].length+B;D[2]=D[2].substring(0,B),D[0]=D[0].substring(0,Z).trim(),D[3]=""}}var ee=D[2],he="";if(this.options.pedantic){var Ae=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ee);Ae&&(ee=Ae[1],he=Ae[3])}else he=D[3]?D[3].slice(1,-1):"";return ee=ee.trim(),/^</.test(ee)&&(this.options.pedantic&&!/>$/.test(x)?ee=ee.slice(1):ee=ee.slice(1,-1)),ve(D,{href:ee&&ee.replace(this.rules.inline._escapes,"$1"),title:he&&he.replace(this.rules.inline._escapes,"$1")},D[0])}},S.reflink=function(m,D){var x;if((x=this.rules.inline.reflink.exec(m))||(x=this.rules.inline.nolink.exec(m))){var M=(x[2]||x[1]).replace(/\s+/g," ");if(M=D[M.toLowerCase()],!M||!M.href){var B=x[0].charAt(0);return{type:"text",raw:B,text:B}}return ve(x,M,x[0])}},S.emStrong=function(m,D,x){x===void 0&&(x="");var M=this.rules.inline.emStrong.lDelim.exec(m);if(!!M&&!(M[3]&&x.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var B=M[1]||M[2]||"";if(!B||B&&(x===""||this.rules.inline.punctuation.exec(x))){var te=M[0].length-1,Z,ee,he=te,Ae=0,Ze=M[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ze.lastIndex=0,D=D.slice(-1*m.length+te);(M=Ze.exec(D))!=null;)if(Z=M[1]||M[2]||M[3]||M[4]||M[5]||M[6],!!Z){if(ee=Z.length,M[3]||M[4]){he+=ee;continue}else if((M[5]||M[6])&&te%3&&!((te+ee)%3)){Ae+=ee;continue}if(he-=ee,!(he>0))return ee=Math.min(ee,ee+he+Ae),Math.min(te,ee)%2?{type:"em",raw:m.slice(0,te+M.index+ee+1),text:m.slice(1,te+M.index+ee)}:{type:"strong",raw:m.slice(0,te+M.index+ee+1),text:m.slice(2,te+M.index+ee-1)}}}}},S.codespan=function(m){var D=this.rules.inline.code.exec(m);if(D){var x=D[2].replace(/\n/g," "),M=/[^ ]/.test(x),B=/^ /.test(x)&&/ $/.test(x);return M&&B&&(x=x.substring(1,x.length-1)),x=We(x,!0),{type:"codespan",raw:D[0],text:x}}},S.br=function(m){var D=this.rules.inline.br.exec(m);if(D)return{type:"br",raw:D[0]}},S.del=function(m){var D=this.rules.inline.del.exec(m);if(D)return{type:"del",raw:D[0],text:D[2]}},S.autolink=function(m,D){var x=this.rules.inline.autolink.exec(m);if(x){var M,B;return x[2]==="@"?(M=We(this.options.mangle?D(x[1]):x[1]),B="mailto:"+M):(M=We(x[1]),B=M),{type:"link",raw:x[0],text:M,href:B,tokens:[{type:"text",raw:M,text:M}]}}},S.url=function(m,D){var x;if(x=this.rules.inline.url.exec(m)){var M,B;if(x[2]==="@")M=We(this.options.mangle?D(x[0]):x[0]),B="mailto:"+M;else{var te;do te=x[0],x[0]=this.rules.inline._backpedal.exec(x[0])[0];while(te!==x[0]);M=We(x[0]),x[1]==="www."?B="http://"+M:B=M}return{type:"link",raw:x[0],text:M,href:B,tokens:[{type:"text",raw:M,text:M}]}}},S.inlineText=function(m,D,x){var M=this.rules.inline.text.exec(m);if(M){var B;return D?B=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(M[0]):We(M[0]):M[0]:B=We(this.options.smartypants?x(M[0]):M[0]),{type:"text",raw:M[0],text:B}}},w}(),He=Ee.noopTest,Ke=Ee.edit,qe=Ee.merge,be={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:He,table:He,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};be._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,be._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,be.def=Ke(be.def).replace("label",be._label).replace("title",be._title).getRegex(),be.bullet=/(?:[*+-]|\d{1,9}[.)])/,be.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,be.item=Ke(be.item,"gm").replace(/bull/g,be.bullet).getRegex(),be.listItemStart=Ke(/^( *)(bull) */).replace("bull",be.bullet).getRegex(),be.list=Ke(be.list).replace(/bull/g,be.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+be.def.source+")").getRegex(),be._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",be._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,be.html=Ke(be.html,"i").replace("comment",be._comment).replace("tag",be._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),be.paragraph=Ke(be._paragraph).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",be._tag).getRegex(),be.blockquote=Ke(be.blockquote).replace("paragraph",be.paragraph).getRegex(),be.normal=qe({},be),be.gfm=qe({},be.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),be.gfm.nptable=Ke(be.gfm.nptable).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",be._tag).getRegex(),be.gfm.table=Ke(be.gfm.table).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",be._tag).getRegex(),be.pedantic=qe({},be.normal,{html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",be._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:He,paragraph:Ke(be.normal._paragraph).replace("hr",be.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",be.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ye={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:He,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:He,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};ye._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ye.punctuation=Ke(ye.punctuation).replace(/punctuation/g,ye._punctuation).getRegex(),ye.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ye.escapedEmSt=/\\\*|\\_/g,ye._comment=Ke(be._comment).replace("(?:-->|$)","-->").getRegex(),ye.emStrong.lDelim=Ke(ye.emStrong.lDelim).replace(/punct/g,ye._punctuation).getRegex(),ye.emStrong.rDelimAst=Ke(ye.emStrong.rDelimAst,"g").replace(/punct/g,ye._punctuation).getRegex(),ye.emStrong.rDelimUnd=Ke(ye.emStrong.rDelimUnd,"g").replace(/punct/g,ye._punctuation).getRegex(),ye._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ye._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ye._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ye.autolink=Ke(ye.autolink).replace("scheme",ye._scheme).replace("email",ye._email).getRegex(),ye._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ye.tag=Ke(ye.tag).replace("comment",ye._comment).replace("attribute",ye._attribute).getRegex(),ye._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ye._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ye._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ye.link=Ke(ye.link).replace("label",ye._label).replace("href",ye._href).replace("title",ye._title).getRegex(),ye.reflink=Ke(ye.reflink).replace("label",ye._label).getRegex(),ye.reflinkSearch=Ke(ye.reflinkSearch,"g").replace("reflink",ye.reflink).replace("nolink",ye.nolink).getRegex(),ye.normal=qe({},ye),ye.pedantic=qe({},ye.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",ye._label).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ye._label).getRegex()}),ye.gfm=qe({},ye.normal,{escape:Ke(ye.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ye.gfm.url=Ke(ye.gfm.url,"i").replace("email",ye.gfm._extended_email).getRegex(),ye.breaks=qe({},ye.gfm,{br:Ke(ye.br).replace("{2,}","*").getRegex(),text:Ke(ye.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Ct={block:be,inline:ye},Oe=Fe,kt=k.exports.defaults,_t=Ct.block,et=Ct.inline,dt=Ee.repeatString;function hn(w){return w.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function zt(w){var S="",L,m,D=w.length;for(L=0;L<D;L++)m=w.charCodeAt(L),Math.random()>.5&&(m="x"+m.toString(16)),S+="&#"+m+";";return S}var $t=function(){function w(L){this.tokens=[],this.tokens.links=Object.create(null),this.options=L||kt,this.options.tokenizer=this.options.tokenizer||new Oe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var m={block:_t.normal,inline:et.normal};this.options.pedantic?(m.block=_t.pedantic,m.inline=et.pedantic):this.options.gfm&&(m.block=_t.gfm,this.options.breaks?m.inline=et.breaks:m.inline=et.gfm),this.tokenizer.rules=m}w.lex=function(m,D){var x=new w(D);return x.lex(m)},w.lexInline=function(m,D){var x=new w(D);return x.inlineTokens(m)};var S=w.prototype;return S.lex=function(m){return m=m.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(m,this.tokens,!0),this.inline(this.tokens),this.tokens},S.blockTokens=function(m,D,x){D===void 0&&(D=[]),x===void 0&&(x=!0),this.options.pedantic&&(m=m.replace(/^ +$/gm,""));for(var M,B,te,Z;m;){if(M=this.tokenizer.space(m)){m=m.substring(M.raw.length),M.type&&D.push(M);continue}if(M=this.tokenizer.code(m)){m=m.substring(M.raw.length),Z=D[D.length-1],Z&&Z.type==="paragraph"?(Z.raw+=`
`+M.raw,Z.text+=`
`+M.text):D.push(M);continue}if(M=this.tokenizer.fences(m)){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.heading(m)){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.nptable(m)){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.hr(m)){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.blockquote(m)){m=m.substring(M.raw.length),M.tokens=this.blockTokens(M.text,[],x),D.push(M);continue}if(M=this.tokenizer.list(m)){for(m=m.substring(M.raw.length),te=M.items.length,B=0;B<te;B++)M.items[B].tokens=this.blockTokens(M.items[B].text,[],!1);D.push(M);continue}if(M=this.tokenizer.html(m)){m=m.substring(M.raw.length),D.push(M);continue}if(x&&(M=this.tokenizer.def(m))){m=m.substring(M.raw.length),this.tokens.links[M.tag]||(this.tokens.links[M.tag]={href:M.href,title:M.title});continue}if(M=this.tokenizer.table(m)){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.lheading(m)){m=m.substring(M.raw.length),D.push(M);continue}if(x&&(M=this.tokenizer.paragraph(m))){m=m.substring(M.raw.length),D.push(M);continue}if(M=this.tokenizer.text(m)){m=m.substring(M.raw.length),Z=D[D.length-1],Z&&Z.type==="text"?(Z.raw+=`
`+M.raw,Z.text+=`
`+M.text):D.push(M);continue}if(m){var ee="Infinite loop on byte: "+m.charCodeAt(0);if(this.options.silent){console.error(ee);break}else throw new Error(ee)}}return D},S.inline=function(m){var D,x,M,B,te,Z,ee=m.length;for(D=0;D<ee;D++)switch(Z=m[D],Z.type){case"paragraph":case"text":case"heading":{Z.tokens=[],this.inlineTokens(Z.text,Z.tokens);break}case"table":{for(Z.tokens={header:[],cells:[]},B=Z.header.length,x=0;x<B;x++)Z.tokens.header[x]=[],this.inlineTokens(Z.header[x],Z.tokens.header[x]);for(B=Z.cells.length,x=0;x<B;x++)for(te=Z.cells[x],Z.tokens.cells[x]=[],M=0;M<te.length;M++)Z.tokens.cells[x][M]=[],this.inlineTokens(te[M],Z.tokens.cells[x][M]);break}case"blockquote":{this.inline(Z.tokens);break}case"list":{for(B=Z.items.length,x=0;x<B;x++)this.inline(Z.items[x].tokens);break}}return m},S.inlineTokens=function(m,D,x,M){D===void 0&&(D=[]),x===void 0&&(x=!1),M===void 0&&(M=!1);var B,te,Z=m,ee,he,Ae;if(this.tokens.links){var Ze=Object.keys(this.tokens.links);if(Ze.length>0)for(;(ee=this.tokenizer.rules.inline.reflinkSearch.exec(Z))!=null;)Ze.includes(ee[0].slice(ee[0].lastIndexOf("[")+1,-1))&&(Z=Z.slice(0,ee.index)+"["+dt("a",ee[0].length-2)+"]"+Z.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ee=this.tokenizer.rules.inline.blockSkip.exec(Z))!=null;)Z=Z.slice(0,ee.index)+"["+dt("a",ee[0].length-2)+"]"+Z.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ee=this.tokenizer.rules.inline.escapedEmSt.exec(Z))!=null;)Z=Z.slice(0,ee.index)+"++"+Z.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;m;){if(he||(Ae=""),he=!1,B=this.tokenizer.escape(m)){m=m.substring(B.raw.length),D.push(B);continue}if(B=this.tokenizer.tag(m,x,M)){m=m.substring(B.raw.length),x=B.inLink,M=B.inRawBlock;var je=D[D.length-1];je&&B.type==="text"&&je.type==="text"?(je.raw+=B.raw,je.text+=B.text):D.push(B);continue}if(B=this.tokenizer.link(m)){m=m.substring(B.raw.length),B.type==="link"&&(B.tokens=this.inlineTokens(B.text,[],!0,M)),D.push(B);continue}if(B=this.tokenizer.reflink(m,this.tokens.links)){m=m.substring(B.raw.length);var Me=D[D.length-1];B.type==="link"?(B.tokens=this.inlineTokens(B.text,[],!0,M),D.push(B)):Me&&B.type==="text"&&Me.type==="text"?(Me.raw+=B.raw,Me.text+=B.text):D.push(B);continue}if(B=this.tokenizer.emStrong(m,Z,Ae)){m=m.substring(B.raw.length),B.tokens=this.inlineTokens(B.text,[],x,M),D.push(B);continue}if(B=this.tokenizer.codespan(m)){m=m.substring(B.raw.length),D.push(B);continue}if(B=this.tokenizer.br(m)){m=m.substring(B.raw.length),D.push(B);continue}if(B=this.tokenizer.del(m)){m=m.substring(B.raw.length),B.tokens=this.inlineTokens(B.text,[],x,M),D.push(B);continue}if(B=this.tokenizer.autolink(m,zt)){m=m.substring(B.raw.length),D.push(B);continue}if(!x&&(B=this.tokenizer.url(m,zt))){m=m.substring(B.raw.length),D.push(B);continue}if(B=this.tokenizer.inlineText(m,M,hn)){m=m.substring(B.raw.length),B.raw.slice(-1)!=="_"&&(Ae=B.raw.slice(-1)),he=!0,te=D[D.length-1],te&&te.type==="text"?(te.raw+=B.raw,te.text+=B.text):D.push(B);continue}if(m){var ct="Infinite loop on byte: "+m.charCodeAt(0);if(this.options.silent){console.error(ct);break}else throw new Error(ct)}}return D},c(w,null,[{key:"rules",get:function(){return{block:_t,inline:et}}}]),w}(),On=k.exports.defaults,Gn=Ee.cleanUrl,pn=Ee.escape,Sn=function(){function w(L){this.options=L||On}var S=w.prototype;return S.code=function(m,D,x){var M=(D||"").match(/\S*/)[0];if(this.options.highlight){var B=this.options.highlight(m,M);B!=null&&B!==m&&(x=!0,m=B)}return m=m.replace(/\n$/,"")+`
`,M?'<pre><code class="'+this.options.langPrefix+pn(M,!0)+'">'+(x?m:pn(m,!0))+`</code></pre>
`:"<pre><code>"+(x?m:pn(m,!0))+`</code></pre>
`},S.blockquote=function(m){return`<blockquote>
`+m+`</blockquote>
`},S.html=function(m){return m},S.heading=function(m,D,x,M){return this.options.headerIds?"<h"+D+' id="'+this.options.headerPrefix+M.slug(x)+'">'+m+"</h"+D+`>
`:"<h"+D+">"+m+"</h"+D+`>
`},S.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},S.list=function(m,D,x){var M=D?"ol":"ul",B=D&&x!==1?' start="'+x+'"':"";return"<"+M+B+`>
`+m+"</"+M+`>
`},S.listitem=function(m){return"<li>"+m+`</li>
`},S.checkbox=function(m){return"<input "+(m?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},S.paragraph=function(m){return"<p>"+m+`</p>
`},S.table=function(m,D){return D&&(D="<tbody>"+D+"</tbody>"),`<table>
<thead>
`+m+`</thead>
`+D+`</table>
`},S.tablerow=function(m){return`<tr>
`+m+`</tr>
`},S.tablecell=function(m,D){var x=D.header?"th":"td",M=D.align?"<"+x+' align="'+D.align+'">':"<"+x+">";return M+m+"</"+x+`>
`},S.strong=function(m){return"<strong>"+m+"</strong>"},S.em=function(m){return"<em>"+m+"</em>"},S.codespan=function(m){return"<code>"+m+"</code>"},S.br=function(){return this.options.xhtml?"<br/>":"<br>"},S.del=function(m){return"<del>"+m+"</del>"},S.link=function(m,D,x){if(m=Gn(this.options.sanitize,this.options.baseUrl,m),m===null)return x;var M='<a href="'+pn(m)+'"';return D&&(M+=' title="'+D+'"'),M+=">"+x+"</a>",M},S.image=function(m,D,x){if(m=Gn(this.options.sanitize,this.options.baseUrl,m),m===null)return x;var M='<img src="'+m+'" alt="'+x+'"';return D&&(M+=' title="'+D+'"'),M+=this.options.xhtml?"/>":">",M},S.text=function(m){return m},w}(),Gt=function(){function w(){}var S=w.prototype;return S.strong=function(m){return m},S.em=function(m){return m},S.codespan=function(m){return m},S.del=function(m){return m},S.html=function(m){return m},S.text=function(m){return m},S.link=function(m,D,x){return""+x},S.image=function(m,D,x){return""+x},S.br=function(){return""},w}(),Kn=function(){function w(){this.seen={}}var S=w.prototype;return S.serialize=function(m){return m.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},S.getNextSafeSlug=function(m,D){var x=m,M=0;if(this.seen.hasOwnProperty(x)){M=this.seen[m];do M++,x=m+"-"+M;while(this.seen.hasOwnProperty(x))}return D||(this.seen[m]=M,this.seen[x]=0),x},S.slug=function(m,D){D===void 0&&(D={});var x=this.serialize(m);return this.getNextSafeSlug(x,D.dryrun)},w}(),Pt=Sn,rt=Gt,mn=Kn,Rt=k.exports.defaults,ln=Ee.unescape,xe=function(){function w(L){this.options=L||Rt,this.options.renderer=this.options.renderer||new Pt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new rt,this.slugger=new mn}w.parse=function(m,D){var x=new w(D);return x.parse(m)},w.parseInline=function(m,D){var x=new w(D);return x.parseInline(m)};var S=w.prototype;return S.parse=function(m,D){D===void 0&&(D=!0);var x="",M,B,te,Z,ee,he,Ae,Ze,je,Me,ct,mt,un,Yt,Be,le,cn,yn,Bt=m.length;for(M=0;M<Bt;M++)switch(Me=m[M],Me.type){case"space":continue;case"hr":{x+=this.renderer.hr();continue}case"heading":{x+=this.renderer.heading(this.parseInline(Me.tokens),Me.depth,ln(this.parseInline(Me.tokens,this.textRenderer)),this.slugger);continue}case"code":{x+=this.renderer.code(Me.text,Me.lang,Me.escaped);continue}case"table":{for(Ze="",Ae="",Z=Me.header.length,B=0;B<Z;B++)Ae+=this.renderer.tablecell(this.parseInline(Me.tokens.header[B]),{header:!0,align:Me.align[B]});for(Ze+=this.renderer.tablerow(Ae),je="",Z=Me.cells.length,B=0;B<Z;B++){for(he=Me.tokens.cells[B],Ae="",ee=he.length,te=0;te<ee;te++)Ae+=this.renderer.tablecell(this.parseInline(he[te]),{header:!1,align:Me.align[te]});je+=this.renderer.tablerow(Ae)}x+=this.renderer.table(Ze,je);continue}case"blockquote":{je=this.parse(Me.tokens),x+=this.renderer.blockquote(je);continue}case"list":{for(ct=Me.ordered,mt=Me.start,un=Me.loose,Z=Me.items.length,je="",B=0;B<Z;B++)Be=Me.items[B],le=Be.checked,cn=Be.task,Yt="",Be.task&&(yn=this.renderer.checkbox(le),un?Be.tokens.length>0&&Be.tokens[0].type==="text"?(Be.tokens[0].text=yn+" "+Be.tokens[0].text,Be.tokens[0].tokens&&Be.tokens[0].tokens.length>0&&Be.tokens[0].tokens[0].type==="text"&&(Be.tokens[0].tokens[0].text=yn+" "+Be.tokens[0].tokens[0].text)):Be.tokens.unshift({type:"text",text:yn}):Yt+=yn),Yt+=this.parse(Be.tokens,un),je+=this.renderer.listitem(Yt,cn,le);x+=this.renderer.list(je,ct,mt);continue}case"html":{x+=this.renderer.html(Me.text);continue}case"paragraph":{x+=this.renderer.paragraph(this.parseInline(Me.tokens));continue}case"text":{for(je=Me.tokens?this.parseInline(Me.tokens):Me.text;M+1<Bt&&m[M+1].type==="text";)Me=m[++M],je+=`
`+(Me.tokens?this.parseInline(Me.tokens):Me.text);x+=D?this.renderer.paragraph(je):je;continue}default:{var Ye='Token with "'+Me.type+'" type was not found.';if(this.options.silent){console.error(Ye);return}else throw new Error(Ye)}}return x},S.parseInline=function(m,D){D=D||this.renderer;var x="",M,B,te=m.length;for(M=0;M<te;M++)switch(B=m[M],B.type){case"escape":{x+=D.text(B.text);break}case"html":{x+=D.html(B.text);break}case"link":{x+=D.link(B.href,B.title,this.parseInline(B.tokens,D));break}case"image":{x+=D.image(B.href,B.title,B.text);break}case"strong":{x+=D.strong(this.parseInline(B.tokens,D));break}case"em":{x+=D.em(this.parseInline(B.tokens,D));break}case"codespan":{x+=D.codespan(B.text);break}case"br":{x+=D.br();break}case"del":{x+=D.del(this.parseInline(B.tokens,D));break}case"text":{x+=D.text(B.text);break}default:{var Z='Token with "'+B.type+'" type was not found.';if(this.options.silent){console.error(Z);return}else throw new Error(Z)}}return x},w}(),Nt=$t,ut=xe,Re=Fe,it=Sn,Kt=Gt,ot=Kn,Ot=Ee.merge,ht=Ee.checkSanitizeDeprecation,Xt=Ee.escape,Lt=k.exports.getDefaults,gn=k.exports.changeDefaults,nn=k.exports.defaults;function ze(w,S,L){if(typeof w=="undefined"||w===null)throw new Error("marked(): input parameter is undefined or null");if(typeof w!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(w)+", string expected");if(typeof S=="function"&&(L=S,S=null),S=Ot({},ze.defaults,S||{}),ht(S),L){var m=S.highlight,D;try{D=Nt.lex(w,S)}catch(te){return L(te)}var x=function(Z){var ee;if(!Z)try{S.walkTokens&&ze.walkTokens(D,S.walkTokens),ee=ut.parse(D,S)}catch(he){Z=he}return S.highlight=m,Z?L(Z):L(null,ee)};if(!m||m.length<3||(delete S.highlight,!D.length))return x();var M=0;ze.walkTokens(D,function(te){te.type==="code"&&(M++,setTimeout(function(){m(te.text,te.lang,function(Z,ee){if(Z)return x(Z);ee!=null&&ee!==te.text&&(te.text=ee,te.escaped=!0),M--,M===0&&x()})},0))}),M===0&&x();return}try{var B=Nt.lex(w,S);return S.walkTokens&&ze.walkTokens(B,S.walkTokens),ut.parse(B,S)}catch(te){if(te.message+=`
Please report this to https://github.com/markedjs/marked.`,S.silent)return"<p>An error occurred:</p><pre>"+Xt(te.message+"",!0)+"</pre>";throw te}}ze.options=ze.setOptions=function(w){return Ot(ze.defaults,w),gn(ze.defaults),ze},ze.getDefaults=Lt,ze.defaults=nn,ze.use=function(w){var S=Ot({},w);if(w.renderer&&function(){var m=ze.defaults.renderer||new it,D=function(B){var te=m[B];m[B]=function(){for(var Z=arguments.length,ee=new Array(Z),he=0;he<Z;he++)ee[he]=arguments[he];var Ae=w.renderer[B].apply(m,ee);return Ae===!1&&(Ae=te.apply(m,ee)),Ae}};for(var x in w.renderer)D(x);S.renderer=m}(),w.tokenizer&&function(){var m=ze.defaults.tokenizer||new Re,D=function(B){var te=m[B];m[B]=function(){for(var Z=arguments.length,ee=new Array(Z),he=0;he<Z;he++)ee[he]=arguments[he];var Ae=w.tokenizer[B].apply(m,ee);return Ae===!1&&(Ae=te.apply(m,ee)),Ae}};for(var x in w.tokenizer)D(x);S.tokenizer=m}(),w.walkTokens){var L=ze.defaults.walkTokens;S.walkTokens=function(m){w.walkTokens(m),L&&L(m)}}ze.setOptions(S)},ze.walkTokens=function(w,S){for(var L=y(w),m;!(m=L()).done;){var D=m.value;switch(S(D),D.type){case"table":{for(var x=y(D.tokens.header),M;!(M=x()).done;){var B=M.value;ze.walkTokens(B,S)}for(var te=y(D.tokens.cells),Z;!(Z=te()).done;)for(var ee=Z.value,he=y(ee),Ae;!(Ae=he()).done;){var Ze=Ae.value;ze.walkTokens(Ze,S)}break}case"list":{ze.walkTokens(D.items,S);break}default:D.tokens&&ze.walkTokens(D.tokens,S)}}},ze.parseInline=function(w,S){if(typeof w=="undefined"||w===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof w!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(w)+", string expected");S=Ot({},ze.defaults,S||{}),ht(S);try{var L=Nt.lexInline(w,S);return S.walkTokens&&ze.walkTokens(L,S.walkTokens),ut.parseInline(L,S)}catch(m){if(m.message+=`
Please report this to https://github.com/markedjs/marked.`,S.silent)return"<p>An error occurred:</p><pre>"+Xt(m.message+"",!0)+"</pre>";throw m}},ze.Parser=ut,ze.parser=ut.parse,ze.Renderer=it,ze.TextRenderer=Kt,ze.Lexer=Nt,ze.lexer=Nt.lex,ze.Tokenizer=Re,ze.Slugger=ot,ze.parse=ze;var rn=ze;return rn})})(Lu);var Fu=Lu.exports,ke={},Dt={},sa={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});let bs;function ws(){if(bs===void 0)throw new Error("No runtime abstraction layer installed");return bs}(function(i){function s(a){if(a===void 0)throw new Error("No runtime abstraction layer provided");bs=a}i.install=s})(ws||(ws={}));Nn.default=ws;var aa={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Disposable=void 0,function(s){function a(c){return{dispose:c}}s.create=a}(i.Disposable||(i.Disposable={}))})(aa);var vr={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Emitter=i.Event=void 0;const s=Nn;(function(u){const h={dispose(){}};u.None=function(){return h}})(i.Event||(i.Event={}));class a{add(h,y=null,k){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(h),this._contexts.push(y),Array.isArray(k)&&k.push({dispose:()=>this.remove(h,y)})}remove(h,y=null){if(!this._callbacks)return;let k=!1;for(let C=0,E=this._callbacks.length;C<E;C++)if(this._callbacks[C]===h)if(this._contexts[C]===y){this._callbacks.splice(C,1),this._contexts.splice(C,1);return}else k=!0;if(k)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...h){if(!this._callbacks)return[];const y=[],k=this._callbacks.slice(0),C=this._contexts.slice(0);for(let E=0,N=k.length;E<N;E++)try{y.push(k[E].apply(C[E],h))}catch(H){s.default().console.error(H)}return y}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class c{constructor(h){this._options=h}get event(){return this._event||(this._event=(h,y,k)=>{this._callbacks||(this._callbacks=new a),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(h,y);const C={dispose:()=>{!this._callbacks||(this._callbacks.remove(h,y),C.dispose=c._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(k)&&k.push(C),C}),this._event}fire(h){this._callbacks&&this._callbacks.invoke.call(this._callbacks,h)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i.Emitter=c,c._noop=function(){}})(vr);var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.AbstractMessageBuffer=void 0;const hd=13,pd=10,gd=`\r
`;class vd{constructor(s="utf-8"){this._encoding=s,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(s){const a=typeof s=="string"?this.fromString(s,this._encoding):s;this._chunks.push(a),this._totalLength+=a.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let s=0,a=0,c=0,u=0;e:for(;a<this._chunks.length;){const C=this._chunks[a];for(c=0;c<C.length;){switch(C[c]){case hd:switch(s){case 0:s=1;break;case 2:s=3;break;default:s=0}break;case pd:switch(s){case 1:s=2;break;case 3:s=4,c++;break e;default:s=0}break;default:s=0}c++}u+=C.byteLength,a++}if(s!==4)return;const h=this._read(u+c),y=new Map,k=this.toString(h,"ascii").split(gd);if(k.length<2)return y;for(let C=0;C<k.length-2;C++){const E=k[C],N=E.indexOf(":");if(N===-1)throw new Error("Message header must separate key and value using :");const H=E.substr(0,N),O=E.substr(N+1).trim();y.set(H,O)}return y}tryReadBody(s){if(!(this._totalLength<s))return this._read(s)}get numberOfBytes(){return this._totalLength}_read(s){if(s===0)return this.emptyBuffer();if(s>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===s){const h=this._chunks[0];return this._chunks.shift(),this._totalLength-=s,this.asNative(h)}if(this._chunks[0].byteLength>s){const h=this._chunks[0],y=this.asNative(h,s);return this._chunks[0]=h.slice(s),this._totalLength-=s,y}const a=this.allocNative(s);let c=0,u=0;for(;s>0;){const h=this._chunks[u];if(h.byteLength>s){const y=h.slice(0,s);a.set(y,c),c+=s,this._chunks[u]=h.slice(s),this._totalLength-=s,s-=s}else a.set(h,c),c+=h.byteLength,this._chunks.shift(),this._totalLength-=h.byteLength,s-=h.byteLength}return a}}wo.AbstractMessageBuffer=vd;Object.defineProperty(sa,"__esModule",{value:!0});const md=Nn,Ir=aa,yd=vr,bd=wo;class Do extends bd.AbstractMessageBuffer{constructor(s="utf-8"){super(s),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Do.emptyBuffer}fromString(s,a){return new TextEncoder().encode(s)}toString(s,a){return a==="ascii"?this.asciiDecoder.decode(s):new TextDecoder(a).decode(s)}asNative(s,a){return a===void 0?s:s.slice(0,a)}allocNative(s){return new Uint8Array(s)}}Do.emptyBuffer=new Uint8Array(0);class wd{constructor(s){this.socket=s,this._onData=new yd.Emitter,this._messageListener=a=>{a.data.arrayBuffer().then(u=>{this._onData.fire(new Uint8Array(u))})},this.socket.addEventListener("message",this._messageListener)}onClose(s){return this.socket.addEventListener("close",s),Ir.Disposable.create(()=>this.socket.removeEventListener("close",s))}onError(s){return this.socket.addEventListener("error",s),Ir.Disposable.create(()=>this.socket.removeEventListener("error",s))}onEnd(s){return this.socket.addEventListener("end",s),Ir.Disposable.create(()=>this.socket.removeEventListener("end",s))}onData(s){return this._onData.event(s)}}class Dd{constructor(s){this.socket=s}onClose(s){return this.socket.addEventListener("close",s),Ir.Disposable.create(()=>this.socket.removeEventListener("close",s))}onError(s){return this.socket.addEventListener("error",s),Ir.Disposable.create(()=>this.socket.removeEventListener("error",s))}onEnd(s){return this.socket.addEventListener("end",s),Ir.Disposable.create(()=>this.socket.removeEventListener("end",s))}write(s,a){if(typeof s=="string"){if(a!==void 0&&a!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${a}`);this.socket.send(s)}else this.socket.send(s);return Promise.resolve()}end(){this.socket.close()}}const Cd=new TextEncoder,Mu=Object.freeze({messageBuffer:Object.freeze({create:i=>new Do(i)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(i,s)=>{if(s.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${s.charset}`);return Promise.resolve(Cd.encode(JSON.stringify(i,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(i,s)=>{if(!(i instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(s.charset).decode(i)))}})}),stream:Object.freeze({asReadableStream:i=>new wd(i),asWritableStream:i=>new Dd(i)}),console,timer:Object.freeze({setTimeout(i,s,...a){return setTimeout(i,s,...a)},clearTimeout(i){clearTimeout(i)},setImmediate(i,...s){return setTimeout(i,0,...s)},clearImmediate(i){clearTimeout(i)}})});function Ds(){return Mu}(function(i){function s(){md.default.install(Mu)}i.install=s})(Ds||(Ds={}));sa.default=Ds;var Cs={},la={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function kd(i){return i===!0||i===!1}wt.boolean=kd;function Pu(i){return typeof i=="string"||i instanceof String}wt.string=Pu;function Td(i){return typeof i=="number"||i instanceof Number}wt.number=Td;function Sd(i){return i instanceof Error}wt.error=Sd;function Ed(i){return typeof i=="function"}wt.func=Ed;function Nu(i){return Array.isArray(i)}wt.array=Nu;function xd(i){return Nu(i)&&i.every(s=>Pu(s))}wt.stringArray=xd;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isResponseMessage=i.isNotificationMessage=i.isRequestMessage=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType=i.RequestType0=i.AbstractMessageSignature=i.ParameterStructures=i.ResponseError=i.ErrorCodes=void 0;const s=wt;var a;(function(_){_.ParseError=-32700,_.InvalidRequest=-32600,_.MethodNotFound=-32601,_.InvalidParams=-32602,_.InternalError=-32603,_.jsonrpcReservedErrorRangeStart=-32099,_.serverErrorStart=_.jsonrpcReservedErrorRangeStart,_.MessageWriteError=-32099,_.MessageReadError=-32098,_.ServerNotInitialized=-32002,_.UnknownErrorCode=-32001,_.jsonrpcReservedErrorRangeEnd=-32e3,_.serverErrorEnd=_.jsonrpcReservedErrorRangeEnd})(a=i.ErrorCodes||(i.ErrorCodes={}));class c extends Error{constructor(ie,Ie,Ce){super(Ie),this.code=s.number(ie)?ie:a.UnknownErrorCode,this.data=Ce,Object.setPrototypeOf(this,c.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}i.ResponseError=c;class u{constructor(ie){this.kind=ie}static is(ie){return ie===u.auto||ie===u.byName||ie===u.byPosition}toString(){return this.kind}}i.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class h{constructor(ie,Ie){this.method=ie,this.numberOfParams=Ie}get parameterStructures(){return u.auto}}i.AbstractMessageSignature=h;class y extends h{constructor(ie){super(ie,0)}}i.RequestType0=y;class k extends h{constructor(ie,Ie=u.auto){super(ie,1),this._parameterStructures=Ie}get parameterStructures(){return this._parameterStructures}}i.RequestType=k;class C extends h{constructor(ie,Ie=u.auto){super(ie,1),this._parameterStructures=Ie}get parameterStructures(){return this._parameterStructures}}i.RequestType1=C;class E extends h{constructor(ie){super(ie,2)}}i.RequestType2=E;class N extends h{constructor(ie){super(ie,3)}}i.RequestType3=N;class H extends h{constructor(ie){super(ie,4)}}i.RequestType4=H;class O extends h{constructor(ie){super(ie,5)}}i.RequestType5=O;class j extends h{constructor(ie){super(ie,6)}}i.RequestType6=j;class Q extends h{constructor(ie){super(ie,7)}}i.RequestType7=Q;class ae extends h{constructor(ie){super(ie,8)}}i.RequestType8=ae;class fe extends h{constructor(ie){super(ie,9)}}i.RequestType9=fe;class P extends h{constructor(ie,Ie=u.auto){super(ie,1),this._parameterStructures=Ie}get parameterStructures(){return this._parameterStructures}}i.NotificationType=P;class I extends h{constructor(ie){super(ie,0)}}i.NotificationType0=I;class F extends h{constructor(ie,Ie=u.auto){super(ie,1),this._parameterStructures=Ie}get parameterStructures(){return this._parameterStructures}}i.NotificationType1=F;class b extends h{constructor(ie){super(ie,2)}}i.NotificationType2=b;class U extends h{constructor(ie){super(ie,3)}}i.NotificationType3=U;class V extends h{constructor(ie){super(ie,4)}}i.NotificationType4=V;class q extends h{constructor(ie){super(ie,5)}}i.NotificationType5=q;class re extends h{constructor(ie){super(ie,6)}}i.NotificationType6=re;class De extends h{constructor(ie){super(ie,7)}}i.NotificationType7=De;class ge extends h{constructor(ie){super(ie,8)}}i.NotificationType8=ge;class Se extends h{constructor(ie){super(ie,9)}}i.NotificationType9=Se;function $e(_){const ie=_;return ie&&s.string(ie.method)&&(s.string(ie.id)||s.number(ie.id))}i.isRequestMessage=$e;function G(_){const ie=_;return ie&&s.string(ie.method)&&_.id===void 0}i.isNotificationMessage=G;function K(_){const ie=_;return ie&&(ie.result!==void 0||!!ie.error)&&(s.string(ie.id)||s.number(ie.id)||ie.id===null)}i.isResponseMessage=K})(la);var ua={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationTokenSource=i.CancellationToken=void 0;const s=Nn,a=wt,c=vr;var u;(function(C){C.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:c.Event.None}),C.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:c.Event.None});function E(N){const H=N;return H&&(H===C.None||H===C.Cancelled||a.boolean(H.isCancellationRequested)&&!!H.onCancellationRequested)}C.is=E})(u=i.CancellationToken||(i.CancellationToken={}));const h=Object.freeze(function(C,E){const N=s.default().timer.setTimeout(C.bind(E),0);return{dispose(){s.default().timer.clearTimeout(N)}}});class y{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?h:(this._emitter||(this._emitter=new c.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class k{get token(){return this._token||(this._token=new y),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof y&&this._token.dispose():this._token=u.None}}i.CancellationTokenSource=k})(ua);var Ou={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=void 0;const s=Nn,a=wt,c=vr;(function(k){function C(E){let N=E;return N&&a.func(N.listen)&&a.func(N.dispose)&&a.func(N.onError)&&a.func(N.onClose)&&a.func(N.onPartialMessage)}k.is=C})(i.MessageReader||(i.MessageReader={}));class u{constructor(){this.errorEmitter=new c.Emitter,this.closeEmitter=new c.Emitter,this.partialMessageEmitter=new c.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(C){this.errorEmitter.fire(this.asError(C))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(C){this.partialMessageEmitter.fire(C)}asError(C){return C instanceof Error?C:new Error(`Reader received error. Reason: ${a.string(C.message)?C.message:"unknown"}`)}}i.AbstractMessageReader=u;var h;(function(k){function C(E){var N;let H,O;const j=new Map;let Q;const ae=new Map;if(E===void 0||typeof E=="string")H=E!=null?E:"utf-8";else{if(H=(N=E.charset)!==null&&N!==void 0?N:"utf-8",E.contentDecoder!==void 0&&(O=E.contentDecoder,j.set(O.name,O)),E.contentDecoders!==void 0)for(const fe of E.contentDecoders)j.set(fe.name,fe);if(E.contentTypeDecoder!==void 0&&(Q=E.contentTypeDecoder,ae.set(Q.name,Q)),E.contentTypeDecoders!==void 0)for(const fe of E.contentTypeDecoders)ae.set(fe.name,fe)}return Q===void 0&&(Q=s.default().applicationJson.decoder,ae.set(Q.name,Q)),{charset:H,contentDecoder:O,contentDecoders:j,contentTypeDecoder:Q,contentTypeDecoders:ae}}k.fromOptions=C})(h||(h={}));class y extends u{constructor(C,E){super(),this.readable=C,this.options=h.fromOptions(E),this.buffer=s.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(C){this._partialMessageTimeout=C}get partialMessageTimeout(){return this._partialMessageTimeout}listen(C){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=C;const E=this.readable.onData(N=>{this.onData(N)});return this.readable.onError(N=>this.fireError(N)),this.readable.onClose(()=>this.fireClose()),E}onData(C){for(this.buffer.append(C);;){if(this.nextMessageLength===-1){const H=this.buffer.tryReadHeaders();if(!H)return;const O=H.get("Content-Length");if(!O)throw new Error("Header must provide a Content-Length property.");const j=parseInt(O);if(isNaN(j))throw new Error("Content-Length value must be a number.");this.nextMessageLength=j}const E=this.buffer.tryReadBody(this.nextMessageLength);if(E===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let N;this.options.contentDecoder!==void 0?N=this.options.contentDecoder.decode(E):N=Promise.resolve(E),N.then(H=>{this.options.contentTypeDecoder.decode(H,this.options).then(O=>{this.callback(O)},O=>{this.fireError(O)})},H=>{this.fireError(H)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(s.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=s.default().timer.setTimeout((C,E)=>{this.partialMessageTimer=void 0,C===this.messageToken&&(this.firePartialMessage({messageToken:C,waitingTime:E}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}i.ReadableStreamMessageReader=y})(Ou);var Bu={},Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.Semaphore=void 0;const Ad=Nn;class _d{constructor(s=1){if(s<=0)throw new Error("Capacity must be greater than 0");this._capacity=s,this._active=0,this._waiting=[]}lock(s){return new Promise((a,c)=>{this._waiting.push({thunk:s,resolve:a,reject:c}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||Ad.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const s=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const a=s.thunk();a instanceof Promise?a.then(c=>{this._active--,s.resolve(c),this.runNext()},c=>{this._active--,s.reject(c),this.runNext()}):(this._active--,s.resolve(a),this.runNext())}catch(a){this._active--,s.reject(a),this.runNext()}}}Co.Semaphore=_d;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=void 0;const s=Nn,a=wt,c=Co,u=vr,h="Content-Length: ",y=`\r
`;(function(N){function H(O){let j=O;return j&&a.func(j.dispose)&&a.func(j.onClose)&&a.func(j.onError)&&a.func(j.write)}N.is=H})(i.MessageWriter||(i.MessageWriter={}));class k{constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(H,O,j){this.errorEmitter.fire([this.asError(H),O,j])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(H){return H instanceof Error?H:new Error(`Writer received error. Reason: ${a.string(H.message)?H.message:"unknown"}`)}}i.AbstractMessageWriter=k;var C;(function(N){function H(O){var j,Q;return O===void 0||typeof O=="string"?{charset:O!=null?O:"utf-8",contentTypeEncoder:s.default().applicationJson.encoder}:{charset:(j=O.charset)!==null&&j!==void 0?j:"utf-8",contentEncoder:O.contentEncoder,contentTypeEncoder:(Q=O.contentTypeEncoder)!==null&&Q!==void 0?Q:s.default().applicationJson.encoder}}N.fromOptions=H})(C||(C={}));class E extends k{constructor(H,O){super(),this.writable=H,this.options=C.fromOptions(O),this.errorCount=0,this.writeSemaphore=new c.Semaphore(1),this.writable.onError(j=>this.fireError(j)),this.writable.onClose(()=>this.fireClose())}async write(H){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(H,this.options).then(j=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(j):j).then(j=>{const Q=[];return Q.push(h,j.byteLength.toString(),y),Q.push(y),this.doWrite(H,Q,j)},j=>{throw this.fireError(j),j}))}async doWrite(H,O,j){try{return await this.writable.write(O.join(""),"ascii"),this.writable.write(j)}catch(Q){return this.handleError(Q,H),Promise.reject(Q)}}handleError(H,O){this.errorCount++,this.fireError(H,O,this.errorCount)}end(){this.writable.end()}}i.WriteableStreamMessageWriter=E})(Bu);var Iu={},Wu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LRUCache=i.LinkedMap=i.Touch=void 0;var s;(function(u){u.None=0,u.First=1,u.AsOld=u.First,u.Last=2,u.AsNew=u.Last})(s=i.Touch||(i.Touch={}));class a{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var h;return(h=this._head)===null||h===void 0?void 0:h.value}get last(){var h;return(h=this._tail)===null||h===void 0?void 0:h.value}has(h){return this._map.has(h)}get(h,y=s.None){const k=this._map.get(h);if(!!k)return y!==s.None&&this.touch(k,y),k.value}set(h,y,k=s.None){let C=this._map.get(h);if(C)C.value=y,k!==s.None&&this.touch(C,k);else{switch(C={key:h,value:y,next:void 0,previous:void 0},k){case s.None:this.addItemLast(C);break;case s.First:this.addItemFirst(C);break;case s.Last:this.addItemLast(C);break;default:this.addItemLast(C);break}this._map.set(h,C),this._size++}return this}delete(h){return!!this.remove(h)}remove(h){const y=this._map.get(h);if(!!y)return this._map.delete(h),this.removeItem(y),this._size--,y.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const h=this._head;return this._map.delete(h.key),this.removeItem(h),this._size--,h.value}forEach(h,y){const k=this._state;let C=this._head;for(;C;){if(y?h.bind(y)(C.value,C.key,this):h(C.value,C.key,this),this._state!==k)throw new Error("LinkedMap got modified during iteration.");C=C.next}}keys(){const h=this,y=this._state;let k=this._head;const C={[Symbol.iterator](){return C},next(){if(h._state!==y)throw new Error("LinkedMap got modified during iteration.");if(k){const E={value:k.key,done:!1};return k=k.next,E}else return{value:void 0,done:!0}}};return C}values(){const h=this,y=this._state;let k=this._head;const C={[Symbol.iterator](){return C},next(){if(h._state!==y)throw new Error("LinkedMap got modified during iteration.");if(k){const E={value:k.value,done:!1};return k=k.next,E}else return{value:void 0,done:!0}}};return C}entries(){const h=this,y=this._state;let k=this._head;const C={[Symbol.iterator](){return C},next(){if(h._state!==y)throw new Error("LinkedMap got modified during iteration.");if(k){const E={value:[k.key,k.value],done:!1};return k=k.next,E}else return{value:void 0,done:!0}}};return C}[Symbol.iterator](){return this.entries()}trimOld(h){if(h>=this.size)return;if(h===0){this.clear();return}let y=this._head,k=this.size;for(;y&&k>h;)this._map.delete(y.key),y=y.next,k--;this._head=y,this._size=k,y&&(y.previous=void 0),this._state++}addItemFirst(h){if(!this._head&&!this._tail)this._tail=h;else if(this._head)h.next=this._head,this._head.previous=h;else throw new Error("Invalid list");this._head=h,this._state++}addItemLast(h){if(!this._head&&!this._tail)this._head=h;else if(this._tail)h.previous=this._tail,this._tail.next=h;else throw new Error("Invalid list");this._tail=h,this._state++}removeItem(h){if(h===this._head&&h===this._tail)this._head=void 0,this._tail=void 0;else if(h===this._head){if(!h.next)throw new Error("Invalid list");h.next.previous=void 0,this._head=h.next}else if(h===this._tail){if(!h.previous)throw new Error("Invalid list");h.previous.next=void 0,this._tail=h.previous}else{const y=h.next,k=h.previous;if(!y||!k)throw new Error("Invalid list");y.previous=k,k.next=y}h.next=void 0,h.previous=void 0,this._state++}touch(h,y){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(y!==s.First&&y!==s.Last)){if(y===s.First){if(h===this._head)return;const k=h.next,C=h.previous;h===this._tail?(C.next=void 0,this._tail=C):(k.previous=C,C.next=k),h.previous=void 0,h.next=this._head,this._head.previous=h,this._head=h,this._state++}else if(y===s.Last){if(h===this._tail)return;const k=h.next,C=h.previous;h===this._head?(k.previous=void 0,this._head=k):(k.previous=C,C.next=k),h.next=void 0,h.previous=this._tail,this._tail.next=h,this._tail=h,this._state++}}}toJSON(){const h=[];return this.forEach((y,k)=>{h.push([k,y])}),h}fromJSON(h){this.clear();for(const[y,k]of h)this.set(y,k)}}i.LinkedMap=a;class c extends a{constructor(h,y=1){super(),this._limit=h,this._ratio=Math.min(Math.max(0,y),1)}get limit(){return this._limit}set limit(h){this._limit=h,this.checkTrim()}get ratio(){return this._ratio}set ratio(h){this._ratio=Math.min(Math.max(0,h),1),this.checkTrim()}get(h,y=s.AsNew){return super.get(h,y)}peek(h){return super.get(h,s.None)}set(h,y){return super.set(h,y,s.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}i.LRUCache=c})(Wu);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.ConnectionOptions=i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.Trace=i.NullLogger=i.ProgressType=void 0;const s=Nn,a=wt,c=la,u=Wu,h=vr,y=ua;var k;(function(q){q.type=new c.NotificationType("$/cancelRequest")})(k||(k={}));var C;(function(q){q.type=new c.NotificationType("$/progress")})(C||(C={}));class E{constructor(){}}i.ProgressType=E;var N;(function(q){function re(De){return a.func(De)}q.is=re})(N||(N={})),i.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var H;(function(q){q[q.Off=0]="Off",q[q.Messages=1]="Messages",q[q.Verbose=2]="Verbose"})(H=i.Trace||(i.Trace={})),function(q){function re(ge){if(!a.string(ge))return q.Off;switch(ge=ge.toLowerCase(),ge){case"off":return q.Off;case"messages":return q.Messages;case"verbose":return q.Verbose;default:return q.Off}}q.fromString=re;function De(ge){switch(ge){case q.Off:return"off";case q.Messages:return"messages";case q.Verbose:return"verbose";default:return"off"}}q.toString=De}(H=i.Trace||(i.Trace={}));var O;(function(q){q.Text="text",q.JSON="json"})(O=i.TraceFormat||(i.TraceFormat={})),function(q){function re(De){return De=De.toLowerCase(),De==="json"?q.JSON:q.Text}q.fromString=re}(O=i.TraceFormat||(i.TraceFormat={}));var j;(function(q){q.type=new c.NotificationType("$/setTrace")})(j=i.SetTraceNotification||(i.SetTraceNotification={}));var Q;(function(q){q.type=new c.NotificationType("$/logTrace")})(Q=i.LogTraceNotification||(i.LogTraceNotification={}));var ae;(function(q){q[q.Closed=1]="Closed",q[q.Disposed=2]="Disposed",q[q.AlreadyListening=3]="AlreadyListening"})(ae=i.ConnectionErrors||(i.ConnectionErrors={}));class fe extends Error{constructor(re,De){super(De),this.code=re,Object.setPrototypeOf(this,fe.prototype)}}i.ConnectionError=fe;var P;(function(q){function re(De){const ge=De;return ge&&a.func(ge.cancelUndispatched)}q.is=re})(P=i.ConnectionStrategy||(i.ConnectionStrategy={}));var I;(function(q){q.Message=Object.freeze({createCancellationTokenSource(De){return new y.CancellationTokenSource}});function re(De){const ge=De;return ge&&a.func(ge.createCancellationTokenSource)}q.is=re})(I=i.CancellationReceiverStrategy||(i.CancellationReceiverStrategy={}));var F;(function(q){q.Message=Object.freeze({sendCancellation(De,ge){De.sendNotification(k.type,{id:ge})},cleanup(De){}});function re(De){const ge=De;return ge&&a.func(ge.sendCancellation)&&a.func(ge.cleanup)}q.is=re})(F=i.CancellationSenderStrategy||(i.CancellationSenderStrategy={}));var b;(function(q){q.Message=Object.freeze({receiver:I.Message,sender:F.Message});function re(De){const ge=De;return ge&&I.is(ge.receiver)&&F.is(ge.sender)}q.is=re})(b=i.CancellationStrategy||(i.CancellationStrategy={})),function(q){function re(De){const ge=De;return ge&&(b.is(ge.cancellationStrategy)||P.is(ge.connectionStrategy))}q.is=re}(i.ConnectionOptions||(i.ConnectionOptions={}));var U;(function(q){q[q.New=1]="New",q[q.Listening=2]="Listening",q[q.Closed=3]="Closed",q[q.Disposed=4]="Disposed"})(U||(U={}));function V(q,re,De,ge){const Se=De!==void 0?De:i.NullLogger;let $e=0,G=0,K=0;const _="2.0";let ie;const Ie=Object.create(null);let Ce;const Le=Object.create(null),Ee=new Map;let Ge,at=new u.LinkedMap,Je=Object.create(null),We=Object.create(null),Ne=H.Off,ve=O.Text,de,Fe=U.New;const He=new h.Emitter,Ke=new h.Emitter,qe=new h.Emitter,be=new h.Emitter,ye=new h.Emitter,Ct=ge&&ge.cancellationStrategy?ge.cancellationStrategy:b.Message;function Oe(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function kt(w){return w===null?"res-unknown-"+(++K).toString():"res-"+w.toString()}function _t(){return"not-"+(++G).toString()}function et(w,S){c.isRequestMessage(S)?w.set(Oe(S.id),S):c.isResponseMessage(S)?w.set(kt(S.id),S):w.set(_t(),S)}function dt(w){}function hn(){return Fe===U.Listening}function zt(){return Fe===U.Closed}function $t(){return Fe===U.Disposed}function On(){(Fe===U.New||Fe===U.Listening)&&(Fe=U.Closed,Ke.fire(void 0))}function Gn(w){He.fire([w,void 0,void 0])}function pn(w){He.fire(w)}q.onClose(On),q.onError(Gn),re.onClose(On),re.onError(pn);function Sn(){Ge||at.size===0||(Ge=s.default().timer.setImmediate(()=>{Ge=void 0,Gt()}))}function Gt(){if(at.size===0)return;const w=at.shift();try{c.isRequestMessage(w)?Pt(w):c.isNotificationMessage(w)?mn(w):c.isResponseMessage(w)?rt(w):Rt(w)}finally{Sn()}}const Kn=w=>{try{if(c.isNotificationMessage(w)&&w.method===k.type.method){const S=Oe(w.params.id),L=at.get(S);if(c.isRequestMessage(L)){const m=ge==null?void 0:ge.connectionStrategy,D=m&&m.cancelUndispatched?m.cancelUndispatched(L,dt):void 0;if(D&&(D.error!==void 0||D.result!==void 0)){at.delete(S),D.id=L.id,Nt(D,w.method,Date.now()),re.write(D);return}}}et(at,w)}finally{Sn()}};function Pt(w){if($t())return;function S(te,Z,ee){const he={jsonrpc:_,id:w.id};te instanceof c.ResponseError?he.error=te.toJson():he.result=te===void 0?null:te,Nt(he,Z,ee),re.write(he)}function L(te,Z,ee){const he={jsonrpc:_,id:w.id,error:te.toJson()};Nt(he,Z,ee),re.write(he)}function m(te,Z,ee){te===void 0&&(te=null);const he={jsonrpc:_,id:w.id,result:te};Nt(he,Z,ee),re.write(he)}ut(w);const D=Ie[w.method];let x,M;D&&(x=D.type,M=D.handler);const B=Date.now();if(M||ie){const te=String(w.id),Z=Ct.receiver.createCancellationTokenSource(te);We[te]=Z;try{let ee;if(M)if(w.params===void 0){if(x!==void 0&&x.numberOfParams!==0){L(new c.ResponseError(c.ErrorCodes.InvalidParams,`Request ${w.method} defines ${x.numberOfParams} params but recevied none.`),w.method,B);return}ee=M(Z.token)}else if(Array.isArray(w.params)){if(x!==void 0&&x.parameterStructures===c.ParameterStructures.byName){L(new c.ResponseError(c.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,B);return}ee=M(...w.params,Z.token)}else{if(x!==void 0&&x.parameterStructures===c.ParameterStructures.byPosition){L(new c.ResponseError(c.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,B);return}ee=M(w.params,Z.token)}else ie&&(ee=ie(w.method,w.params,Z.token));const he=ee;ee?he.then?he.then(Ae=>{delete We[te],S(Ae,w.method,B)},Ae=>{delete We[te],Ae instanceof c.ResponseError?L(Ae,w.method,B):Ae&&a.string(Ae.message)?L(new c.ResponseError(c.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${Ae.message}`),w.method,B):L(new c.ResponseError(c.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,B)}):(delete We[te],S(ee,w.method,B)):(delete We[te],m(ee,w.method,B))}catch(ee){delete We[te],ee instanceof c.ResponseError?S(ee,w.method,B):ee&&a.string(ee.message)?L(new c.ResponseError(c.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${ee.message}`),w.method,B):L(new c.ResponseError(c.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,B)}}else L(new c.ResponseError(c.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,B)}function rt(w){if(!$t())if(w.id===null)w.error?Se.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):Se.error("Received response message without id. No further error information provided.");else{const S=String(w.id),L=Je[S];if(it(w,L),L){delete Je[S];try{if(w.error){const m=w.error;L.reject(new c.ResponseError(m.code,m.message,m.data))}else if(w.result!==void 0)L.resolve(w.result);else throw new Error("Should never happen.")}catch(m){m.message?Se.error(`Response handler '${L.method}' failed with message: ${m.message}`):Se.error(`Response handler '${L.method}' failed unexpectedly.`)}}}}function mn(w){if($t())return;let S,L;if(w.method===k.type.method)L=m=>{const D=m.id,x=We[String(D)];x&&x.cancel()};else{const m=Le[w.method];m&&(L=m.handler,S=m.type)}if(L||Ce)try{Re(w),L?w.params===void 0?(S!==void 0&&S.numberOfParams!==0&&S.parameterStructures!==c.ParameterStructures.byName&&Se.error(`Notification ${w.method} defines ${S.numberOfParams} params but recevied none.`),L()):Array.isArray(w.params)?(S!==void 0&&(S.parameterStructures===c.ParameterStructures.byName&&Se.error(`Notification ${w.method} defines parameters by name but received parameters by position`),S.numberOfParams!==w.params.length&&Se.error(`Notification ${w.method} defines ${S.numberOfParams} params but received ${w.params.length} argumennts`)),L(...w.params)):(S!==void 0&&S.parameterStructures===c.ParameterStructures.byPosition&&Se.error(`Notification ${w.method} defines parameters by position but received parameters by name`),L(w.params)):Ce&&Ce(w.method,w.params)}catch(m){m.message?Se.error(`Notification handler '${w.method}' failed with message: ${m.message}`):Se.error(`Notification handler '${w.method}' failed unexpectedly.`)}else qe.fire(w)}function Rt(w){if(!w){Se.error("Received empty message.");return}Se.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);const S=w;if(a.string(S.id)||a.number(S.id)){const L=String(S.id),m=Je[L];m&&m.reject(new Error("The received response has neither a result nor an error property."))}}function ln(w){if(!(Ne===H.Off||!de))if(ve===O.Text){let S;Ne===H.Verbose&&w.params&&(S=`Params: ${JSON.stringify(w.params,null,4)}

`),de.log(`Sending request '${w.method} - (${w.id})'.`,S)}else Kt("send-request",w)}function xe(w){if(!(Ne===H.Off||!de))if(ve===O.Text){let S;Ne===H.Verbose&&(w.params?S=`Params: ${JSON.stringify(w.params,null,4)}

`:S=`No parameters provided.

`),de.log(`Sending notification '${w.method}'.`,S)}else Kt("send-notification",w)}function Nt(w,S,L){if(!(Ne===H.Off||!de))if(ve===O.Text){let m;Ne===H.Verbose&&(w.error&&w.error.data?m=`Error data: ${JSON.stringify(w.error.data,null,4)}

`:w.result?m=`Result: ${JSON.stringify(w.result,null,4)}

`:w.error===void 0&&(m=`No result returned.

`)),de.log(`Sending response '${S} - (${w.id})'. Processing request took ${Date.now()-L}ms`,m)}else Kt("send-response",w)}function ut(w){if(!(Ne===H.Off||!de))if(ve===O.Text){let S;Ne===H.Verbose&&w.params&&(S=`Params: ${JSON.stringify(w.params,null,4)}

`),de.log(`Received request '${w.method} - (${w.id})'.`,S)}else Kt("receive-request",w)}function Re(w){if(!(Ne===H.Off||!de||w.method===Q.type.method))if(ve===O.Text){let S;Ne===H.Verbose&&(w.params?S=`Params: ${JSON.stringify(w.params,null,4)}

`:S=`No parameters provided.

`),de.log(`Received notification '${w.method}'.`,S)}else Kt("receive-notification",w)}function it(w,S){if(!(Ne===H.Off||!de))if(ve===O.Text){let L;if(Ne===H.Verbose&&(w.error&&w.error.data?L=`Error data: ${JSON.stringify(w.error.data,null,4)}

`:w.result?L=`Result: ${JSON.stringify(w.result,null,4)}

`:w.error===void 0&&(L=`No result returned.

`)),S){const m=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";de.log(`Received response '${S.method} - (${w.id})' in ${Date.now()-S.timerStart}ms.${m}`,L)}else de.log(`Received response ${w.id} without active response promise.`,L)}else Kt("receive-response",w)}function Kt(w,S){if(!de||Ne===H.Off)return;const L={isLSPMessage:!0,type:w,message:S,timestamp:Date.now()};de.log(L)}function ot(){if(zt())throw new fe(ae.Closed,"Connection is closed.");if($t())throw new fe(ae.Disposed,"Connection is disposed.")}function Ot(){if(hn())throw new fe(ae.AlreadyListening,"Connection is already listening")}function ht(){if(!hn())throw new Error("Call listen() first.")}function Xt(w){return w===void 0?null:w}function Lt(w){if(w!==null)return w}function gn(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function nn(w,S){switch(w){case c.ParameterStructures.auto:return gn(S)?Lt(S):[Xt(S)];case c.ParameterStructures.byName:if(!gn(S))throw new Error("Recevied parameters by name but param is not an object literal.");return Lt(S);case c.ParameterStructures.byPosition:return[Xt(S)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function ze(w,S){let L;const m=w.numberOfParams;switch(m){case 0:L=void 0;break;case 1:L=nn(w.parameterStructures,S[0]);break;default:L=[];for(let D=0;D<S.length&&D<m;D++)L.push(Xt(S[D]));if(S.length<m)for(let D=S.length;D<m;D++)L.push(null);break}return L}const rn={sendNotification:(w,...S)=>{ot();let L,m;if(a.string(w)){L=w;const x=S[0];let M=0,B=c.ParameterStructures.auto;c.ParameterStructures.is(x)&&(M=1,B=x);let te=S.length;const Z=te-M;switch(Z){case 0:m=void 0;break;case 1:m=nn(B,S[M]);break;default:if(B===c.ParameterStructures.byName)throw new Error(`Recevied ${Z} parameters for 'by Name' notification parameter structure.`);m=S.slice(M,te).map(ee=>Xt(ee));break}}else{const x=S;L=w.method,m=ze(w,x)}const D={jsonrpc:_,method:L,params:m};xe(D),re.write(D)},onNotification:(w,S)=>{ot();let L;return a.func(w)?Ce=w:S&&(a.string(w)?(L=w,Le[w]={type:void 0,handler:S}):(L=w.method,Le[w.method]={type:w,handler:S})),{dispose:()=>{L!==void 0?delete Le[L]:Ce=void 0}}},onProgress:(w,S,L)=>{if(Ee.has(S))throw new Error(`Progress handler for token ${S} already registered`);return Ee.set(S,L),{dispose:()=>{Ee.delete(S)}}},sendProgress:(w,S,L)=>{rn.sendNotification(C.type,{token:S,value:L})},onUnhandledProgress:be.event,sendRequest:(w,...S)=>{ot(),ht();let L,m,D;if(a.string(w)){L=w;const te=S[0],Z=S[S.length-1];let ee=0,he=c.ParameterStructures.auto;c.ParameterStructures.is(te)&&(ee=1,he=te);let Ae=S.length;y.CancellationToken.is(Z)&&(Ae=Ae-1,D=Z);const Ze=Ae-ee;switch(Ze){case 0:m=void 0;break;case 1:m=nn(he,S[ee]);break;default:if(he===c.ParameterStructures.byName)throw new Error(`Recevied ${Ze} parameters for 'by Name' request parameter structure.`);m=S.slice(ee,Ae).map(je=>Xt(je));break}}else{const te=S;L=w.method,m=ze(w,te);const Z=w.numberOfParams;D=y.CancellationToken.is(te[Z])?te[Z]:void 0}const x=$e++;let M;return D&&(M=D.onCancellationRequested(()=>{Ct.sender.sendCancellation(rn,x)})),new Promise((te,Z)=>{const ee={jsonrpc:_,id:x,method:L,params:m},he=je=>{te(je),Ct.sender.cleanup(x),M==null||M.dispose()},Ae=je=>{Z(je),Ct.sender.cleanup(x),M==null||M.dispose()};let Ze={method:L,timerStart:Date.now(),resolve:he,reject:Ae};ln(ee);try{re.write(ee)}catch(je){Ze.reject(new c.ResponseError(c.ErrorCodes.MessageWriteError,je.message?je.message:"Unknown reason")),Ze=null}Ze&&(Je[String(x)]=Ze)})},onRequest:(w,S)=>{ot();let L=null;return N.is(w)?(L=void 0,ie=w):a.string(w)?(L=null,S!==void 0&&(L=w,Ie[w]={handler:S,type:void 0})):S!==void 0&&(L=w.method,Ie[w.method]={type:w,handler:S}),{dispose:()=>{L!==null&&(L!==void 0?delete Ie[L]:ie=void 0)}}},trace:(w,S,L)=>{let m=!1,D=O.Text;L!==void 0&&(a.boolean(L)?m=L:(m=L.sendNotification||!1,D=L.traceFormat||O.Text)),Ne=w,ve=D,Ne===H.Off?de=void 0:de=S,m&&!zt()&&!$t()&&rn.sendNotification(j.type,{value:H.toString(w)})},onError:He.event,onClose:Ke.event,onUnhandledNotification:qe.event,onDispose:ye.event,end:()=>{re.end()},dispose:()=>{if($t())return;Fe=U.Disposed,ye.fire(void 0);const w=new Error("Connection got disposed.");Object.keys(Je).forEach(S=>{Je[S].reject(w)}),Je=Object.create(null),We=Object.create(null),at=new u.LinkedMap,a.func(re.dispose)&&re.dispose(),a.func(q.dispose)&&q.dispose()},listen:()=>{ot(),Ot(),Fe=U.Listening,q.listen(Kn)},inspect:()=>{s.default().console.log("inspect")}};return rn.onNotification(Q.type,w=>{Ne===H.Off||!de||de.log(w.message,Ne===H.Verbose?w.verbose:void 0)}),rn.onNotification(C.type,w=>{const S=Ee.get(w.token);S?S(w.value):be.fire(w)}),rn}i.createMessageConnection=V})(Iu);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.Trace=i.ProgressType=i.createMessageConnection=i.NullLogger=i.ConnectionOptions=i.ConnectionStrategy=i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=i.CancellationToken=i.CancellationTokenSource=i.Emitter=i.Event=i.Disposable=i.ParameterStructures=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.ErrorCodes=i.ResponseError=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType0=i.RequestType=i.RAL=void 0,i.CancellationStrategy=void 0;const s=la;Object.defineProperty(i,"RequestType",{enumerable:!0,get:function(){return s.RequestType}}),Object.defineProperty(i,"RequestType0",{enumerable:!0,get:function(){return s.RequestType0}}),Object.defineProperty(i,"RequestType1",{enumerable:!0,get:function(){return s.RequestType1}}),Object.defineProperty(i,"RequestType2",{enumerable:!0,get:function(){return s.RequestType2}}),Object.defineProperty(i,"RequestType3",{enumerable:!0,get:function(){return s.RequestType3}}),Object.defineProperty(i,"RequestType4",{enumerable:!0,get:function(){return s.RequestType4}}),Object.defineProperty(i,"RequestType5",{enumerable:!0,get:function(){return s.RequestType5}}),Object.defineProperty(i,"RequestType6",{enumerable:!0,get:function(){return s.RequestType6}}),Object.defineProperty(i,"RequestType7",{enumerable:!0,get:function(){return s.RequestType7}}),Object.defineProperty(i,"RequestType8",{enumerable:!0,get:function(){return s.RequestType8}}),Object.defineProperty(i,"RequestType9",{enumerable:!0,get:function(){return s.RequestType9}}),Object.defineProperty(i,"ResponseError",{enumerable:!0,get:function(){return s.ResponseError}}),Object.defineProperty(i,"ErrorCodes",{enumerable:!0,get:function(){return s.ErrorCodes}}),Object.defineProperty(i,"NotificationType",{enumerable:!0,get:function(){return s.NotificationType}}),Object.defineProperty(i,"NotificationType0",{enumerable:!0,get:function(){return s.NotificationType0}}),Object.defineProperty(i,"NotificationType1",{enumerable:!0,get:function(){return s.NotificationType1}}),Object.defineProperty(i,"NotificationType2",{enumerable:!0,get:function(){return s.NotificationType2}}),Object.defineProperty(i,"NotificationType3",{enumerable:!0,get:function(){return s.NotificationType3}}),Object.defineProperty(i,"NotificationType4",{enumerable:!0,get:function(){return s.NotificationType4}}),Object.defineProperty(i,"NotificationType5",{enumerable:!0,get:function(){return s.NotificationType5}}),Object.defineProperty(i,"NotificationType6",{enumerable:!0,get:function(){return s.NotificationType6}}),Object.defineProperty(i,"NotificationType7",{enumerable:!0,get:function(){return s.NotificationType7}}),Object.defineProperty(i,"NotificationType8",{enumerable:!0,get:function(){return s.NotificationType8}}),Object.defineProperty(i,"NotificationType9",{enumerable:!0,get:function(){return s.NotificationType9}}),Object.defineProperty(i,"ParameterStructures",{enumerable:!0,get:function(){return s.ParameterStructures}});const a=aa;Object.defineProperty(i,"Disposable",{enumerable:!0,get:function(){return a.Disposable}});const c=vr;Object.defineProperty(i,"Event",{enumerable:!0,get:function(){return c.Event}}),Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return c.Emitter}});const u=ua;Object.defineProperty(i,"CancellationTokenSource",{enumerable:!0,get:function(){return u.CancellationTokenSource}}),Object.defineProperty(i,"CancellationToken",{enumerable:!0,get:function(){return u.CancellationToken}});const h=Ou;Object.defineProperty(i,"MessageReader",{enumerable:!0,get:function(){return h.MessageReader}}),Object.defineProperty(i,"AbstractMessageReader",{enumerable:!0,get:function(){return h.AbstractMessageReader}}),Object.defineProperty(i,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return h.ReadableStreamMessageReader}});const y=Bu;Object.defineProperty(i,"MessageWriter",{enumerable:!0,get:function(){return y.MessageWriter}}),Object.defineProperty(i,"AbstractMessageWriter",{enumerable:!0,get:function(){return y.AbstractMessageWriter}}),Object.defineProperty(i,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return y.WriteableStreamMessageWriter}});const k=Iu;Object.defineProperty(i,"ConnectionStrategy",{enumerable:!0,get:function(){return k.ConnectionStrategy}}),Object.defineProperty(i,"ConnectionOptions",{enumerable:!0,get:function(){return k.ConnectionOptions}}),Object.defineProperty(i,"NullLogger",{enumerable:!0,get:function(){return k.NullLogger}}),Object.defineProperty(i,"createMessageConnection",{enumerable:!0,get:function(){return k.createMessageConnection}}),Object.defineProperty(i,"ProgressType",{enumerable:!0,get:function(){return k.ProgressType}}),Object.defineProperty(i,"Trace",{enumerable:!0,get:function(){return k.Trace}}),Object.defineProperty(i,"TraceFormat",{enumerable:!0,get:function(){return k.TraceFormat}}),Object.defineProperty(i,"SetTraceNotification",{enumerable:!0,get:function(){return k.SetTraceNotification}}),Object.defineProperty(i,"LogTraceNotification",{enumerable:!0,get:function(){return k.LogTraceNotification}}),Object.defineProperty(i,"ConnectionErrors",{enumerable:!0,get:function(){return k.ConnectionErrors}}),Object.defineProperty(i,"ConnectionError",{enumerable:!0,get:function(){return k.ConnectionError}}),Object.defineProperty(i,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return k.CancellationReceiverStrategy}}),Object.defineProperty(i,"CancellationSenderStrategy",{enumerable:!0,get:function(){return k.CancellationSenderStrategy}}),Object.defineProperty(i,"CancellationStrategy",{enumerable:!0,get:function(){return k.CancellationStrategy}});const C=Nn;i.RAL=C.default})(Cs);(function(i){var s=an&&an.__createBinding||(Object.create?function(C,E,N,H){H===void 0&&(H=N),Object.defineProperty(C,H,{enumerable:!0,get:function(){return E[N]}})}:function(C,E,N,H){H===void 0&&(H=N),C[H]=E[N]}),a=an&&an.__exportStar||function(C,E){for(var N in C)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&s(E,C,N)};Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.BrowserMessageWriter=i.BrowserMessageReader=void 0,sa.default.install();const u=Cs;a(Cs,i);class h extends u.AbstractMessageReader{constructor(E){super(),this._onData=new u.Emitter,this._messageListener=N=>{this._onData.fire(N.data)},E.addEventListener("error",N=>this.fireError(N)),E.onmessage=this._messageListener}listen(E){return this._onData.event(E)}}i.BrowserMessageReader=h;class y extends u.AbstractMessageWriter{constructor(E){super(),this.context=E,this.errorCount=0,E.addEventListener("error",N=>this.fireError(N))}write(E){try{return this.context.postMessage(E),Promise.resolve()}catch(N){return this.handleError(N,E),Promise.reject(N)}}handleError(E,N){this.errorCount++,this.fireError(E,N,this.errorCount)}end(){}}i.BrowserMessageWriter=y;function k(C,E,N,H){return N===void 0&&(N=u.NullLogger),u.ConnectionStrategy.is(H)&&(H={connectionStrategy:H}),u.createMessageConnection(C,E,N,H)}i.createMessageConnection=k})(Dt);var du=Dt,Hu={},ks;(function(i){i.MIN_VALUE=-2147483648,i.MAX_VALUE=2147483647})(ks||(ks={}));var ki;(function(i){i.MIN_VALUE=0,i.MAX_VALUE=2147483647})(ki||(ki={}));var Tn;(function(i){function s(c,u){return c===Number.MAX_VALUE&&(c=ki.MAX_VALUE),u===Number.MAX_VALUE&&(u=ki.MAX_VALUE),{line:c,character:u}}i.create=s;function a(c){var u=c;return X.objectLiteral(u)&&X.uinteger(u.line)&&X.uinteger(u.character)}i.is=a})(Tn||(Tn={}));var Mt;(function(i){function s(c,u,h,y){if(X.uinteger(c)&&X.uinteger(u)&&X.uinteger(h)&&X.uinteger(y))return{start:Tn.create(c,u),end:Tn.create(h,y)};if(Tn.is(c)&&Tn.is(u))return{start:c,end:u};throw new Error("Range#create called with invalid arguments["+c+", "+u+", "+h+", "+y+"]")}i.create=s;function a(c){var u=c;return X.objectLiteral(u)&&Tn.is(u.start)&&Tn.is(u.end)}i.is=a})(Mt||(Mt={}));var lo;(function(i){function s(c,u){return{uri:c,range:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&Mt.is(u.range)&&(X.string(u.uri)||X.undefined(u.uri))}i.is=a})(lo||(lo={}));var Ts;(function(i){function s(c,u,h,y){return{targetUri:c,targetRange:u,targetSelectionRange:h,originSelectionRange:y}}i.create=s;function a(c){var u=c;return X.defined(u)&&Mt.is(u.targetRange)&&X.string(u.targetUri)&&(Mt.is(u.targetSelectionRange)||X.undefined(u.targetSelectionRange))&&(Mt.is(u.originSelectionRange)||X.undefined(u.originSelectionRange))}i.is=a})(Ts||(Ts={}));var uo;(function(i){function s(c,u,h,y){return{red:c,green:u,blue:h,alpha:y}}i.create=s;function a(c){var u=c;return X.numberRange(u.red,0,1)&&X.numberRange(u.green,0,1)&&X.numberRange(u.blue,0,1)&&X.numberRange(u.alpha,0,1)}i.is=a})(uo||(uo={}));var Ss;(function(i){function s(c,u){return{range:c,color:u}}i.create=s;function a(c){var u=c;return Mt.is(u.range)&&uo.is(u.color)}i.is=a})(Ss||(Ss={}));var Es;(function(i){function s(c,u,h){return{label:c,textEdit:u,additionalTextEdits:h}}i.create=s;function a(c){var u=c;return X.string(u.label)&&(X.undefined(u.textEdit)||Un.is(u))&&(X.undefined(u.additionalTextEdits)||X.typedArray(u.additionalTextEdits,Un.is))}i.is=a})(Es||(Es={}));var xs;(function(i){i.Comment="comment",i.Imports="imports",i.Region="region"})(xs||(xs={}));var As;(function(i){function s(c,u,h,y,k){var C={startLine:c,endLine:u};return X.defined(h)&&(C.startCharacter=h),X.defined(y)&&(C.endCharacter=y),X.defined(k)&&(C.kind=k),C}i.create=s;function a(c){var u=c;return X.uinteger(u.startLine)&&X.uinteger(u.startLine)&&(X.undefined(u.startCharacter)||X.uinteger(u.startCharacter))&&(X.undefined(u.endCharacter)||X.uinteger(u.endCharacter))&&(X.undefined(u.kind)||X.string(u.kind))}i.is=a})(As||(As={}));var co;(function(i){function s(c,u){return{location:c,message:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&lo.is(u.location)&&X.string(u.message)}i.is=a})(co||(co={}));var _s;(function(i){i.Error=1,i.Warning=2,i.Information=3,i.Hint=4})(_s||(_s={}));var Rs;(function(i){i.Unnecessary=1,i.Deprecated=2})(Rs||(Rs={}));var Ls;(function(i){function s(a){var c=a;return c!=null&&X.string(c.href)}i.is=s})(Ls||(Ls={}));var Ti;(function(i){function s(c,u,h,y,k,C){var E={range:c,message:u};return X.defined(h)&&(E.severity=h),X.defined(y)&&(E.code=y),X.defined(k)&&(E.source=k),X.defined(C)&&(E.relatedInformation=C),E}i.create=s;function a(c){var u,h=c;return X.defined(h)&&Mt.is(h.range)&&X.string(h.message)&&(X.number(h.severity)||X.undefined(h.severity))&&(X.integer(h.code)||X.string(h.code)||X.undefined(h.code))&&(X.undefined(h.codeDescription)||X.string((u=h.codeDescription)===null||u===void 0?void 0:u.href))&&(X.string(h.source)||X.undefined(h.source))&&(X.undefined(h.relatedInformation)||X.typedArray(h.relatedInformation,co.is))}i.is=a})(Ti||(Ti={}));var Hr;(function(i){function s(c,u){for(var h=[],y=2;y<arguments.length;y++)h[y-2]=arguments[y];var k={title:c,command:u};return X.defined(h)&&h.length>0&&(k.arguments=h),k}i.create=s;function a(c){var u=c;return X.defined(u)&&X.string(u.title)&&X.string(u.command)}i.is=a})(Hr||(Hr={}));var Un;(function(i){function s(h,y){return{range:h,newText:y}}i.replace=s;function a(h,y){return{range:{start:h,end:h},newText:y}}i.insert=a;function c(h){return{range:h,newText:""}}i.del=c;function u(h){var y=h;return X.objectLiteral(y)&&X.string(y.newText)&&Mt.is(y.range)}i.is=u})(Un||(Un={}));var gr;(function(i){function s(c,u,h){var y={label:c};return u!==void 0&&(y.needsConfirmation=u),h!==void 0&&(y.description=h),y}i.create=s;function a(c){var u=c;return u!==void 0&&X.objectLiteral(u)&&X.string(u.label)&&(X.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(X.string(u.description)||u.description===void 0)}i.is=a})(gr||(gr={}));var qt;(function(i){function s(a){var c=a;return typeof c=="string"}i.is=s})(qt||(qt={}));var jn;(function(i){function s(h,y,k){return{range:h,newText:y,annotationId:k}}i.replace=s;function a(h,y,k){return{range:{start:h,end:h},newText:y,annotationId:k}}i.insert=a;function c(h,y){return{range:h,newText:"",annotationId:y}}i.del=c;function u(h){var y=h;return Un.is(y)&&(gr.is(y.annotationId)||qt.is(y.annotationId))}i.is=u})(jn||(jn={}));var Si;(function(i){function s(c,u){return{textDocument:c,edits:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&Ei.is(u.textDocument)&&Array.isArray(u.edits)}i.is=a})(Si||(Si={}));var qr;(function(i){function s(c,u,h){var y={kind:"create",uri:c};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(y.options=u),h!==void 0&&(y.annotationId=h),y}i.create=s;function a(c){var u=c;return u&&u.kind==="create"&&X.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||X.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||X.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||qt.is(u.annotationId))}i.is=a})(qr||(qr={}));var zr;(function(i){function s(c,u,h,y){var k={kind:"rename",oldUri:c,newUri:u};return h!==void 0&&(h.overwrite!==void 0||h.ignoreIfExists!==void 0)&&(k.options=h),y!==void 0&&(k.annotationId=y),k}i.create=s;function a(c){var u=c;return u&&u.kind==="rename"&&X.string(u.oldUri)&&X.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||X.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||X.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||qt.is(u.annotationId))}i.is=a})(zr||(zr={}));var jr;(function(i){function s(c,u,h){var y={kind:"delete",uri:c};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(y.options=u),h!==void 0&&(y.annotationId=h),y}i.create=s;function a(c){var u=c;return u&&u.kind==="delete"&&X.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||X.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||X.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||qt.is(u.annotationId))}i.is=a})(jr||(jr={}));var fo;(function(i){function s(a){var c=a;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(u){return X.string(u.kind)?qr.is(u)||zr.is(u)||jr.is(u):Si.is(u)}))}i.is=s})(fo||(fo={}));var oo=function(){function i(s,a){this.edits=s,this.changeAnnotations=a}return i.prototype.insert=function(s,a,c){var u,h;if(c===void 0?u=Un.insert(s,a):qt.is(c)?(h=c,u=jn.insert(s,a,c)):(this.assertChangeAnnotations(this.changeAnnotations),h=this.changeAnnotations.manage(c),u=jn.insert(s,a,h)),this.edits.push(u),h!==void 0)return h},i.prototype.replace=function(s,a,c){var u,h;if(c===void 0?u=Un.replace(s,a):qt.is(c)?(h=c,u=jn.replace(s,a,c)):(this.assertChangeAnnotations(this.changeAnnotations),h=this.changeAnnotations.manage(c),u=jn.replace(s,a,h)),this.edits.push(u),h!==void 0)return h},i.prototype.delete=function(s,a){var c,u;if(a===void 0?c=Un.del(s):qt.is(a)?(u=a,c=jn.del(s,a)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(a),c=jn.del(s,u)),this.edits.push(c),u!==void 0)return u},i.prototype.add=function(s){this.edits.push(s)},i.prototype.all=function(){return this.edits},i.prototype.clear=function(){this.edits.splice(0,this.edits.length)},i.prototype.assertChangeAnnotations=function(s){if(s===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},i}(),hu=function(){function i(s){this._annotations=s===void 0?Object.create(null):s,this._counter=0,this._size=0}return i.prototype.all=function(){return this._annotations},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),i.prototype.manage=function(s,a){var c;if(qt.is(s)?c=s:(c=this.nextId(),a=s),this._annotations[c]!==void 0)throw new Error("Id "+c+" is already in use.");if(a===void 0)throw new Error("No annotation provided for id "+c);return this._annotations[c]=a,this._size++,c},i.prototype.nextId=function(){return this._counter++,this._counter.toString()},i}(),Rd=function(){function i(s){var a=this;this._textEditChanges=Object.create(null),s!==void 0?(this._workspaceEdit=s,s.documentChanges?(this._changeAnnotations=new hu(s.changeAnnotations),s.changeAnnotations=this._changeAnnotations.all(),s.documentChanges.forEach(function(c){if(Si.is(c)){var u=new oo(c.edits,a._changeAnnotations);a._textEditChanges[c.textDocument.uri]=u}})):s.changes&&Object.keys(s.changes).forEach(function(c){var u=new oo(s.changes[c]);a._textEditChanges[c]=u})):this._workspaceEdit={}}return Object.defineProperty(i.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),i.prototype.getTextEditChange=function(s){if(Ei.is(s)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a={uri:s.uri,version:s.version},c=this._textEditChanges[a.uri];if(!c){var u=[],h={textDocument:a,edits:u};this._workspaceEdit.documentChanges.push(h),c=new oo(u,this._changeAnnotations),this._textEditChanges[a.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[s];if(!c){var u=[];this._workspaceEdit.changes[s]=u,c=new oo(u),this._textEditChanges[s]=c}return c}},i.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new hu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},i.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},i.prototype.createFile=function(s,a,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;gr.is(a)||qt.is(a)?u=a:c=a;var h,y;if(u===void 0?h=qr.create(s,c):(y=qt.is(u)?u:this._changeAnnotations.manage(u),h=qr.create(s,c,y)),this._workspaceEdit.documentChanges.push(h),y!==void 0)return y},i.prototype.renameFile=function(s,a,c,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h;gr.is(c)||qt.is(c)?h=c:u=c;var y,k;if(h===void 0?y=zr.create(s,a,u):(k=qt.is(h)?h:this._changeAnnotations.manage(h),y=zr.create(s,a,u,k)),this._workspaceEdit.documentChanges.push(y),k!==void 0)return k},i.prototype.deleteFile=function(s,a,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;gr.is(a)||qt.is(a)?u=a:c=a;var h,y;if(u===void 0?h=jr.create(s,c):(y=qt.is(u)?u:this._changeAnnotations.manage(u),h=jr.create(s,c,y)),this._workspaceEdit.documentChanges.push(h),y!==void 0)return y},i}(),Fs;(function(i){function s(c){return{uri:c}}i.create=s;function a(c){var u=c;return X.defined(u)&&X.string(u.uri)}i.is=a})(Fs||(Fs={}));var Ms;(function(i){function s(c,u){return{uri:c,version:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&X.string(u.uri)&&X.integer(u.version)}i.is=a})(Ms||(Ms={}));var Ei;(function(i){function s(c,u){return{uri:c,version:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&X.string(u.uri)&&(u.version===null||X.integer(u.version))}i.is=a})(Ei||(Ei={}));var Ps;(function(i){function s(c,u,h,y){return{uri:c,languageId:u,version:h,text:y}}i.create=s;function a(c){var u=c;return X.defined(u)&&X.string(u.uri)&&X.string(u.languageId)&&X.integer(u.version)&&X.string(u.text)}i.is=a})(Ps||(Ps={}));var Ur;(function(i){i.PlainText="plaintext",i.Markdown="markdown"})(Ur||(Ur={}));(function(i){function s(a){var c=a;return c===i.PlainText||c===i.Markdown}i.is=s})(Ur||(Ur={}));var ho;(function(i){function s(a){var c=a;return X.objectLiteral(a)&&Ur.is(c.kind)&&X.string(c.value)}i.is=s})(ho||(ho={}));var Ns;(function(i){i.Text=1,i.Method=2,i.Function=3,i.Constructor=4,i.Field=5,i.Variable=6,i.Class=7,i.Interface=8,i.Module=9,i.Property=10,i.Unit=11,i.Value=12,i.Enum=13,i.Keyword=14,i.Snippet=15,i.Color=16,i.File=17,i.Reference=18,i.Folder=19,i.EnumMember=20,i.Constant=21,i.Struct=22,i.Event=23,i.Operator=24,i.TypeParameter=25})(Ns||(Ns={}));var Os;(function(i){i.PlainText=1,i.Snippet=2})(Os||(Os={}));var Bs;(function(i){i.Deprecated=1})(Bs||(Bs={}));var Is;(function(i){function s(c,u,h){return{newText:c,insert:u,replace:h}}i.create=s;function a(c){var u=c;return u&&X.string(u.newText)&&Mt.is(u.insert)&&Mt.is(u.replace)}i.is=a})(Is||(Is={}));var Ws;(function(i){i.asIs=1,i.adjustIndentation=2})(Ws||(Ws={}));var Hs;(function(i){function s(a){return{label:a}}i.create=s})(Hs||(Hs={}));var qs;(function(i){function s(a,c){return{items:a||[],isIncomplete:!!c}}i.create=s})(qs||(qs={}));var xi;(function(i){function s(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i.fromPlainText=s;function a(c){var u=c;return X.string(u)||X.objectLiteral(u)&&X.string(u.language)&&X.string(u.value)}i.is=a})(xi||(xi={}));var zs;(function(i){function s(a){var c=a;return!!c&&X.objectLiteral(c)&&(ho.is(c.contents)||xi.is(c.contents)||X.typedArray(c.contents,xi.is))&&(a.range===void 0||Mt.is(a.range))}i.is=s})(zs||(zs={}));var js;(function(i){function s(a,c){return c?{label:a,documentation:c}:{label:a}}i.create=s})(js||(js={}));var Us;(function(i){function s(a,c){for(var u=[],h=2;h<arguments.length;h++)u[h-2]=arguments[h];var y={label:a};return X.defined(c)&&(y.documentation=c),X.defined(u)?y.parameters=u:y.parameters=[],y}i.create=s})(Us||(Us={}));var $s;(function(i){i.Text=1,i.Read=2,i.Write=3})($s||($s={}));var Gs;(function(i){function s(a,c){var u={range:a};return X.number(c)&&(u.kind=c),u}i.create=s})(Gs||(Gs={}));var Ks;(function(i){i.File=1,i.Module=2,i.Namespace=3,i.Package=4,i.Class=5,i.Method=6,i.Property=7,i.Field=8,i.Constructor=9,i.Enum=10,i.Interface=11,i.Function=12,i.Variable=13,i.Constant=14,i.String=15,i.Number=16,i.Boolean=17,i.Array=18,i.Object=19,i.Key=20,i.Null=21,i.EnumMember=22,i.Struct=23,i.Event=24,i.Operator=25,i.TypeParameter=26})(Ks||(Ks={}));var Xs;(function(i){i.Deprecated=1})(Xs||(Xs={}));var Ys;(function(i){function s(a,c,u,h,y){var k={name:a,kind:c,location:{uri:h,range:u}};return y&&(k.containerName=y),k}i.create=s})(Ys||(Ys={}));var Zs;(function(i){function s(c,u,h,y,k,C){var E={name:c,detail:u,kind:h,range:y,selectionRange:k};return C!==void 0&&(E.children=C),E}i.create=s;function a(c){var u=c;return u&&X.string(u.name)&&X.number(u.kind)&&Mt.is(u.range)&&Mt.is(u.selectionRange)&&(u.detail===void 0||X.string(u.detail))&&(u.deprecated===void 0||X.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}i.is=a})(Zs||(Zs={}));var Js;(function(i){i.Empty="",i.QuickFix="quickfix",i.Refactor="refactor",i.RefactorExtract="refactor.extract",i.RefactorInline="refactor.inline",i.RefactorRewrite="refactor.rewrite",i.Source="source",i.SourceOrganizeImports="source.organizeImports",i.SourceFixAll="source.fixAll"})(Js||(Js={}));var Vs;(function(i){function s(c,u){var h={diagnostics:c};return u!=null&&(h.only=u),h}i.create=s;function a(c){var u=c;return X.defined(u)&&X.typedArray(u.diagnostics,Ti.is)&&(u.only===void 0||X.typedArray(u.only,X.string))}i.is=a})(Vs||(Vs={}));var Qs;(function(i){function s(c,u,h){var y={title:c},k=!0;return typeof u=="string"?(k=!1,y.kind=u):Hr.is(u)?y.command=u:y.edit=u,k&&h!==void 0&&(y.kind=h),y}i.create=s;function a(c){var u=c;return u&&X.string(u.title)&&(u.diagnostics===void 0||X.typedArray(u.diagnostics,Ti.is))&&(u.kind===void 0||X.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||Hr.is(u.command))&&(u.isPreferred===void 0||X.boolean(u.isPreferred))&&(u.edit===void 0||fo.is(u.edit))}i.is=a})(Qs||(Qs={}));var ea;(function(i){function s(c,u){var h={range:c};return X.defined(u)&&(h.data=u),h}i.create=s;function a(c){var u=c;return X.defined(u)&&Mt.is(u.range)&&(X.undefined(u.command)||Hr.is(u.command))}i.is=a})(ea||(ea={}));var ta;(function(i){function s(c,u){return{tabSize:c,insertSpaces:u}}i.create=s;function a(c){var u=c;return X.defined(u)&&X.uinteger(u.tabSize)&&X.boolean(u.insertSpaces)}i.is=a})(ta||(ta={}));var na;(function(i){function s(c,u,h){return{range:c,target:u,data:h}}i.create=s;function a(c){var u=c;return X.defined(u)&&Mt.is(u.range)&&(X.undefined(u.target)||X.string(u.target))}i.is=a})(na||(na={}));var ra;(function(i){function s(c,u){return{range:c,parent:u}}i.create=s;function a(c){var u=c;return u!==void 0&&Mt.is(u.range)&&(u.parent===void 0||i.is(u.parent))}i.is=a})(ra||(ra={}));var Ld=[`
`,`\r
`,"\r"],ia;(function(i){function s(h,y,k,C){return new Fd(h,y,k,C)}i.create=s;function a(h){var y=h;return!!(X.defined(y)&&X.string(y.uri)&&(X.undefined(y.languageId)||X.string(y.languageId))&&X.uinteger(y.lineCount)&&X.func(y.getText)&&X.func(y.positionAt)&&X.func(y.offsetAt))}i.is=a;function c(h,y){for(var k=h.getText(),C=u(y,function(Q,ae){var fe=Q.range.start.line-ae.range.start.line;return fe===0?Q.range.start.character-ae.range.start.character:fe}),E=k.length,N=C.length-1;N>=0;N--){var H=C[N],O=h.offsetAt(H.range.start),j=h.offsetAt(H.range.end);if(j<=E)k=k.substring(0,O)+H.newText+k.substring(j,k.length);else throw new Error("Overlapping edit");E=O}return k}i.applyEdits=c;function u(h,y){if(h.length<=1)return h;var k=h.length/2|0,C=h.slice(0,k),E=h.slice(k);u(C,y),u(E,y);for(var N=0,H=0,O=0;N<C.length&&H<E.length;){var j=y(C[N],E[H]);j<=0?h[O++]=C[N++]:h[O++]=E[H++]}for(;N<C.length;)h[O++]=C[N++];for(;H<E.length;)h[O++]=E[H++];return h}})(ia||(ia={}));var Fd=function(){function i(s,a,c,u){this._uri=s,this._languageId=a,this._version=c,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),i.prototype.getText=function(s){if(s){var a=this.offsetAt(s.start),c=this.offsetAt(s.end);return this._content.substring(a,c)}return this._content},i.prototype.update=function(s,a){this._content=s.text,this._version=a,this._lineOffsets=void 0},i.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var s=[],a=this._content,c=!0,u=0;u<a.length;u++){c&&(s.push(u),c=!1);var h=a.charAt(u);c=h==="\r"||h===`
`,h==="\r"&&u+1<a.length&&a.charAt(u+1)===`
`&&u++}c&&a.length>0&&s.push(a.length),this._lineOffsets=s}return this._lineOffsets},i.prototype.positionAt=function(s){s=Math.max(Math.min(s,this._content.length),0);var a=this.getLineOffsets(),c=0,u=a.length;if(u===0)return Tn.create(0,s);for(;c<u;){var h=Math.floor((c+u)/2);a[h]>s?u=h:c=h+1}var y=c-1;return Tn.create(y,s-a[y])},i.prototype.offsetAt=function(s){var a=this.getLineOffsets();if(s.line>=a.length)return this._content.length;if(s.line<0)return 0;var c=a[s.line],u=s.line+1<a.length?a[s.line+1]:this._content.length;return Math.max(Math.min(c+s.character,u),c)},Object.defineProperty(i.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),i}(),X;(function(i){var s=Object.prototype.toString;function a(j){return typeof j!="undefined"}i.defined=a;function c(j){return typeof j=="undefined"}i.undefined=c;function u(j){return j===!0||j===!1}i.boolean=u;function h(j){return s.call(j)==="[object String]"}i.string=h;function y(j){return s.call(j)==="[object Number]"}i.number=y;function k(j,Q,ae){return s.call(j)==="[object Number]"&&Q<=j&&j<=ae}i.numberRange=k;function C(j){return s.call(j)==="[object Number]"&&-2147483648<=j&&j<=2147483647}i.integer=C;function E(j){return s.call(j)==="[object Number]"&&0<=j&&j<=2147483647}i.uinteger=E;function N(j){return s.call(j)==="[object Function]"}i.func=N;function H(j){return j!==null&&typeof j=="object"}i.objectLiteral=H;function O(j,Q){return Array.isArray(j)&&j.every(Q)}i.typedArray=O})(X||(X={}));var Md=Object.freeze(Object.defineProperty({__proto__:null,get integer(){return ks},get uinteger(){return ki},get Position(){return Tn},get Range(){return Mt},get Location(){return lo},get LocationLink(){return Ts},get Color(){return uo},get ColorInformation(){return Ss},get ColorPresentation(){return Es},get FoldingRangeKind(){return xs},get FoldingRange(){return As},get DiagnosticRelatedInformation(){return co},get DiagnosticSeverity(){return _s},get DiagnosticTag(){return Rs},get CodeDescription(){return Ls},get Diagnostic(){return Ti},get Command(){return Hr},get TextEdit(){return Un},get ChangeAnnotation(){return gr},get ChangeAnnotationIdentifier(){return qt},get AnnotatedTextEdit(){return jn},get TextDocumentEdit(){return Si},get CreateFile(){return qr},get RenameFile(){return zr},get DeleteFile(){return jr},get WorkspaceEdit(){return fo},WorkspaceChange:Rd,get TextDocumentIdentifier(){return Fs},get VersionedTextDocumentIdentifier(){return Ms},get OptionalVersionedTextDocumentIdentifier(){return Ei},get TextDocumentItem(){return Ps},get MarkupKind(){return Ur},get MarkupContent(){return ho},get CompletionItemKind(){return Ns},get InsertTextFormat(){return Os},get CompletionItemTag(){return Bs},get InsertReplaceEdit(){return Is},get InsertTextMode(){return Ws},get CompletionItem(){return Hs},get CompletionList(){return qs},get MarkedString(){return xi},get Hover(){return zs},get ParameterInformation(){return js},get SignatureInformation(){return Us},get DocumentHighlightKind(){return $s},get DocumentHighlight(){return Gs},get SymbolKind(){return Ks},get SymbolTag(){return Xs},get SymbolInformation(){return Ys},get DocumentSymbol(){return Zs},get CodeActionKind(){return Js},get CodeActionContext(){return Vs},get CodeAction(){return Qs},get CodeLens(){return ea},get FormattingOptions(){return ta},get DocumentLink(){return na},get SelectionRange(){return ra},EOL:Ld,get TextDocument(){return ia}},Symbol.toStringTag,{value:"Module"})),Pd=dd(Md),nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.ProtocolNotificationType=nt.ProtocolNotificationType0=nt.ProtocolRequestType=nt.ProtocolRequestType0=nt.RegistrationType=void 0;const $r=Dt;class Nd{constructor(s){this.method=s}}nt.RegistrationType=Nd;class Od extends $r.RequestType0{constructor(s){super(s)}}nt.ProtocolRequestType0=Od;class Bd extends $r.RequestType{constructor(s){super(s,$r.ParameterStructures.byName)}}nt.ProtocolRequestType=Bd;class Id extends $r.NotificationType0{constructor(s){super(s)}}nt.ProtocolNotificationType0=Id;class Wd extends $r.NotificationType{constructor(s){super(s,$r.ParameterStructures.byName)}}nt.ProtocolNotificationType=Wd;var qu={},bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.objectLiteral=bt.typedArray=bt.stringArray=bt.array=bt.func=bt.error=bt.number=bt.string=bt.boolean=void 0;function Hd(i){return i===!0||i===!1}bt.boolean=Hd;function zu(i){return typeof i=="string"||i instanceof String}bt.string=zu;function qd(i){return typeof i=="number"||i instanceof Number}bt.number=qd;function zd(i){return i instanceof Error}bt.error=zd;function jd(i){return typeof i=="function"}bt.func=jd;function ju(i){return Array.isArray(i)}bt.array=ju;function Ud(i){return ju(i)&&i.every(s=>zu(s))}bt.stringArray=Ud;function $d(i,s){return Array.isArray(i)&&i.every(s)}bt.typedArray=$d;function Gd(i){return i!==null&&typeof i=="object"}bt.objectLiteral=Gd;var Uu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ImplementationRequest=void 0;const s=nt;(function(a){a.method="textDocument/implementation",a.type=new s.ProtocolRequestType(a.method)})(i.ImplementationRequest||(i.ImplementationRequest={}))})(Uu);var $u={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeDefinitionRequest=void 0;const s=nt;(function(a){a.method="textDocument/typeDefinition",a.type=new s.ProtocolRequestType(a.method)})(i.TypeDefinitionRequest||(i.TypeDefinitionRequest={}))})($u);var Gu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=void 0;const s=nt;(function(a){a.type=new s.ProtocolRequestType0("workspace/workspaceFolders")})(i.WorkspaceFoldersRequest||(i.WorkspaceFoldersRequest={})),function(a){a.type=new s.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(i.DidChangeWorkspaceFoldersNotification||(i.DidChangeWorkspaceFoldersNotification={}))})(Gu);var Ku={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurationRequest=void 0;const s=nt;(function(a){a.type=new s.ProtocolRequestType("workspace/configuration")})(i.ConfigurationRequest||(i.ConfigurationRequest={}))})(Ku);var Xu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorPresentationRequest=i.DocumentColorRequest=void 0;const s=nt;(function(a){a.method="textDocument/documentColor",a.type=new s.ProtocolRequestType(a.method)})(i.DocumentColorRequest||(i.DocumentColorRequest={})),function(a){a.type=new s.ProtocolRequestType("textDocument/colorPresentation")}(i.ColorPresentationRequest||(i.ColorPresentationRequest={}))})(Xu);var Yu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.FoldingRangeRequest=i.FoldingRangeKind=void 0;const s=nt;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(i.FoldingRangeKind||(i.FoldingRangeKind={})),function(a){a.method="textDocument/foldingRange",a.type=new s.ProtocolRequestType(a.method)}(i.FoldingRangeRequest||(i.FoldingRangeRequest={}))})(Yu);var Zu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DeclarationRequest=void 0;const s=nt;(function(a){a.method="textDocument/declaration",a.type=new s.ProtocolRequestType(a.method)})(i.DeclarationRequest||(i.DeclarationRequest={}))})(Zu);var Ju={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRangeRequest=void 0;const s=nt;(function(a){a.method="textDocument/selectionRange",a.type=new s.ProtocolRequestType(a.method)})(i.SelectionRangeRequest||(i.SelectionRangeRequest={}))})(Ju);var Vu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=void 0;const s=Dt,a=nt;(function(c){c.type=new s.ProgressType;function u(h){return h===c.type}c.is=u})(i.WorkDoneProgress||(i.WorkDoneProgress={})),function(c){c.type=new a.ProtocolRequestType("window/workDoneProgress/create")}(i.WorkDoneProgressCreateRequest||(i.WorkDoneProgressCreateRequest={})),function(c){c.type=new a.ProtocolNotificationType("window/workDoneProgress/cancel")}(i.WorkDoneProgressCancelNotification||(i.WorkDoneProgressCancelNotification={}))})(Vu);var Qu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.CallHierarchyPrepareRequest=void 0;const s=nt;(function(a){a.method="textDocument/prepareCallHierarchy",a.type=new s.ProtocolRequestType(a.method)})(i.CallHierarchyPrepareRequest||(i.CallHierarchyPrepareRequest={})),function(a){a.method="callHierarchy/incomingCalls",a.type=new s.ProtocolRequestType(a.method)}(i.CallHierarchyIncomingCallsRequest||(i.CallHierarchyIncomingCallsRequest={})),function(a){a.method="callHierarchy/outgoingCalls",a.type=new s.ProtocolRequestType(a.method)}(i.CallHierarchyOutgoingCallsRequest||(i.CallHierarchyOutgoingCallsRequest={}))})(Qu);var ec={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.SemanticTokensRegistrationType=i.TokenFormat=i.SemanticTokens=i.SemanticTokenModifiers=i.SemanticTokenTypes=void 0;const s=nt;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator"})(i.SemanticTokenTypes||(i.SemanticTokenTypes={})),function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"}(i.SemanticTokenModifiers||(i.SemanticTokenModifiers={})),function(a){function c(u){const h=u;return h!==void 0&&(h.resultId===void 0||typeof h.resultId=="string")&&Array.isArray(h.data)&&(h.data.length===0||typeof h.data[0]=="number")}a.is=c}(i.SemanticTokens||(i.SemanticTokens={})),function(a){a.Relative="relative"}(i.TokenFormat||(i.TokenFormat={})),function(a){a.method="textDocument/semanticTokens",a.type=new s.RegistrationType(a.method)}(i.SemanticTokensRegistrationType||(i.SemanticTokensRegistrationType={})),function(a){a.method="textDocument/semanticTokens/full",a.type=new s.ProtocolRequestType(a.method)}(i.SemanticTokensRequest||(i.SemanticTokensRequest={})),function(a){a.method="textDocument/semanticTokens/full/delta",a.type=new s.ProtocolRequestType(a.method)}(i.SemanticTokensDeltaRequest||(i.SemanticTokensDeltaRequest={})),function(a){a.method="textDocument/semanticTokens/range",a.type=new s.ProtocolRequestType(a.method)}(i.SemanticTokensRangeRequest||(i.SemanticTokensRangeRequest={})),function(a){a.method="workspace/semanticTokens/refresh",a.type=new s.ProtocolRequestType0(a.method)}(i.SemanticTokensRefreshRequest||(i.SemanticTokensRefreshRequest={}))})(ec);var tc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ShowDocumentRequest=void 0;const s=nt;(function(a){a.method="window/showDocument",a.type=new s.ProtocolRequestType(a.method)})(i.ShowDocumentRequest||(i.ShowDocumentRequest={}))})(tc);var nc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LinkedEditingRangeRequest=void 0;const s=nt;(function(a){a.method="textDocument/linkedEditingRange",a.type=new s.ProtocolRequestType(a.method)})(i.LinkedEditingRangeRequest||(i.LinkedEditingRangeRequest={}))})(nc);var rc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.DidRenameFilesNotification=i.WillRenameFilesRequest=i.DidCreateFilesNotification=i.WillCreateFilesRequest=i.FileOperationPatternKind=void 0;const s=nt;(function(a){a.file="file",a.folder="folder"})(i.FileOperationPatternKind||(i.FileOperationPatternKind={})),function(a){a.method="workspace/willCreateFiles",a.type=new s.ProtocolRequestType(a.method)}(i.WillCreateFilesRequest||(i.WillCreateFilesRequest={})),function(a){a.method="workspace/didCreateFiles",a.type=new s.ProtocolNotificationType(a.method)}(i.DidCreateFilesNotification||(i.DidCreateFilesNotification={})),function(a){a.method="workspace/willRenameFiles",a.type=new s.ProtocolRequestType(a.method)}(i.WillRenameFilesRequest||(i.WillRenameFilesRequest={})),function(a){a.method="workspace/didRenameFiles",a.type=new s.ProtocolNotificationType(a.method)}(i.DidRenameFilesNotification||(i.DidRenameFilesNotification={})),function(a){a.method="workspace/didDeleteFiles",a.type=new s.ProtocolNotificationType(a.method)}(i.DidDeleteFilesNotification||(i.DidDeleteFilesNotification={})),function(a){a.method="workspace/willDeleteFiles",a.type=new s.ProtocolRequestType(a.method)}(i.WillDeleteFilesRequest||(i.WillDeleteFilesRequest={}))})(rc);var ic={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=void 0;const s=nt;(function(a){a.document="document",a.project="project",a.group="group",a.scheme="scheme",a.global="global"})(i.UniquenessLevel||(i.UniquenessLevel={})),function(a){a.import="import",a.export="export",a.local="local"}(i.MonikerKind||(i.MonikerKind={})),function(a){a.method="textDocument/moniker",a.type=new s.ProtocolRequestType(a.method)}(i.MonikerRequest||(i.MonikerRequest={}))})(ic);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocumentLinkRequest=i.CodeLensRefreshRequest=i.CodeLensResolveRequest=i.CodeLensRequest=i.WorkspaceSymbolRequest=i.CodeActionResolveRequest=i.CodeActionRequest=i.DocumentSymbolRequest=i.DocumentHighlightRequest=i.ReferencesRequest=i.DefinitionRequest=i.SignatureHelpRequest=i.SignatureHelpTriggerKind=i.HoverRequest=i.CompletionResolveRequest=i.CompletionRequest=i.CompletionTriggerKind=i.PublishDiagnosticsNotification=i.WatchKind=i.FileChangeType=i.DidChangeWatchedFilesNotification=i.WillSaveTextDocumentWaitUntilRequest=i.WillSaveTextDocumentNotification=i.TextDocumentSaveReason=i.DidSaveTextDocumentNotification=i.DidCloseTextDocumentNotification=i.DidChangeTextDocumentNotification=i.TextDocumentContentChangeEvent=i.DidOpenTextDocumentNotification=i.TextDocumentSyncKind=i.TelemetryEventNotification=i.LogMessageNotification=i.ShowMessageRequest=i.ShowMessageNotification=i.MessageType=i.DidChangeConfigurationNotification=i.ExitNotification=i.ShutdownRequest=i.InitializedNotification=i.InitializeError=i.InitializeRequest=i.WorkDoneProgressOptions=i.TextDocumentRegistrationOptions=i.StaticRegistrationOptions=i.FailureHandlingKind=i.ResourceOperationKind=i.UnregistrationRequest=i.RegistrationRequest=i.DocumentSelector=i.DocumentFilter=void 0,i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.WillRenameFilesRequest=i.DidRenameFilesNotification=i.WillCreateFilesRequest=i.DidCreateFilesNotification=i.FileOperationPatternKind=i.LinkedEditingRangeRequest=i.ShowDocumentRequest=i.SemanticTokensRegistrationType=i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.TokenFormat=i.SemanticTokens=i.SemanticTokenModifiers=i.SemanticTokenTypes=i.CallHierarchyPrepareRequest=i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=i.SelectionRangeRequest=i.DeclarationRequest=i.FoldingRangeRequest=i.ColorPresentationRequest=i.DocumentColorRequest=i.ConfigurationRequest=i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=i.TypeDefinitionRequest=i.ImplementationRequest=i.ApplyWorkspaceEditRequest=i.ExecuteCommandRequest=i.PrepareRenameRequest=i.RenameRequest=i.PrepareSupportDefaultBehavior=i.DocumentOnTypeFormattingRequest=i.DocumentRangeFormattingRequest=i.DocumentFormattingRequest=i.DocumentLinkResolveRequest=void 0;const s=bt,a=nt,c=Uu;Object.defineProperty(i,"ImplementationRequest",{enumerable:!0,get:function(){return c.ImplementationRequest}});const u=$u;Object.defineProperty(i,"TypeDefinitionRequest",{enumerable:!0,get:function(){return u.TypeDefinitionRequest}});const h=Gu;Object.defineProperty(i,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return h.WorkspaceFoldersRequest}}),Object.defineProperty(i,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return h.DidChangeWorkspaceFoldersNotification}});const y=Ku;Object.defineProperty(i,"ConfigurationRequest",{enumerable:!0,get:function(){return y.ConfigurationRequest}});const k=Xu;Object.defineProperty(i,"DocumentColorRequest",{enumerable:!0,get:function(){return k.DocumentColorRequest}}),Object.defineProperty(i,"ColorPresentationRequest",{enumerable:!0,get:function(){return k.ColorPresentationRequest}});const C=Yu;Object.defineProperty(i,"FoldingRangeRequest",{enumerable:!0,get:function(){return C.FoldingRangeRequest}});const E=Zu;Object.defineProperty(i,"DeclarationRequest",{enumerable:!0,get:function(){return E.DeclarationRequest}});const N=Ju;Object.defineProperty(i,"SelectionRangeRequest",{enumerable:!0,get:function(){return N.SelectionRangeRequest}});const H=Vu;Object.defineProperty(i,"WorkDoneProgress",{enumerable:!0,get:function(){return H.WorkDoneProgress}}),Object.defineProperty(i,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return H.WorkDoneProgressCreateRequest}}),Object.defineProperty(i,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return H.WorkDoneProgressCancelNotification}});const O=Qu;Object.defineProperty(i,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return O.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(i,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return O.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(i,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return O.CallHierarchyPrepareRequest}});const j=ec;Object.defineProperty(i,"SemanticTokenTypes",{enumerable:!0,get:function(){return j.SemanticTokenTypes}}),Object.defineProperty(i,"SemanticTokenModifiers",{enumerable:!0,get:function(){return j.SemanticTokenModifiers}}),Object.defineProperty(i,"SemanticTokens",{enumerable:!0,get:function(){return j.SemanticTokens}}),Object.defineProperty(i,"TokenFormat",{enumerable:!0,get:function(){return j.TokenFormat}}),Object.defineProperty(i,"SemanticTokensRequest",{enumerable:!0,get:function(){return j.SemanticTokensRequest}}),Object.defineProperty(i,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return j.SemanticTokensDeltaRequest}}),Object.defineProperty(i,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return j.SemanticTokensRangeRequest}}),Object.defineProperty(i,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return j.SemanticTokensRefreshRequest}}),Object.defineProperty(i,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return j.SemanticTokensRegistrationType}});const Q=tc;Object.defineProperty(i,"ShowDocumentRequest",{enumerable:!0,get:function(){return Q.ShowDocumentRequest}});const ae=nc;Object.defineProperty(i,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return ae.LinkedEditingRangeRequest}});const fe=rc;Object.defineProperty(i,"FileOperationPatternKind",{enumerable:!0,get:function(){return fe.FileOperationPatternKind}}),Object.defineProperty(i,"DidCreateFilesNotification",{enumerable:!0,get:function(){return fe.DidCreateFilesNotification}}),Object.defineProperty(i,"WillCreateFilesRequest",{enumerable:!0,get:function(){return fe.WillCreateFilesRequest}}),Object.defineProperty(i,"DidRenameFilesNotification",{enumerable:!0,get:function(){return fe.DidRenameFilesNotification}}),Object.defineProperty(i,"WillRenameFilesRequest",{enumerable:!0,get:function(){return fe.WillRenameFilesRequest}}),Object.defineProperty(i,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return fe.DidDeleteFilesNotification}}),Object.defineProperty(i,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return fe.WillDeleteFilesRequest}});const P=ic;Object.defineProperty(i,"UniquenessLevel",{enumerable:!0,get:function(){return P.UniquenessLevel}}),Object.defineProperty(i,"MonikerKind",{enumerable:!0,get:function(){return P.MonikerKind}}),Object.defineProperty(i,"MonikerRequest",{enumerable:!0,get:function(){return P.MonikerRequest}});var I;(function(b){function U(V){const q=V;return s.string(q.language)||s.string(q.scheme)||s.string(q.pattern)}b.is=U})(I=i.DocumentFilter||(i.DocumentFilter={}));var F;(function(b){function U(V){if(!Array.isArray(V))return!1;for(let q of V)if(!s.string(q)&&!I.is(q))return!1;return!0}b.is=U})(F=i.DocumentSelector||(i.DocumentSelector={})),function(b){b.type=new a.ProtocolRequestType("client/registerCapability")}(i.RegistrationRequest||(i.RegistrationRequest={})),function(b){b.type=new a.ProtocolRequestType("client/unregisterCapability")}(i.UnregistrationRequest||(i.UnregistrationRequest={})),function(b){b.Create="create",b.Rename="rename",b.Delete="delete"}(i.ResourceOperationKind||(i.ResourceOperationKind={})),function(b){b.Abort="abort",b.Transactional="transactional",b.TextOnlyTransactional="textOnlyTransactional",b.Undo="undo"}(i.FailureHandlingKind||(i.FailureHandlingKind={})),function(b){function U(V){const q=V;return q&&s.string(q.id)&&q.id.length>0}b.hasId=U}(i.StaticRegistrationOptions||(i.StaticRegistrationOptions={})),function(b){function U(V){const q=V;return q&&(q.documentSelector===null||F.is(q.documentSelector))}b.is=U}(i.TextDocumentRegistrationOptions||(i.TextDocumentRegistrationOptions={})),function(b){function U(q){const re=q;return s.objectLiteral(re)&&(re.workDoneProgress===void 0||s.boolean(re.workDoneProgress))}b.is=U;function V(q){const re=q;return re&&s.boolean(re.workDoneProgress)}b.hasWorkDoneProgress=V}(i.WorkDoneProgressOptions||(i.WorkDoneProgressOptions={})),function(b){b.type=new a.ProtocolRequestType("initialize")}(i.InitializeRequest||(i.InitializeRequest={})),function(b){b.unknownProtocolVersion=1}(i.InitializeError||(i.InitializeError={})),function(b){b.type=new a.ProtocolNotificationType("initialized")}(i.InitializedNotification||(i.InitializedNotification={})),function(b){b.type=new a.ProtocolRequestType0("shutdown")}(i.ShutdownRequest||(i.ShutdownRequest={})),function(b){b.type=new a.ProtocolNotificationType0("exit")}(i.ExitNotification||(i.ExitNotification={})),function(b){b.type=new a.ProtocolNotificationType("workspace/didChangeConfiguration")}(i.DidChangeConfigurationNotification||(i.DidChangeConfigurationNotification={})),function(b){b.Error=1,b.Warning=2,b.Info=3,b.Log=4}(i.MessageType||(i.MessageType={})),function(b){b.type=new a.ProtocolNotificationType("window/showMessage")}(i.ShowMessageNotification||(i.ShowMessageNotification={})),function(b){b.type=new a.ProtocolRequestType("window/showMessageRequest")}(i.ShowMessageRequest||(i.ShowMessageRequest={})),function(b){b.type=new a.ProtocolNotificationType("window/logMessage")}(i.LogMessageNotification||(i.LogMessageNotification={})),function(b){b.type=new a.ProtocolNotificationType("telemetry/event")}(i.TelemetryEventNotification||(i.TelemetryEventNotification={})),function(b){b.None=0,b.Full=1,b.Incremental=2}(i.TextDocumentSyncKind||(i.TextDocumentSyncKind={})),function(b){b.method="textDocument/didOpen",b.type=new a.ProtocolNotificationType(b.method)}(i.DidOpenTextDocumentNotification||(i.DidOpenTextDocumentNotification={})),function(b){function U(q){let re=q;return re!=null&&typeof re.text=="string"&&re.range!==void 0&&(re.rangeLength===void 0||typeof re.rangeLength=="number")}b.isIncremental=U;function V(q){let re=q;return re!=null&&typeof re.text=="string"&&re.range===void 0&&re.rangeLength===void 0}b.isFull=V}(i.TextDocumentContentChangeEvent||(i.TextDocumentContentChangeEvent={})),function(b){b.method="textDocument/didChange",b.type=new a.ProtocolNotificationType(b.method)}(i.DidChangeTextDocumentNotification||(i.DidChangeTextDocumentNotification={})),function(b){b.method="textDocument/didClose",b.type=new a.ProtocolNotificationType(b.method)}(i.DidCloseTextDocumentNotification||(i.DidCloseTextDocumentNotification={})),function(b){b.method="textDocument/didSave",b.type=new a.ProtocolNotificationType(b.method)}(i.DidSaveTextDocumentNotification||(i.DidSaveTextDocumentNotification={})),function(b){b.Manual=1,b.AfterDelay=2,b.FocusOut=3}(i.TextDocumentSaveReason||(i.TextDocumentSaveReason={})),function(b){b.method="textDocument/willSave",b.type=new a.ProtocolNotificationType(b.method)}(i.WillSaveTextDocumentNotification||(i.WillSaveTextDocumentNotification={})),function(b){b.method="textDocument/willSaveWaitUntil",b.type=new a.ProtocolRequestType(b.method)}(i.WillSaveTextDocumentWaitUntilRequest||(i.WillSaveTextDocumentWaitUntilRequest={})),function(b){b.type=new a.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(i.DidChangeWatchedFilesNotification||(i.DidChangeWatchedFilesNotification={})),function(b){b.Created=1,b.Changed=2,b.Deleted=3}(i.FileChangeType||(i.FileChangeType={})),function(b){b.Create=1,b.Change=2,b.Delete=4}(i.WatchKind||(i.WatchKind={})),function(b){b.type=new a.ProtocolNotificationType("textDocument/publishDiagnostics")}(i.PublishDiagnosticsNotification||(i.PublishDiagnosticsNotification={})),function(b){b.Invoked=1,b.TriggerCharacter=2,b.TriggerForIncompleteCompletions=3}(i.CompletionTriggerKind||(i.CompletionTriggerKind={})),function(b){b.method="textDocument/completion",b.type=new a.ProtocolRequestType(b.method)}(i.CompletionRequest||(i.CompletionRequest={})),function(b){b.method="completionItem/resolve",b.type=new a.ProtocolRequestType(b.method)}(i.CompletionResolveRequest||(i.CompletionResolveRequest={})),function(b){b.method="textDocument/hover",b.type=new a.ProtocolRequestType(b.method)}(i.HoverRequest||(i.HoverRequest={})),function(b){b.Invoked=1,b.TriggerCharacter=2,b.ContentChange=3}(i.SignatureHelpTriggerKind||(i.SignatureHelpTriggerKind={})),function(b){b.method="textDocument/signatureHelp",b.type=new a.ProtocolRequestType(b.method)}(i.SignatureHelpRequest||(i.SignatureHelpRequest={})),function(b){b.method="textDocument/definition",b.type=new a.ProtocolRequestType(b.method)}(i.DefinitionRequest||(i.DefinitionRequest={})),function(b){b.method="textDocument/references",b.type=new a.ProtocolRequestType(b.method)}(i.ReferencesRequest||(i.ReferencesRequest={})),function(b){b.method="textDocument/documentHighlight",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentHighlightRequest||(i.DocumentHighlightRequest={})),function(b){b.method="textDocument/documentSymbol",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentSymbolRequest||(i.DocumentSymbolRequest={})),function(b){b.method="textDocument/codeAction",b.type=new a.ProtocolRequestType(b.method)}(i.CodeActionRequest||(i.CodeActionRequest={})),function(b){b.method="codeAction/resolve",b.type=new a.ProtocolRequestType(b.method)}(i.CodeActionResolveRequest||(i.CodeActionResolveRequest={})),function(b){b.method="workspace/symbol",b.type=new a.ProtocolRequestType(b.method)}(i.WorkspaceSymbolRequest||(i.WorkspaceSymbolRequest={})),function(b){b.method="textDocument/codeLens",b.type=new a.ProtocolRequestType(b.method)}(i.CodeLensRequest||(i.CodeLensRequest={})),function(b){b.method="codeLens/resolve",b.type=new a.ProtocolRequestType(b.method)}(i.CodeLensResolveRequest||(i.CodeLensResolveRequest={})),function(b){b.method="workspace/codeLens/refresh",b.type=new a.ProtocolRequestType0(b.method)}(i.CodeLensRefreshRequest||(i.CodeLensRefreshRequest={})),function(b){b.method="textDocument/documentLink",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentLinkRequest||(i.DocumentLinkRequest={})),function(b){b.method="documentLink/resolve",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentLinkResolveRequest||(i.DocumentLinkResolveRequest={})),function(b){b.method="textDocument/formatting",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentFormattingRequest||(i.DocumentFormattingRequest={})),function(b){b.method="textDocument/rangeFormatting",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentRangeFormattingRequest||(i.DocumentRangeFormattingRequest={})),function(b){b.method="textDocument/onTypeFormatting",b.type=new a.ProtocolRequestType(b.method)}(i.DocumentOnTypeFormattingRequest||(i.DocumentOnTypeFormattingRequest={})),function(b){b.Identifier=1}(i.PrepareSupportDefaultBehavior||(i.PrepareSupportDefaultBehavior={})),function(b){b.method="textDocument/rename",b.type=new a.ProtocolRequestType(b.method)}(i.RenameRequest||(i.RenameRequest={})),function(b){b.method="textDocument/prepareRename",b.type=new a.ProtocolRequestType(b.method)}(i.PrepareRenameRequest||(i.PrepareRenameRequest={})),function(b){b.type=new a.ProtocolRequestType("workspace/executeCommand")}(i.ExecuteCommandRequest||(i.ExecuteCommandRequest={})),function(b){b.type=new a.ProtocolRequestType("workspace/applyEdit")}(i.ApplyWorkspaceEditRequest||(i.ApplyWorkspaceEditRequest={}))})(qu);var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.createProtocolConnection=void 0;const pu=Dt;function Kd(i,s,a,c){return pu.ConnectionStrategy.is(c)&&(c={connectionStrategy:c}),pu.createMessageConnection(i,s,a,c)}ko.createProtocolConnection=Kd;(function(i){var s=an&&an.__createBinding||(Object.create?function(u,h,y,k){k===void 0&&(k=y),Object.defineProperty(u,k,{enumerable:!0,get:function(){return h[y]}})}:function(u,h,y,k){k===void 0&&(k=y),u[k]=h[y]}),a=an&&an.__exportStar||function(u,h){for(var y in u)y!=="default"&&!Object.prototype.hasOwnProperty.call(h,y)&&s(h,u,y)};Object.defineProperty(i,"__esModule",{value:!0}),i.LSPErrorCodes=i.createProtocolConnection=void 0,a(Dt,i),a(Pd,i),a(nt,i),a(qu,i);var c=ko;Object.defineProperty(i,"createProtocolConnection",{enumerable:!0,get:function(){return c.createProtocolConnection}}),function(u){u.lspReservedErrorRangeStart=-32899,u.ContentModified=-32801,u.RequestCancelled=-32800,u.lspReservedErrorRangeEnd=-32800}(i.LSPErrorCodes||(i.LSPErrorCodes={}))})(Hu);(function(i){var s=an&&an.__createBinding||(Object.create?function(h,y,k,C){C===void 0&&(C=k),Object.defineProperty(h,C,{enumerable:!0,get:function(){return y[k]}})}:function(h,y,k,C){C===void 0&&(C=k),h[C]=y[k]}),a=an&&an.__exportStar||function(h,y){for(var k in h)k!=="default"&&!Object.prototype.hasOwnProperty.call(y,k)&&s(y,h,k)};Object.defineProperty(i,"__esModule",{value:!0}),i.createProtocolConnection=void 0;const c=du;a(du,i),a(Hu,i);function u(h,y,k,C){return c.createMessageConnection(h,y,k,C)}i.createProtocolConnection=u})(ke);const Xd=i=>{let s="initial";const a=[],c=new Dt.Emitter,u=new Dt.Emitter,h=new Dt.Emitter,y=new Dt.Emitter,k=O=>{s==="initial"?a.push({message:O}):s==="listening"&&y.fire(JSON.parse(O))},C=O=>{s==="initial"?a.push({error:O}):s==="listening"&&c.fire(O)},E=()=>{s==="listening"&&u.fire(),s="closed"},N=O=>k(O.data),H=O=>{O.code!==1e3&&C(new Error(`WebSocket Error (${O.code}): ${O.reason}`)),E()};return i.addEventListener("message",N),i.addEventListener("close",H),{get onError(){return c.event},get onClose(){return u.event},get onPartialMessage(){return h.event},listen(O){if(s!=="initial")throw new Error("Already listening");const j=y.event(O);if(s="listening",a.length===0)return j;for(const Q of a)Q.message?k(Q.message):Q.error&&C(Q.error);return a.length=0,j},dispose(){i.removeEventListener("message",N),i.removeEventListener("close",H),c.dispose(),u.dispose(),h.dispose(),a.length=0}}},Yd=i=>{const s=new Dt.Emitter,a=new Dt.Emitter,c=()=>{a.fire()};i.addEventListener("close",c);let u=0;return{get onError(){return s.event},get onClose(){return a.event},async write(h){try{i.send(JSON.stringify(h))}catch(y){s.fire([Zd(y),h,++u])}},end(){},dispose(){s.dispose(),a.dispose(),i.removeEventListener("close",c)}}},Zd=i=>i instanceof Error?i:new Error((i==null?void 0:i.message)||"Unknown error"),Jd=(i,s=Vd())=>new Promise(a=>{i.onopen=()=>{const c=Dt.createMessageConnection(Xd(i),Yd(i),s);c.onDispose(()=>i.close()),c.onClose(()=>c.dispose()),a(c)}}),Vd=()=>({error:i=>console.error(i),warn:i=>console.warn(i),info:i=>console.info(i),log:i=>console.log(i)}),Qd=i=>{const s=new Dt.Emitter,a=new Dt.Emitter,c=new Dt.Emitter,u=new Dt.Emitter,h=k=>{s.fire(k.data)},y=k=>{a.fire(k)};return i.addEventListener("message",h),i.addEventListener("error",y),i.addEventListener("messageerror",y),{get onError(){return a.event},get onClose(){return c.event},get onPartialMessage(){return u.event},listen(k){return s.event(k)},dispose(){i.removeEventListener("message",h),i.removeEventListener("error",y),i.removeEventListener("messageerror",y),s.dispose(),a.dispose(),c.dispose(),u.dispose()}}},eh=i=>{const s=new Dt.Emitter,a=new Dt.Emitter;let c=0;const u=h=>{s.fire([gu(h),void 0,++c])};return i.addEventListener("error",u),{get onError(){return s.event},get onClose(){return a.event},async write(h){try{i.postMessage(h)}catch(y){s.fire([gu(y),h,++c])}},end(){},dispose(){i.removeEventListener("error",u),s.dispose(),a.dispose()}}},gu=i=>i instanceof Error?i:new Error((i==null?void 0:i.message)||"Unknown error"),th=(i,s=nh())=>{const a=Dt.createMessageConnection(Qd(i),eh(i),s);return a.onClose(()=>a.dispose()),Promise.resolve(a)},nh=()=>({error:i=>console.error(i),warn:i=>console.warn(i),info:i=>console.info(i),log:i=>console.log(i)}),vu=i=>{let s;i.onRequest(ke.RegistrationRequest.type,({registrations:E})=>{for(const{method:N,registerOptions:H}of E){const O=mu[N];O&&(s[O]=H!=null?H:!0)}}),i.onRequest(ke.UnregistrationRequest.type,({unregisterations:E})=>{for(const{method:N}of E){const H=mu[N];H&&(s[H]=void 0)}});const a=(E,N)=>(H,O)=>E()?i.sendRequest(N,H,O):Promise.resolve(null),c=(E,N)=>H=>E()?i.sendNotification(N,H):void 0,u=E=>N=>i.sendNotification(E,N),h=E=>N=>{i.onNotification(E,N)},y=()=>{var E;const N=(E=s.textDocumentSync)!==null&&E!==void 0?E:ke.TextDocumentSyncKind.None;return typeof N!="number"&&!!N.willSave},k=()=>{var E;const N=(E=s.textDocumentSync)!==null&&E!==void 0?E:ke.TextDocumentSyncKind.None;return typeof N!="number"&&!!N.willSaveWaitUntil},C=()=>{var E;const N=(E=s.textDocumentSync)!==null&&E!==void 0?E:ke.TextDocumentSyncKind.None;return typeof N=="number"?N!==ke.TextDocumentSyncKind.None:!!N.save};return{listen:()=>i.listen(),dispose:()=>i.dispose(),initialize:async E=>{const N=await i.sendRequest(ke.InitializeRequest.type,E);return s=N.capabilities,N},initialized:()=>i.sendNotification(ke.InitializedNotification.type,{}),shutdown:()=>i.sendRequest(ke.ShutdownRequest.type),exit:()=>i.sendNotification(ke.ExitNotification.type),onError:E=>i.onError(([N,H,O])=>E(N,H,O)),onClose:E=>i.onClose(()=>E()),onLogMessage:h(ke.LogMessageNotification.type),onShowMessage:h(ke.ShowMessageNotification.type),onDiagnostics:h(ke.PublishDiagnosticsNotification.type),textDocumentOpened:u(ke.DidOpenTextDocumentNotification.type),textDocumentClosed:u(ke.DidCloseTextDocumentNotification.type),textDocumentChanged:u(ke.DidChangeTextDocumentNotification.type),textDocumentWillSave:c(y,ke.WillSaveTextDocumentNotification.type),getEditsBeforeSave:a(k,ke.WillSaveTextDocumentWaitUntilRequest.type),textDocumentSaved:c(C,ke.DidSaveTextDocumentNotification.type),configurationChanged:u(ke.DidChangeConfigurationNotification.type),watchedFilesChanged:u(ke.DidChangeWatchedFilesNotification.type),getCompletion:a(()=>!!s.completionProvider,ke.CompletionRequest.type),getCompletionItemDetails:a(()=>{var E;return!!(!((E=s.completionProvider)===null||E===void 0)&&E.resolveProvider)},ke.CompletionResolveRequest.type),getHoverInfo:a(()=>!!s.hoverProvider,ke.HoverRequest.type),getSignatureHelp:a(()=>!!s.signatureHelpProvider,ke.SignatureHelpRequest.type),getDeclaration:a(()=>!!s.declarationProvider,ke.DeclarationRequest.type),getDefinition:a(()=>!!s.definitionProvider,ke.DefinitionRequest.type),getTypeDefinition:a(()=>!!s.typeDefinitionProvider,ke.TypeDefinitionRequest.type),getImplementation:a(()=>!!s.implementationProvider,ke.ImplementationRequest.type),getReferences:a(()=>!!s.referencesProvider,ke.ReferencesRequest.type),getDocumentHighlight:a(()=>!!s.documentHighlightProvider,ke.DocumentHighlightRequest.type),getDocumentSymbol:a(()=>!!s.documentSymbolProvider,ke.DocumentSymbolRequest.type),getCodeAction:a(()=>!!s.codeActionProvider,ke.CodeActionRequest.type),getCodeLens:a(()=>!!s.codeLensProvider,ke.CodeLensRequest.type),resolveCodeLens:a(()=>{var E;return!!(!((E=s.codeLensProvider)===null||E===void 0)&&E.resolveProvider)},ke.CodeLensResolveRequest.type),getDocumentLink:a(()=>!!s.documentLinkProvider,ke.DocumentLinkRequest.type),resolveDocumentLink:a(()=>{var E;return!!(!((E=s.documentLinkProvider)===null||E===void 0)&&E.resolveProvider)},ke.DocumentLinkResolveRequest.type),getColorSymbols:a(()=>!!s.colorProvider,ke.DocumentColorRequest.type),getFoldingRanges:a(()=>!!s.foldingRangeProvider,ke.FoldingRangeRequest.type),getSelectionRanges:a(()=>!!s.selectionRangeProvider,ke.SelectionRangeRequest.type),getWorkspaceSymbols:a(()=>!!s.workspaceSymbolProvider,ke.WorkspaceSymbolRequest.type),get syncsIncrementally(){var E,N;let H=(E=s.textDocumentSync)!==null&&E!==void 0?E:ke.TextDocumentSyncKind.None;return typeof H!="number"&&(H=(N=H.change)!==null&&N!==void 0?N:ke.TextDocumentSyncKind.None),H===ke.TextDocumentSyncKind.Incremental},get completionTriggers(){var E;return((E=s.completionProvider)===null||E===void 0?void 0:E.triggerCharacters)||[]},get signatureHelpTriggers(){var E;return((E=s.signatureHelpProvider)===null||E===void 0?void 0:E.triggerCharacters)||[]},get signatureHelpRetriggers(){var E;return((E=s.signatureHelpProvider)===null||E===void 0?void 0:E.retriggerCharacters)||[]}}},mu={"textDocument/codeAction":"codeActionProvider","textDocument/codeLens":"codeLensProvider","textDocument/color":"colorProvider","textDocument/completion":"completionProvider","textDocument/declaration":"declarationProvider","textDocument/definition":"definitionProvider","textDocument/documentFormatting":"documentFormattingProvider","textDocument/documentHighlight":"documentHighlightProvider","textDocument/documentLink":"documentLinkProvider","textDocument/documentOnTypeFormatting":"documentOnTypeFormattingProvider","textDocument/documentRangeFormatting":"documentRangeFormattingProvider","textDocument/documentSymbol":"documentSymbolProvider","textDocument/executeCommand":"executeCommandProvider","textDocument/foldingRange":"foldingRangeProvider","textDocument/hover":"hoverProvider","textDocument/implementation":"implementationProvider","textDocument/references":"referencesProvider","textDocument/rename":"renameProvider","textDocument/signatureHelp":"signatureHelpProvider","textDocument/typeDefinition":"typeDefinitionProvider","textDocument/workspaceSymbol":"workspaceSymbolProvider"},rh=Object.freeze({allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5}),ih=0,yu=1,oh=2,bu=3;class sh{constructor(s,a,c={}){this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=ih,this.OPEN=yu,this.CLOSING=oh,this.CLOSED=bu,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},this.url=s,a==null||typeof a=="string"||Array.isArray(a)?this.protocols=a:c=a,this.options=Object.assign({},rh,c),this.openNewWebSocket()}get binaryType(){return this.binaryTypeInternal||"blob"}set binaryType(s){this.binaryTypeInternal=s,this.ws&&(this.ws.binaryType=s)}get bufferedAmount(){let s=this.ws?this.ws.bufferedAmount:0,a=!1;return this.messageBuffer.forEach(c=>{const u=ah(c);u!=null?s+=u:a=!0}),a&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),s}get extensions(){return this.ws?this.ws.extensions:this.lastKnownExtensions}get protocol(){return this.ws?this.ws.protocol:this.lastKnownProtocol}get readyState(){return this.isClosed?bu:yu}close(s,a){this.disposeSocket(s,a),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")}send(s){this.ws&&this.ws.readyState===this.OPEN?this.ws.send(s):this.messageBuffer.push(s)}reconnect(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)}addEventListener(s,a){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(a)}dispatchEvent(s){return this.dispatchEventOfType(s.type,s)}removeEventListener(s,a){this.listeners[s]&&(this.listeners[s]=this.listeners[s].filter(c=>c!==a))}openNewWebSocket(){if(this.isClosed)return;const{connectTimeout:s}=this.options;this.debugLog(`Opening new WebSocket to ${this.url}.`);const a=new WebSocket(this.url,this.protocols);a.onclose=c=>this.handleClose(c),a.onerror=c=>this.handleError(c),a.onmessage=c=>this.handleMessage(c),a.onopen=c=>this.handleOpen(c),this.connectTimeoutId=setTimeout(()=>{this.clearConnectTimeout(),this.disposeSocket(),this.handleClose(void 0)},s),this.ws=a}handleOpen(s){if(!this.ws||this.isClosed)return;const{allClearResetTime:a}=this.options;this.debugLog("WebSocket opened."),this.binaryTypeInternal!=null?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",s):(this.dispatchEventOfType("open",s),this.hasBeenOpened=!0,this.messageBuffer.forEach(c=>this.send(c))),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(()=>{this.clearAllClearTimeout(),this.nextRetryTime=0,this.reconnectCount=0;const c=a/1e3|0;this.debugLog(`WebSocket remained open for ${c}s. Resetting retry time and count`)},a)}handleMessage(s){this.isClosed||this.dispatchEventOfType("message",s)}handleClose(s){if(this.isClosed)return;const{maxReconnectAttempts:a}=this.options;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.ws=void 0),this.dispatchEventOfType("down",s),this.reconnectCount>=a){const c=`Failed to reconnect after ${a} attempts. Closing permanently.`;this.stopReconnecting(s,c)}else this.reestablishConnection()}handleError(s){this.dispatchEventOfType("error",s),this.debugLog("WebSocket encountered an error.")}reestablishConnection(){const{minReconnectDelay:s,maxReconnectDelay:a,reconnectBackoffFactor:c}=this.options;this.reconnectCount++;const u=this.nextRetryTime;this.nextRetryTime=Math.max(s,Math.min(this.nextRetryTime*c,a)),setTimeout(()=>this.openNewWebSocket(),u);const h=u/1e3|0;this.debugLog(`WebSocket was closed. Re-opening in ${h}s.`)}stopReconnecting(s,a){this.debugLog(a),this.shutdown(),s&&this.dispatchEventOfType("close",s)}shutdown(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[]}disposeSocket(s,a){!this.ws||(this.ws.onerror=so,this.ws.onclose=so,this.ws.onmessage=so,this.ws.onopen=so,this.ws.close(s,a),this.ws=void 0)}clearAllTimeouts(){this.clearConnectTimeout(),this.clearAllClearTimeout()}clearConnectTimeout(){this.connectTimeoutId!=null&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)}clearAllClearTimeout(){this.allClearTimeoutId!=null&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)}dispatchEventOfType(s,a){switch(s){case"close":this.onclose&&this.onclose(a);break;case"error":this.onerror&&this.onerror(a);break;case"message":this.onmessage&&this.onmessage(a);break;case"open":this.onopen&&this.onopen(a);break;case"down":this.ondown&&this.ondown(a);break;case"reopen":this.onreopen&&this.onreopen(a);break}return s in this.listeners&&this.listeners[s].slice().forEach(c=>this.callListener(c,a)),!a||!a.defaultPrevented}callListener(s,a){typeof s=="function"?s.call(this,a):s.handleEvent.call(this,a)}debugLog(s){this.options.debug&&console.debug(s)}}function ah(i){return typeof i=="string"?2*i.length:i instanceof ArrayBuffer?i.byteLength:i instanceof Blob?i.size:void 0}const so=()=>{},ca=i=>i.replace(lh,uh),lh=/[&<>'"]/g,uh=i=>i==="&"?"&amp;":i==="<"?"&lt;":i===">"?"&gt;":i==="'"?"&#39;":"&quot;",Cn=({line:i,ch:s})=>({line:i,character:s}),ch=(i,s)=>({start:Cn(i),end:Cn(s)}),fh=i=>({range:ch(i.from,i.to),text:i.text.join(`
`)}),po=({line:i,character:s})=>({line:i,ch:s}),$n=({start:i,end:s})=>[po(i),po(s)],dh=i=>{switch(i){case 1:return"error";case 2:return"warning";case 3:return"information";case 4:return"hint"}},go=(i,s=a=>a)=>i?typeof i=="string"?ca(i):oc(i,s):"",hh=(i,s)=>Array.isArray(i)?i.map(a=>wu(a,s)).join(`
`):ke.MarkedString.is(i)?wu(i,s):oc(i,s),oc=(i,s)=>i.kind==="markdown"?s(i.value):ca(i.value),wu=(i,s)=>typeof i=="string"?i.replace(/\\(?=[-.])/g,""):s(["```"+i.language,i.value,"```"].join(`
`)),Du=(()=>{const i=["","text","method","function","constructor","field","variable","class","interface","module","property","unit","value","enum","keyword","snippet","color","file","reference","folder","enum-member","constant","struct","event","operator","type-parameter"];return s=>i[s!=null?s:0]||"unknown"})(),ph=(()=>{const i=["","file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enum-member","struct","event","operator","type-parameter"];return s=>i[s!=null?s:0]||"unknown"})(),gh=i=>({items:i,isIncomplete:!1}),sc="cmw-gutter",vo=new WeakMap,vh=(i,s)=>{if(ac(i),s.length===0)return;const a=vo.get(i)||{marks:[]};for(const c of s){const[u,h]=$n(c.range),y=dh(c.severity||3);a.marks.push(i.markText(u,h,{className:`cmw-mark-${y}`}));const k=document.createElement("div");k.classList.add(`cmw-guttermark-${y}`),k.style.width="10px",k.style.fontSize="8px",k.style.textAlign="center",k.title=c.message,k.innerText="\u2B24",i.setGutterMarker(u.line,sc,k)}vo.set(i,a)},ac=i=>{const s=vo.get(i);if(!!s){i.clearGutter(sc);for(const a of s.marks)a.clear();s.marks.length=0,vo.delete(i)}},lc=(i,s,a)=>{const c=document.createElement("div");c.classList.add("cmw-tooltip"),c.style.cssText=[`left: ${s}px;`,`top: ${a}px;`].join(" "),c.appendChild(i);const u=document.createElement("div");return u.classList.add("cmw-tooltip-close"),u.addEventListener("click",()=>{c.remove()}),c.appendChild(u),document.body.appendChild(c),requestAnimationFrame(()=>{c.style.top=`${a-c.offsetHeight}px`}),c},Gr=new WeakMap,mh=(i,s,a,c,u=h=>h)=>{if(Wr(i),Array.isArray(c.contents)&&c.contents.length===0)return;const h=hh(c.contents,u);if(!h)return;const y=Gr.get(i)||{};let k=a;if(c.range){let N=a;[k,N]=$n(c.range),y.marker=i.markText(k,N,{css:"text-decoration: underline"})}const C=document.createElement("div");C.innerHTML=h;const E=i.charCoords(k,"page");y.tooltip=lc(C,E.left,E.top),y.mouseLeaveAllListener=s,s.addElement(y.tooltip),Gr.set(i,y)},Wr=i=>{const s=Gr.get(i);!s||(s.marker&&s.marker.clear(),s.mouseLeaveAllListener&&s.tooltip&&s.mouseLeaveAllListener.removeElement(s.tooltip),s.tooltip&&s.tooltip.remove(),Gr.delete(i))},yh=i=>{var s;return!(!((s=Gr.get(i))===null||s===void 0)&&s.disabled)},bh=i=>{Wr(i),Gr.set(i,{disabled:!0})},wh=i=>{Wr(i)},mo=new WeakMap,Dh=(i,s)=>{const a=mo.get(i)||{marks:[]};for(const{kind:c,range:u}of s){const[h,y]=$n(u);a.marks.push(i.markText(h,y,{className:"cmw-highlight"}))}mo.set(i,a)},vs=i=>{const s=mo.get(i);if(!!s){if(s.marks&&s.marks.length>0){for(const a of s.marks)a.clear();s.marks.length=0}mo.delete(i)}},fa=(i,s,a)=>{const c=i.getCursor(),u=i.markText(c,c,{clearWhenEmpty:!1}),h=s.map(y=>i.markText(...$n(y.range),{clearWhenEmpty:!1}));i.operation(()=>{for(let y=0;y<s.length;++y){const k=h[y],C=k.find();i.replaceRange(s[y].newText,C.from,C.to,a),k.clear()}}),i.setCursor(u.find().to),u.clear()},Cu=(i,s,a,c=0)=>{const u=i.markText(s,a,{className:"cmw-highlight"});return typeof c=="number"&&c>0&&setTimeout(()=>{u.clear()},c),u};class vn{constructor(){this.value="",this.pos=0}static isDigitCharacter(s){return s>=48&&s<=57}static isVariableCharacter(s){return s===95||s>=97&&s<=122||s>=65&&s<=90}text(s){this.value=s,this.pos=0}tokenText(s){return this.value.substr(s.pos,s.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let s=this.pos,a=0,c=this.value.charCodeAt(s),u;if(u=vn._table[c],typeof u=="number")return this.pos+=1,{type:u,pos:s,len:1};if(vn.isDigitCharacter(c)){u=8;do a+=1,c=this.value.charCodeAt(s+a);while(vn.isDigitCharacter(c));return this.pos+=a,{type:u,pos:s,len:a}}if(vn.isVariableCharacter(c)){u=9;do c=this.value.charCodeAt(s+ ++a);while(vn.isVariableCharacter(c)||vn.isDigitCharacter(c));return this.pos+=a,{type:u,pos:s,len:a}}u=10;do a+=1,c=this.value.charCodeAt(s+a);while(!isNaN(c)&&typeof vn._table[c]=="undefined"&&!vn.isDigitCharacter(c)&&!vn.isVariableCharacter(c));return this.pos+=a,{type:u,pos:s,len:a}}}vn._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Kr{constructor(){this._children=[]}appendChild(s){return s instanceof tn&&this._children[this._children.length-1]instanceof tn?this._children[this._children.length-1].value+=s.value:(s.parent=this,this._children.push(s)),this}replace(s,a){const{parent:c}=s,u=c.children.indexOf(s),h=c.children.slice(0);h.splice(u,1,...a),c._children=h,function y(k,C){for(const E of k)E.parent=C,y(E.children,E)}(a,c)}get children(){return this._children}get snippet(){let s=this;for(;;){if(!s)return;if(s instanceof To)return s;s=s.parent}}toString(){return this.children.reduce((s,a)=>s+a.toString(),"")}len(){return 0}}class tn extends Kr{constructor(s){super(),this.value=s}static escape(s){return s.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return tn.escape(this.value)}len(){return this.value.length}clone(){return new tn(this.value)}}class uc extends Kr{}class Mn extends uc{constructor(s){super(),this.index=s}static compareByIndex(s,a){return s.index===a.index?0:s.isFinalTabstop?1:a.isFinalTabstop||s.index<a.index?-1:s.index>a.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof _i?this._children[0]:void 0}toTextmateString(){let s="";return this.transform&&(s=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${s}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${s}}`:`\${${this.index}:${this.children.map(a=>a.toTextmateString()).join("")}${s}}`}clone(){let s=new Mn(this.index);return this.transform&&(s.transform=this.transform.clone()),s._children=this.children.map(a=>a.clone()),s}}class _i extends Kr{constructor(){super(...arguments),this.options=[]}appendChild(s){return s instanceof tn&&(s.parent=this,this.options.push(s)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(s=>s.value.replace(/\||,/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let s=new _i;return this.options.forEach(s.appendChild,s),s}}class da extends Kr{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(s){const a=this;let c=!1,u=s.replace(this.regexp,function(){return c=!0,a._replace(Array.prototype.slice.call(arguments,0,-2))});return!c&&this._children.some(h=>h instanceof kn&&Boolean(h.elseValue))&&(u=this._replace([])),u}_replace(s){let a="";for(const c of this._children)if(c instanceof kn){let u=s[c.index]||"";u=c.resolve(u),a+=u}else a+=c.toString();return a}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(s=>s.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let s=new da;return s.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),s._children=this.children.map(a=>a.clone()),s}}class kn extends Kr{constructor(s,a,c,u){super(),this.index=s,this.shorthandName=a,this.ifValue=c,this.elseValue=u}resolve(s){return this.shorthandName==="upcase"?s?s.toLocaleUpperCase():"":this.shorthandName==="downcase"?s?s.toLocaleLowerCase():"":this.shorthandName==="capitalize"?s?s[0].toLocaleUpperCase()+s.substr(1):"":this.shorthandName==="pascalcase"?s?this._toPascalCase(s):"":Boolean(s)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(s)&&typeof this.elseValue=="string"?this.elseValue:s||""}_toPascalCase(s){const a=s.match(/[a-z]+/gi);return a?a.map(function(c){return c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()}).join(""):s}toTextmateString(){let s="${";return s+=this.index,this.shorthandName?s+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?s+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?s+=`:+${this.ifValue}`:this.elseValue&&(s+=`:-${this.elseValue}`),s+="}",s}clone(){return new kn(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class Ai extends uc{constructor(s){super(),this.name=s}resolve(s){let a=s.resolve(this);return this.transform&&(a=this.transform.resolve(a||"")),a!==void 0?(this._children=[new tn(a)],!0):!1}toTextmateString(){let s="";return this.transform&&(s=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${s}}`:`\${${this.name}:${this.children.map(a=>a.toTextmateString()).join("")}${s}}`}clone(){const s=new Ai(this.name);return this.transform&&(s.transform=this.transform.clone()),s._children=this.children.map(a=>a.clone()),s}}function ku(i,s){const a=[...i];for(;a.length>0;){const c=a.shift();if(!s(c))break;a.unshift(...c.children)}}class To extends Kr{get placeholderInfo(){if(!this._placeholders){let s=[],a;this.walk(function(c){return c instanceof Mn&&(s.push(c),a=!a||a.index<c.index?c:a),!0}),this._placeholders={all:s,last:a}}return this._placeholders}get placeholders(){const{all:s}=this.placeholderInfo;return s}offset(s){let a=0,c=!1;return this.walk(u=>u===s?(c=!0,!1):(a+=u.len(),!0)),c?a:-1}fullLen(s){let a=0;return ku([s],c=>(a+=c.len(),!0)),a}enclosingPlaceholders(s){let a=[],{parent:c}=s;for(;c;)c instanceof Mn&&a.push(c),c=c.parent;return a}resolveVariables(s){return this.walk(a=>(a instanceof Ai&&a.resolve(s)&&(this._placeholders=void 0),!0)),this}appendChild(s){return this._placeholders=void 0,super.appendChild(s)}replace(s,a){return this._placeholders=void 0,super.replace(s,a)}toTextmateString(){return this.children.reduce((s,a)=>s+a.toTextmateString(),"")}clone(){let s=new To;return this._children=this.children.map(a=>a.clone()),s}walk(s){ku(this.children,s)}}class Ch{constructor(){this._scanner=new vn,this._token={type:14,pos:0,len:0}}static escape(s){return s.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(s){return/\${?CLIPBOARD/.test(s)}text(s){return this.parse(s).toString()}parse(s,a,c){this._scanner.text(s),this._token=this._scanner.next();const u=new To;for(;this._parse(u););const h=new Map,y=[];let k=0;u.walk(C=>(C instanceof Mn&&(k+=1,C.isFinalTabstop?h.set(0,void 0):!h.has(C.index)&&C.children.length>0?h.set(C.index,C.children):y.push(C)),!0));for(const C of y){const E=h.get(C.index);if(E){const N=new Mn(C.index);N.transform=C.transform;for(const H of E)N.appendChild(H.clone());u.replace(C,[N])}}return c||(c=k>0&&a),!h.has(0)&&c&&u.appendChild(new Mn(0)),u}_accept(s,a){if(s===void 0||this._token.type===s){let c=a?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),c}return!1}_backTo(s){return this._scanner.pos=s.pos+s.len,this._token=s,!1}_until(s){const a=this._token;for(;this._token.type!==s;){if(this._token.type===14)return!1;if(this._token.type===5){const u=this._scanner.next();if(u.type!==0&&u.type!==4&&u.type!==5)return!1}this._token=this._scanner.next()}const c=this._scanner.value.substring(a.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),c}_parse(s){return this._parseEscaped(s)||this._parseTabstopOrVariableName(s)||this._parseComplexPlaceholder(s)||this._parseComplexVariable(s)||this._parseAnything(s)}_parseEscaped(s){let a;return(a=this._accept(5,!0))?(a=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||a,s.appendChild(new tn(a)),!0):!1}_parseTabstopOrVariableName(s){let a;const c=this._token;return this._accept(0)&&(a=this._accept(9,!0)||this._accept(8,!0))?(s.appendChild(/^\d+$/.test(a)?new Mn(Number(a)):new Ai(a)),!0):this._backTo(c)}_parseComplexPlaceholder(s){let a;const c=this._token;if(!(this._accept(0)&&this._accept(3)&&(a=this._accept(8,!0))))return this._backTo(c);const h=new Mn(Number(a));if(this._accept(1))for(;;){if(this._accept(4))return s.appendChild(h),!0;if(!this._parse(h))return s.appendChild(new tn("${"+a+":")),h.children.forEach(s.appendChild,s),!0}else if(h.index>0&&this._accept(7)){const y=new _i;for(;;){if(this._parseChoiceElement(y)){if(this._accept(2))continue;if(this._accept(7)&&(h.appendChild(y),this._accept(4)))return s.appendChild(h),!0}return this._backTo(c),!1}}else return this._accept(6)?this._parseTransform(h)?(s.appendChild(h),!0):(this._backTo(c),!1):this._accept(4)?(s.appendChild(h),!0):this._backTo(c)}_parseChoiceElement(s){const a=this._token,c=[];for(;!(this._token.type===2||this._token.type===7);){let u;if((u=this._accept(5,!0))?u=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||u:u=this._accept(void 0,!0),!u)return this._backTo(a),!1;c.push(u)}return c.length===0?(this._backTo(a),!1):(s.appendChild(new tn(c.join(""))),!0)}_parseComplexVariable(s){let a;const c=this._token;if(!(this._accept(0)&&this._accept(3)&&(a=this._accept(9,!0))))return this._backTo(c);const h=new Ai(a);if(this._accept(1))for(;;){if(this._accept(4))return s.appendChild(h),!0;if(!this._parse(h))return s.appendChild(new tn("${"+a+":")),h.children.forEach(s.appendChild,s),!0}else return this._accept(6)?this._parseTransform(h)?(s.appendChild(h),!0):(this._backTo(c),!1):this._accept(4)?(s.appendChild(h),!0):this._backTo(c)}_parseTransform(s){let a=new da,c="",u="";for(;!this._accept(6);){let h;if(h=this._accept(5,!0)){h=this._accept(6,!0)||h,c+=h;continue}if(this._token.type!==14){c+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let h;if(h=this._accept(5,!0)){h=this._accept(5,!0)||this._accept(6,!0)||h,a.appendChild(new tn(h));continue}if(!(this._parseFormatString(a)||this._parseAnything(a)))return!1}for(;!this._accept(4);){if(this._token.type!==14){u+=this._accept(void 0,!0);continue}return!1}try{a.regexp=new RegExp(c,u)}catch{return!1}return s.transform=a,!0}_parseFormatString(s){const a=this._token;if(!this._accept(0))return!1;let c=!1;this._accept(3)&&(c=!0);let u=this._accept(8,!0);if(u)if(c){if(this._accept(4))return s.appendChild(new kn(Number(u))),!0;if(!this._accept(1))return this._backTo(a),!1}else return s.appendChild(new kn(Number(u))),!0;else return this._backTo(a),!1;if(this._accept(6)){let h=this._accept(9,!0);return!h||!this._accept(4)?(this._backTo(a),!1):(s.appendChild(new kn(Number(u),h)),!0)}else if(this._accept(11)){let h=this._until(4);if(h)return s.appendChild(new kn(Number(u),void 0,h,void 0)),!0}else if(this._accept(12)){let h=this._until(4);if(h)return s.appendChild(new kn(Number(u),void 0,void 0,h)),!0}else if(this._accept(13)){let h=this._until(1);if(h){let y=this._until(4);if(y)return s.appendChild(new kn(Number(u),void 0,h,y)),!0}}else{let h=this._until(4);if(h)return s.appendChild(new kn(Number(u),void 0,void 0,h)),!0}return this._backTo(a),!1}_parseAnything(s){return this._token.type!==14?(s.appendChild(new tn(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const kh=(i,s)=>{if(i.length===0)return[];const a=Th(i.slice(),s),c=[[a[0]]];for(let u=1;u<a.length;++u)s(a[u-1],a[u])!==0?c.push([a[u]]):c[c.length-1].push(a[u]);return c},Th=(i,s)=>{for(let a=1;a<i.length;++a)if(s(i[a-1],i[a])>0){let c=a;const u=i[c];do i[c]=i[--c];while(c>0&&s(i[c-1],u)>0);i[c]=u}return i},Sh=(i,s,a,c,u)=>{const h=new Ch().parse(s,!0,!0);xh(i,a,h),i.replaceRange(h.toString(),a,c,"complete");const y=new Map,k=i.indexFromPos(a);for(const ae of h.placeholders)y.set(ae,i.markText(...Eh(i,k,h,ae),{className:"cmw-snippet-tabstop",collapsed:!1,clearWhenEmpty:!1,inclusiveLeft:!0,inclusiveRight:!0}));if(u&&fa(i,u,"+complete"),h.placeholders.length===0)return;let C=0;const E=kh(h.placeholders,Mn.compareByIndex);let N=null;if(E.length>1){const ae=document.createElement("span");ae.className="cmw-snippet-final-tabstop";const fe=E[E.length-1],P=fe[fe.length-1];N=i.setBookmark(i.posFromIndex(k+h.offset(P)+h.fullLen(P)),{widget:ae,insertLeft:!0})}const H=ae=>{const fe=E[ae],I=fe[0].isFinalTabstop,F=fe.map(b=>{const{from:U,to:V}=y.get(b).find();return{anchor:U,head:V}});i.setSelections(F,I?F.length-1:0,{scroll:!0,origin:"snippet"})},O=()=>{j()},j=()=>{i.removeKeyMap(Q),i.off("mousedown",O);const ae=E[E.length-1],fe=ae[ae.length-1],P=y.get(fe).find();i.setCursor(P.to);for(const I of y.values())I.clear();y.clear(),N&&N.clear(),E.length=0},Q=Pn.exports.normalizeKeyMap({Tab:ae=>{C+1<=E.length-1&&H(++C),C>=E.length-1&&j()},"Shift-Tab":ae=>{C-1>=0&&H(--C)},Enter:ae=>{j()},Esc:ae=>{j()}});i.addKeyMap(Q),i.on("mousedown",O),H(0),E.length===1&&E[0].length===1&&j()},Eh=(i,s,a,c)=>{const u=s+a.offset(c);return[i.posFromIndex(u),i.posFromIndex(u+a.fullLen(c))]},xh=(i,s,a)=>{const c=Tu(i.getLine(s.line),0,s.ch);a.walk(u=>{if(u instanceof tn&&!(u.parent instanceof _i)){const h=u.value.split(/\r?\n|\r/);for(let k=1;k<h.length;++k){const C=Tu(h[k]);let E=c+C;if(i.getOption("indentWithTabs")){const N=i.getOption("indentUnit")||2;E=E.replace(/\t/g," ".repeat(N));const H=Math.floor(E.length/N);E="	".repeat(H)+" ".repeat(E.length-H*N)}h[k]=E+h[k].substr(C.length)}const y=h.join(i.lineSeparator());y!==u.value&&u.parent.replace(u,[new tn(y)])}return!0})},Tu=(i,s=0,a=i.length)=>{for(let c=s;c<a;++c)if(i[c]!==" "&&i[c]!=="	")return i.substring(s,c);return i.substring(s,a)};class Ah{constructor({uri:s,editor:a,conn:c,renderMarkdown:u}){this.pendingRequest=null,this.uri=s,this.editor=a,this.conn=c,this.renderMarkdown=u}invoke(){this.request({triggerKind:ke.CompletionTriggerKind.Invoked})}retriggerForIncomplete(){this.request({triggerKind:ke.CompletionTriggerKind.TriggerForIncompleteCompletions})}triggerWith(s){this.request({triggerKind:ke.CompletionTriggerKind.TriggerCharacter,triggerCharacter:s})}onChange(){const s=this.editor.getCursor();if(s.ch===0)return!0;const a=this.editor.getLine(s.line)[s.ch-1];if(this.conn.completionTriggers.includes(a))return this.triggerWith(a),!0;if(this.isComplete())return!0;const c=this.editor.getTokenTypeAt(s);if(c){if(/\b(?:variable|property|type)\b/.test(c))return this.isActive()?this.retriggerForIncomplete():this.invoke(),!0;if(this.isActive()&&c==="string")return this.retriggerForIncomplete(),!0}return!1}request(s){this.cancelPending();const a=new ke.CancellationTokenSource;this.pendingRequest=a,this.conn.getCompletion({textDocument:{uri:this.uri},position:Cn(this.editor.getCursor()),context:s},this.pendingRequest.token).then(c=>{if(this.pendingRequest===a)this.pendingRequest=null;else return;!c||(Array.isArray(c)&&(c=gh(c)),c.items.length!==0&&new _h({list:c,editor:this.editor,invoked:s.triggerKind!==ke.CompletionTriggerKind.TriggerCharacter,renderMarkdown:this.renderMarkdown,resolveItem:(u,h)=>this.conn.getCompletionItemDetails(u,h).then(y=>y||u)}).show())})}close(){this.cancelPending(),this.editor.closeHint()}isActive(){var s;return!!(!((s=this.editor.state)===null||s===void 0)&&s.completionActive)}isComplete(){var s,a,c;return!!(!((c=(a=(s=this.editor.state)===null||s===void 0?void 0:s.completionActive)===null||a===void 0?void 0:a.options)===null||c===void 0)&&c.updateOnCursorActivity)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}class _h{constructor({editor:s,invoked:a,list:c,renderMarkdown:u,resolveItem:h}){this.tooltip=null,this.detailsCache=new WeakMap,this.pendingRequest=null,this.renderItem=(y,k,C)=>{const E=C.item;let H=`hsl(${Math.floor((E.kind||0)/30*180+180)}, 75%, 50%)`;if(E.kind===ke.CompletionItemKind.Color){const j=go(E.documentation);if(j){const Q=j.match(/#[\da-f]{6}/i);Q&&(H=Q[0])}}const O=y.appendChild(document.createElement("div"));O.style.color=H,O.className=["cmw-icon",`cmw-icon--${Du(E.kind)}`].join(" "),y.appendChild(document.createTextNode(E.label))},this.onHintsClose=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsUpdate=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsSelect=(y,k)=>{this.cancelPending(),this.removeTooltip();const C=y.item,E=this.detailsCache.get(C);if(E)this.addTooltip(k,E);else{const N=new ke.CancellationTokenSource;this.pendingRequest=N,this.resolveItem(C,this.pendingRequest.token).then(H=>{if(this.removeTooltip(),this.pendingRequest===N)this.pendingRequest=null;else return;const O=this.cacheDetails(Object.assign(C,H));this.detailsCache.set(C,O),this.addTooltip(k,O)})}},this.editor=s,this.list=c,this.invoked=a,this.updates=0,this.renderMarkdown=u,this.resolveItem=h}show(){this.editor.showHint({completeSingle:!1,updateOnCursorActivity:!this.list.isIncomplete,hint:()=>this.update()})}update(){const{from:s,to:a,items:c}=this.getState(),u=c.map(y=>({text:"",displayText:y.label,hint:C=>{let E=y.insertText||y.label,N={line:s.line,ch:s.ch},H={line:a.line,ch:a.ch};if(y.textEdit){const O=y.textEdit,j=$n(ke.TextEdit.is(O)?O.range:O.replace);j[0].ch<N.ch&&(N.ch=j[0].ch),j[1].ch>H.ch&&(H.ch=j[1].ch),this.editor.replaceRange(this.editor.getRange(j[0],j[1]),N,H,"complete"),[N,H]=j,E=O.newText}if(y.insertTextFormat===ke.InsertTextFormat.Snippet)return Sh(C,E,N,H,y.additionalTextEdits);C.replaceRange(E,N,H,"+complete"),y.additionalTextEdits&&fa(C,y.additionalTextEdits,"+complete"),C.scrollIntoView(null),C.closeHint()},render:this.renderItem,item:y})),h={from:s,to:a,list:u};return Ci.on(h,"close",this.onHintsClose),Ci.on(h,"update",this.onHintsUpdate),Ci.on(h,"select",this.onHintsSelect),h}getState(){const s=this.editor.getCursor();if(this.updates++>0||this.invoked){const a=this.editor.getTokenAt(s);if(a.type==="string"){const y=this.list.items.find(k=>k.textEdit);if(y){const k=y.textEdit,C=$n(ke.TextEdit.is(k)?k.range:k.replace);a.start=C[0].ch,a.end=s.ch}else{const k=a.string[0],C=a.string[a.string.length-1];(k==='"'||k==="'")&&(k===C?(a.start+=1,a.end-=1):(a.start+=1,a.end=s.ch))}}const c={line:s.line,ch:a.start},u={line:s.line,ch:a.end},h=this.editor.getRange(c,u);return{from:c,to:u,items:Rh(this.list.items,h,50)}}else return{from:s,to:s,items:this.list.items}}cacheDetails(s){return{kind:s.kind&&Du(s.kind),detail:s.detail&&ca(s.detail),documentation:s.documentation&&go(s.documentation,this.renderMarkdown)}}tooltipContent(s){let a="";return s.detail&&(a+=`<code>${s.detail}</code>`),s.documentation&&(a+=`<div>${s.documentation}</div>`),a}addTooltip(s,a){if(!s.isConnected)return;const c=this.tooltipContent(a);if(!c)return;const u=s.parentNode,h=u.getBoundingClientRect().right+window.pageXOffset,y=u.getBoundingClientRect().top+window.pageYOffset,k=document.createElement("div");k.innerHTML=c;const C=document.createElement("div");C.classList.add("cmw-completion-item-doc"),C.style.cssText=`
    z-index: 10;
    position: absolute;
    left: ${h}px;
    top: ${y}px;
    font-size: 12px;
    padding: 2px;
    max-height: 400px;
    max-width: 400px;
    overflow: auto;
    `,C.appendChild(k),document.body.appendChild(C),this.tooltip=C}removeTooltip(){this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}const Rh=(i,s,a=30)=>{const c=i.reduce((u,h)=>(u[h.label]=Fh(h.filterText||h.label,s),u),{});return i.slice().sort((u,h)=>c[h.label]-c[u.label]).slice(0,a)},Lh=.5,Fh=(i,s)=>{const a=i.length,c=s.length,u=Math.min(a,c);if(u===0)return 0;let h=0;for(;i[h]===s[h]&&++h<u;);const y=(a+c)/(2*a*c),k=u===h?u:a<c?Su(s,i):Su(i,s);return y*k**2+h*Lh},Su=(i,s)=>{const a=i.length,c=s.length,u=[0];for(let h=1;h<=c;++h)u[h]=0;for(let h=1;h<=a;++h)for(let y=1,k=u[0];y<=c;++y){const C=u[y];u[y]=i[h-1]===s[y-1]?k+1:Math.max(u[y-1],u[y]),k=C}return u[c]},cc=i=>i.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),yo=new WeakMap,Mh=(i,s,a,c,u=h=>h)=>{var h;(h=a.activeSignature)!==null&&h!==void 0||(a.activeSignature=0);const y=a.signatures[a.activeSignature];if(!y)return;const k=yo.get(i)||{},C=document.createElement("div"),E=document.createElement("div");let N=!1;if(a.activeParameter!==null&&y.parameters){const j=Math.min(a.activeParameter,y.parameters.length-1),Q=y.parameters[j],ae="text-decoration: underline; font-weight: 500;";if(Array.isArray(Q.label)){const[P,I]=Q.label;E.innerHTML=[y.label.slice(0,P),`<span style="${ae}">`,y.label.slice(P,I),"</span>",y.label.slice(I)].join("")}else E.innerHTML=y.label.replace(new RegExp("("+cc(Q.label)+")"),`<span style="${ae}">$1</span>`);C.appendChild(E);const fe=go(Q.documentation,u);if(fe){N=!0;const P=document.createElement("div");P.style.marginTop="4px",P.innerHTML=fe,C.appendChild(P)}}else E.innerText=y.label,C.appendChild(E);const H=go(y.documentation,u);if(H){const j=document.createElement("div");N&&(j.style.marginTop="8px"),j.innerHTML=H,C.appendChild(j)}const O=i.charCoords(c,"page");k.tooltip=lc(C,O.left,O.top),k.mouseLeaveAllListener=s,s.addElement(k.tooltip),yo.set(i,k)},Fn=i=>{const s=yo.get(i);!s||(s.mouseLeaveAllListener&&s.tooltip&&s.mouseLeaveAllListener.removeElement(s.tooltip),s.tooltip&&s.tooltip.remove(),yo.delete(i))},Br=(i,s,a)=>{const c=Array.isArray(a)?a[0]:a;if(ke.Location.is(c)){if(c.uri===s){const u=po(c.range.start);Cu(i,...$n(c.range),1500),i.setCursor(u,{scroll:!0}),i.focus()}}else if(ke.LocationLink.is(c)&&c.targetUri===s){const u=po(c.targetSelectionRange.start);Cu(i,...$n(c.targetRange),1500),i.setCursor(u,{scroll:!0}),i.focus()}},Ph=(i,{getSuggestions:s,onSelect:a,onUpdate:c,onCancel:u,render:h=Nh,className:y="",debounceTimeout:k=0})=>{const C=document;let E=[],N="",H,O=-1,j=0,Q;const ae=C.createElement("div"),fe=ae.style;ae.className=y,fe.position="absolute";const P=()=>{ae.parentNode||C.body.appendChild(ae)},I=()=>{const Ce=ae.parentNode;Ce&&Ce.removeChild(ae)},F=()=>!!ae.parentNode,b=()=>{j++,E=[],N="",H=void 0,O=-1,I()},U=()=>{Q&&window.clearTimeout(Q)},V=()=>{if(!F())return;fe.height="auto",fe.width=i.offsetWidth+"px";const Ce=()=>{const Le=C.documentElement,Ee=Le.clientTop||C.body.clientTop||0,Ge=Le.clientLeft||C.body.clientLeft||0,at=window.pageYOffset||Le.scrollTop,Je=window.pageXOffset||Le.scrollLeft,We=i.getBoundingClientRect(),Ne=We.top+i.offsetHeight+at-Ee,ve=We.left+Je-Ge;fe.top=Ne+"px",fe.left=ve+"px";const de=Math.max(0,window.innerHeight-(We.top+i.offsetHeight));fe.top=Ne+"px",fe.bottom="",fe.left=ve+"px",fe.maxHeight=de+"px"};Ce(),Ce()},q=()=>{if(ae.textContent="",E.length===0){b();return}const Ce=C.createDocumentFragment();for(const Le of E){const Ee=h(Le,N);if(!Ee)return;Ee.addEventListener("click",Ge=>{a(Le),b(),Ge.preventDefault(),Ge.stopPropagation()}),Le===H&&(Ee.className+=" selected"),Ce.appendChild(Ee)}ae.appendChild(Ce),P(),V(),$e()},re=()=>{F()&&q()},De=()=>{re()},ge=Ce=>{Ce.target!==ae?re():Ce.preventDefault()},Se=Ce=>{ie()},$e=()=>{const Ce=ae.getElementsByClassName("selected");if(Ce.length===0)return;const Le=Ce[0];if(Le.offsetTop<ae.scrollTop)ae.scrollTop=Le.offsetTop;else{const Ee=Le.offsetTop+Le.offsetHeight,Ge=ae.scrollTop+ae.offsetHeight;Ee>Ge&&(ae.scrollTop+=Ee-Ge)}},G=Ce=>{const Le=E.length;Le===0?(H=void 0,O=-1):(O=(Ce%Le+Le)%Le,H=E[O],H&&c&&c(H),q())},K=Ce=>{const Le=Ce.key;switch(Le){case"Esc":case"Escape":b(),Ce.preventDefault(),Ce.stopPropagation(),u&&u();return;case"Up":case"Down":case"ArrowUp":case"ArrowDown":{const Ee=Le==="ArrowUp"||Le==="Up"?-1:1;Ce.preventDefault(),G(O+Ee);return}case"Enter":H&&(a(H),b()),Ce.preventDefault();return}},_=()=>{ie(!1)},ie=(Ce=!0)=>{const Le=++j,Ee=i.value;U(),Q=window.setTimeout(()=>{s(Ee).then(Ge=>{j===Le&&(E=Ge,N=Ee,E.length===0?(O=-1,H=void 0):(O=0,H=E[0],H&&c&&c(H)),q())})},Ce?k:0)},Ie=()=>{setTimeout(()=>{C.activeElement!==i&&b()},200)};return ae.addEventListener("mousedown",Ce=>{Ce.stopPropagation(),Ce.preventDefault()}),ae.addEventListener("focus",()=>i.focus()),i.addEventListener("keydown",K),i.addEventListener("input",Se),i.addEventListener("blur",Ie),i.addEventListener("focus",_),window.addEventListener("resize",De),C.addEventListener("scroll",ge,!0),()=>{i.removeEventListener("focus",_),i.removeEventListener("keydown",K),i.removeEventListener("input",Se),i.removeEventListener("blur",Ie),window.removeEventListener("resize",De),C.removeEventListener("scroll",ge,!0),U(),b()}},Nh=(i,s)=>{const a=document.createElement("div");return a.textContent=i.label,a},Oh=(i,s,a)=>{if(a.length===0)return;let c=null;const u=Bh(a)?a.flatMap(H=>[Eu(H,s),...(H.children||[]).map(O=>Eu(O,s))]):a.map(H=>Ih(H)),y=i.getWrapperElement().appendChild(document.createElement("div")),k=y.appendChild(document.createElement("input"));y.className="cmw-document-symbols",k.className="cmw-document-symbols-input";const C=Ph(k,{className:"cmw-document-symbols-list",getSuggestions:async H=>{if(H==="")return u.slice();const O=u.reduce((j,Q)=>(j[Q.label]=Wh(Q.label,H),j),{});return u.slice().filter(j=>O[j.label]>0).sort((j,Q)=>O[Q.label]-O[j.label])},render:(H,O)=>{const j=document.createElement("div"),Q=j.appendChild(document.createElement("div")),ae=Math.floor((H.kind||0)/30*180+180);return Q.style.color=`hsl(${ae}, 75%, 50%)`,Q.className=`cmw-icon cmw-icon--${ph(H.kind)}`,j.insertAdjacentHTML("beforeend",H.label.replace(new RegExp("("+cc(O)+")","i"),'<span class="matched">$1</span>')),j},onSelect:H=>{N(),Br(i,s,H.location)},onUpdate:H=>{c&&c.clear();const O=H.location;O.uri===s&&(c=i.markText(...$n(O.range),{className:"cmw-highlight"}))},onCancel:()=>{k.blur(),N()}});let E=!1;const N=()=>{E||(E=!0,c&&c.clear(),C(),y.remove(),i.focus())};y.addEventListener("focusout",H=>{H.relatedTarget!==null&&N()}),k.focus()},Bh=i=>i.every(s=>ke.DocumentSymbol.is(s)),Ih=(i,s)=>({label:i.name,kind:i.kind,location:i.location}),Eu=(i,s)=>({label:i.name,kind:i.kind,location:{uri:s,range:i.range}}),Wh=(i,s)=>{const a=i.toLowerCase(),c=s.toLowerCase(),u=a.includes(c)?1:0,h=i.includes(s)?1:0,y=a.startsWith(c)?2:0,k=i.startsWith(s)?3:0;return u+h+y+k},Hh=(i,s)=>a=>(i.addEventListener(s,a),()=>{i.removeEventListener(s,a)}),ms=i=>s=>a=>s(c=>a(i(c))),qh=(i=(s,a)=>s===a)=>s=>a=>{let c=null;return s(u=>{(!c||!i(c.value,u))&&(c={value:u},a(u))})},xu=i=>s=>a=>{let c=null;return s(u=>{c!==null&&(clearTimeout(c),c=null),c=setTimeout(()=>a(u),i)})},zh=i=>s=>a=>{let c=null;const u=[];return s(h=>{c!==null&&(clearTimeout(c),c=null),u.push(h),c=setTimeout(()=>{a(u.slice()),u.length=0},i)})},Au=i=>s=>a=>s(c=>{i(c)&&a(c)}),ys=(i,...s)=>s.reduce((a,c)=>c(a),i),oa=(i,s)=>a=>{const c=(...u)=>{a(u)};return i.on(s,c),()=>{i.off(s,c)}},pr=(i,s,a)=>oa(i,s)(a),fc=(i,s,...a)=>{Pn.exports.signal(i,s,...a)};class jh{constructor(s){this.onMouseLeaveAll=s,this.listeners=[]}addElement(s){if(this.listeners.find(c=>c.element===s))return;const a={element:s,over:!1,onEnter:()=>{a.over=!0},onLeave:()=>{a.over=!1,this.checkHoverState()}};this.listeners.push(a),s.addEventListener("mouseenter",a.onEnter),s.addEventListener("mouseleave",a.onLeave)}removeElement(s){const a=this.listeners.findIndex(u=>u.element===s),c=a!==-1;if(c){const u=this.listeners[a];this.listeners.splice(a,1),u.element.removeEventListener("mouseenter",u.onEnter),u.element.removeEventListener("mouseleave",u.onLeave),this.checkHoverState()}return c}dispose(){this.listeners.forEach(s=>{this.removeElement(s.element)})}checkHoverState(){window.setTimeout(()=>{this.listeners.every(s=>!s.over)&&this.onMouseLeaveAll()},500)}}const Uh=i=>new Promise(s=>setTimeout(s,i)),bo=new WeakMap,$h=(i,s,a,c)=>{bo.has(i)&&ao(i);const u=document.createElement("div");u.className="cmw-context-menu",u.style.cssText=["z-index: 10;","position: absolute;","white-space: nowrap;","transition: opacity 200ms;"].join("");for(let C=0;C<c.length;++C){const E=c[C];for(const{label:N,handler:H}of E){const O=u.appendChild(document.createElement("div"));O.className="cmw-context-menu-item",O.appendChild(document.createTextNode(N)),H?O.addEventListener("click",j=>{j.preventDefault(),ao(i),H()}):O.setAttribute("disabled","")}if(C+1<c.length){const N=u.appendChild(document.createElement("hr"));N.className="cmw-context-menu-item-separator"}}u.style.opacity="0",document.body.appendChild(u);const h=u.offsetWidth+10,y=u.offsetHeight+10;u.style.left=Math.min(s,window.innerWidth-h)+"px",u.style.top=Math.min(a,window.innerHeight-y)+"px",u.style.opacity="1",fc(i,"cmw:contextMenuOpened",i);const k=C=>{(!(C.target instanceof Node)||!u.contains(C.target))&&(ao(i),document.removeEventListener("mousedown",k))};document.addEventListener("mousedown",k),bo.set(i,{menu:u})},ao=i=>{const s=bo.get(i);!s||(s.menu&&s.menu.remove(),bo.delete(i),fc(i,"cmw:contextMenuClosed",i))},_u=50;class Gh{constructor(s){var a,c,u;this.connectionToUris=new WeakMap,this.editors=Object.create(null),this.connectionPromises=Object.create(null),this.connections=Object.create(null),this.documentVersions=Object.create(null),this.subscriptionDisposers=new WeakMap,this.completionHandlers=new WeakMap,this.configs=s.configs||{},this.rootUri=s.rootUri+(s.rootUri.endsWith("/")?"":"/"),this.getConnectionString=s.getConnectionString.bind(void 0),this.getLanguageAssociation=s.getLanguageAssociation.bind(void 0),this.canHandleMarkdown=typeof s.renderMarkdown=="function";const h=s.renderMarkdown||(y=>y);this.renderMarkdown=h.bind(void 0),this.popupsEnabled=!0,this.onDisconnected=((a=s.onDisconnected)===null||a===void 0?void 0:a.bind(void 0))||(y=>{}),this.onReconnected=((c=s.onReconnected)===null||c===void 0?void 0:c.bind(void 0))||(y=>Promise.resolve()),this.onConnectionFailed=((u=s.onConnectionFailed)===null||u===void 0?void 0:u.bind(void 0))||(y=>{})}enablePopups(s=!0){this.popupsEnabled=s,s||this.hideAllPopups()}dispose(){for(const s of Object.values(this.editors))this.removeEventHandlers(s);this.editors=Object.create(null),this.documentVersions=Object.create(null);for(const s of Object.values(this.connections))s.dispose(),this.connectionToUris.delete(s);this.connections=Object.create(null),this.connectionPromises=Object.create(null)}async openTextDocument(s,a){var c;const u=this.getDocumentUri(s),h=this.getLanguageAssociation(u);if(!h)return;const y=h.languageServerIds[0];if(!y)return;const k=await this.getConnection(y);if(!k)return;this.editors[u]=a,this.documentVersions[u]=0;const C=h.languageId;k.textDocumentOpened({textDocument:{uri:u,languageId:C,text:a.getValue(),version:++this.documentVersions[u]}}),(c=this.connectionToUris.get(k))===null||c===void 0||c.add(u),this.addEventHandlers(u,a,k)}addEventHandlers(s,a,c){const u=new Ah({uri:s,editor:a,conn:c,renderMarkdown:this.renderMarkdown});this.completionHandlers.set(a,u);const h=[],y=new jh(()=>{this.hideTooltips(a)});y.addElement(a.getWrapperElement()),h.push(()=>{y.dispose()});const k=F=>{Fn(F),u.invoke()},C=ys(oa(a,"changes"),zh(_u),ms(F=>{const b=F[0][0];c.textDocumentChanged({textDocument:{uri:s,version:++this.documentVersions[s]},contentChanges:c.syncsIncrementally?F.flatMap(([V,q])=>q.map(fh)):[{text:b.getValue()}]});const U=F[F.length-1][1];return[b,U[U.length-1]]}),Au(([F,b])=>b.origin==="+delete"||b.text.every(U=>U.length===0)?(u.close(),Fn(F),!1):!(b.origin==="complete"||b.origin==="+complete")));h.push(C(([F,b])=>{if(!this.popupsEnabled||u.onChange())return;const U=F.getCursor();if(U.ch===0)return;const V=F.getLine(U.line)[U.ch-1];if(c.signatureHelpTriggers.includes(V)||c.signatureHelpRetriggers.includes(V)){u.close(),Fn(F),c.getSignatureHelp({textDocument:{uri:s},position:Cn(U),context:{triggerKind:ke.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:V,isRetrigger:!1}}).then(q=>{!q||q.signatures.length===0||Mh(F,y,q,U,this.renderMarkdown)});return}u.close(),Fn(F)}));const E=ys(oa(a,"cursorActivity"),xu(100),ms(([F])=>[F,F.getCursor()]));h.push(E(([F,b])=>{const U=this.popupsEnabled&&F.getTokenTypeAt(b);if(U&&/\b(?:variable|property)\b/.test(U))c.getDocumentHighlight({textDocument:{uri:s},position:Cn(b)}).then(V=>{vs(F),V&&Dh(F,V)});else if(vs(F),b.ch>0){const V=F.getLine(b.line)[b.ch-1];!c.signatureHelpTriggers.includes(V)&&!c.signatureHelpRetriggers.includes(V)&&Fn(F)}else Fn(F)}));const N=ys(Hh(a.getWrapperElement(),"mouseover"),Au(()=>yh(a)),xu(100),ms(F=>a.coordsChar({left:F.pageX,top:F.pageY},"page")),qh((F,b)=>{if(F.line!==b.line)return!1;if(F.ch===b.ch)return!0;const U=a.getTokenAt(F),V=a.getTokenAt(b);return U.string===V.string&&U.start===V.start&&U.end===V.end}));h.push(N(F=>{Wr(a);const b=a.getTokenAt(F);b.type==="comment"||b.string.length===0||b.type===null||!this.popupsEnabled||c.getHoverInfo({textDocument:{uri:s},position:Cn(F)}).then(U=>{U&&(Fn(a),mh(a,y,F,U,this.renderMarkdown))})}));const H=([F])=>{this.hideAllPopups(F)},O=([F])=>{this.hideTooltips(F)};h.push(pr(a,"cmw:contextMenuOpened",([F])=>{bh(F),u.close(),Fn(F)}),pr(a,"cmw:contextMenuClosed",([F])=>{wh(F)}),pr(a,"refresh",H),pr(a,"blur",O),pr(a,"changes",O),pr(a,"viewportChange",O));const j=(F,b=F.getCursor())=>{c.getDefinition({textDocument:{uri:s},position:Cn(b)}).then(U=>{U&&Br(F,s,U)})},Q=(F,b=F.getCursor())=>{c.getDeclaration({textDocument:{uri:s},position:Cn(b)}).then(U=>{U&&Br(F,s,U)})},ae=(F,b=F.getCursor())=>{c.getTypeDefinition({textDocument:{uri:s},position:Cn(b)}).then(U=>{U&&Br(F,s,U)})},fe=(F,b=F.getCursor())=>{c.getReferences({textDocument:{uri:s},position:Cn(b),context:{includeDeclaration:!0}}).then(U=>{U&&Br(F,s,U)})},P=(F,b=F.getCursor())=>{c.getImplementation({textDocument:{uri:s},position:Cn(b)}).then(U=>{U&&Br(F,s,U)})};h.push(pr(a,"contextmenu",([F,b])=>{b.preventDefault();const U=F.coordsChar({left:b.pageX,top:b.pageY},"page");$h(F,b.pageX,b.pageY,[[{label:"Go to Definition",handler:()=>{j(F,U)}},{label:"Go to Type Definition",handler:()=>{ae(F,U)}},{label:"Go to Implementations",handler:()=>{P(F,U)}},{label:"Go to References",handler:()=>{fe(F,U)}},{label:"Go to Symbol...",handler:()=>{c.getDocumentSymbol({textDocument:{uri:s}}).then(V=>{V&&Oh(F,s,V)})}}],[{label:"Copy"},{label:"Cut"}]])}));const I=Pn.exports.normalizeKeyMap({"Ctrl-Space":F=>{k(F)},"Alt-G D":F=>{j(F)},"Alt-G H":F=>{Q(F)},"Alt-G T":F=>{ae(F)},"Alt-G I":F=>{P(F)},"Alt-G R":F=>{fe(F)}});a.addKeyMap(I),h.push(()=>{a.removeKeyMap(I)}),this.subscriptionDisposers.set(a,h)}hideAllPopups(s){if(s){this.hideTooltips(s);const a=this.completionHandlers.get(s);a&&a.close(),ao(s)}else Object.values(this.editors).forEach(a=>this.hideAllPopups(a))}hideTooltips(s){s?(Wr(s),Fn(s)):Object.values(this.editors).forEach(a=>this.hideTooltips(a))}async closeTextDocument(s){var a;const c=this.getDocumentUri(s),u=this.getLanguageAssociation(c);if(!u)return;const h=u.languageServerIds[0];if(!h)return;const y=await this.getConnection(h);!y||(this.detachEditor(c),y.textDocumentClosed({textDocument:{uri:c}}),(a=this.connectionToUris.get(y))===null||a===void 0||a.delete(c))}detachEditor(s){const a=this.editors[s];delete this.editors[s],delete this.documentVersions[s],this.removeEventHandlers(a)}async saveTextDocument(s){const a=this.getDocumentUri(s),c=this.getLanguageAssociation(a);if(!c)return;const u=c.languageServerIds[0];if(!u)return;const h=await this.getConnection(u);if(!h)return;const y=this.editors[a];if(!y)return;h.textDocumentWillSave({textDocument:{uri:a},reason:ke.TextDocumentSaveReason.Manual});const k=await h.getEditsBeforeSave({textDocument:{uri:a},reason:ke.TextDocumentSaveReason.Manual});k&&(fa(y,k,"beforeSave"),await Uh(_u*1.5)),h.textDocumentSaved({textDocument:{uri:a},text:y.getValue()})}async notifyFilesChanged(s){for(const a of Object.values(this.connections))a.watchedFilesChanged({changes:s})}getConnection(s){return this.connectionPromises[s]||(this.connectionPromises[s]=(async()=>{const a=await this.getConnectionString(s);return a?(this.connections[s]=await this.openConnection(s,a,async(c,u)=>{await this.initConnection(c,this.configs[s],u)}),this.connections[s]):null})()),this.connectionPromises[s]}removeEventHandlers(s){const a=this.subscriptionDisposers.get(s);if(a){for(const u of a)u();a.length=0,this.subscriptionDisposers.delete(s)}ac(s),Wr(s),vs(s),Fn(s);const c=this.completionHandlers.get(s);c&&(c.close(),this.completionHandlers.delete(s))}async initConnection(s,a,c){var u;c||s.listen(),await s.initialize({capabilities:{textDocument:{synchronization:{dynamicRegistration:!0,willSave:!0,willSaveWaitUntil:!0,didSave:!0},completion:{dynamicRegistration:!0,completionItem:{snippetSupport:!0,insertReplaceSupport:!0,commitCharactersSupport:!1,documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],deprecatedSupport:!0,preselectSupport:!0,resolveSupport:{properties:["documentation","detail"]}},contextSupport:!0},hover:{dynamicRegistration:!0,contentFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"]},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],parameterInformation:{labelOffsetSupport:!0}},contextSupport:!0},declaration:{dynamicRegistration:!0,linkSupport:!1},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0,linkSupport:!0},implementation:{dynamicRegistration:!0,linkSupport:!0},references:{dynamicRegistration:!0},documentHighlight:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[ke.DiagnosticTag.Unnecessary,ke.DiagnosticTag.Deprecated]}},moniker:{}},workspace:{didChangeConfiguration:{dynamicRegistration:!0},didChangeWatchedFiles:{dynamicRegistration:!1}}},initializationOptions:(u=a==null?void 0:a.initOptions)!==null&&u!==void 0?u:null,processId:null,rootUri:this.rootUri,workspaceFolders:null}),s.initialized();const h=a==null?void 0:a.settings;return h&&s.configurationChanged({settings:h}),c||s.onDiagnostics(({uri:y,diagnostics:k})=>{const C=this.editors[y];C&&vh(C,k)}),s}getDocumentUri(s){return s.startsWith(this.rootUri)?s:this.rootUri+s.replace(/^\/+/,"")}async openConnection(s,a,c){if(/^wss?:\/\//.test(a)){const u=new sh(a,{maxReconnectAttempts:10,debug:!0}),h=await Jd(u),y=vu(h),k=[];let C=!1;return await c(y,!1),this.connectionToUris.set(y,new Set),u.addEventListener("down",E=>{if(C)console.debug(`cmw:ws:${s} connection is still down`);else{C=!0,console.debug(`cmw:ws:${s} connection went down`);const N=this.connectionToUris.get(y);for(const H of N){const O=this.editors[H];O&&(this.detachEditor(H),k.push([H,O]))}N.clear(),this.onDisconnected(s)}}),u.addEventListener("reopen",()=>{C=!1,console.debug(`cmw:ws:${s} connection reopened, reinitializing`),c(y,!0).then(async()=>{await this.onReconnected(s);for(const[E,N]of k)this.openTextDocument(E,N);k.length=0})}),u.addEventListener("close",E=>{k.length=0,E&&E.code!==1e3&&(console.warn(`cmw:ws:${s} connection failed`),this.onConnectionFailed(s))}),y}else{const u=await th(new Worker(a)),h=vu(u);return await c(h,!1),h}}}const Kh={json:"application/json",typescript:"text/typescript",javascript:"text/javascript",html:"text/html",css:"text/css"},Xh=(i,s)=>{const a=Kh[s]||"text/plain",c=document.createElement("div");return Ci.runMode(i,a,c,{tabSize:4}),c.innerHTML};Fu.use({renderer:{code(i,s){return s||(s="text"),i=Xh(i,s),`<pre><code class="cm-s-idea language-${s}">${i}</code></pre>`}}});const Yh=JSON.stringify({compilerOptions:{target:"es2017",module:"commonjs",strict:!0,esModuleInterop:!0,skipLibCheck:!0,forceConsistentCasingInFileNames:!0}},null,2),Zh=i=>{const s=document.querySelector(i);if(!s)throw new Error(`No element matching ${i}`);return s},Jh={theme:"idea",gutters:["cmw-gutter"],lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0},Vh=Ci(Zh("#editor"),{...Jh,mode:"application/json",value:Yh}),Ru="json-worker",Qh=new Gh({rootUri:"inmemory://workspace/",getLanguageAssociation:i=>i.endsWith(".json")?{languageId:"json",languageServerIds:[Ru]}:null,getConnectionString:async i=>{switch(i){case Ru:return"worker.js";default:return""}},renderMarkdown:i=>Fu(i)});Qh.openTextDocument("tsconfig.json",Vh);
