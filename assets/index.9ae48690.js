const rh=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerpolicy&&(d.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?d.credentials="include":u.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}};rh();var nn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ih(n){if(n.__esModule)return n;var o=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(s){var l=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(o,s,l.get?l:{enumerable:!0,get:function(){return n[s]}})}),o}var Dn={exports:{}};(function(n,o){(function(s,l){n.exports=l()})(nn,function(){var s=navigator.userAgent,l=navigator.platform,u=/gecko\/\d/i.test(s),d=/MSIE \d/.test(s),p=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),y=/Edge\/(\d+)/.exec(s),b=d||p||y,w=b&&(d?document.documentMode||6:+(y||p)[1]),x=!y&&/WebKit\//.test(s),P=x&&/Qt\/\d+\.\d+/.test(s),C=!y&&/Chrome\//.test(s),S=/Opera\//.test(s),B=/Apple Computer/.test(navigator.vendor),V=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),J=/PhantomJS/.test(s),R=B&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),N=/Android/.test(s),D=R||N||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),I=R||/Mac/.test(l),F=/\bCrOS\b/.test(s),$=/win/i.test(l),X=S&&s.match(/Version\/(\d*\.\d*)/);X&&(X=Number(X[1])),X&&X>=15&&(S=!1,x=!0);var j=I&&(P||S&&(X==null||X<12.11)),ue=u||b&&w>=9;function se(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var ie=function(e,t){var i=e.className,r=se(t).exec(i);if(r){var a=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(a?r[1]+a:"")}};function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function O(e,t){return k(e).appendChild(t)}function H(e,t,i,r){var a=document.createElement(e);if(i&&(a.className=i),r&&(a.style.cssText=r),typeof t=="string")a.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)a.appendChild(t[c]);return a}function E(e,t,i,r){var a=H(e,t,i,r);return a.setAttribute("role","presentation"),a}var ve;document.createRange?ve=function(e,t,i,r){var a=document.createRange();return a.setEnd(r||e,i),a.setStart(e,t),a}:ve=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function Re(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function ge(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function ke(e,t){var i=e.className;se(t).test(i)||(e.className+=(i?" ":"")+t)}function De(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!se(i[r]).test(t)&&(t+=" "+i[r]);return t}var Ne=function(e){e.select()};R?Ne=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:b&&(Ne=function(e){try{e.select()}catch{}});function qt(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ye(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function Ue(e,t,i,r,a){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=r||0,f=a||0;;){var h=e.indexOf("	",c);if(h<0||h>=t)return f+(t-c);f+=h-c,f+=i-f%i,c=h+1}}var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=qt(this.onTimeout,this)};qe.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},qe.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function ae(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var ee=50,xe={toString:function(){return"CodeMirror.Pass"}},we={scroll:!1},Nt={origin:"*mouse"},Oe={origin:"+move"};function ot(e,t,i){for(var r=0,a=0;;){var c=e.indexOf("	",r);c==-1&&(c=e.length);var f=c-r;if(c==e.length||a+f>=t)return r+Math.min(f,t-a);if(a+=c-r,a+=i-a%i,r=c+1,a>=t)return r}}var Kt=[""];function Xt(e){for(;Kt.length<=e;)Kt.push(Le(Kt)+" ");return Kt[e]}function Le(e){return e[e.length-1]}function mt(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function Yt(e,t,i){for(var r=0,a=i(t);r<e.length&&i(e[r])<=a;)r++;e.splice(r,0,t)}function st(){}function bt(e,t){var i;return Object.create?i=Object.create(e):(st.prototype=e,i=new st),t&&Ye(t,i),i}var Pn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function rn(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Pn.test(e))}function Mn(e,t){return t?t.source.indexOf("\\w")>-1&&rn(e)?!0:t.test(e):rn(e)}function rr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var yn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function $n(e){return e.charCodeAt(0)>=768&&yn.test(e)}function kr(e,t,i){for(;(i<0?t>0:t<e.length)&&$n(e.charAt(t));)t+=i;return t}function on(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var a=(t+i)/2,c=r<0?Math.ceil(a):Math.floor(a);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+r}}function Cr(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var a=!1,c=0;c<e.length;++c){var f=e[c];(f.from<i&&f.to>t||t==i&&f.to==t)&&(r(Math.max(f.from,t),Math.min(f.to,i),f.level==1?"rtl":"ltr",c),a=!0)}a||r(t,i,"ltr")}var Ht=null;function Je(e,t,i){var r;Ht=null;for(var a=0;a<e.length;++a){var c=e[a];if(c.from<t&&c.to>t)return a;c.to==t&&(c.from!=c.to&&i=="before"?r=a:Ht=a),c.from==t&&(c.from!=c.to&&i!="before"?r=a:Ht=a)}return r!=null?r:Ht}var Nn=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(m){return m<=247?e.charAt(m):1424<=m&&m<=1524?"R":1536<=m&&m<=1785?t.charAt(m-1536):1774<=m&&m<=2220?"r":8192<=m&&m<=8203?"w":m==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,c=/[LRr]/,f=/[Lb1n]/,h=/[1n]/;function g(m,T,_){this.level=m,this.from=T,this.to=_}return function(m,T){var _=T=="ltr"?"L":"R";if(m.length==0||T=="ltr"&&!r.test(m))return!1;for(var q=m.length,A=[],z=0;z<q;++z)A.push(i(m.charCodeAt(z)));for(var G=0,Q=_;G<q;++G){var te=A[G];te=="m"?A[G]=Q:Q=te}for(var oe=0,ne=_;oe<q;++oe){var ce=A[oe];ce=="1"&&ne=="r"?A[oe]="n":c.test(ce)&&(ne=ce,ce=="r"&&(A[oe]="R"))}for(var be=1,me=A[0];be<q-1;++be){var Ee=A[be];Ee=="+"&&me=="1"&&A[be+1]=="1"?A[be]="1":Ee==","&&me==A[be+1]&&(me=="1"||me=="n")&&(A[be]=me),me=Ee}for(var Xe=0;Xe<q;++Xe){var St=A[Xe];if(St==",")A[Xe]="N";else if(St=="%"){var nt=void 0;for(nt=Xe+1;nt<q&&A[nt]=="%";++nt);for(var Jt=Xe&&A[Xe-1]=="!"||nt<q&&A[nt]=="1"?"1":"N",Bt=Xe;Bt<nt;++Bt)A[Bt]=Jt;Xe=nt-1}}for(var ht=0,Ut=_;ht<q;++ht){var Rt=A[ht];Ut=="L"&&Rt=="1"?A[ht]="L":c.test(Rt)&&(Ut=Rt)}for(var vt=0;vt<q;++vt)if(a.test(A[vt])){var pt=void 0;for(pt=vt+1;pt<q&&a.test(A[pt]);++pt);for(var it=(vt?A[vt-1]:_)=="L",$t=(pt<q?A[pt]:_)=="L",zr=it==$t?it?"L":"R":_,nr=vt;nr<pt;++nr)A[nr]=zr;vt=pt-1}for(var Pt=[],xn,xt=0;xt<q;)if(f.test(A[xt])){var Es=xt;for(++xt;xt<q&&f.test(A[xt]);++xt);Pt.push(new g(0,Es,xt))}else{var Fn=xt,gr=Pt.length,mr=T=="rtl"?1:0;for(++xt;xt<q&&A[xt]!="L";++xt);for(var It=Fn;It<xt;)if(h.test(A[It])){Fn<It&&(Pt.splice(gr,0,new g(1,Fn,It)),gr+=mr);var jr=It;for(++It;It<xt&&h.test(A[It]);++It);Pt.splice(gr,0,new g(2,jr,It)),gr+=mr,Fn=It}else++It;Fn<xt&&Pt.splice(gr,0,new g(1,Fn,xt))}return T=="ltr"&&(Pt[0].level==1&&(xn=m.match(/^\s+/))&&(Pt[0].from=xn[0].length,Pt.unshift(new g(0,0,xn[0].length))),Le(Pt).level==1&&(xn=m.match(/\s+$/))&&(Le(Pt).to-=xn[0].length,Pt.push(new g(0,q-xn[0].length,q)))),T=="rtl"?Pt.reverse():Pt}}();function Ot(e,t){var i=e.order;return i==null&&(i=e.order=Nn(e.text,t)),i}var fn=[],ye=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||fn).concat(i)}};function Wt(e,t){return e._handlers&&e._handlers[t]||fn}function Lt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,a=r&&r[t];if(a){var c=ae(a,i);c>-1&&(r[t]=a.slice(0,c).concat(a.slice(c+1)))}}}function Ce(e,t){var i=Wt(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),a=0;a<i.length;++a)i[a].apply(null,r)}function Qe(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ce(e,i||t.type,e,t),Ft(t)||t.codemirrorIgnore}function Gn(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)ae(i,t[r])==-1&&i.push(t[r])}function at(e,t){return Wt(e,t).length>0}function sn(e){e.prototype.on=function(t,i){ye(this,t,i)},e.prototype.off=function(t,i){Lt(this,t,i)}}function tt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function an(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function On(e){tt(e),an(e)}function Vt(e){return e.target||e.srcElement}function ir(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),I&&e.ctrlKey&&t==1&&(t=3),t}var Kn=function(){if(b&&w<9)return!1;var e=H("div");return"draggable"in e||"dragDrop"in e}(),wt;function or(e){if(wt==null){var t=H("span","\u200B");O(e,H("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(wt=t.offsetWidth<=1&&t.offsetHeight>2&&!(b&&w<8))}var i=wt?H("span","\u200B"):H("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var ln;function M(e){if(ln!=null)return ln;var t=O(e,document.createTextNode("A\u062EA")),i=ve(t,0,1).getBoundingClientRect(),r=ve(t,1,2).getBoundingClientRect();return k(e),!i||i.left==i.right?!1:ln=r.right-i.right<3}var K=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var a=e.indexOf(`
`,t);a==-1&&(a=e.length);var c=e.slice(t,e.charAt(a-1)=="\r"?a-1:a),f=c.indexOf("\r");f!=-1?(i.push(c.slice(0,f)),t+=f+1):(i.push(c),t=a+1)}return i}:function(e){return e.split(/\r\n?|\n/)},re=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},he=function(){var e=H("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),$e=null;function Ie(e){if($e!=null)return $e;var t=O(e,H("span","x")),i=t.getBoundingClientRect(),r=ve(t,0,1).getBoundingClientRect();return $e=Math.abs(i.left-r.left)>1}var Pe={},Fe={};function lt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Pe[e]=t}function Me(e,t){Fe[e]=t}function Ke(e){if(typeof e=="string"&&Fe.hasOwnProperty(e))e=Fe[e];else if(e&&typeof e.name=="string"&&Fe.hasOwnProperty(e.name)){var t=Fe[e.name];typeof t=="string"&&(t={name:t}),e=bt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ke("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ke("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function He(e,t){t=Ke(t);var i=Pe[t.name];if(!i)return He(e,"text/plain");var r=i(e,t);if(ze.hasOwnProperty(t.name)){var a=ze[t.name];for(var c in a)!a.hasOwnProperty(c)||(r.hasOwnProperty(c)&&(r["_"+c]=r[c]),r[c]=a[c])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)r[f]=t.modeProps[f];return r}var ze={};function Ve(e,t){var i=ze.hasOwnProperty(e)?ze[e]:ze[e]={};Ye(t,i)}function ut(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var a=t[r];a instanceof Array&&(a=a.concat([])),i[r]=a}return i}function ei(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function ti(e,t,i){return e.startState?e.startState(t,i):!0}var rt=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};rt.prototype.eol=function(){return this.pos>=this.string.length},rt.prototype.sol=function(){return this.pos==this.lineStart},rt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},rt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},rt.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},rt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},rt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},rt.prototype.skipToEnd=function(){this.pos=this.string.length},rt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},rt.prototype.backUp=function(e){this.pos-=e},rt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ue(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ue(this.string,this.lineStart,this.tabSize):0)},rt.prototype.indentation=function(){return Ue(this.string,null,this.tabSize)-(this.lineStart?Ue(this.string,this.lineStart,this.tabSize):0)},rt.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(f){return i?f.toLowerCase():f},a=this.string.substr(this.pos,e.length);if(r(a)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},rt.prototype.current=function(){return this.string.slice(this.start,this.pos)},rt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},rt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},rt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function fe(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var a=i.children[r],c=a.chunkSize();if(t<c){i=a;break}t-=c}return i.lines[t]}function bn(e,t,i){var r=[],a=t.line;return e.iter(t.line,i.line+1,function(c){var f=c.text;a==i.line&&(f=f.slice(0,i.ch)),a==t.line&&(f=f.slice(t.ch)),r.push(f),++a}),r}function ni(e,t,i){var r=[];return e.iter(t,i,function(a){r.push(a.text)}),r}function Zt(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function je(e){if(e.parent==null)return null;for(var t=e.parent,i=ae(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var a=0;r.children[a]!=t;++a)i+=r.children[a].chunkSize();return i+t.first}function wn(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var a=e.children[r],c=a.height;if(t<c){e=a;continue e}t-=c,i+=a.chunkSize()}return i}while(!e.lines);for(var f=0;f<e.lines.length;++f){var h=e.lines[f],g=h.height;if(t<g)break;t-=g}return i+f}function sr(e,t){return t>=e.first&&t<e.first+e.size}function ri(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function Y(e,t,i){if(i===void 0&&(i=null),!(this instanceof Y))return new Y(e,t,i);this.line=e,this.ch=t,this.sticky=i}function v(e,t){return e.line-t.line||e.ch-t.ch}function L(e,t){return e.sticky==t.sticky&&v(e,t)==0}function U(e){return Y(e.line,e.ch)}function Z(e,t){return v(e,t)<0?t:e}function Se(e,t){return v(e,t)<0?e:t}function Ae(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function le(e,t){if(t.line<e.first)return Y(e.first,0);var i=e.first+e.size-1;return t.line>i?Y(i,fe(e,i).text.length):Dt(t,fe(e,t.line).text.length)}function Dt(e,t){var i=e.ch;return i==null||i>t?Y(e.line,t):i<0?Y(e.line,0):e}function en(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=le(e,t[r]);return i}var Tr=function(e,t){this.state=e,this.lookAhead=t},kn=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};kn.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},kn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},kn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kn.fromSaved=function(e,t,i){return t instanceof Tr?new kn(e,ut(e.mode,t.state),i,t.lookAhead):new kn(e,ut(e.mode,t),i)},kn.prototype.save=function(e){var t=e!==!1?ut(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Tr(t,this.maxLookAhead):t};function $a(e,t,i,r){var a=[e.state.modeGen],c={};Za(e,t.text,e.doc.mode,i,function(m,T){return a.push(m,T)},c,r);for(var f=i.state,h=function(m){i.baseTokens=a;var T=e.state.overlays[m],_=1,q=0;i.state=!0,Za(e,t.text,T.mode,i,function(A,z){for(var G=_;q<A;){var Q=a[_];Q>A&&a.splice(_,1,A,a[_+1],Q),_+=2,q=Math.min(A,Q)}if(!!z)if(T.opaque)a.splice(G,_-G,A,"overlay "+z),_=G+2;else for(;G<_;G+=2){var te=a[G+1];a[G+1]=(te?te+" ":"")+"overlay "+z}},c),i.state=f,i.baseTokens=null,i.baseTokenPos=1},g=0;g<e.state.overlays.length;++g)h(g);return{styles:a,classes:c.bgClass||c.textClass?c:null}}function Ga(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ii(e,je(t)),a=t.text.length>e.options.maxHighlightLength&&ut(e.doc.mode,r.state),c=$a(e,t,r);a&&(r.state=a),t.stateAfter=r.save(!a),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ii(e,t,i){var r=e.doc,a=e.display;if(!r.mode.startState)return new kn(r,!0,t);var c=of(e,t,i),f=c>r.first&&fe(r,c-1).stateAfter,h=f?kn.fromSaved(r,f,c):new kn(r,ti(r.mode),c);return r.iter(c,t,function(g){zo(e,g.text,h);var m=h.line;g.stateAfter=m==t-1||m%5==0||m>=a.viewFrom&&m<a.viewTo?h.save():null,h.nextLine()}),i&&(r.modeFrontier=h.line),h}function zo(e,t,i,r){var a=e.doc.mode,c=new rt(t,e.options.tabSize,i);for(c.start=c.pos=r||0,t==""&&Ka(a,i.state);!c.eol();)jo(a,c,i.state),c.start=c.pos}function Ka(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=ei(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function jo(e,t,i,r){for(var a=0;a<10;a++){r&&(r[0]=ei(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var Xa=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Ya(e,t,i,r){var a=e.doc,c=a.mode,f;t=le(a,t);var h=fe(a,t.line),g=ii(e,t.line,i),m=new rt(h.text,e.options.tabSize,g),T;for(r&&(T=[]);(r||m.pos<t.ch)&&!m.eol();)m.start=m.pos,f=jo(c,m,g.state),r&&T.push(new Xa(m,f,ut(a.mode,g.state)));return r?T:new Xa(m,f,g.state)}function Va(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Za(e,t,i,r,a,c,f){var h=i.flattenSpans;h==null&&(h=e.options.flattenSpans);var g=0,m=null,T=new rt(t,e.options.tabSize,r),_,q=e.options.addModeClass&&[null];for(t==""&&Va(Ka(i,r.state),c);!T.eol();){if(T.pos>e.options.maxHighlightLength?(h=!1,f&&zo(e,t,r,T.pos),T.pos=t.length,_=null):_=Va(jo(i,T,r.state,q),c),q){var A=q[0].name;A&&(_="m-"+(_?A+" "+_:A))}if(!h||m!=_){for(;g<T.start;)g=Math.min(T.start,g+5e3),a(g,m);m=_}T.start=T.pos}for(;g<T.pos;){var z=Math.min(T.pos,g+5e3);a(z,m),g=z}}function of(e,t,i){for(var r,a,c=e.doc,f=i?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>f;--h){if(h<=c.first)return c.first;var g=fe(c,h-1),m=g.stateAfter;if(m&&(!i||h+(m instanceof Tr?m.lookAhead:0)<=c.modeFrontier))return h;var T=Ue(g.text,null,e.options.tabSize);(a==null||r>T)&&(a=h-1,r=T)}return a}function sf(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var a=fe(e,r).stateAfter;if(a&&(!(a instanceof Tr)||r+a.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var Qa=!1,An=!1;function af(){Qa=!0}function lf(){An=!0}function Fi(e,t,i){this.marker=e,this.from=t,this.to=i}function oi(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function uf(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function cf(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function ff(e,t,i){var r;if(e)for(var a=0;a<e.length;++a){var c=e[a],f=c.marker,h=c.from==null||(f.inclusiveLeft?c.from<=t:c.from<t);if(h||c.from==t&&f.type=="bookmark"&&(!i||!c.marker.insertLeft)){var g=c.to==null||(f.inclusiveRight?c.to>=t:c.to>t);(r||(r=[])).push(new Fi(f,c.from,g?null:c.to))}}return r}function df(e,t,i){var r;if(e)for(var a=0;a<e.length;++a){var c=e[a],f=c.marker,h=c.to==null||(f.inclusiveRight?c.to>=t:c.to>t);if(h||c.from==t&&f.type=="bookmark"&&(!i||c.marker.insertLeft)){var g=c.from==null||(f.inclusiveLeft?c.from<=t:c.from<t);(r||(r=[])).push(new Fi(f,g?null:c.from-t,c.to==null?null:c.to-t))}}return r}function Bo(e,t){if(t.full)return null;var i=sr(e,t.from.line)&&fe(e,t.from.line).markedSpans,r=sr(e,t.to.line)&&fe(e,t.to.line).markedSpans;if(!i&&!r)return null;var a=t.from.ch,c=t.to.ch,f=v(t.from,t.to)==0,h=ff(i,a,f),g=df(r,c,f),m=t.text.length==1,T=Le(t.text).length+(m?a:0);if(h)for(var _=0;_<h.length;++_){var q=h[_];if(q.to==null){var A=oi(g,q.marker);A?m&&(q.to=A.to==null?null:A.to+T):q.to=a}}if(g)for(var z=0;z<g.length;++z){var G=g[z];if(G.to!=null&&(G.to+=T),G.from==null){var Q=oi(h,G.marker);Q||(G.from=T,m&&(h||(h=[])).push(G))}else G.from+=T,m&&(h||(h=[])).push(G)}h&&(h=Ja(h)),g&&g!=h&&(g=Ja(g));var te=[h];if(!m){var oe=t.text.length-2,ne;if(oe>0&&h)for(var ce=0;ce<h.length;++ce)h[ce].to==null&&(ne||(ne=[])).push(new Fi(h[ce].marker,null,null));for(var be=0;be<oe;++be)te.push(ne);te.push(g)}return te}function Ja(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function hf(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(A){if(A.markedSpans)for(var z=0;z<A.markedSpans.length;++z){var G=A.markedSpans[z].marker;G.readOnly&&(!r||ae(r,G)==-1)&&(r||(r=[])).push(G)}}),!r)return null;for(var a=[{from:t,to:i}],c=0;c<r.length;++c)for(var f=r[c],h=f.find(0),g=0;g<a.length;++g){var m=a[g];if(!(v(m.to,h.from)<0||v(m.from,h.to)>0)){var T=[g,1],_=v(m.from,h.from),q=v(m.to,h.to);(_<0||!f.inclusiveLeft&&!_)&&T.push({from:m.from,to:h.from}),(q>0||!f.inclusiveRight&&!q)&&T.push({from:h.to,to:m.to}),a.splice.apply(a,T),g+=T.length-3}}return a}function el(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function tl(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function zi(e){return e.inclusiveLeft?-1:0}function ji(e){return e.inclusiveRight?1:0}function Uo(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),a=t.find(),c=v(r.from,a.from)||zi(e)-zi(t);if(c)return-c;var f=v(r.to,a.to)||ji(e)-ji(t);return f||t.id-e.id}function nl(e,t){var i=An&&e.markedSpans,r;if(i)for(var a=void 0,c=0;c<i.length;++c)a=i[c],a.marker.collapsed&&(t?a.from:a.to)==null&&(!r||Uo(r,a.marker)<0)&&(r=a.marker);return r}function rl(e){return nl(e,!0)}function Bi(e){return nl(e,!1)}function pf(e,t){var i=An&&e.markedSpans,r;if(i)for(var a=0;a<i.length;++a){var c=i[a];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!r||Uo(r,c.marker)<0)&&(r=c.marker)}return r}function il(e,t,i,r,a){var c=fe(e,t),f=An&&c.markedSpans;if(f)for(var h=0;h<f.length;++h){var g=f[h];if(!!g.marker.collapsed){var m=g.marker.find(0),T=v(m.from,i)||zi(g.marker)-zi(a),_=v(m.to,r)||ji(g.marker)-ji(a);if(!(T>=0&&_<=0||T<=0&&_>=0)&&(T<=0&&(g.marker.inclusiveRight&&a.inclusiveLeft?v(m.to,i)>=0:v(m.to,i)>0)||T>=0&&(g.marker.inclusiveRight&&a.inclusiveLeft?v(m.from,r)<=0:v(m.from,r)<0)))return!0}}}function Cn(e){for(var t;t=rl(e);)e=t.find(-1,!0).line;return e}function gf(e){for(var t;t=Bi(e);)e=t.find(1,!0).line;return e}function mf(e){for(var t,i;t=Bi(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function $o(e,t){var i=fe(e,t),r=Cn(i);return i==r?t:je(r)}function ol(e,t){if(t>e.lastLine())return t;var i=fe(e,t),r;if(!Xn(e,i))return t;for(;r=Bi(i);)i=r.find(1,!0).line;return je(i)+1}function Xn(e,t){var i=An&&t.markedSpans;if(i){for(var r=void 0,a=0;a<i.length;++a)if(r=i[a],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Go(e,t,r))return!0}}}function Go(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Go(e,r.line,oi(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var a=void 0,c=0;c<t.markedSpans.length;++c)if(a=t.markedSpans[c],a.marker.collapsed&&!a.marker.widgetNode&&a.from==i.to&&(a.to==null||a.to!=i.from)&&(a.marker.inclusiveLeft||i.marker.inclusiveRight)&&Go(e,t,a))return!0}function In(e){e=Cn(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var a=i.lines[r];if(a==e)break;t+=a.height}for(var c=i.parent;c;i=c,c=i.parent)for(var f=0;f<c.children.length;++f){var h=c.children[f];if(h==i)break;t+=h.height}return t}function Ui(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=rl(r);){var a=i.find(0,!0);r=a.from.line,t+=a.from.ch-a.to.ch}for(r=e;i=Bi(r);){var c=i.find(0,!0);t-=r.text.length-c.from.ch,r=c.to.line,t+=r.text.length-c.to.ch}return t}function Ko(e){var t=e.display,i=e.doc;t.maxLine=fe(i,i.first),t.maxLineLength=Ui(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var a=Ui(r);a>t.maxLineLength&&(t.maxLineLength=a,t.maxLine=r)})}var Sr=function(e,t,i){this.text=e,tl(this,t),this.height=i?i(this):1};Sr.prototype.lineNo=function(){return je(this)},sn(Sr);function vf(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),el(e),tl(e,i);var a=r?r(e):1;a!=e.height&&Zt(e,a)}function yf(e){e.parent=null,el(e)}var bf={},wf={};function sl(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?wf:bf;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function al(e,t){var i=E("span",null,null,x?"padding-right: .1px":null),r={pre:E("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var a=0;a<=(t.rest?t.rest.length:0);a++){var c=a?t.rest[a-1]:t.line,f=void 0;r.pos=0,r.addToken=Cf,M(e.display.measure)&&(f=Ot(c,e.doc.direction))&&(r.addToken=Sf(r.addToken,f)),r.map=[];var h=t!=e.display.externalMeasured&&je(c);xf(c,r,Ga(e,c,h)),c.styleClasses&&(c.styleClasses.bgClass&&(r.bgClass=De(c.styleClasses.bgClass,r.bgClass||"")),c.styleClasses.textClass&&(r.textClass=De(c.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(or(e.display.measure))),a==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var g=r.content.lastChild;(/\bcm-tab\b/.test(g.className)||g.querySelector&&g.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ce(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=De(r.pre.className,r.textClass||"")),r}function kf(e){var t=H("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Cf(e,t,i,r,a,c,f){if(!!t){var h=e.splitSpaces?Tf(t,e.trailingSpace):t,g=e.cm.state.specialChars,m=!1,T;if(!g.test(t))e.col+=t.length,T=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,T),b&&w<9&&(m=!0),e.pos+=t.length;else{T=document.createDocumentFragment();for(var _=0;;){g.lastIndex=_;var q=g.exec(t),A=q?q.index-_:t.length-_;if(A){var z=document.createTextNode(h.slice(_,_+A));b&&w<9?T.appendChild(H("span",[z])):T.appendChild(z),e.map.push(e.pos,e.pos+A,z),e.col+=A,e.pos+=A}if(!q)break;_+=A+1;var G=void 0;if(q[0]=="	"){var Q=e.cm.options.tabSize,te=Q-e.col%Q;G=T.appendChild(H("span",Xt(te),"cm-tab")),G.setAttribute("role","presentation"),G.setAttribute("cm-text","	"),e.col+=te}else q[0]=="\r"||q[0]==`
`?(G=T.appendChild(H("span",q[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),G.setAttribute("cm-text",q[0]),e.col+=1):(G=e.cm.options.specialCharPlaceholder(q[0]),G.setAttribute("cm-text",q[0]),b&&w<9?T.appendChild(H("span",[G])):T.appendChild(G),e.col+=1);e.map.push(e.pos,e.pos+1,G),e.pos++}}if(e.trailingSpace=h.charCodeAt(t.length-1)==32,i||r||a||m||c||f){var oe=i||"";r&&(oe+=r),a&&(oe+=a);var ne=H("span",[T],oe,c);if(f)for(var ce in f)f.hasOwnProperty(ce)&&ce!="style"&&ce!="class"&&ne.setAttribute(ce,f[ce]);return e.content.appendChild(ne)}e.content.appendChild(T)}}function Tf(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",a=0;a<e.length;a++){var c=e.charAt(a);c==" "&&i&&(a==e.length-1||e.charCodeAt(a+1)==32)&&(c="\xA0"),r+=c,i=c==" "}return r}function Sf(e,t){return function(i,r,a,c,f,h,g){a=a?a+" cm-force-border":"cm-force-border";for(var m=i.pos,T=m+r.length;;){for(var _=void 0,q=0;q<t.length&&(_=t[q],!(_.to>m&&_.from<=m));q++);if(_.to>=T)return e(i,r,a,c,f,h,g);e(i,r.slice(0,_.to-m),a,c,null,h,g),c=null,r=r.slice(_.to-m),m=_.to}}}function ll(e,t,i,r){var a=!r&&i.widgetNode;a&&e.map.push(e.pos,e.pos+t,a),!r&&e.cm.display.input.needsContentAttribute&&(a||(a=e.content.appendChild(document.createElement("span"))),a.setAttribute("cm-marker",i.id)),a&&(e.cm.display.input.setUneditable(a),e.content.appendChild(a)),e.pos+=t,e.trailingSpace=!1}function xf(e,t,i){var r=e.markedSpans,a=e.text,c=0;if(!r){for(var f=1;f<i.length;f+=2)t.addToken(t,a.slice(c,c=i[f]),sl(i[f+1],t.cm.options));return}for(var h=a.length,g=0,m=1,T="",_,q,A=0,z,G,Q,te,oe;;){if(A==g){z=G=Q=q="",oe=null,te=null,A=1/0;for(var ne=[],ce=void 0,be=0;be<r.length;++be){var me=r[be],Ee=me.marker;if(Ee.type=="bookmark"&&me.from==g&&Ee.widgetNode)ne.push(Ee);else if(me.from<=g&&(me.to==null||me.to>g||Ee.collapsed&&me.to==g&&me.from==g)){if(me.to!=null&&me.to!=g&&A>me.to&&(A=me.to,G=""),Ee.className&&(z+=" "+Ee.className),Ee.css&&(q=(q?q+";":"")+Ee.css),Ee.startStyle&&me.from==g&&(Q+=" "+Ee.startStyle),Ee.endStyle&&me.to==A&&(ce||(ce=[])).push(Ee.endStyle,me.to),Ee.title&&((oe||(oe={})).title=Ee.title),Ee.attributes)for(var Xe in Ee.attributes)(oe||(oe={}))[Xe]=Ee.attributes[Xe];Ee.collapsed&&(!te||Uo(te.marker,Ee)<0)&&(te=me)}else me.from>g&&A>me.from&&(A=me.from)}if(ce)for(var St=0;St<ce.length;St+=2)ce[St+1]==A&&(G+=" "+ce[St]);if(!te||te.from==g)for(var nt=0;nt<ne.length;++nt)ll(t,0,ne[nt]);if(te&&(te.from||0)==g){if(ll(t,(te.to==null?h+1:te.to)-g,te.marker,te.from==null),te.to==null)return;te.to==g&&(te=!1)}}if(g>=h)break;for(var Jt=Math.min(h,A);;){if(T){var Bt=g+T.length;if(!te){var ht=Bt>Jt?T.slice(0,Jt-g):T;t.addToken(t,ht,_?_+z:z,Q,g+ht.length==A?G:"",q,oe)}if(Bt>=Jt){T=T.slice(Jt-g),g=Jt;break}g=Bt,Q=""}T=a.slice(c,c=i[m++]),_=sl(i[m++],t.cm.options)}}}function ul(e,t,i){this.line=t,this.rest=mf(t),this.size=this.rest?je(Le(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Xn(e,t)}function $i(e,t,i){for(var r=[],a,c=t;c<i;c=a){var f=new ul(e.doc,fe(e.doc,c),c);a=c+f.size,r.push(f)}return r}var xr=null;function Rf(e){xr?xr.ops.push(e):e.ownsGroup=xr={ops:[e],delayedCallbacks:[]}}function _f(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var a=e.ops[r];if(a.cursorActivityHandlers)for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;)a.cursorActivityHandlers[a.cursorActivityCalled++].call(null,a.cm)}}while(i<t.length)}function Lf(e,t){var i=e.ownsGroup;if(!!i)try{_f(i)}finally{xr=null,t(i)}}var si=null;function kt(e,t){var i=Wt(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),a;xr?a=xr.delayedCallbacks:si?a=si:(a=si=[],setTimeout(Df,0));for(var c=function(h){a.push(function(){return i[h].apply(null,r)})},f=0;f<i.length;++f)c(f)}}function Df(){var e=si;si=null;for(var t=0;t<e.length;++t)e[t]()}function cl(e,t,i,r){for(var a=0;a<t.changes.length;a++){var c=t.changes[a];c=="text"?Pf(e,t):c=="gutter"?dl(e,t,i,r):c=="class"?Xo(e,t):c=="widget"&&Mf(e,t,r)}t.changes=null}function ai(e){return e.node==e.text&&(e.node=H("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),b&&w<8&&(e.node.style.zIndex=2)),e.node}function Ef(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=ai(t);t.background=r.insertBefore(H("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function fl(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):al(e,t)}function Pf(e,t){var i=t.text.className,r=fl(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,Xo(e,t)):i&&(t.text.className=i)}function Xo(e,t){Ef(e,t),t.line.wrapClass?ai(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function dl(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var a=ai(t);t.gutterBackground=H("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),a.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var f=ai(t),h=t.gutter=H("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),f.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(H("div",ri(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var g=0;g<e.display.gutterSpecs.length;++g){var m=e.display.gutterSpecs[g].className,T=c.hasOwnProperty(m)&&c[m];T&&h.appendChild(H("div",[T],"CodeMirror-gutter-elt","left: "+r.gutterLeft[m]+"px; width: "+r.gutterWidth[m]+"px"))}}}function Mf(e,t,i){t.alignable&&(t.alignable=null);for(var r=se("CodeMirror-linewidget"),a=t.node.firstChild,c=void 0;a;a=c)c=a.nextSibling,r.test(a.className)&&t.node.removeChild(a);hl(e,t,i)}function Nf(e,t,i,r){var a=fl(e,t);return t.text=t.node=a.pre,a.bgClass&&(t.bgClass=a.bgClass),a.textClass&&(t.textClass=a.textClass),Xo(e,t),dl(e,t,i,r),hl(e,t,r),t.node}function hl(e,t,i){if(pl(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)pl(e,t.rest[r],t,i,!1)}function pl(e,t,i,r,a){if(!!t.widgets)for(var c=ai(i),f=0,h=t.widgets;f<h.length;++f){var g=h[f],m=H("div",[g.node],"CodeMirror-linewidget"+(g.className?" "+g.className:""));g.handleMouseEvents||m.setAttribute("cm-ignore-events","true"),Of(g,m,i,r),e.display.input.setUneditable(m),a&&g.above?c.insertBefore(m,i.gutter||i.text):c.appendChild(m),kt(g,"redraw")}}function Of(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var a=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(a-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=a+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function li(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Re(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),O(t.display.measure,H("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function qn(e,t){for(var i=Vt(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Gi(e){return e.lineSpace.offsetTop}function Yo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function gl(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=O(e.measure,H("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Tn(e){return ee-e.display.nativeBarWidth}function ar(e){return e.display.scroller.clientWidth-Tn(e)-e.display.barWidth}function Vo(e){return e.display.scroller.clientHeight-Tn(e)-e.display.barHeight}function Af(e,t,i){var r=e.options.lineWrapping,a=r&&ar(e);if(!t.measure.heights||r&&t.measure.width!=a){var c=t.measure.heights=[];if(r){t.measure.width=a;for(var f=t.text.firstChild.getClientRects(),h=0;h<f.length-1;h++){var g=f[h],m=f[h+1];Math.abs(g.bottom-m.bottom)>2&&c.push((g.bottom+m.top)/2-i.top)}}c.push(i.bottom-i.top)}}function ml(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var a=0;a<e.rest.length;a++)if(je(e.rest[a])>i)return{map:e.measure.maps[a],cache:e.measure.caches[a],before:!0}}function If(e,t){t=Cn(t);var i=je(t),r=e.display.externalMeasured=new ul(e.doc,t,i);r.lineN=i;var a=r.built=al(e,r);return r.text=a.pre,O(e.display.lineMeasure,a.pre),r}function vl(e,t,i,r){return Sn(e,Rr(e,t),i,r)}function Zo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function Rr(e,t){var i=je(t),r=Zo(e,i);r&&!r.text?r=null:r&&r.changes&&(cl(e,r,i,ns(e)),e.curOp.forceUpdate=!0),r||(r=If(e,t));var a=ml(r,t,i);return{line:t,view:r,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Sn(e,t,i,r,a){t.before&&(i=-1);var c=i+(r||""),f;return t.cache.hasOwnProperty(c)?f=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Af(e,t.view,t.rect),t.hasHeights=!0),f=Hf(e,t,i,r),f.bogus||(t.cache[c]=f)),{left:f.left,right:f.right,top:a?f.rtop:f.top,bottom:a?f.rbottom:f.bottom}}var yl={left:0,right:0,top:0,bottom:0};function bl(e,t,i){for(var r,a,c,f,h,g,m=0;m<e.length;m+=3)if(h=e[m],g=e[m+1],t<h?(a=0,c=1,f="left"):t<g?(a=t-h,c=a+1):(m==e.length-3||t==g&&e[m+3]>t)&&(c=g-h,a=c-1,t>=g&&(f="right")),a!=null){if(r=e[m+2],h==g&&i==(r.insertLeft?"left":"right")&&(f=i),i=="left"&&a==0)for(;m&&e[m-2]==e[m-3]&&e[m-1].insertLeft;)r=e[(m-=3)+2],f="left";if(i=="right"&&a==g-h)for(;m<e.length-3&&e[m+3]==e[m+4]&&!e[m+5].insertLeft;)r=e[(m+=3)+2],f="right";break}return{node:r,start:a,end:c,collapse:f,coverStart:h,coverEnd:g}}function qf(e,t){var i=yl;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var a=e.length-1;a>=0&&(i=e[a]).left==i.right;a--);return i}function Hf(e,t,i,r){var a=bl(t.map,i,r),c=a.node,f=a.start,h=a.end,g=a.collapse,m;if(c.nodeType==3){for(var T=0;T<4;T++){for(;f&&$n(t.line.text.charAt(a.coverStart+f));)--f;for(;a.coverStart+h<a.coverEnd&&$n(t.line.text.charAt(a.coverStart+h));)++h;if(b&&w<9&&f==0&&h==a.coverEnd-a.coverStart?m=c.parentNode.getBoundingClientRect():m=qf(ve(c,f,h).getClientRects(),r),m.left||m.right||f==0)break;h=f,f=f-1,g="right"}b&&w<11&&(m=Wf(e.display.measure,m))}else{f>0&&(g=r="right");var _;e.options.lineWrapping&&(_=c.getClientRects()).length>1?m=_[r=="right"?_.length-1:0]:m=c.getBoundingClientRect()}if(b&&w<9&&!f&&(!m||!m.left&&!m.right)){var q=c.parentNode.getClientRects()[0];q?m={left:q.left,right:q.left+Lr(e.display),top:q.top,bottom:q.bottom}:m=yl}for(var A=m.top-t.rect.top,z=m.bottom-t.rect.top,G=(A+z)/2,Q=t.view.measure.heights,te=0;te<Q.length-1&&!(G<Q[te]);te++);var oe=te?Q[te-1]:0,ne=Q[te],ce={left:(g=="right"?m.right:m.left)-t.rect.left,right:(g=="left"?m.left:m.right)-t.rect.left,top:oe,bottom:ne};return!m.left&&!m.right&&(ce.bogus=!0),e.options.singleCursorHeightPerLine||(ce.rtop=A,ce.rbottom=z),ce}function Wf(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ie(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function wl(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function kl(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)wl(e.display.view[t])}function ui(e){kl(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Cl(){return C&&N?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Tl(){return C&&N?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Qo(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=li(e.widgets[i]));return t}function Ki(e,t,i,r,a){if(!a){var c=Qo(t);i.top+=c,i.bottom+=c}if(r=="line")return i;r||(r="local");var f=In(t);if(r=="local"?f+=Gi(e.display):f-=e.display.viewOffset,r=="page"||r=="window"){var h=e.display.lineSpace.getBoundingClientRect();f+=h.top+(r=="window"?0:Tl());var g=h.left+(r=="window"?0:Cl());i.left+=g,i.right+=g}return i.top+=f,i.bottom+=f,i}function Sl(e,t,i){if(i=="div")return t;var r=t.left,a=t.top;if(i=="page")r-=Cl(),a-=Tl();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();r+=c.left,a+=c.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:r-f.left,top:a-f.top}}function Xi(e,t,i,r,a){return r||(r=fe(e.doc,t.line)),Ki(e,r,vl(e,r,t.ch,a),i)}function dn(e,t,i,r,a,c){r=r||fe(e.doc,t.line),a||(a=Rr(e,r));function f(z,G){var Q=Sn(e,a,z,G?"right":"left",c);return G?Q.left=Q.right:Q.right=Q.left,Ki(e,r,Q,i)}var h=Ot(r,e.doc.direction),g=t.ch,m=t.sticky;if(g>=r.text.length?(g=r.text.length,m="before"):g<=0&&(g=0,m="after"),!h)return f(m=="before"?g-1:g,m=="before");function T(z,G,Q){var te=h[G],oe=te.level==1;return f(Q?z-1:z,oe!=Q)}var _=Je(h,g,m),q=Ht,A=T(g,_,m=="before");return q!=null&&(A.other=T(g,q,m!="before")),A}function xl(e,t){var i=0;t=le(e.doc,t),e.options.lineWrapping||(i=Lr(e.display)*t.ch);var r=fe(e.doc,t.line),a=In(r)+Gi(e.display);return{left:i,right:i,top:a,bottom:a+r.height}}function Jo(e,t,i,r,a){var c=Y(e,t,i);return c.xRel=a,r&&(c.outside=r),c}function es(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return Jo(r.first,0,null,-1,-1);var a=wn(r,i),c=r.first+r.size-1;if(a>c)return Jo(r.first+r.size-1,fe(r,c).text.length,null,1,1);t<0&&(t=0);for(var f=fe(r,a);;){var h=Ff(e,f,a,t,i),g=pf(f,h.ch+(h.xRel>0||h.outside>0?1:0));if(!g)return h;var m=g.find(1);if(m.line==a)return m;f=fe(r,a=m.line)}}function Rl(e,t,i,r){r-=Qo(t);var a=t.text.length,c=on(function(f){return Sn(e,i,f-1).bottom<=r},a,0);return a=on(function(f){return Sn(e,i,f).top>r},c,a),{begin:c,end:a}}function _l(e,t,i,r){i||(i=Rr(e,t));var a=Ki(e,t,Sn(e,i,r),"line").top;return Rl(e,t,i,a)}function ts(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function Ff(e,t,i,r,a){a-=In(t);var c=Rr(e,t),f=Qo(t),h=0,g=t.text.length,m=!0,T=Ot(t,e.doc.direction);if(T){var _=(e.options.lineWrapping?jf:zf)(e,t,i,c,T,r,a);m=_.level!=1,h=m?_.from:_.to-1,g=m?_.to:_.from-1}var q=null,A=null,z=on(function(be){var me=Sn(e,c,be);return me.top+=f,me.bottom+=f,ts(me,r,a,!1)?(me.top<=a&&me.left<=r&&(q=be,A=me),!0):!1},h,g),G,Q,te=!1;if(A){var oe=r-A.left<A.right-r,ne=oe==m;z=q+(ne?0:1),Q=ne?"after":"before",G=oe?A.left:A.right}else{!m&&(z==g||z==h)&&z++,Q=z==0?"after":z==t.text.length?"before":Sn(e,c,z-(m?1:0)).bottom+f<=a==m?"after":"before";var ce=dn(e,Y(i,z,Q),"line",t,c);G=ce.left,te=a<ce.top?-1:a>=ce.bottom?1:0}return z=kr(t.text,z,1),Jo(i,z,Q,te,r-G)}function zf(e,t,i,r,a,c,f){var h=on(function(_){var q=a[_],A=q.level!=1;return ts(dn(e,Y(i,A?q.to:q.from,A?"before":"after"),"line",t,r),c,f,!0)},0,a.length-1),g=a[h];if(h>0){var m=g.level!=1,T=dn(e,Y(i,m?g.from:g.to,m?"after":"before"),"line",t,r);ts(T,c,f,!0)&&T.top>f&&(g=a[h-1])}return g}function jf(e,t,i,r,a,c,f){var h=Rl(e,t,r,f),g=h.begin,m=h.end;/\s/.test(t.text.charAt(m-1))&&m--;for(var T=null,_=null,q=0;q<a.length;q++){var A=a[q];if(!(A.from>=m||A.to<=g)){var z=A.level!=1,G=Sn(e,r,z?Math.min(m,A.to)-1:Math.max(g,A.from)).right,Q=G<c?c-G+1e9:G-c;(!T||_>Q)&&(T=A,_=Q)}}return T||(T=a[a.length-1]),T.from<g&&(T={from:g,to:T.to,level:T.level}),T.to>m&&(T={from:T.from,to:m,level:T.level}),T}var lr;function _r(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(lr==null){lr=H("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)lr.appendChild(document.createTextNode("x")),lr.appendChild(H("br"));lr.appendChild(document.createTextNode("x"))}O(e.measure,lr);var i=lr.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),k(e.measure),i||1}function Lr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=H("span","xxxxxxxxxx"),i=H("pre",[t],"CodeMirror-line-like");O(e.measure,i);var r=t.getBoundingClientRect(),a=(r.right-r.left)/10;return a>2&&(e.cachedCharWidth=a),a||10}function ns(e){for(var t=e.display,i={},r={},a=t.gutters.clientLeft,c=t.gutters.firstChild,f=0;c;c=c.nextSibling,++f){var h=e.display.gutterSpecs[f].className;i[h]=c.offsetLeft+c.clientLeft+a,r[h]=c.clientWidth}return{fixedPos:rs(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rs(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ll(e){var t=_r(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/Lr(e.display)-3);return function(a){if(Xn(e.doc,a))return 0;var c=0;if(a.widgets)for(var f=0;f<a.widgets.length;f++)a.widgets[f].height&&(c+=a.widgets[f].height);return i?c+(Math.ceil(a.text.length/r)||1)*t:c+t}}function is(e){var t=e.doc,i=Ll(e);t.iter(function(r){var a=i(r);a!=r.height&&Zt(r,a)})}function ur(e,t,i,r){var a=e.display;if(!i&&Vt(t).getAttribute("cm-not-content")=="true")return null;var c,f,h=a.lineSpace.getBoundingClientRect();try{c=t.clientX-h.left,f=t.clientY-h.top}catch{return null}var g=es(e,c,f),m;if(r&&g.xRel>0&&(m=fe(e.doc,g.line).text).length==g.ch){var T=Ue(m,m.length,e.options.tabSize)-m.length;g=Y(g.line,Math.max(0,Math.round((c-gl(e.display).left)/Lr(e.display))-T))}return g}function cr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function zt(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var a=e.display;if(r&&i<a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>t)&&(a.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=a.viewTo)An&&$o(e.doc,t)<a.viewTo&&Vn(e);else if(i<=a.viewFrom)An&&ol(e.doc,i+r)>a.viewFrom?Vn(e):(a.viewFrom+=r,a.viewTo+=r);else if(t<=a.viewFrom&&i>=a.viewTo)Vn(e);else if(t<=a.viewFrom){var c=Yi(e,i,i+r,1);c?(a.view=a.view.slice(c.index),a.viewFrom=c.lineN,a.viewTo+=r):Vn(e)}else if(i>=a.viewTo){var f=Yi(e,t,t,-1);f?(a.view=a.view.slice(0,f.index),a.viewTo=f.lineN):Vn(e)}else{var h=Yi(e,t,t,-1),g=Yi(e,i,i+r,1);h&&g?(a.view=a.view.slice(0,h.index).concat($i(e,h.lineN,g.lineN)).concat(a.view.slice(g.index)),a.viewTo+=r):Vn(e)}var m=a.externalMeasured;m&&(i<m.lineN?m.lineN+=r:t<m.lineN+m.size&&(a.externalMeasured=null))}function Yn(e,t,i){e.curOp.viewChanged=!0;var r=e.display,a=e.display.externalMeasured;if(a&&t>=a.lineN&&t<a.lineN+a.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var c=r.view[cr(e,t)];if(c.node!=null){var f=c.changes||(c.changes=[]);ae(f,i)==-1&&f.push(i)}}}function Vn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Yi(e,t,i,r){var a=cr(e,t),c,f=e.display.view;if(!An||i==e.doc.first+e.doc.size)return{index:a,lineN:i};for(var h=e.display.viewFrom,g=0;g<a;g++)h+=f[g].size;if(h!=t){if(r>0){if(a==f.length-1)return null;c=h+f[a].size-t,a++}else c=h-t;t+=c,i+=c}for(;$o(e.doc,i)!=i;){if(a==(r<0?0:f.length-1))return null;i+=r*f[a-(r<0?1:0)].size,a+=r}return{index:a,lineN:i}}function Bf(e,t,i){var r=e.display,a=r.view;a.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=$i(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=$i(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(cr(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat($i(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,cr(e,i)))),r.viewTo=i}function Dl(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var a=t[r];!a.hidden&&(!a.node||a.changes)&&++i}return i}function ci(e){e.display.input.showSelection(e.display.input.prepareSelection())}function El(e,t){t===void 0&&(t=!0);for(var i=e.doc,r={},a=r.cursors=document.createDocumentFragment(),c=r.selection=document.createDocumentFragment(),f=0;f<i.sel.ranges.length;f++)if(!(!t&&f==i.sel.primIndex)){var h=i.sel.ranges[f];if(!(h.from().line>=e.display.viewTo||h.to().line<e.display.viewFrom)){var g=h.empty();(g||e.options.showCursorWhenSelecting)&&Pl(e,h.head,a),g||Uf(e,h,c)}}return r}function Pl(e,t,i){var r=dn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),a=i.appendChild(H("div","\xA0","CodeMirror-cursor"));if(a.style.left=r.left+"px",a.style.top=r.top+"px",a.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=Xi(e,t,"div",null,null);c.right-c.left>0&&(a.style.width=c.right-c.left+"px")}if(r.other){var f=i.appendChild(H("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=r.other.left+"px",f.style.top=r.other.top+"px",f.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Vi(e,t){return e.top-t.top||e.left-t.left}function Uf(e,t,i){var r=e.display,a=e.doc,c=document.createDocumentFragment(),f=gl(e.display),h=f.left,g=Math.max(r.sizerWidth,ar(e)-r.sizer.offsetLeft)-f.right,m=a.direction=="ltr";function T(ne,ce,be,me){ce<0&&(ce=0),ce=Math.round(ce),me=Math.round(me),c.appendChild(H("div",null,"CodeMirror-selected","position: absolute; left: "+ne+`px;
                             top: `+ce+"px; width: "+(be==null?g-ne:be)+`px;
                             height: `+(me-ce)+"px"))}function _(ne,ce,be){var me=fe(a,ne),Ee=me.text.length,Xe,St;function nt(ht,Ut){return Xi(e,Y(ne,ht),"div",me,Ut)}function Jt(ht,Ut,Rt){var vt=_l(e,me,null,ht),pt=Ut=="ltr"==(Rt=="after")?"left":"right",it=Rt=="after"?vt.begin:vt.end-(/\s/.test(me.text.charAt(vt.end-1))?2:1);return nt(it,pt)[pt]}var Bt=Ot(me,a.direction);return Cr(Bt,ce||0,be==null?Ee:be,function(ht,Ut,Rt,vt){var pt=Rt=="ltr",it=nt(ht,pt?"left":"right"),$t=nt(Ut-1,pt?"right":"left"),zr=ce==null&&ht==0,nr=be==null&&Ut==Ee,Pt=vt==0,xn=!Bt||vt==Bt.length-1;if($t.top-it.top<=3){var xt=(m?zr:nr)&&Pt,Es=(m?nr:zr)&&xn,Fn=xt?h:(pt?it:$t).left,gr=Es?g:(pt?$t:it).right;T(Fn,it.top,gr-Fn,it.bottom)}else{var mr,It,jr,Ps;pt?(mr=m&&zr&&Pt?h:it.left,It=m?g:Jt(ht,Rt,"before"),jr=m?h:Jt(Ut,Rt,"after"),Ps=m&&nr&&xn?g:$t.right):(mr=m?Jt(ht,Rt,"before"):h,It=!m&&zr&&Pt?g:it.right,jr=!m&&nr&&xn?h:$t.left,Ps=m?Jt(Ut,Rt,"after"):g),T(mr,it.top,It-mr,it.bottom),it.bottom<$t.top&&T(h,it.bottom,null,$t.top),T(jr,$t.top,Ps-jr,$t.bottom)}(!Xe||Vi(it,Xe)<0)&&(Xe=it),Vi($t,Xe)<0&&(Xe=$t),(!St||Vi(it,St)<0)&&(St=it),Vi($t,St)<0&&(St=$t)}),{start:Xe,end:St}}var q=t.from(),A=t.to();if(q.line==A.line)_(q.line,q.ch,A.ch);else{var z=fe(a,q.line),G=fe(a,A.line),Q=Cn(z)==Cn(G),te=_(q.line,q.ch,Q?z.text.length+1:null).end,oe=_(A.line,Q?0:null,A.ch).start;Q&&(te.top<oe.top-2?(T(te.right,te.top,null,te.bottom),T(h,oe.top,oe.left,oe.bottom)):T(te.right,te.top,oe.left-te.right,te.bottom)),te.bottom<oe.top&&T(h,te.bottom,null,oe.top)}i.appendChild(c)}function os(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Dr(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ml(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||as(e))}function ss(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Dr(e))},100)}function as(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Ce(e,"focus",e,t),e.state.focused=!0,ke(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),x&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),os(e))}function Dr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ce(e,"blur",e,t),e.state.focused=!1,ie(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Zi(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),a=t.lineDiv.getBoundingClientRect().top,c=0,f=0;f<t.view.length;f++){var h=t.view[f],g=e.options.lineWrapping,m=void 0,T=0;if(!h.hidden){if(a+=h.line.height,b&&w<8){var _=h.node.offsetTop+h.node.offsetHeight;m=_-i,i=_}else{var q=h.node.getBoundingClientRect();m=q.bottom-q.top,!g&&h.text.firstChild&&(T=h.text.firstChild.getBoundingClientRect().right-q.left-1)}var A=h.line.height-m;if((A>.005||A<-.005)&&(a<r&&(c-=A),Zt(h.line,m),Nl(h.line),h.rest))for(var z=0;z<h.rest.length;z++)Nl(h.rest[z]);if(T>e.display.sizerWidth){var G=Math.ceil(T/Lr(e.display));G>e.display.maxLineLength&&(e.display.maxLineLength=G,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function Nl(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Qi(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Gi(e));var a=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,c=wn(t,r),f=wn(t,a);if(i&&i.ensure){var h=i.ensure.from.line,g=i.ensure.to.line;h<c?(c=h,f=wn(t,In(fe(t,h))+e.wrapper.clientHeight)):Math.min(g,t.lastLine())>=f&&(c=wn(t,In(fe(t,g))-e.wrapper.clientHeight),f=g)}return{from:c,to:Math.max(f,c+1)}}function $f(e,t){if(!Qe(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),a=null;if(t.top+r.top<0?a=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1),a!=null&&!J){var c=H("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Gi(e.display))+`px;
                         height: `+(t.bottom-t.top+Tn(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(a),e.display.lineSpace.removeChild(c)}}}function Gf(e,t,i,r){r==null&&(r=0);var a;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?Y(t.line,t.ch+1,"before"):t,t=t.ch?Y(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var f=!1,h=dn(e,t),g=!i||i==t?h:dn(e,i);a={left:Math.min(h.left,g.left),top:Math.min(h.top,g.top)-r,right:Math.max(h.left,g.left),bottom:Math.max(h.bottom,g.bottom)+r};var m=ls(e,a),T=e.doc.scrollTop,_=e.doc.scrollLeft;if(m.scrollTop!=null&&(di(e,m.scrollTop),Math.abs(e.doc.scrollTop-T)>1&&(f=!0)),m.scrollLeft!=null&&(fr(e,m.scrollLeft),Math.abs(e.doc.scrollLeft-_)>1&&(f=!0)),!f)break}return a}function Kf(e,t){var i=ls(e,t);i.scrollTop!=null&&di(e,i.scrollTop),i.scrollLeft!=null&&fr(e,i.scrollLeft)}function ls(e,t){var i=e.display,r=_r(e.display);t.top<0&&(t.top=0);var a=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=Vo(e),f={};t.bottom-t.top>c&&(t.bottom=t.top+c);var h=e.doc.height+Yo(i),g=t.top<r,m=t.bottom>h-r;if(t.top<a)f.scrollTop=g?0:t.top;else if(t.bottom>a+c){var T=Math.min(t.top,(m?h:t.bottom)-c);T!=a&&(f.scrollTop=T)}var _=e.options.fixedGutter?0:i.gutters.offsetWidth,q=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-_,A=ar(e)-i.gutters.offsetWidth,z=t.right-t.left>A;return z&&(t.right=t.left+A),t.left<10?f.scrollLeft=0:t.left<q?f.scrollLeft=Math.max(0,t.left+_-(z?0:10)):t.right>A+q-3&&(f.scrollLeft=t.right+(z?0:10)-A),f}function us(e,t){t!=null&&(Ji(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Er(e){Ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function fi(e,t,i){(t!=null||i!=null)&&Ji(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function Xf(e,t){Ji(e),e.curOp.scrollToPos=t}function Ji(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=xl(e,t.from),r=xl(e,t.to);Ol(e,i,r,t.margin)}}function Ol(e,t,i,r){var a=ls(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});fi(e,a.scrollLeft,a.scrollTop)}function di(e,t){Math.abs(e.doc.scrollTop-t)<2||(u||fs(e,{top:t}),Al(e,t,!0),u&&fs(e),gi(e,100))}function Al(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function fr(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Fl(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function hi(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+Yo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Tn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var dr=function(e,t,i){this.cm=i;var r=this.vert=H("div",[H("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=H("div",[H("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=a.tabIndex=-1,e(r),e(a),ye(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ye(a,"scroll",function(){a.clientWidth&&t(a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,b&&w<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};dr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var a=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+a)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},dr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},dr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},dr.prototype.zeroWidthHack=function(){var e=I&&!V?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new qe,this.disableVert=new qe},dr.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var a=e.getBoundingClientRect(),c=i=="vert"?document.elementFromPoint(a.right-1,(a.top+a.bottom)/2):document.elementFromPoint((a.right+a.left)/2,a.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},dr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var pi=function(){};pi.prototype.update=function(){return{bottom:0,right:0}},pi.prototype.setScrollLeft=function(){},pi.prototype.setScrollTop=function(){},pi.prototype.clear=function(){};function Pr(e,t){t||(t=hi(e));var i=e.display.barWidth,r=e.display.barHeight;Il(e,t);for(var a=0;a<4&&i!=e.display.barWidth||r!=e.display.barHeight;a++)i!=e.display.barWidth&&e.options.lineWrapping&&Zi(e),Il(e,hi(e)),i=e.display.barWidth,r=e.display.barHeight}function Il(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var ql={native:dr,null:pi};function Hl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ie(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ql[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ye(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?fr(e,t):di(e,t)},e),e.display.scrollbars.addClass&&ke(e.display.wrapper,e.display.scrollbars.addClass)}var Yf=0;function hr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Yf,markArrays:null},Rf(e.curOp)}function pr(e){var t=e.curOp;t&&Lf(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;Vf(i)})}function Vf(e){for(var t=e.ops,i=0;i<t.length;i++)Zf(t[i]);for(var r=0;r<t.length;r++)Qf(t[r]);for(var a=0;a<t.length;a++)Jf(t[a]);for(var c=0;c<t.length;c++)ed(t[c]);for(var f=0;f<t.length;f++)td(t[f])}function Zf(e){var t=e.cm,i=t.display;rd(t),e.updateMaxLine&&Ko(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new eo(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Qf(e){e.updatedDisplay=e.mustUpdate&&cs(e.cm,e.update)}function Jf(e){var t=e.cm,i=t.display;e.updatedDisplay&&Zi(t),e.barMeasure=hi(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=vl(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Tn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-ar(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function ed(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&fr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==ge();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Pr(t,e.barMeasure),e.updatedDisplay&&hs(t,e.barMeasure),e.selectionChanged&&os(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Ml(e.cm)}function td(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&Wl(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&Al(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&fr(t,e.scrollLeft,!0,!0),e.scrollToPos){var a=Gf(t,le(r,e.scrollToPos.from),le(r,e.scrollToPos.to),e.scrollToPos.margin);$f(t,a)}var c=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(c)for(var h=0;h<c.length;++h)c[h].lines.length||Ce(c[h],"hide");if(f)for(var g=0;g<f.length;++g)f[g].lines.length&&Ce(f[g],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ce(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Qt(e,t){if(e.curOp)return t();hr(e);try{return t()}finally{pr(e)}}function Ct(e,t){return function(){if(e.curOp)return t.apply(e,arguments);hr(e);try{return t.apply(e,arguments)}finally{pr(e)}}}function At(e){return function(){if(this.curOp)return e.apply(this,arguments);hr(this);try{return e.apply(this,arguments)}finally{pr(this)}}}function Tt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);hr(t);try{return e.apply(this,arguments)}finally{pr(t)}}}function gi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,qt(nd,e))}function nd(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=ii(e,t.highlightFrontier),a=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(r.line>=e.display.viewFrom){var f=c.styles,h=c.text.length>e.options.maxHighlightLength?ut(t.mode,r.state):null,g=$a(e,c,r,!0);h&&(r.state=h),c.styles=g.styles;var m=c.styleClasses,T=g.classes;T?c.styleClasses=T:m&&(c.styleClasses=null);for(var _=!f||f.length!=c.styles.length||m!=T&&(!m||!T||m.bgClass!=T.bgClass||m.textClass!=T.textClass),q=0;!_&&q<f.length;++q)_=f[q]!=c.styles[q];_&&a.push(r.line),c.stateAfter=r.save(),r.nextLine()}else c.text.length<=e.options.maxHighlightLength&&zo(e,c.text,r),c.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return gi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),a.length&&Qt(e,function(){for(var c=0;c<a.length;c++)Yn(e,a[c],"text")})}}var eo=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Qi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=ar(e),this.force=i,this.dims=ns(e),this.events=[]};eo.prototype.signal=function(e,t){at(e,t)&&this.events.push(arguments)},eo.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ce.apply(null,this.events[e])};function rd(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Tn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Tn(e)+"px",t.scrollbarsClipped=!0)}function id(e){if(e.hasFocus())return null;var t=ge();if(!t||!Re(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&Re(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function od(e){if(!(!e||!e.activeElt||e.activeElt==ge())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Re(document.body,e.anchorNode)&&Re(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function cs(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return Vn(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Dl(e)==0)return!1;zl(e)&&(Vn(e),t.dims=ns(e));var a=r.first+r.size,c=Math.max(t.visible.from-e.options.viewportMargin,r.first),f=Math.min(a,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(r.first,i.viewFrom)),i.viewTo>f&&i.viewTo-f<20&&(f=Math.min(a,i.viewTo)),An&&(c=$o(e.doc,c),f=ol(e.doc,f));var h=c!=i.viewFrom||f!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Bf(e,c,f),i.viewOffset=In(fe(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var g=Dl(e);if(!h&&g==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var m=id(e);return g>4&&(i.lineDiv.style.display="none"),sd(e,i.updateLineNumbers,t.dims),g>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,od(m),k(i.cursorDiv),k(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,h&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,gi(e,400)),i.updateLineNumbers=null,!0}function Wl(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==ar(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+Yo(e.display)-Vo(e),i.top)}),t.visible=Qi(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Qi(e.display,e.doc,i));if(!cs(e,t))break;Zi(e);var a=hi(e);ci(e),Pr(e,a),hs(e,a),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function fs(e,t){var i=new eo(e,t);if(cs(e,i)){Zi(e),Wl(e,i);var r=hi(e);ci(e),Pr(e,r),hs(e,r),i.finish()}}function sd(e,t,i){var r=e.display,a=e.options.lineNumbers,c=r.lineDiv,f=c.firstChild;function h(z){var G=z.nextSibling;return x&&I&&e.display.currentWheelTarget==z?z.style.display="none":z.parentNode.removeChild(z),G}for(var g=r.view,m=r.viewFrom,T=0;T<g.length;T++){var _=g[T];if(!_.hidden)if(!_.node||_.node.parentNode!=c){var q=Nf(e,_,m,i);c.insertBefore(q,f)}else{for(;f!=_.node;)f=h(f);var A=a&&t!=null&&t<=m&&_.lineNumber;_.changes&&(ae(_.changes,"gutter")>-1&&(A=!1),cl(e,_,m,i)),A&&(k(_.lineNumber),_.lineNumber.appendChild(document.createTextNode(ri(e.options,m)))),f=_.node.nextSibling}m+=_.size}for(;f;)f=h(f)}function ds(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",kt(e,"gutterChanged",e)}function hs(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Tn(e)+"px"}function Fl(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=rs(t)-t.scroller.scrollLeft+e.doc.scrollLeft,a=t.gutters.offsetWidth,c=r+"px",f=0;f<i.length;f++)if(!i[f].hidden){e.options.fixedGutter&&(i[f].gutter&&(i[f].gutter.style.left=c),i[f].gutterBackground&&(i[f].gutterBackground.style.left=c));var h=i[f].alignable;if(h)for(var g=0;g<h.length;g++)h[g].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=r+a+"px")}}function zl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=ri(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var a=r.measure.appendChild(H("div",[H("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=a.firstChild.offsetWidth,f=a.offsetWidth-c;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(c,r.lineGutter.offsetWidth-f)+1,r.lineNumWidth=r.lineNumInnerWidth+f,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ds(e.display),!0}return!1}function ps(e,t){for(var i=[],r=!1,a=0;a<e.length;a++){var c=e[a],f=null;if(typeof c!="string"&&(f=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:c,style:f})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function jl(e){var t=e.gutters,i=e.gutterSpecs;k(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var a=i[r],c=a.className,f=a.style,h=t.appendChild(H("div",null,"CodeMirror-gutter "+c));f&&(h.style.cssText=f),c=="CodeMirror-linenumbers"&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",ds(e)}function mi(e){jl(e.display),zt(e),Fl(e)}function ad(e,t,i,r){var a=this;this.input=i,a.scrollbarFiller=H("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=H("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=E("div",null,"CodeMirror-code"),a.selectionDiv=H("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=H("div",null,"CodeMirror-cursors"),a.measure=H("div",null,"CodeMirror-measure"),a.lineMeasure=H("div",null,"CodeMirror-measure"),a.lineSpace=E("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var c=E("div",[a.lineSpace],"CodeMirror-lines");a.mover=H("div",[c],null,"position: relative"),a.sizer=H("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=H("div",null,null,"position: absolute; height: "+ee+"px; width: 1px;"),a.gutters=H("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=H("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=H("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),a.wrapper.setAttribute("translate","no"),b&&w<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),!x&&!(u&&D)&&(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=ps(r.gutters,r.lineNumbers),jl(a),i.init(a)}var to=0,Hn=null;b?Hn=-.53:u?Hn=15:C?Hn=-.7:B&&(Hn=-1/3);function Bl(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function ld(e){var t=Bl(e);return t.x*=Hn,t.y*=Hn,t}function Ul(e,t){var i=Bl(t),r=i.x,a=i.y,c=Hn;t.deltaMode===0&&(r=t.deltaX,a=t.deltaY,c=1);var f=e.display,h=f.scroller,g=h.scrollWidth>h.clientWidth,m=h.scrollHeight>h.clientHeight;if(!!(r&&g||a&&m)){if(a&&I&&x){e:for(var T=t.target,_=f.view;T!=h;T=T.parentNode)for(var q=0;q<_.length;q++)if(_[q].node==T){e.display.currentWheelTarget=T;break e}}if(r&&!u&&!S&&c!=null){a&&m&&di(e,Math.max(0,h.scrollTop+a*c)),fr(e,Math.max(0,h.scrollLeft+r*c)),(!a||a&&m)&&tt(t),f.wheelStartX=null;return}if(a&&c!=null){var A=a*c,z=e.doc.scrollTop,G=z+f.wrapper.clientHeight;A<0?z=Math.max(0,z+A-50):G=Math.min(e.doc.height,G+A+50),fs(e,{top:z,bottom:G})}to<20&&t.deltaMode!==0&&(f.wheelStartX==null?(f.wheelStartX=h.scrollLeft,f.wheelStartY=h.scrollTop,f.wheelDX=r,f.wheelDY=a,setTimeout(function(){if(f.wheelStartX!=null){var Q=h.scrollLeft-f.wheelStartX,te=h.scrollTop-f.wheelStartY,oe=te&&f.wheelDY&&te/f.wheelDY||Q&&f.wheelDX&&Q/f.wheelDX;f.wheelStartX=f.wheelStartY=null,oe&&(Hn=(Hn*to+oe)/(to+1),++to)}},200)):(f.wheelDX+=r,f.wheelDY+=a))}}var tn=function(e,t){this.ranges=e,this.primIndex=t};tn.prototype.primary=function(){return this.ranges[this.primIndex]},tn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!L(i.anchor,r.anchor)||!L(i.head,r.head))return!1}return!0},tn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Be(U(this.ranges[t].anchor),U(this.ranges[t].head));return new tn(e,this.primIndex)},tn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},tn.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(v(t,r.from())>=0&&v(e,r.to())<=0)return i}return-1};var Be=function(e,t){this.anchor=e,this.head=t};Be.prototype.from=function(){return Se(this.anchor,this.head)},Be.prototype.to=function(){return Z(this.anchor,this.head)},Be.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function hn(e,t,i){var r=e&&e.options.selectionsMayTouch,a=t[i];t.sort(function(q,A){return v(q.from(),A.from())}),i=ae(t,a);for(var c=1;c<t.length;c++){var f=t[c],h=t[c-1],g=v(h.to(),f.from());if(r&&!f.empty()?g>0:g>=0){var m=Se(h.from(),f.from()),T=Z(h.to(),f.to()),_=h.empty()?f.from()==f.head:h.from()==h.head;c<=i&&--i,t.splice(--c,2,new Be(_?T:m,_?m:T))}}return new tn(t,i)}function Zn(e,t){return new tn([new Be(e,t||e)],0)}function Qn(e){return e.text?Y(e.from.line+e.text.length-1,Le(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function $l(e,t){if(v(e,t.from)<0)return e;if(v(e,t.to)<=0)return Qn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Qn(t).ch-t.to.ch),Y(i,r)}function gs(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var a=e.sel.ranges[r];i.push(new Be($l(a.anchor,t),$l(a.head,t)))}return hn(e.cm,i,e.sel.primIndex)}function Gl(e,t,i){return e.line==t.line?Y(i.line,e.ch-t.ch+i.ch):Y(i.line+(e.line-t.line),e.ch)}function ud(e,t,i){for(var r=[],a=Y(e.first,0),c=a,f=0;f<t.length;f++){var h=t[f],g=Gl(h.from,a,c),m=Gl(Qn(h),a,c);if(a=h.to,c=m,i=="around"){var T=e.sel.ranges[f],_=v(T.head,T.anchor)<0;r[f]=new Be(_?m:g,_?g:m)}else r[f]=new Be(g,g)}return new tn(r,e.sel.primIndex)}function ms(e){e.doc.mode=He(e.options,e.doc.modeOption),vi(e)}function vi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,gi(e,100),e.state.modeGen++,e.curOp&&zt(e)}function Kl(e,t){return t.from.ch==0&&t.to.ch==0&&Le(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function vs(e,t,i,r){function a(oe){return i?i[oe]:null}function c(oe,ne,ce){vf(oe,ne,ce,r),kt(oe,"change",oe,t)}function f(oe,ne){for(var ce=[],be=oe;be<ne;++be)ce.push(new Sr(m[be],a(be),r));return ce}var h=t.from,g=t.to,m=t.text,T=fe(e,h.line),_=fe(e,g.line),q=Le(m),A=a(m.length-1),z=g.line-h.line;if(t.full)e.insert(0,f(0,m.length)),e.remove(m.length,e.size-m.length);else if(Kl(e,t)){var G=f(0,m.length-1);c(_,_.text,A),z&&e.remove(h.line,z),G.length&&e.insert(h.line,G)}else if(T==_)if(m.length==1)c(T,T.text.slice(0,h.ch)+q+T.text.slice(g.ch),A);else{var Q=f(1,m.length-1);Q.push(new Sr(q+T.text.slice(g.ch),A,r)),c(T,T.text.slice(0,h.ch)+m[0],a(0)),e.insert(h.line+1,Q)}else if(m.length==1)c(T,T.text.slice(0,h.ch)+m[0]+_.text.slice(g.ch),a(0)),e.remove(h.line+1,z);else{c(T,T.text.slice(0,h.ch)+m[0],a(0)),c(_,q+_.text.slice(g.ch),A);var te=f(1,m.length-1);z>1&&e.remove(h.line+1,z-1),e.insert(h.line+1,te)}kt(e,"change",e,t)}function Jn(e,t,i){function r(a,c,f){if(a.linked)for(var h=0;h<a.linked.length;++h){var g=a.linked[h];if(g.doc!=c){var m=f&&g.sharedHist;i&&!m||(t(g.doc,m),r(g.doc,a,m))}}}r(e,null,!0)}function Xl(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,is(e),ms(e),Yl(e),e.options.direction=t.direction,e.options.lineWrapping||Ko(e),e.options.mode=t.modeOption,zt(e)}function Yl(e){(e.doc.direction=="rtl"?ke:ie)(e.display.lineDiv,"CodeMirror-rtl")}function cd(e){Qt(e,function(){Yl(e),zt(e)})}function no(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ys(e,t){var i={from:U(t.from),to:Qn(t),text:bn(e,t.from,t.to)};return Ql(e,i,t.from.line,t.to.line+1),Jn(e,function(r){return Ql(r,i,t.from.line,t.to.line+1)},!0),i}function Vl(e){for(;e.length;){var t=Le(e);if(t.ranges)e.pop();else break}}function fd(e,t){if(t)return Vl(e.done),Le(e.done);if(e.done.length&&!Le(e.done).ranges)return Le(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Le(e.done)}function Zl(e,t,i,r){var a=e.history;a.undone.length=0;var c=+new Date,f,h;if((a.lastOp==r||a.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&a.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(f=fd(a,a.lastOp==r)))h=Le(f.changes),v(t.from,t.to)==0&&v(t.from,h.to)==0?h.to=Qn(t):f.changes.push(ys(e,t));else{var g=Le(a.done);for((!g||!g.ranges)&&ro(e.sel,a.done),f={changes:[ys(e,t)],generation:a.generation},a.done.push(f);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(i),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=c,a.lastOp=a.lastSelOp=r,a.lastOrigin=a.lastSelOrigin=t.origin,h||Ce(e,"historyAdded")}function dd(e,t,i,r){var a=t.charAt(0);return a=="*"||a=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function hd(e,t,i,r){var a=e.history,c=r&&r.origin;i==a.lastSelOp||c&&a.lastSelOrigin==c&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==c||dd(e,c,Le(a.done),t))?a.done[a.done.length-1]=t:ro(t,a.done),a.lastSelTime=+new Date,a.lastSelOrigin=c,a.lastSelOp=i,r&&r.clearRedo!==!1&&Vl(a.undone)}function ro(e,t){var i=Le(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Ql(e,t,i,r){var a=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(f){f.markedSpans&&((a||(a=t["spans_"+e.id]={}))[c]=f.markedSpans),++c})}function pd(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function gd(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],a=0;a<t.text.length;++a)r.push(pd(i[a]));return r}function Jl(e,t){var i=gd(e,t),r=Bo(e,t);if(!i)return r;if(!r)return i;for(var a=0;a<i.length;++a){var c=i[a],f=r[a];if(c&&f){e:for(var h=0;h<f.length;++h){for(var g=f[h],m=0;m<c.length;++m)if(c[m].marker==g.marker)continue e;c.push(g)}}else f&&(i[a]=f)}return i}function Mr(e,t,i){for(var r=[],a=0;a<e.length;++a){var c=e[a];if(c.ranges){r.push(i?tn.prototype.deepCopy.call(c):c);continue}var f=c.changes,h=[];r.push({changes:h});for(var g=0;g<f.length;++g){var m=f[g],T=void 0;if(h.push({from:m.from,to:m.to,text:m.text}),t)for(var _ in m)(T=_.match(/^spans_(\d+)$/))&&ae(t,Number(T[1]))>-1&&(Le(h)[_]=m[_],delete m[_])}}return r}function bs(e,t,i,r){if(r){var a=e.anchor;if(i){var c=v(t,a)<0;c!=v(i,a)<0?(a=t,t=i):c!=v(t,i)<0&&(t=i)}return new Be(a,t)}else return new Be(i||t,t)}function io(e,t,i,r,a){a==null&&(a=e.cm&&(e.cm.display.shift||e.extend)),Et(e,new tn([bs(e.sel.primary(),t,i,a)],0),r)}function eu(e,t,i){for(var r=[],a=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)r[c]=bs(e.sel.ranges[c],t[c],null,a);var f=hn(e.cm,r,e.sel.primIndex);Et(e,f,i)}function ws(e,t,i,r){var a=e.sel.ranges.slice(0);a[t]=i,Et(e,hn(e.cm,a,e.sel.primIndex),r)}function tu(e,t,i,r){Et(e,Zn(t,i),r)}function md(e,t,i){var r={ranges:t.ranges,update:function(a){this.ranges=[];for(var c=0;c<a.length;c++)this.ranges[c]=new Be(le(e,a[c].anchor),le(e,a[c].head))},origin:i&&i.origin};return Ce(e,"beforeSelectionChange",e,r),e.cm&&Ce(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?hn(e.cm,r.ranges,r.ranges.length-1):t}function nu(e,t,i){var r=e.history.done,a=Le(r);a&&a.ranges?(r[r.length-1]=t,oo(e,t,i)):Et(e,t,i)}function Et(e,t,i){oo(e,t,i),hd(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function oo(e,t,i){(at(e,"beforeSelectionChange")||e.cm&&at(e.cm,"beforeSelectionChange"))&&(t=md(e,t,i));var r=i&&i.bias||(v(t.primary().head,e.sel.primary().head)<0?-1:1);ru(e,ou(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Er(e.cm)}function ru(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Gn(e.cm)),kt(e,"cursorActivity",e))}function iu(e){ru(e,ou(e,e.sel,null,!1))}function ou(e,t,i,r){for(var a,c=0;c<t.ranges.length;c++){var f=t.ranges[c],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],g=so(e,f.anchor,h&&h.anchor,i,r),m=so(e,f.head,h&&h.head,i,r);(a||g!=f.anchor||m!=f.head)&&(a||(a=t.ranges.slice(0,c)),a[c]=new Be(g,m))}return a?hn(e.cm,a,t.primIndex):t}function Nr(e,t,i,r,a){var c=fe(e,t.line);if(c.markedSpans)for(var f=0;f<c.markedSpans.length;++f){var h=c.markedSpans[f],g=h.marker,m="selectLeft"in g?!g.selectLeft:g.inclusiveLeft,T="selectRight"in g?!g.selectRight:g.inclusiveRight;if((h.from==null||(m?h.from<=t.ch:h.from<t.ch))&&(h.to==null||(T?h.to>=t.ch:h.to>t.ch))){if(a&&(Ce(g,"beforeCursorEnter"),g.explicitlyCleared))if(c.markedSpans){--f;continue}else break;if(!g.atomic)continue;if(i){var _=g.find(r<0?1:-1),q=void 0;if((r<0?T:m)&&(_=su(e,_,-r,_&&_.line==t.line?c:null)),_&&_.line==t.line&&(q=v(_,i))&&(r<0?q<0:q>0))return Nr(e,_,t,r,a)}var A=g.find(r<0?-1:1);return(r<0?m:T)&&(A=su(e,A,r,A.line==t.line?c:null)),A?Nr(e,A,t,r,a):null}}return t}function so(e,t,i,r,a){var c=r||1,f=Nr(e,t,i,c,a)||!a&&Nr(e,t,i,c,!0)||Nr(e,t,i,-c,a)||!a&&Nr(e,t,i,-c,!0);return f||(e.cantEdit=!0,Y(e.first,0))}function su(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?le(e,Y(t.line-1)):null:i>0&&t.ch==(r||fe(e,t.line)).text.length?t.line<e.first+e.size-1?Y(t.line+1,0):null:new Y(t.line,t.ch+i)}function au(e){e.setSelection(Y(e.firstLine(),0),Y(e.lastLine()),we)}function lu(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(a,c,f,h){a&&(r.from=le(e,a)),c&&(r.to=le(e,c)),f&&(r.text=f),h!==void 0&&(r.origin=h)}),Ce(e,"beforeChange",e,r),e.cm&&Ce(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Or(e,t,i){if(e.cm){if(!e.cm.curOp)return Ct(e.cm,Or)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"))&&(t=lu(e,t,!0),!t))){var r=Qa&&!i&&hf(e,t.from,t.to);if(r)for(var a=r.length-1;a>=0;--a)uu(e,{from:r[a].from,to:r[a].to,text:a?[""]:t.text,origin:t.origin});else uu(e,t)}}function uu(e,t){if(!(t.text.length==1&&t.text[0]==""&&v(t.from,t.to)==0)){var i=gs(e,t);Zl(e,t,i,e.cm?e.cm.curOp.id:NaN),yi(e,t,i,Bo(e,t));var r=[];Jn(e,function(a,c){!c&&ae(r,a.history)==-1&&(hu(a.history,t),r.push(a.history)),yi(a,t,null,Bo(a,t))})}}function ao(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var a=e.history,c,f=e.sel,h=t=="undo"?a.done:a.undone,g=t=="undo"?a.undone:a.done,m=0;m<h.length&&(c=h[m],!(i?c.ranges&&!c.equals(e.sel):!c.ranges));m++);if(m!=h.length){for(a.lastOrigin=a.lastSelOrigin=null;;)if(c=h.pop(),c.ranges){if(ro(c,g),i&&!c.equals(e.sel)){Et(e,c,{clearRedo:!1});return}f=c}else if(r){h.push(c);return}else break;var T=[];ro(f,g),g.push({changes:T,generation:a.generation}),a.generation=c.generation||++a.maxGeneration;for(var _=at(e,"beforeChange")||e.cm&&at(e.cm,"beforeChange"),q=function(G){var Q=c.changes[G];if(Q.origin=t,_&&!lu(e,Q,!1))return h.length=0,{};T.push(ys(e,Q));var te=G?gs(e,Q):Le(h);yi(e,Q,te,Jl(e,Q)),!G&&e.cm&&e.cm.scrollIntoView({from:Q.from,to:Qn(Q)});var oe=[];Jn(e,function(ne,ce){!ce&&ae(oe,ne.history)==-1&&(hu(ne.history,Q),oe.push(ne.history)),yi(ne,Q,null,Jl(ne,Q))})},A=c.changes.length-1;A>=0;--A){var z=q(A);if(z)return z.v}}}}function cu(e,t){if(t!=0&&(e.first+=t,e.sel=new tn(mt(e.sel.ranges,function(a){return new Be(Y(a.anchor.line+t,a.anchor.ch),Y(a.head.line+t,a.head.ch))}),e.sel.primIndex),e.cm)){zt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)Yn(e.cm,r,"gutter")}}function yi(e,t,i,r){if(e.cm&&!e.cm.curOp)return Ct(e.cm,yi)(e,t,i,r);if(t.to.line<e.first){cu(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var a=t.text.length-1-(e.first-t.from.line);cu(e,a),t={from:Y(e.first,0),to:Y(t.to.line+a,t.to.ch),text:[Le(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:Y(c,fe(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=bn(e,t.from,t.to),i||(i=gs(e,t)),e.cm?vd(e.cm,t,r):vs(e,t,r),oo(e,i,we),e.cantEdit&&so(e,Y(e.firstLine(),0))&&(e.cantEdit=!1)}}function vd(e,t,i){var r=e.doc,a=e.display,c=t.from,f=t.to,h=!1,g=c.line;e.options.lineWrapping||(g=je(Cn(fe(r,c.line))),r.iter(g,f.line+1,function(A){if(A==a.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Gn(e),vs(r,t,i,Ll(e)),e.options.lineWrapping||(r.iter(g,c.line+t.text.length,function(A){var z=Ui(A);z>a.maxLineLength&&(a.maxLine=A,a.maxLineLength=z,a.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),sf(r,c.line),gi(e,400);var m=t.text.length-(f.line-c.line)-1;t.full?zt(e):c.line==f.line&&t.text.length==1&&!Kl(e.doc,t)?Yn(e,c.line,"text"):zt(e,c.line,f.line+1,m);var T=at(e,"changes"),_=at(e,"change");if(_||T){var q={from:c,to:f,text:t.text,removed:t.removed,origin:t.origin};_&&kt(e,"change",e,q),T&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(q)}e.display.selForContextMenu=null}function Ar(e,t,i,r,a){var c;r||(r=i),v(r,i)<0&&(c=[r,i],i=c[0],r=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Or(e,{from:i,to:r,text:t,origin:a})}function fu(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function du(e,t,i,r){for(var a=0;a<e.length;++a){var c=e[a],f=!0;if(c.ranges){c.copied||(c=e[a]=c.deepCopy(),c.copied=!0);for(var h=0;h<c.ranges.length;h++)fu(c.ranges[h].anchor,t,i,r),fu(c.ranges[h].head,t,i,r);continue}for(var g=0;g<c.changes.length;++g){var m=c.changes[g];if(i<m.from.line)m.from=Y(m.from.line+r,m.from.ch),m.to=Y(m.to.line+r,m.to.ch);else if(t<=m.to.line){f=!1;break}}f||(e.splice(0,a+1),a=0)}}function hu(e,t){var i=t.from.line,r=t.to.line,a=t.text.length-(r-i)-1;du(e.done,i,r,a),du(e.undone,i,r,a)}function bi(e,t,i,r){var a=t,c=t;return typeof t=="number"?c=fe(e,Ae(e,t)):a=je(t),a==null?null:(r(c,a)&&e.cm&&Yn(e.cm,a,i),c)}function wi(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var a=this.lines[i];this.height-=a.height,yf(a),kt(a,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function ki(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var a=e[r];t+=a.chunkSize(),i+=a.height,a.parent=this}this.size=t,this.height=i,this.parent=null}ki.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<a){var c=Math.min(t,a-e),f=r.height;if(r.removeInner(e,c),this.height-=f-r.height,a==c&&(this.children.splice(i--,1),r.parent=null),(t-=c)==0)break;e=0}else e-=a}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wi))){var h=[];this.collapse(h),this.children=[new wi(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var a=this.children[r],c=a.chunkSize();if(e<=c){if(a.insertInner(e,t,i),a.lines&&a.lines.length>50){for(var f=a.lines.length%25+25,h=f;h<a.lines.length;){var g=new wi(a.lines.slice(h,h+=25));a.height-=g.height,this.children.splice(++r,0,g),g.parent=this}a.lines=a.lines.slice(0,f),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new ki(t);if(e.parent){e.size-=i.size,e.height-=i.height;var a=ae(e.parent.children,e);e.parent.children.splice(a+1,0,i)}else{var r=new ki(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var a=this.children[r],c=a.chunkSize();if(e<c){var f=Math.min(t,c-e);if(a.iterN(e,f,i))return!0;if((t-=f)==0)break;e=0}else e-=c}}};var Ci=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};Ci.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=je(i);if(!(r==null||!t)){for(var a=0;a<t.length;++a)t[a]==this&&t.splice(a--,1);t.length||(i.widgets=null);var c=li(this);Zt(i,Math.max(0,i.height-c)),e&&(Qt(e,function(){pu(e,i,-c),Yn(e,r,"widget")}),kt(e,"lineWidgetCleared",e,this,r))}},Ci.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var a=li(this)-t;!a||(Xn(this.doc,r)||Zt(r,r.height+a),i&&Qt(i,function(){i.curOp.forceUpdate=!0,pu(i,r,a),kt(i,"lineWidgetChanged",i,e,je(r))}))},sn(Ci);function pu(e,t,i){In(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&us(e,i)}function yd(e,t,i,r){var a=new Ci(e,i,r),c=e.cm;return c&&a.noHScroll&&(c.display.alignWidgets=!0),bi(e,t,"widget",function(f){var h=f.widgets||(f.widgets=[]);if(a.insertAt==null?h.push(a):h.splice(Math.min(h.length,Math.max(0,a.insertAt)),0,a),a.line=f,c&&!Xn(e,f)){var g=In(f)<e.scrollTop;Zt(f,f.height+li(a)),g&&us(c,a.height),c.curOp.forceUpdate=!0}return!0}),c&&kt(c,"lineWidgetAdded",c,a,typeof t=="number"?t:je(t)),a}var gu=0,er=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++gu};er.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&hr(e),at(this,"clear")){var i=this.find();i&&kt(this,"clear",i.from,i.to)}for(var r=null,a=null,c=0;c<this.lines.length;++c){var f=this.lines[c],h=oi(f.markedSpans,this);e&&!this.collapsed?Yn(e,je(f),"text"):e&&(h.to!=null&&(a=je(f)),h.from!=null&&(r=je(f))),f.markedSpans=uf(f.markedSpans,h),h.from==null&&this.collapsed&&!Xn(this.doc,f)&&e&&Zt(f,_r(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var g=0;g<this.lines.length;++g){var m=Cn(this.lines[g]),T=Ui(m);T>e.display.maxLineLength&&(e.display.maxLine=m,e.display.maxLineLength=T,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&zt(e,r,a+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&iu(e.doc)),e&&kt(e,"markerCleared",e,this,r,a),t&&pr(e),this.parent&&this.parent.clear()}},er.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,a=0;a<this.lines.length;++a){var c=this.lines[a],f=oi(c.markedSpans,this);if(f.from!=null&&(i=Y(t?c:je(c),f.from),e==-1))return i;if(f.to!=null&&(r=Y(t?c:je(c),f.to),e==1))return r}return i&&{from:i,to:r}},er.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||Qt(r,function(){var a=t.line,c=je(t.line),f=Zo(r,c);if(f&&(wl(f),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Xn(i.doc,a)&&i.height!=null){var h=i.height;i.height=null;var g=li(i)-h;g&&Zt(a,a.height+g)}kt(r,"markerChanged",r,e)})},er.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ae(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},er.prototype.detachLine=function(e){if(this.lines.splice(ae(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},sn(er);function Ir(e,t,i,r,a){if(r&&r.shared)return bd(e,t,i,r,a);if(e.cm&&!e.cm.curOp)return Ct(e.cm,Ir)(e,t,i,r,a);var c=new er(e,a),f=v(t,i);if(r&&Ye(r,c,!1),f>0||f==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=E("span",[c.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(il(e,t.line,t,i,c)||t.line!=i.line&&il(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");lf()}c.addToHistory&&Zl(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var h=t.line,g=e.cm,m;if(e.iter(h,i.line+1,function(_){g&&c.collapsed&&!g.options.lineWrapping&&Cn(_)==g.display.maxLine&&(m=!0),c.collapsed&&h!=t.line&&Zt(_,0),cf(_,new Fi(c,h==t.line?t.ch:null,h==i.line?i.ch:null),e.cm&&e.cm.curOp),++h}),c.collapsed&&e.iter(t.line,i.line+1,function(_){Xn(e,_)&&Zt(_,0)}),c.clearOnEnter&&ye(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(af(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++gu,c.atomic=!0),g){if(m&&(g.curOp.updateMaxLine=!0),c.collapsed)zt(g,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var T=t.line;T<=i.line;T++)Yn(g,T,"text");c.atomic&&iu(g.doc),kt(g,"markerAdded",g,c)}return c}var Ti=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Ti.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();kt(this,"clear")}},Ti.prototype.find=function(e,t){return this.primary.find(e,t)},sn(Ti);function bd(e,t,i,r,a){r=Ye(r),r.shared=!1;var c=[Ir(e,t,i,r,a)],f=c[0],h=r.widgetNode;return Jn(e,function(g){h&&(r.widgetNode=h.cloneNode(!0)),c.push(Ir(g,le(g,t),le(g,i),r,a));for(var m=0;m<g.linked.length;++m)if(g.linked[m].isParent)return;f=Le(c)}),new Ti(c,f)}function mu(e){return e.findMarks(Y(e.first,0),e.clipPos(Y(e.lastLine())),function(t){return t.parent})}function wd(e,t){for(var i=0;i<t.length;i++){var r=t[i],a=r.find(),c=e.clipPos(a.from),f=e.clipPos(a.to);if(v(c,f)){var h=Ir(e,c,f,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}function kd(e){for(var t=function(r){var a=e[r],c=[a.primary.doc];Jn(a.primary.doc,function(g){return c.push(g)});for(var f=0;f<a.markers.length;f++){var h=a.markers[f];ae(c,h.doc)==-1&&(h.parent=null,a.markers.splice(f--,1))}},i=0;i<e.length;i++)t(i)}var Cd=0,jt=function(e,t,i,r,a){if(!(this instanceof jt))return new jt(e,t,i,r,a);i==null&&(i=0),ki.call(this,[new wi([new Sr("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=Y(i,0);this.sel=Zn(c),this.history=new no(null),this.id=++Cd,this.modeOption=t,this.lineSep=r,this.direction=a=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),vs(this,{from:c,to:c,text:e}),Et(this,Zn(c),we)};jt.prototype=bt(ki.prototype,{constructor:jt,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ni(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Tt(function(e){var t=Y(this.first,0),i=this.first+this.size-1;Or(this,{from:t,to:Y(i,fe(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&fi(this.cm,0,0),Et(this,Zn(t),we)}),replaceRange:function(e,t,i,r){t=le(this,t),i=i?le(this,i):t,Ar(this,e,t,i,r)},getRange:function(e,t,i){var r=bn(this,le(this,e),le(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(sr(this,e))return fe(this,e)},getLineNumber:function(e){return je(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=fe(this,e)),Cn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return le(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Tt(function(e,t,i){tu(this,le(this,typeof e=="number"?Y(e,t||0):e),null,i)}),setSelection:Tt(function(e,t,i){tu(this,le(this,e),le(this,t||e),i)}),extendSelection:Tt(function(e,t,i){io(this,le(this,e),t&&le(this,t),i)}),extendSelections:Tt(function(e,t){eu(this,en(this,e),t)}),extendSelectionsBy:Tt(function(e,t){var i=mt(this.sel.ranges,e);eu(this,en(this,i),t)}),setSelections:Tt(function(e,t,i){if(!!e.length){for(var r=[],a=0;a<e.length;a++)r[a]=new Be(le(this,e[a].anchor),le(this,e[a].head||e[a].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Et(this,hn(this.cm,r,t),i)}}),addSelection:Tt(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Be(le(this,e),le(this,t||e))),Et(this,hn(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var a=bn(this,t[r].from(),t[r].to());i=i?i.concat(a):a}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var a=bn(this,i[r].from(),i[r].to());e!==!1&&(a=a.join(e||this.lineSeparator())),t[r]=a}return t},replaceSelection:function(e,t,i){for(var r=[],a=0;a<this.sel.ranges.length;a++)r[a]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:Tt(function(e,t,i){for(var r=[],a=this.sel,c=0;c<a.ranges.length;c++){var f=a.ranges[c];r[c]={from:f.from(),to:f.to(),text:this.splitLines(e[c]),origin:i}}for(var h=t&&t!="end"&&ud(this,r,t),g=r.length-1;g>=0;g--)Or(this,r[g]);h?nu(this,h):this.cm&&Er(this.cm)}),undo:Tt(function(){ao(this,"undo")}),redo:Tt(function(){ao(this,"redo")}),undoSelection:Tt(function(){ao(this,"undo",!0)}),redoSelection:Tt(function(){ao(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var a=0;a<e.undone.length;a++)e.undone[a].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new no(this.history),Jn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Mr(this.history.done),undone:Mr(this.history.undone)}},setHistory:function(e){var t=this.history=new no(this.history);t.done=Mr(e.done.slice(0),null,!0),t.undone=Mr(e.undone.slice(0),null,!0)},setGutterMarker:Tt(function(e,t,i){return bi(this,e,"gutter",function(r){var a=r.gutterMarkers||(r.gutterMarkers={});return a[t]=i,!i&&rr(a)&&(r.gutterMarkers=null),!0})}),clearGutter:Tt(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&bi(t,i,"gutter",function(){return i.gutterMarkers[e]=null,rr(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!sr(this,e)||(t=e,e=fe(this,e),!e))return null}else if(t=je(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Tt(function(e,t,i){return bi(this,e,t=="gutter"?"gutter":"class",function(r){var a=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[a])r[a]=i;else{if(se(i).test(r[a]))return!1;r[a]+=" "+i}return!0})}),removeLineClass:Tt(function(e,t,i){return bi(this,e,t=="gutter"?"gutter":"class",function(r){var a=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=r[a];if(c)if(i==null)r[a]=null;else{var f=c.match(se(i));if(!f)return!1;var h=f.index+f[0].length;r[a]=c.slice(0,f.index)+(!f.index||h==c.length?"":" ")+c.slice(h)||null}else return!1;return!0})}),addLineWidget:Tt(function(e,t,i){return yd(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Ir(this,le(this,e),le(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=le(this,e),Ir(this,e,e,i,"bookmark")},findMarksAt:function(e){e=le(this,e);var t=[],i=fe(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var a=i[r];(a.from==null||a.from<=e.ch)&&(a.to==null||a.to>=e.ch)&&t.push(a.marker.parent||a.marker)}return t},findMarks:function(e,t,i){e=le(this,e),t=le(this,t);var r=[],a=e.line;return this.iter(e.line,t.line+1,function(c){var f=c.markedSpans;if(f)for(var h=0;h<f.length;h++){var g=f[h];!(g.to!=null&&a==e.line&&e.ch>=g.to||g.from==null&&a!=e.line||g.from!=null&&a==t.line&&g.from>=t.ch)&&(!i||i(g.marker))&&r.push(g.marker.parent||g.marker)}++a}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(a){var c=a.text.length+r;if(c>e)return t=e,!0;e-=c,++i}),le(this,Y(i,t))},indexFromPos:function(e){e=le(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new jt(ni(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new jt(ni(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],wd(r,mu(this)),r},unlinkDoc:function(e){if(e instanceof et&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),kd(mu(this));break}}if(e.history==this.history){var r=[e.id];Jn(e,function(a){return r.push(a.id)},!0),e.history=new no(null),e.history.done=Mr(this.history.done,r),e.history.undone=Mr(this.history.undone,r)}},iterLinkedDocs:function(e){Jn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):K(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Tt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&cd(this.cm))})}),jt.prototype.eachLine=jt.prototype.iter;var vu=0;function Td(e){var t=this;if(yu(t),!(Qe(t,e)||qn(t.display,e))){tt(e),b&&(vu=+new Date);var i=ur(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var a=r.length,c=Array(a),f=0,h=function(){++f==a&&Ct(t,function(){i=le(t.doc,i);var A={from:i,to:i,text:t.doc.splitLines(c.filter(function(z){return z!=null}).join(t.doc.lineSeparator())),origin:"paste"};Or(t.doc,A),nu(t.doc,Zn(le(t.doc,i),le(t.doc,Qn(A))))})()},g=function(A,z){if(t.options.allowDropFileTypes&&ae(t.options.allowDropFileTypes,A.type)==-1){h();return}var G=new FileReader;G.onerror=function(){return h()},G.onload=function(){var Q=G.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Q)){h();return}c[z]=Q,h()},G.readAsText(A)},m=0;m<r.length;m++)g(r[m],m);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var T=e.dataTransfer.getData("Text");if(T){var _;if(t.state.draggingText&&!t.state.draggingText.copy&&(_=t.listSelections()),oo(t.doc,Zn(i,i)),_)for(var q=0;q<_.length;++q)Ar(t.doc,"",_[q].anchor,_[q].head,"drag");t.replaceSelection(T,"around","paste"),t.display.input.focus()}}catch{}}}}function Sd(e,t){if(b&&(!e.state.draggingText||+new Date-vu<100)){On(t);return}if(!(Qe(e,t)||qn(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!B)){var i=H("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",S&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),S&&i.parentNode.removeChild(i)}}function xd(e,t){var i=ur(e,t);if(!!i){var r=document.createDocumentFragment();Pl(e,i,r),e.display.dragCursor||(e.display.dragCursor=H("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),O(e.display.dragCursor,r)}}function yu(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function bu(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var a=t[r].CodeMirror;a&&i.push(a)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var wu=!1;function Rd(){wu||(_d(),wu=!0)}function _d(){var e;ye(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,bu(Ld)},100))}),ye(window,"blur",function(){return bu(Dr)})}function Ld(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var tr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Si=0;Si<10;Si++)tr[Si+48]=tr[Si+96]=String(Si);for(var lo=65;lo<=90;lo++)tr[lo]=String.fromCharCode(lo);for(var xi=1;xi<=12;xi++)tr[xi+111]=tr[xi+63235]="F"+xi;var Wn={};Wn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wn.default=I?Wn.macDefault:Wn.pcDefault;function Dd(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,a,c,f=0;f<t.length-1;f++){var h=t[f];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else if(/^s(hift)?$/i.test(h))a=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),a&&(e="Shift-"+e),e}function Ed(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var a=mt(i.split(" "),Dd),c=0;c<a.length;c++){var f=void 0,h=void 0;c==a.length-1?(h=a.join(" "),f=r):(h=a.slice(0,c+1).join(" "),f="...");var g=t[h];if(!g)t[h]=f;else if(g!=f)throw new Error("Inconsistent bindings for "+h)}delete e[i]}for(var m in t)e[m]=t[m];return e}function qr(e,t,i,r){t=uo(t);var a=t.call?t.call(e,r):t[e];if(a===!1)return"nothing";if(a==="...")return"multi";if(a!=null&&i(a))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return qr(e,t.fallthrough,i,r);for(var c=0;c<t.fallthrough.length;c++){var f=qr(e,t.fallthrough[c],i,r);if(f)return f}}}function ku(e){var t=typeof e=="string"?e:tr[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Cu(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(j?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(j?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function Tu(e,t){if(S&&e.keyCode==34&&e.char)return!1;var i=tr[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),Cu(i,e,t))}function uo(e){return typeof e=="string"?Wn[e]:e}function Hr(e,t){for(var i=e.doc.sel.ranges,r=[],a=0;a<i.length;a++){for(var c=t(i[a]);r.length&&v(c.from,Le(r).to)<=0;){var f=r.pop();if(v(f.from,c.from)<0){c.from=f.from;break}}r.push(c)}Qt(e,function(){for(var h=r.length-1;h>=0;h--)Ar(e.doc,"",r[h].from,r[h].to,"+delete");Er(e)})}function ks(e,t,i){var r=kr(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Cs(e,t,i){var r=ks(e,t.ch,i);return r==null?null:new Y(t.line,r,i<0?"after":"before")}function Ts(e,t,i,r,a){if(e){t.doc.direction=="rtl"&&(a=-a);var c=Ot(i,t.doc.direction);if(c){var f=a<0?Le(c):c[0],h=a<0==(f.level==1),g=h?"after":"before",m;if(f.level>0||t.doc.direction=="rtl"){var T=Rr(t,i);m=a<0?i.text.length-1:0;var _=Sn(t,T,m).top;m=on(function(q){return Sn(t,T,q).top==_},a<0==(f.level==1)?f.from:f.to-1,m),g=="before"&&(m=ks(i,m,1))}else m=a<0?f.to:f.from;return new Y(r,m,g)}}return new Y(r,a<0?i.text.length:0,a<0?"before":"after")}function Pd(e,t,i,r){var a=Ot(t,e.doc.direction);if(!a)return Cs(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Je(a,i.ch,i.sticky),f=a[c];if(e.doc.direction=="ltr"&&f.level%2==0&&(r>0?f.to>i.ch:f.from<i.ch))return Cs(t,i,r);var h=function(te,oe){return ks(t,te instanceof Y?te.ch:te,oe)},g,m=function(te){return e.options.lineWrapping?(g=g||Rr(e,t),_l(e,t,g,te)):{begin:0,end:t.text.length}},T=m(i.sticky=="before"?h(i,-1):i.ch);if(e.doc.direction=="rtl"||f.level==1){var _=f.level==1==r<0,q=h(i,_?1:-1);if(q!=null&&(_?q<=f.to&&q<=T.end:q>=f.from&&q>=T.begin)){var A=_?"before":"after";return new Y(i.line,q,A)}}var z=function(te,oe,ne){for(var ce=function(Xe,St){return St?new Y(i.line,h(Xe,1),"before"):new Y(i.line,Xe,"after")};te>=0&&te<a.length;te+=oe){var be=a[te],me=oe>0==(be.level!=1),Ee=me?ne.begin:h(ne.end,-1);if(be.from<=Ee&&Ee<be.to||(Ee=me?be.from:h(be.to,-1),ne.begin<=Ee&&Ee<ne.end))return ce(Ee,me)}},G=z(c+r,r,T);if(G)return G;var Q=r>0?T.end:h(T.begin,-1);return Q!=null&&!(r>0&&Q==t.text.length)&&(G=z(r>0?0:a.length-1,r,m(Q)),G)?G:null}var Ri={selectAll:au,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),we)},killLine:function(e){return Hr(e,function(t){if(t.empty()){var i=fe(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:Y(t.head.line+1,0)}:{from:t.head,to:Y(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Hr(e,function(t){return{from:Y(t.from().line,0),to:le(e.doc,Y(t.to().line+1,0))}})},delLineLeft:function(e){return Hr(e,function(t){return{from:Y(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Hr(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Hr(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(Y(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(Y(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Su(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return xu(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Md(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Oe)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Oe)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?xu(e,t.head):r},Oe)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,a=0;a<i.length;a++){var c=i[a].from(),f=Ue(e.getLine(c.line),c.ch,r);t.push(Xt(r-f%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Qt(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var a=t[r].head,c=fe(e.doc,a.line).text;if(c){if(a.ch==c.length&&(a=new Y(a.line,a.ch-1)),a.ch>0)a=new Y(a.line,a.ch+1),e.replaceRange(c.charAt(a.ch-1)+c.charAt(a.ch-2),Y(a.line,a.ch-2),a,"+transpose");else if(a.line>e.doc.first){var f=fe(e.doc,a.line-1).text;f&&(a=new Y(a.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),Y(a.line-1,f.length-1),a,"+transpose"))}}i.push(new Be(a,a))}e.setSelections(i)})},newlineAndIndent:function(e){return Qt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Er(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Su(e,t){var i=fe(e.doc,t),r=Cn(i);return r!=i&&(t=je(r)),Ts(!0,e,r,t,1)}function Md(e,t){var i=fe(e.doc,t),r=gf(i);return r!=i&&(t=je(r)),Ts(!0,e,i,t,-1)}function xu(e,t){var i=Su(e,t.line),r=fe(e.doc,i.line),a=Ot(r,e.doc.direction);if(!a||a[0].level==0){var c=Math.max(i.ch,r.text.search(/\S/)),f=t.line==i.line&&t.ch<=c&&t.ch;return Y(i.line,f?0:c,i.sticky)}return i}function co(e,t,i){if(typeof t=="string"&&(t=Ri[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,a=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),a=t(e)!=xe}finally{e.display.shift=r,e.state.suppressEdits=!1}return a}function Nd(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var a=qr(t,e.state.keyMaps[r],i,e);if(a)return a}return e.options.extraKeys&&qr(t,e.options.extraKeys,i,e)||qr(t,e.options.keyMap,i,e)}var Od=new qe;function _i(e,t,i,r){var a=e.state.keySeq;if(a){if(ku(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Od.set(50,function(){e.state.keySeq==a&&(e.state.keySeq=null,e.display.input.reset())}),Ru(e,a+" "+t,i,r))return!0}return Ru(e,t,i,r)}function Ru(e,t,i,r){var a=Nd(e,t,r);return a=="multi"&&(e.state.keySeq=t),a=="handled"&&kt(e,"keyHandled",e,t,i),(a=="handled"||a=="multi")&&(tt(i),os(e)),!!a}function _u(e,t){var i=Tu(t,!0);return i?t.shiftKey&&!e.state.keySeq?_i(e,"Shift-"+i,t,function(r){return co(e,r,!0)})||_i(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return co(e,r)}):_i(e,i,t,function(r){return co(e,r)}):!1}function Ad(e,t,i){return _i(e,"'"+i+"'",t,function(r){return co(e,r,!0)})}var Ss=null;function Lu(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=ge(),!Qe(t,e))){b&&w<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=_u(t,e);S&&(Ss=r?i:null,!r&&i==88&&!he&&(I?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),u&&!I&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Id(t)}}function Id(e){var t=e.display.lineDiv;ke(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(ie(t,"CodeMirror-crosshair"),Lt(document,"keyup",i),Lt(document,"mouseover",i))}ye(document,"keyup",i),ye(document,"mouseover",i)}function Du(e){e.keyCode==16&&(this.doc.sel.shift=!1),Qe(this,e)}function Eu(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(qn(t.display,e)||Qe(t,e)||e.ctrlKey&&!e.altKey||I&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(S&&i==Ss){Ss=null,tt(e);return}if(!(S&&(!e.which||e.which<10)&&_u(t,e))){var a=String.fromCharCode(r==null?i:r);a!="\b"&&(Ad(t,e,a)||t.display.input.onKeyPress(e))}}}var qd=400,xs=function(e,t,i){this.time=e,this.pos=t,this.button=i};xs.prototype.compare=function(e,t,i){return this.time+qd>e&&v(t,this.pos)==0&&i==this.button};var Li,Di;function Hd(e,t){var i=+new Date;return Di&&Di.compare(i,e,t)?(Li=Di=null,"triple"):Li&&Li.compare(i,e,t)?(Di=new xs(i,e,t),Li=null,"double"):(Li=new xs(i,e,t),Di=null,"single")}function Pu(e){var t=this,i=t.display;if(!(Qe(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,qn(i,e)){x||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!Rs(t,e)){var r=ur(t,e),a=ir(e),c=r?Hd(r,a):"single";window.focus(),a==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&Wd(t,a,r,c,e))&&(a==1?r?zd(t,r,c,e):Vt(e)==i.scroller&&tt(e):a==2?(r&&io(t.doc,r),setTimeout(function(){return i.input.focus()},20)):a==3&&(ue?t.display.input.onContextMenu(e):ss(t)))}}}function Wd(e,t,i,r,a){var c="Click";return r=="double"?c="Double"+c:r=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,_i(e,Cu(c,a),a,function(f){if(typeof f=="string"&&(f=Ri[f]),!f)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=f(e,i)!=xe}finally{e.state.suppressEdits=!1}return h})}function Fd(e,t,i){var r=e.getOption("configureMouse"),a=r?r(e,t,i):{};if(a.unit==null){var c=F?i.shiftKey&&i.metaKey:i.altKey;a.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(a.extend==null||e.doc.extend)&&(a.extend=e.doc.extend||i.shiftKey),a.addNew==null&&(a.addNew=I?i.metaKey:i.ctrlKey),a.moveOnDrag==null&&(a.moveOnDrag=!(I?i.altKey:i.ctrlKey)),a}function zd(e,t,i,r){b?setTimeout(qt(Ml,e),0):e.curOp.focus=ge();var a=Fd(e,i,r),c=e.doc.sel,f;e.options.dragDrop&&Kn&&!e.isReadOnly()&&i=="single"&&(f=c.contains(t))>-1&&(v((f=c.ranges[f]).from(),t)<0||t.xRel>0)&&(v(f.to(),t)>0||t.xRel<0)?jd(e,r,t,a):Bd(e,r,t,a)}function jd(e,t,i,r){var a=e.display,c=!1,f=Ct(e,function(m){x&&(a.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:ss(e)),Lt(a.wrapper.ownerDocument,"mouseup",f),Lt(a.wrapper.ownerDocument,"mousemove",h),Lt(a.scroller,"dragstart",g),Lt(a.scroller,"drop",f),c||(tt(m),r.addNew||io(e.doc,i,null,null,r.extend),x&&!B||b&&w==9?setTimeout(function(){a.wrapper.ownerDocument.body.focus({preventScroll:!0}),a.input.focus()},20):a.input.focus())}),h=function(m){c=c||Math.abs(t.clientX-m.clientX)+Math.abs(t.clientY-m.clientY)>=10},g=function(){return c=!0};x&&(a.scroller.draggable=!0),e.state.draggingText=f,f.copy=!r.moveOnDrag,ye(a.wrapper.ownerDocument,"mouseup",f),ye(a.wrapper.ownerDocument,"mousemove",h),ye(a.scroller,"dragstart",g),ye(a.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return a.input.focus()},20),a.scroller.dragDrop&&a.scroller.dragDrop()}function Mu(e,t,i){if(i=="char")return new Be(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Be(Y(t.line,0),le(e.doc,Y(t.line+1,0)));var r=i(e,t);return new Be(r.from,r.to)}function Bd(e,t,i,r){b&&ss(e);var a=e.display,c=e.doc;tt(t);var f,h,g=c.sel,m=g.ranges;if(r.addNew&&!r.extend?(h=c.sel.contains(i),h>-1?f=m[h]:f=new Be(i,i)):(f=c.sel.primary(),h=c.sel.primIndex),r.unit=="rectangle")r.addNew||(f=new Be(i,i)),i=ur(e,t,!0,!0),h=-1;else{var T=Mu(e,i,r.unit);r.extend?f=bs(f,T.anchor,T.head,r.extend):f=T}r.addNew?h==-1?(h=m.length,Et(c,hn(e,m.concat([f]),h),{scroll:!1,origin:"*mouse"})):m.length>1&&m[h].empty()&&r.unit=="char"&&!r.extend?(Et(c,hn(e,m.slice(0,h).concat(m.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),g=c.sel):ws(c,h,f,Nt):(h=0,Et(c,new tn([f],0),Nt),g=c.sel);var _=i;function q(ne){if(v(_,ne)!=0)if(_=ne,r.unit=="rectangle"){for(var ce=[],be=e.options.tabSize,me=Ue(fe(c,i.line).text,i.ch,be),Ee=Ue(fe(c,ne.line).text,ne.ch,be),Xe=Math.min(me,Ee),St=Math.max(me,Ee),nt=Math.min(i.line,ne.line),Jt=Math.min(e.lastLine(),Math.max(i.line,ne.line));nt<=Jt;nt++){var Bt=fe(c,nt).text,ht=ot(Bt,Xe,be);Xe==St?ce.push(new Be(Y(nt,ht),Y(nt,ht))):Bt.length>ht&&ce.push(new Be(Y(nt,ht),Y(nt,ot(Bt,St,be))))}ce.length||ce.push(new Be(i,i)),Et(c,hn(e,g.ranges.slice(0,h).concat(ce),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ne)}else{var Ut=f,Rt=Mu(e,ne,r.unit),vt=Ut.anchor,pt;v(Rt.anchor,vt)>0?(pt=Rt.head,vt=Se(Ut.from(),Rt.anchor)):(pt=Rt.anchor,vt=Z(Ut.to(),Rt.head));var it=g.ranges.slice(0);it[h]=Ud(e,new Be(le(c,vt),pt)),Et(c,hn(e,it,h),Nt)}}var A=a.wrapper.getBoundingClientRect(),z=0;function G(ne){var ce=++z,be=ur(e,ne,!0,r.unit=="rectangle");if(!!be)if(v(be,_)!=0){e.curOp.focus=ge(),q(be);var me=Qi(a,c);(be.line>=me.to||be.line<me.from)&&setTimeout(Ct(e,function(){z==ce&&G(ne)}),150)}else{var Ee=ne.clientY<A.top?-20:ne.clientY>A.bottom?20:0;Ee&&setTimeout(Ct(e,function(){z==ce&&(a.scroller.scrollTop+=Ee,G(ne))}),50)}}function Q(ne){e.state.selectingText=!1,z=1/0,ne&&(tt(ne),a.input.focus()),Lt(a.wrapper.ownerDocument,"mousemove",te),Lt(a.wrapper.ownerDocument,"mouseup",oe),c.history.lastSelOrigin=null}var te=Ct(e,function(ne){ne.buttons===0||!ir(ne)?Q(ne):G(ne)}),oe=Ct(e,Q);e.state.selectingText=oe,ye(a.wrapper.ownerDocument,"mousemove",te),ye(a.wrapper.ownerDocument,"mouseup",oe)}function Ud(e,t){var i=t.anchor,r=t.head,a=fe(e.doc,i.line);if(v(i,r)==0&&i.sticky==r.sticky)return t;var c=Ot(a);if(!c)return t;var f=Je(c,i.ch,i.sticky),h=c[f];if(h.from!=i.ch&&h.to!=i.ch)return t;var g=f+(h.from==i.ch==(h.level!=1)?0:1);if(g==0||g==c.length)return t;var m;if(r.line!=i.line)m=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var T=Je(c,r.ch,r.sticky),_=T-f||(r.ch-i.ch)*(h.level==1?-1:1);T==g-1||T==g?m=_<0:m=_>0}var q=c[g+(m?-1:0)],A=m==(q.level==1),z=A?q.from:q.to,G=A?"after":"before";return i.ch==z&&i.sticky==G?t:new Be(new Y(i.line,z,G),r)}function Nu(e,t,i,r){var a,c;if(t.touches)a=t.touches[0].clientX,c=t.touches[0].clientY;else try{a=t.clientX,c=t.clientY}catch{return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&tt(t);var f=e.display,h=f.lineDiv.getBoundingClientRect();if(c>h.bottom||!at(e,i))return Ft(t);c-=h.top-f.viewOffset;for(var g=0;g<e.display.gutterSpecs.length;++g){var m=f.gutters.childNodes[g];if(m&&m.getBoundingClientRect().right>=a){var T=wn(e.doc,c),_=e.display.gutterSpecs[g];return Ce(e,i,e,T,_.className,t),Ft(t)}}}function Rs(e,t){return Nu(e,t,"gutterClick",!0)}function Ou(e,t){qn(e.display,t)||$d(e,t)||Qe(e,t,"contextmenu")||ue||e.display.input.onContextMenu(t)}function $d(e,t){return at(e,"gutterContextMenu")?Nu(e,t,"gutterContextMenu",!1):!1}function Au(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ui(e)}var Wr={toString:function(){return"CodeMirror.Init"}},Iu={},fo={};function Gd(e){var t=e.optionHandlers;function i(r,a,c,f){e.defaults[r]=a,c&&(t[r]=f?function(h,g,m){m!=Wr&&c(h,g,m)}:c)}e.defineOption=i,e.Init=Wr,i("value","",function(r,a){return r.setValue(a)},!0),i("mode",null,function(r,a){r.doc.modeOption=a,ms(r)},!0),i("indentUnit",2,ms,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){vi(r),ui(r),zt(r)},!0),i("lineSeparator",null,function(r,a){if(r.doc.lineSep=a,!!a){var c=[],f=r.doc.first;r.doc.iter(function(g){for(var m=0;;){var T=g.text.indexOf(a,m);if(T==-1)break;m=T+a.length,c.push(Y(f,T))}f++});for(var h=c.length-1;h>=0;h--)Ar(r.doc,a,c[h],Y(c[h].line,c[h].ch+a.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,a,c){r.state.specialChars=new RegExp(a.source+(a.test("	")?"":"|	"),"g"),c!=Wr&&r.refresh()}),i("specialCharPlaceholder",kf,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,a){return r.getInputField().spellcheck=a},!0),i("autocorrect",!1,function(r,a){return r.getInputField().autocorrect=a},!0),i("autocapitalize",!1,function(r,a){return r.getInputField().autocapitalize=a},!0),i("rtlMoveVisually",!$),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){Au(r),mi(r)},!0),i("keyMap","default",function(r,a,c){var f=uo(a),h=c!=Wr&&uo(c);h&&h.detach&&h.detach(r,f),f.attach&&f.attach(r,h||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,Xd,!0),i("gutters",[],function(r,a){r.display.gutterSpecs=ps(a,r.options.lineNumbers),mi(r)},!0),i("fixedGutter",!0,function(r,a){r.display.gutters.style.left=a?rs(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Pr(r)},!0),i("scrollbarStyle","native",function(r){Hl(r),Pr(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,a){r.display.gutterSpecs=ps(r.options.gutters,a),mi(r)},!0),i("firstLineNumber",1,mi,!0),i("lineNumberFormatter",function(r){return r},mi,!0),i("showCursorWhenSelecting",!1,ci,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,a){a=="nocursor"&&(Dr(r),r.display.input.blur()),r.display.input.readOnlyChanged(a)}),i("screenReaderLabel",null,function(r,a){a=a===""?null:a,r.display.input.screenReaderLabelChanged(a)}),i("disableInput",!1,function(r,a){a||r.display.input.reset()},!0),i("dragDrop",!0,Kd),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,ci,!0),i("singleCursorHeightPerLine",!0,ci,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,vi,!0),i("addModeClass",!1,vi,!0),i("pollInterval",100),i("undoDepth",200,function(r,a){return r.doc.history.undoDepth=a}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,vi,!0),i("moveInputWithCursor",!0,function(r,a){a||r.display.input.resetPosition()}),i("tabindex",null,function(r,a){return r.display.input.getField().tabIndex=a||""}),i("autofocus",null),i("direction","ltr",function(r,a){return r.doc.setDirection(a)},!0),i("phrases",null)}function Kd(e,t,i){var r=i&&i!=Wr;if(!t!=!r){var a=e.display.dragFunctions,c=t?ye:Lt;c(e.display.scroller,"dragstart",a.start),c(e.display.scroller,"dragenter",a.enter),c(e.display.scroller,"dragover",a.over),c(e.display.scroller,"dragleave",a.leave),c(e.display.scroller,"drop",a.drop)}}function Xd(e){e.options.lineWrapping?(ke(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ie(e.display.wrapper,"CodeMirror-wrap"),Ko(e)),is(e),zt(e),ui(e),setTimeout(function(){return Pr(e)},100)}function et(e,t){var i=this;if(!(this instanceof et))return new et(e,t);this.options=t=t?Ye(t):{},Ye(Iu,t,!1);var r=t.value;typeof r=="string"?r=new jt(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var a=new et.inputStyles[t.inputStyle](this),c=this.display=new ad(e,r,a,t);c.wrapper.CodeMirror=this,Au(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Hl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},t.autofocus&&!D&&c.input.focus(),b&&w<11&&setTimeout(function(){return i.display.input.reset(!0)},20),Yd(this),Rd(),hr(this),this.curOp.forceUpdate=!0,Xl(this,r),t.autofocus&&!D||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&as(i)},20):Dr(this);for(var f in fo)fo.hasOwnProperty(f)&&fo[f](this,t[f],Wr);zl(this),t.finishInit&&t.finishInit(this);for(var h=0;h<_s.length;++h)_s[h](this);pr(this),x&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}et.defaults=Iu,et.optionHandlers=fo;function Yd(e){var t=e.display;ye(t.scroller,"mousedown",Ct(e,Pu)),b&&w<11?ye(t.scroller,"dblclick",Ct(e,function(g){if(!Qe(e,g)){var m=ur(e,g);if(!(!m||Rs(e,g)||qn(e.display,g))){tt(g);var T=e.findWordAt(m);io(e.doc,T.anchor,T.head)}}})):ye(t.scroller,"dblclick",function(g){return Qe(e,g)||tt(g)}),ye(t.scroller,"contextmenu",function(g){return Ou(e,g)}),ye(t.input.getField(),"contextmenu",function(g){t.scroller.contains(g.target)||Ou(e,g)});var i,r={end:0};function a(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function c(g){if(g.touches.length!=1)return!1;var m=g.touches[0];return m.radiusX<=1&&m.radiusY<=1}function f(g,m){if(m.left==null)return!0;var T=m.left-g.left,_=m.top-g.top;return T*T+_*_>20*20}ye(t.scroller,"touchstart",function(g){if(!Qe(e,g)&&!c(g)&&!Rs(e,g)){t.input.ensurePolled(),clearTimeout(i);var m=+new Date;t.activeTouch={start:m,moved:!1,prev:m-r.end<=300?r:null},g.touches.length==1&&(t.activeTouch.left=g.touches[0].pageX,t.activeTouch.top=g.touches[0].pageY)}}),ye(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ye(t.scroller,"touchend",function(g){var m=t.activeTouch;if(m&&!qn(t,g)&&m.left!=null&&!m.moved&&new Date-m.start<300){var T=e.coordsChar(t.activeTouch,"page"),_;!m.prev||f(m,m.prev)?_=new Be(T,T):!m.prev.prev||f(m,m.prev.prev)?_=e.findWordAt(T):_=new Be(Y(T.line,0),le(e.doc,Y(T.line+1,0))),e.setSelection(_.anchor,_.head),e.focus(),tt(g)}a()}),ye(t.scroller,"touchcancel",a),ye(t.scroller,"scroll",function(){t.scroller.clientHeight&&(di(e,t.scroller.scrollTop),fr(e,t.scroller.scrollLeft,!0),Ce(e,"scroll",e))}),ye(t.scroller,"mousewheel",function(g){return Ul(e,g)}),ye(t.scroller,"DOMMouseScroll",function(g){return Ul(e,g)}),ye(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(g){Qe(e,g)||On(g)},over:function(g){Qe(e,g)||(xd(e,g),On(g))},start:function(g){return Sd(e,g)},drop:Ct(e,Td),leave:function(g){Qe(e,g)||yu(e)}};var h=t.input.getField();ye(h,"keyup",function(g){return Du.call(e,g)}),ye(h,"keydown",Ct(e,Lu)),ye(h,"keypress",Ct(e,Eu)),ye(h,"focus",function(g){return as(e,g)}),ye(h,"blur",function(g){return Dr(e,g)})}var _s=[];et.defineInitHook=function(e){return _s.push(e)};function Ei(e,t,i,r){var a=e.doc,c;i==null&&(i="add"),i=="smart"&&(a.mode.indent?c=ii(e,t).state:i="prev");var f=e.options.tabSize,h=fe(a,t),g=Ue(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var m=h.text.match(/^\s*/)[0],T;if(!r&&!/\S/.test(h.text))T=0,i="not";else if(i=="smart"&&(T=a.mode.indent(c,h.text.slice(m.length),h.text),T==xe||T>150)){if(!r)return;i="prev"}i=="prev"?t>a.first?T=Ue(fe(a,t-1).text,null,f):T=0:i=="add"?T=g+e.options.indentUnit:i=="subtract"?T=g-e.options.indentUnit:typeof i=="number"&&(T=g+i),T=Math.max(0,T);var _="",q=0;if(e.options.indentWithTabs)for(var A=Math.floor(T/f);A;--A)q+=f,_+="	";if(q<T&&(_+=Xt(T-q)),_!=m)return Ar(a,_,Y(t,0),Y(t,m.length),"+input"),h.stateAfter=null,!0;for(var z=0;z<a.sel.ranges.length;z++){var G=a.sel.ranges[z];if(G.head.line==t&&G.head.ch<m.length){var Q=Y(t,m.length);ws(a,z,new Be(Q,Q));break}}}var pn=null;function ho(e){pn=e}function Ls(e,t,i,r,a){var c=e.doc;e.display.shift=!1,r||(r=c.sel);var f=+new Date-200,h=a=="paste"||e.state.pasteIncoming>f,g=K(t),m=null;if(h&&r.ranges.length>1)if(pn&&pn.text.join(`
`)==t){if(r.ranges.length%pn.text.length==0){m=[];for(var T=0;T<pn.text.length;T++)m.push(c.splitLines(pn.text[T]))}}else g.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(m=mt(g,function(te){return[te]}));for(var _=e.curOp.updateInput,q=r.ranges.length-1;q>=0;q--){var A=r.ranges[q],z=A.from(),G=A.to();A.empty()&&(i&&i>0?z=Y(z.line,z.ch-i):e.state.overwrite&&!h?G=Y(G.line,Math.min(fe(c,G.line).text.length,G.ch+Le(g).length)):h&&pn&&pn.lineWise&&pn.text.join(`
`)==g.join(`
`)&&(z=G=Y(z.line,0)));var Q={from:z,to:G,text:m?m[q%m.length]:g,origin:a||(h?"paste":e.state.cutIncoming>f?"cut":"+input")};Or(e.doc,Q),kt(e,"inputRead",e,Q)}t&&!h&&Hu(e,t),Er(e),e.curOp.updateInput<2&&(e.curOp.updateInput=_),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function qu(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Qt(t,function(){return Ls(t,i,0,null,"paste")}),!0}function Hu(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var a=i.ranges[r];if(!(a.head.ch>100||r&&i.ranges[r-1].head.line==a.head.line)){var c=e.getModeAt(a.head),f=!1;if(c.electricChars){for(var h=0;h<c.electricChars.length;h++)if(t.indexOf(c.electricChars.charAt(h))>-1){f=Ei(e,a.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(fe(e.doc,a.head.line).text.slice(0,a.head.ch))&&(f=Ei(e,a.head.line,"smart"));f&&kt(e,"electricInput",e,a.head.line)}}}function Wu(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var a=e.doc.sel.ranges[r].head.line,c={anchor:Y(a,0),head:Y(a+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function Fu(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function zu(){var e=H("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=H("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),R&&(e.style.border="1px solid black"),Fu(e),t}function Vd(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,a){var c=this.options,f=c[r];c[r]==a&&r!="mode"||(c[r]=a,t.hasOwnProperty(r)&&Ct(this,t[r])(this,a,f),Ce(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,a){this.state.keyMaps[a?"push":"unshift"](uo(r))},removeKeyMap:function(r){for(var a=this.state.keyMaps,c=0;c<a.length;++c)if(a[c]==r||a[c].name==r)return a.splice(c,1),!0},addOverlay:At(function(r,a){var c=r.token?r:e.getMode(this.options,r);if(c.startState)throw new Error("Overlays may not be stateful.");Yt(this.state.overlays,{mode:c,modeSpec:r,opaque:a&&a.opaque,priority:a&&a.priority||0},function(f){return f.priority}),this.state.modeGen++,zt(this)}),removeOverlay:At(function(r){for(var a=this.state.overlays,c=0;c<a.length;++c){var f=a[c].modeSpec;if(f==r||typeof r=="string"&&f.name==r){a.splice(c,1),this.state.modeGen++,zt(this);return}}}),indentLine:At(function(r,a,c){typeof a!="string"&&typeof a!="number"&&(a==null?a=this.options.smartIndent?"smart":"prev":a=a?"add":"subtract"),sr(this.doc,r)&&Ei(this,r,a,c)}),indentSelection:At(function(r){for(var a=this.doc.sel.ranges,c=-1,f=0;f<a.length;f++){var h=a[f];if(h.empty())h.head.line>c&&(Ei(this,h.head.line,r,!0),c=h.head.line,f==this.doc.sel.primIndex&&Er(this));else{var g=h.from(),m=h.to(),T=Math.max(c,g.line);c=Math.min(this.lastLine(),m.line-(m.ch?0:1))+1;for(var _=T;_<c;++_)Ei(this,_,r);var q=this.doc.sel.ranges;g.ch==0&&a.length==q.length&&q[f].from().ch>0&&ws(this.doc,f,new Be(g,q[f].to()),we)}}}),getTokenAt:function(r,a){return Ya(this,r,a)},getLineTokens:function(r,a){return Ya(this,Y(r),a,!0)},getTokenTypeAt:function(r){r=le(this.doc,r);var a=Ga(this,fe(this.doc,r.line)),c=0,f=(a.length-1)/2,h=r.ch,g;if(h==0)g=a[2];else for(;;){var m=c+f>>1;if((m?a[m*2-1]:0)>=h)f=m;else if(a[m*2+1]<h)c=m+1;else{g=a[m*2+2];break}}var T=g?g.indexOf("overlay "):-1;return T<0?g:T==0?null:g.slice(0,T-1)},getModeAt:function(r){var a=this.doc.mode;return a.innerMode?e.innerMode(a,this.getTokenAt(r).state).mode:a},getHelper:function(r,a){return this.getHelpers(r,a)[0]},getHelpers:function(r,a){var c=[];if(!i.hasOwnProperty(a))return c;var f=i[a],h=this.getModeAt(r);if(typeof h[a]=="string")f[h[a]]&&c.push(f[h[a]]);else if(h[a])for(var g=0;g<h[a].length;g++){var m=f[h[a][g]];m&&c.push(m)}else h.helperType&&f[h.helperType]?c.push(f[h.helperType]):f[h.name]&&c.push(f[h.name]);for(var T=0;T<f._global.length;T++){var _=f._global[T];_.pred(h,this)&&ae(c,_.val)==-1&&c.push(_.val)}return c},getStateAfter:function(r,a){var c=this.doc;return r=Ae(c,r==null?c.first+c.size-1:r),ii(this,r+1,a).state},cursorCoords:function(r,a){var c,f=this.doc.sel.primary();return r==null?c=f.head:typeof r=="object"?c=le(this.doc,r):c=r?f.from():f.to(),dn(this,c,a||"page")},charCoords:function(r,a){return Xi(this,le(this.doc,r),a||"page")},coordsChar:function(r,a){return r=Sl(this,r,a||"page"),es(this,r.left,r.top)},lineAtHeight:function(r,a){return r=Sl(this,{top:r,left:0},a||"page").top,wn(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,a,c){var f=!1,h;if(typeof r=="number"){var g=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>g&&(r=g,f=!0),h=fe(this.doc,r)}else h=r;return Ki(this,h,{top:0,left:0},a||"page",c||f).top+(f?this.doc.height-In(h):0)},defaultTextHeight:function(){return _r(this.display)},defaultCharWidth:function(){return Lr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,a,c,f,h){var g=this.display;r=dn(this,le(this.doc,r));var m=r.bottom,T=r.left;if(a.style.position="absolute",a.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(a),g.sizer.appendChild(a),f=="over")m=r.top;else if(f=="above"||f=="near"){var _=Math.max(g.wrapper.clientHeight,this.doc.height),q=Math.max(g.sizer.clientWidth,g.lineSpace.clientWidth);(f=="above"||r.bottom+a.offsetHeight>_)&&r.top>a.offsetHeight?m=r.top-a.offsetHeight:r.bottom+a.offsetHeight<=_&&(m=r.bottom),T+a.offsetWidth>q&&(T=q-a.offsetWidth)}a.style.top=m+"px",a.style.left=a.style.right="",h=="right"?(T=g.sizer.clientWidth-a.offsetWidth,a.style.right="0px"):(h=="left"?T=0:h=="middle"&&(T=(g.sizer.clientWidth-a.offsetWidth)/2),a.style.left=T+"px"),c&&Kf(this,{left:T,top:m,right:T+a.offsetWidth,bottom:m+a.offsetHeight})},triggerOnKeyDown:At(Lu),triggerOnKeyPress:At(Eu),triggerOnKeyUp:Du,triggerOnMouseDown:At(Pu),execCommand:function(r){if(Ri.hasOwnProperty(r))return Ri[r].call(null,this)},triggerElectric:At(function(r){Hu(this,r)}),findPosH:function(r,a,c,f){var h=1;a<0&&(h=-1,a=-a);for(var g=le(this.doc,r),m=0;m<a&&(g=Ds(this.doc,g,h,c,f),!g.hitSide);++m);return g},moveH:At(function(r,a){var c=this;this.extendSelectionsBy(function(f){return c.display.shift||c.doc.extend||f.empty()?Ds(c.doc,f.head,r,a,c.options.rtlMoveVisually):r<0?f.from():f.to()},Oe)}),deleteH:At(function(r,a){var c=this.doc.sel,f=this.doc;c.somethingSelected()?f.replaceSelection("",null,"+delete"):Hr(this,function(h){var g=Ds(f,h.head,r,a,!1);return r<0?{from:g,to:h.head}:{from:h.head,to:g}})}),findPosV:function(r,a,c,f){var h=1,g=f;a<0&&(h=-1,a=-a);for(var m=le(this.doc,r),T=0;T<a;++T){var _=dn(this,m,"div");if(g==null?g=_.left:_.left=g,m=ju(this,_,h,c),m.hitSide)break}return m},moveV:At(function(r,a){var c=this,f=this.doc,h=[],g=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(T){if(g)return r<0?T.from():T.to();var _=dn(c,T.head,"div");T.goalColumn!=null&&(_.left=T.goalColumn),h.push(_.left);var q=ju(c,_,r,a);return a=="page"&&T==f.sel.primary()&&us(c,Xi(c,q,"div").top-_.top),q},Oe),h.length)for(var m=0;m<f.sel.ranges.length;m++)f.sel.ranges[m].goalColumn=h[m]}),findWordAt:function(r){var a=this.doc,c=fe(a,r.line).text,f=r.ch,h=r.ch;if(c){var g=this.getHelper(r,"wordChars");(r.sticky=="before"||h==c.length)&&f?--f:++h;for(var m=c.charAt(f),T=Mn(m,g)?function(_){return Mn(_,g)}:/\s/.test(m)?function(_){return/\s/.test(_)}:function(_){return!/\s/.test(_)&&!Mn(_)};f>0&&T(c.charAt(f-1));)--f;for(;h<c.length&&T(c.charAt(h));)++h}return new Be(Y(r.line,f),Y(r.line,h))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ke(this.display.cursorDiv,"CodeMirror-overwrite"):ie(this.display.cursorDiv,"CodeMirror-overwrite"),Ce(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ge()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:At(function(r,a){fi(this,r,a)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Tn(this)-this.display.barHeight,width:r.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:Vo(this),clientWidth:ar(this)}},scrollIntoView:At(function(r,a){r==null?(r={from:this.doc.sel.primary().head,to:null},a==null&&(a=this.options.cursorScrollMargin)):typeof r=="number"?r={from:Y(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=a||0,r.from.line!=null?Xf(this,r):Ol(this,r.from,r.to,r.margin)}),setSize:At(function(r,a){var c=this,f=function(g){return typeof g=="number"||/^\d+$/.test(String(g))?g+"px":g};r!=null&&(this.display.wrapper.style.width=f(r)),a!=null&&(this.display.wrapper.style.height=f(a)),this.options.lineWrapping&&kl(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(g){if(g.widgets){for(var m=0;m<g.widgets.length;m++)if(g.widgets[m].noHScroll){Yn(c,h,"widget");break}}++h}),this.curOp.forceUpdate=!0,Ce(this,"refresh",this)}),operation:function(r){return Qt(this,r)},startOperation:function(){return hr(this)},endOperation:function(){return pr(this)},refresh:At(function(){var r=this.display.cachedTextHeight;zt(this),this.curOp.forceUpdate=!0,ui(this),fi(this,this.doc.scrollLeft,this.doc.scrollTop),ds(this.display),(r==null||Math.abs(r-_r(this.display))>.5||this.options.lineWrapping)&&is(this),Ce(this,"refresh",this)}),swapDoc:At(function(r){var a=this.doc;return a.cm=null,this.state.selectingText&&this.state.selectingText(),Xl(this,r),ui(this),this.display.input.reset(),fi(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,kt(this,"swapDoc",this,a),a}),phrase:function(r){var a=this.options.phrases;return a&&Object.prototype.hasOwnProperty.call(a,r)?a[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},sn(e),e.registerHelper=function(r,a,c){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][a]=c},e.registerGlobalHelper=function(r,a,c,f){e.registerHelper(r,a,f),i[r]._global.push({pred:c,val:f})}}function Ds(e,t,i,r,a){var c=t,f=i,h=fe(e,t.line),g=a&&e.direction=="rtl"?-i:i;function m(){var oe=t.line+g;return oe<e.first||oe>=e.first+e.size?!1:(t=new Y(oe,t.ch,t.sticky),h=fe(e,oe))}function T(oe){var ne;if(r=="codepoint"){var ce=h.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(ce))ne=null;else{var be=i>0?ce>=55296&&ce<56320:ce>=56320&&ce<57343;ne=new Y(t.line,Math.max(0,Math.min(h.text.length,t.ch+i*(be?2:1))),-i)}}else a?ne=Pd(e.cm,h,t,i):ne=Cs(h,t,i);if(ne==null)if(!oe&&m())t=Ts(a,e.cm,h,t.line,g);else return!1;else t=ne;return!0}if(r=="char"||r=="codepoint")T();else if(r=="column")T(!0);else if(r=="word"||r=="group")for(var _=null,q=r=="group",A=e.cm&&e.cm.getHelper(t,"wordChars"),z=!0;!(i<0&&!T(!z));z=!1){var G=h.text.charAt(t.ch)||`
`,Q=Mn(G,A)?"w":q&&G==`
`?"n":!q||/\s/.test(G)?null:"p";if(q&&!z&&!Q&&(Q="s"),_&&_!=Q){i<0&&(i=1,T(),t.sticky="after");break}if(Q&&(_=Q),i>0&&!T(!z))break}var te=so(e,t,c,f,!0);return L(c,te)&&(te.hitSide=!0),te}function ju(e,t,i,r){var a=e.doc,c=t.left,f;if(r=="page"){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=Math.max(h-.5*_r(e.display),3);f=(i>0?t.bottom:t.top)+i*g}else r=="line"&&(f=i>0?t.bottom+3:t.top-3);for(var m;m=es(e,c,f),!!m.outside;){if(i<0?f<=0:f>=a.height){m.hitSide=!0;break}f+=i*5}return m}var Ge=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ge.prototype.init=function(e){var t=this,i=this,r=i.cm,a=i.div=e.lineDiv;a.contentEditable=!0,Fu(a,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function c(h){for(var g=h.target;g;g=g.parentNode){if(g==a)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(g.className))break}return!1}ye(a,"paste",function(h){!c(h)||Qe(r,h)||qu(h,r)||w<=11&&setTimeout(Ct(r,function(){return t.updateFromDOM()}),20)}),ye(a,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),ye(a,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),ye(a,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ye(a,"touchstart",function(){return i.forceCompositionEnd()}),ye(a,"input",function(){t.composing||t.readFromDOMSoon()});function f(h){if(!(!c(h)||Qe(r,h))){if(r.somethingSelected())ho({lineWise:!1,text:r.getSelections()}),h.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var g=Wu(r);ho({lineWise:!0,text:g.text}),h.type=="cut"&&r.operation(function(){r.setSelections(g.ranges,0,we),r.replaceSelection("",null,"cut")})}else return;if(h.clipboardData){h.clipboardData.clearData();var m=pn.text.join(`
`);if(h.clipboardData.setData("Text",m),h.clipboardData.getData("Text")==m){h.preventDefault();return}}var T=zu(),_=T.firstChild;r.display.lineSpace.insertBefore(T,r.display.lineSpace.firstChild),_.value=pn.text.join(`
`);var q=ge();Ne(_),setTimeout(function(){r.display.lineSpace.removeChild(T),q.focus(),q==a&&i.showPrimarySelection()},50)}}ye(a,"copy",f),ye(a,"cut",f)},Ge.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ge.prototype.prepareSelection=function(){var e=El(this.cm,!1);return e.focus=ge()==this.div,e},Ge.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ge.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ge.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),a=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||a.line<t.display.viewFrom){e.removeAllRanges();return}var c=po(t,e.anchorNode,e.anchorOffset),f=po(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&f&&!f.bad&&v(Se(c,f),r)==0&&v(Z(c,f),a)==0)){var h=t.display.view,g=r.line>=t.display.viewFrom&&Bu(t,r)||{node:h[0].measure.map[2],offset:0},m=a.line<t.display.viewTo&&Bu(t,a);if(!m){var T=h[h.length-1].measure,_=T.maps?T.maps[T.maps.length-1]:T.map;m={node:_[_.length-1],offset:_[_.length-2]-_[_.length-3]}}if(!g||!m){e.removeAllRanges();return}var q=e.rangeCount&&e.getRangeAt(0),A;try{A=ve(g.node,g.offset,m.offset,m.node)}catch{}A&&(!u&&t.state.focused?(e.collapse(g.node,g.offset),A.collapsed||(e.removeAllRanges(),e.addRange(A))):(e.removeAllRanges(),e.addRange(A)),q&&e.anchorNode==null?e.addRange(q):u&&this.startGracePeriod()),this.rememberSelection()}},Ge.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ge.prototype.showMultipleSelections=function(e){O(this.cm.display.cursorDiv,e.cursors),O(this.cm.display.selectionDiv,e.selection)},Ge.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ge.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Re(this.div,t)},Ge.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ge()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ge.prototype.blur=function(){this.div.blur()},Ge.prototype.getField=function(){return this.div},Ge.prototype.supportsTouch=function(){return!0},Ge.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Qt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Ge.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ge.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(N&&C&&this.cm.display.gutterSpecs.length&&Zd(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=po(t,e.anchorNode,e.anchorOffset),r=po(t,e.focusNode,e.focusOffset);i&&r&&Qt(t,function(){Et(t.doc,Zn(i,r),we),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ge.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),a=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=Y(r.line-1,fe(e.doc,r.line-1).length)),a.ch==fe(e.doc,a.line).text.length&&a.line<e.lastLine()&&(a=Y(a.line+1,0)),r.line<t.viewFrom||a.line>t.viewTo-1)return!1;var c,f,h;r.line==t.viewFrom||(c=cr(e,r.line))==0?(f=je(t.view[0].line),h=t.view[0].node):(f=je(t.view[c].line),h=t.view[c-1].node.nextSibling);var g=cr(e,a.line),m,T;if(g==t.view.length-1?(m=t.viewTo-1,T=t.lineDiv.lastChild):(m=je(t.view[g+1].line)-1,T=t.view[g+1].node.previousSibling),!h)return!1;for(var _=e.doc.splitLines(Qd(e,h,T,f,m)),q=bn(e.doc,Y(f,0),Y(m,fe(e.doc,m).text.length));_.length>1&&q.length>1;)if(Le(_)==Le(q))_.pop(),q.pop(),m--;else if(_[0]==q[0])_.shift(),q.shift(),f++;else break;for(var A=0,z=0,G=_[0],Q=q[0],te=Math.min(G.length,Q.length);A<te&&G.charCodeAt(A)==Q.charCodeAt(A);)++A;for(var oe=Le(_),ne=Le(q),ce=Math.min(oe.length-(_.length==1?A:0),ne.length-(q.length==1?A:0));z<ce&&oe.charCodeAt(oe.length-z-1)==ne.charCodeAt(ne.length-z-1);)++z;if(_.length==1&&q.length==1&&f==r.line)for(;A&&A>r.ch&&oe.charCodeAt(oe.length-z-1)==ne.charCodeAt(ne.length-z-1);)A--,z++;_[_.length-1]=oe.slice(0,oe.length-z).replace(/^\u200b+/,""),_[0]=_[0].slice(A).replace(/\u200b+$/,"");var be=Y(f,A),me=Y(m,q.length?Le(q).length-z:0);if(_.length>1||_[0]||v(be,me))return Ar(e.doc,_,be,me,"+input"),!0},Ge.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ge.prototype.reset=function(){this.forceCompositionEnd()},Ge.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ge.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ge.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Qt(this.cm,function(){return zt(e.cm)})},Ge.prototype.setUneditable=function(e){e.contentEditable="false"},Ge.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ct(this.cm,Ls)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ge.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ge.prototype.onContextMenu=function(){},Ge.prototype.resetPosition=function(){},Ge.prototype.needsContentAttribute=!0;function Bu(e,t){var i=Zo(e,t.line);if(!i||i.hidden)return null;var r=fe(e.doc,t.line),a=ml(i,r,t.line),c=Ot(r,e.doc.direction),f="left";if(c){var h=Je(c,t.ch);f=h%2?"right":"left"}var g=bl(a.map,t.ch,f);return g.offset=g.collapse=="right"?g.end:g.start,g}function Zd(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Fr(e,t){return t&&(e.bad=!0),e}function Qd(e,t,i,r,a){var c="",f=!1,h=e.doc.lineSeparator(),g=!1;function m(A){return function(z){return z.id==A}}function T(){f&&(c+=h,g&&(c+=h),f=g=!1)}function _(A){A&&(T(),c+=A)}function q(A){if(A.nodeType==1){var z=A.getAttribute("cm-text");if(z){_(z);return}var G=A.getAttribute("cm-marker"),Q;if(G){var te=e.findMarks(Y(r,0),Y(a+1,0),m(+G));te.length&&(Q=te[0].find(0))&&_(bn(e.doc,Q.from,Q.to).join(h));return}if(A.getAttribute("contenteditable")=="false")return;var oe=/^(pre|div|p|li|table|br)$/i.test(A.nodeName);if(!/^br$/i.test(A.nodeName)&&A.textContent.length==0)return;oe&&T();for(var ne=0;ne<A.childNodes.length;ne++)q(A.childNodes[ne]);/^(pre|p)$/i.test(A.nodeName)&&(g=!0),oe&&(f=!0)}else A.nodeType==3&&_(A.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;q(t),t!=i;)t=t.nextSibling,g=!1;return c}function po(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return Fr(e.clipPos(Y(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var a=0;a<e.display.view.length;a++){var c=e.display.view[a];if(c.node==r)return Jd(c,t,i)}}function Jd(e,t,i){var r=e.text.firstChild,a=!1;if(!t||!Re(r,t))return Fr(Y(je(e.line),0),!0);if(t==r&&(a=!0,t=r.childNodes[i],i=0,!t)){var c=e.rest?Le(e.rest):e.line;return Fr(Y(je(c),c.text.length),a)}var f=t.nodeType==3?t:null,h=t;for(!f&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(f=t.firstChild,i&&(i=f.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var g=e.measure,m=g.maps;function T(Q,te,oe){for(var ne=-1;ne<(m?m.length:0);ne++)for(var ce=ne<0?g.map:m[ne],be=0;be<ce.length;be+=3){var me=ce[be+2];if(me==Q||me==te){var Ee=je(ne<0?e.line:e.rest[ne]),Xe=ce[be]+oe;return(oe<0||me!=Q)&&(Xe=ce[be+(oe?1:0)]),Y(Ee,Xe)}}}var _=T(f,h,i);if(_)return Fr(_,a);for(var q=h.nextSibling,A=f?f.nodeValue.length-i:0;q;q=q.nextSibling){if(_=T(q,q.firstChild,0),_)return Fr(Y(_.line,_.ch-A),a);A+=q.textContent.length}for(var z=h.previousSibling,G=i;z;z=z.previousSibling){if(_=T(z,z.firstChild,-1),_)return Fr(Y(_.line,_.ch+G),a);G+=z.textContent.length}}var ct=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null};ct.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var a=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),R&&(a.style.width="0px"),ye(a,"input",function(){b&&w>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),ye(a,"paste",function(f){Qe(r,f)||qu(f,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function c(f){if(!Qe(r,f)){if(r.somethingSelected())ho({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var h=Wu(r);ho({lineWise:!0,text:h.text}),f.type=="cut"?r.setSelections(h.ranges,null,we):(i.prevInput="",a.value=h.text.join(`
`),Ne(a))}else return;f.type=="cut"&&(r.state.cutIncoming=+new Date)}}ye(a,"cut",c),ye(a,"copy",c),ye(e.scroller,"paste",function(f){if(!(qn(e,f)||Qe(r,f))){if(!a.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var h=new Event("paste");h.clipboardData=f.clipboardData,a.dispatchEvent(h)}}),ye(e.lineSpace,"selectstart",function(f){qn(e,f)||tt(f)}),ye(a,"compositionstart",function(){var f=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:f,range:r.markText(f,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ye(a,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},ct.prototype.createField=function(e){this.wrapper=zu(),this.textarea=this.wrapper.firstChild},ct.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ct.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=El(e);if(e.options.moveInputWithCursor){var a=dn(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,a.top+f.top-c.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,a.left+f.left-c.left))}return r},ct.prototype.showSelection=function(e){var t=this.cm,i=t.display;O(i.cursorDiv,e.cursors),O(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ct.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&Ne(this.textarea),b&&w>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",b&&w>=9&&(this.hasSelection=null))}},ct.prototype.getField=function(){return this.textarea},ct.prototype.supportsTouch=function(){return!1},ct.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||ge()!=this.textarea))try{this.textarea.focus()}catch{}},ct.prototype.blur=function(){this.textarea.blur()},ct.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ct.prototype.receivedFocus=function(){this.slowPoll()},ct.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ct.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},ct.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||re(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var a=i.value;if(a==r&&!t.somethingSelected())return!1;if(b&&w>=9&&this.hasSelection===a||I&&/[\uf700-\uf7ff]/.test(a))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=a.charCodeAt(0);if(c==8203&&!r&&(r="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var f=0,h=Math.min(r.length,a.length);f<h&&r.charCodeAt(f)==a.charCodeAt(f);)++f;return Qt(t,function(){Ls(t,a.slice(f),r.length-f,null,e.composing?"*compose":null),a.length>1e3||a.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=a,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ct.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ct.prototype.onKeyPress=function(){b&&w>=9&&(this.hasSelection=null),this.fastPoll()},ct.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,a=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=ur(i,e),f=r.scroller.scrollTop;if(!c||S)return;var h=i.options.resetSelectionOnContextMenu;h&&i.doc.sel.contains(c)==-1&&Ct(i,Et)(i.doc,Zn(c),we);var g=a.style.cssText,m=t.wrapper.style.cssText,T=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",a.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-T.top-5)+"px; left: "+(e.clientX-T.left-5)+`px;
      z-index: 1000; background: `+(b?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var _;x&&(_=window.scrollY),r.input.focus(),x&&window.scrollTo(null,_),r.input.reset(),i.somethingSelected()||(a.value=t.prevInput=" "),t.contextMenuPending=A,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function q(){if(a.selectionStart!=null){var G=i.somethingSelected(),Q="\u200B"+(G?a.value:"");a.value="\u21DA",a.value=Q,t.prevInput=G?"":"\u200B",a.selectionStart=1,a.selectionEnd=Q.length,r.selForContextMenu=i.doc.sel}}function A(){if(t.contextMenuPending==A&&(t.contextMenuPending=!1,t.wrapper.style.cssText=m,a.style.cssText=g,b&&w<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=f),a.selectionStart!=null)){(!b||b&&w<9)&&q();var G=0,Q=function(){r.selForContextMenu==i.doc.sel&&a.selectionStart==0&&a.selectionEnd>0&&t.prevInput=="\u200B"?Ct(i,au)(i):G++<10?r.detectingSelectAll=setTimeout(Q,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Q,200)}}if(b&&w>=9&&q(),ue){On(e);var z=function(){Lt(window,"mouseup",z),setTimeout(A,20)};ye(window,"mouseup",z)}else setTimeout(A,50)},ct.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},ct.prototype.setUneditable=function(){},ct.prototype.needsContentAttribute=!1;function eh(e,t){if(t=t?Ye(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=ge();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=h.getValue()}var a;if(e.form&&(ye(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var c=e.form;a=c.submit;try{var f=c.submit=function(){r(),c.submit=a,c.submit(),c.submit=f}}catch{}}t.finishInit=function(g){g.save=r,g.getTextArea=function(){return e},g.toTextArea=function(){g.toTextArea=isNaN,r(),e.parentNode.removeChild(g.getWrapperElement()),e.style.display="",e.form&&(Lt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=a))}},e.style.display="none";var h=et(function(g){return e.parentNode.insertBefore(g,e.nextSibling)},t);return h}function th(e){e.off=Lt,e.on=ye,e.wheelEventPixels=ld,e.Doc=jt,e.splitLines=K,e.countColumn=Ue,e.findColumn=ot,e.isWordChar=rn,e.Pass=xe,e.signal=Ce,e.Line=Sr,e.changeEnd=Qn,e.scrollbarModel=ql,e.Pos=Y,e.cmpPos=v,e.modes=Pe,e.mimeModes=Fe,e.resolveMode=Ke,e.getMode=He,e.modeExtensions=ze,e.extendMode=Ve,e.copyState=ut,e.startState=ti,e.innerMode=ei,e.commands=Ri,e.keyMap=Wn,e.keyName=Tu,e.isModifierKey=ku,e.lookupKey=qr,e.normalizeKeyMap=Ed,e.StringStream=rt,e.SharedTextMarker=Ti,e.TextMarker=er,e.LineWidget=Ci,e.e_preventDefault=tt,e.e_stopPropagation=an,e.e_stop=On,e.addClass=ke,e.contains=Re,e.rmClass=ie,e.keyNames=tr}Gd(et),Vd(et);var nh="iter insert remove copy getEditor constructor".split(" ");for(var go in jt.prototype)jt.prototype.hasOwnProperty(go)&&ae(nh,go)<0&&(et.prototype[go]=function(e){return function(){return e.apply(this.doc,arguments)}}(jt.prototype[go]));return sn(jt),et.inputStyles={textarea:ct,contenteditable:Ge},et.defineMode=function(e){!et.defaults.mode&&e!="null"&&(et.defaults.mode=e),lt.apply(this,arguments)},et.defineMIME=Me,et.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),et.defineMIME("text/plain","null"),et.defineExtension=function(e,t){et.prototype[e]=t},et.defineDocExtension=function(e,t){jt.prototype[e]=t},et.fromTextArea=eh,th(et),et.version="5.63.3",et})})(Dn);var bo=Dn.exports;(function(n,o){(function(s){s(Dn.exports)})(function(s){s.defineMode("javascript",function(l,u){var d=l.indentUnit,p=u.statementIndent,y=u.jsonld,b=u.json||y,w=u.trackScope!==!1,x=u.typescript,P=u.wordCharacters||/[\w$\xa1-\uffff]/,C=function(){function v(Dt){return{type:Dt,style:"keyword"}}var L=v("keyword a"),U=v("keyword b"),Z=v("keyword c"),Se=v("keyword d"),Ae=v("operator"),le={type:"atom",style:"atom"};return{if:v("if"),while:L,with:L,else:U,do:U,try:U,finally:U,return:Se,break:Se,continue:Se,new:v("new"),delete:Z,void:Z,throw:Z,debugger:v("debugger"),var:v("var"),const:v("var"),let:v("var"),function:v("function"),catch:v("catch"),for:v("for"),switch:v("switch"),case:v("case"),default:v("default"),in:Ae,typeof:Ae,instanceof:Ae,true:le,false:le,null:le,undefined:le,NaN:le,Infinity:le,this:v("this"),class:v("class"),super:v("atom"),yield:Z,export:v("export"),import:v("import"),extends:Z,await:Z}}(),S=/[+\-*&%=<>!?|~^@]/,B=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function V(v){for(var L=!1,U,Z=!1;(U=v.next())!=null;){if(!L){if(U=="/"&&!Z)return;U=="["?Z=!0:Z&&U=="]"&&(Z=!1)}L=!L&&U=="\\"}}var J,R;function N(v,L,U){return J=v,R=U,L}function D(v,L){var U=v.next();if(U=='"'||U=="'")return L.tokenize=I(U),L.tokenize(v,L);if(U=="."&&v.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(U=="."&&v.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(U))return N(U);if(U=="="&&v.eat(">"))return N("=>","operator");if(U=="0"&&v.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(U))return v.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(U=="/")return v.eat("*")?(L.tokenize=F,F(v,L)):v.eat("/")?(v.skipToEnd(),N("comment","comment")):Y(v,L,1)?(V(v),v.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(v.eat("="),N("operator","operator",v.current()));if(U=="`")return L.tokenize=$,$(v,L);if(U=="#"&&v.peek()=="!")return v.skipToEnd(),N("meta","meta");if(U=="#"&&v.eatWhile(P))return N("variable","property");if(U=="<"&&v.match("!--")||U=="-"&&v.match("->")&&!/\S/.test(v.string.slice(0,v.start)))return v.skipToEnd(),N("comment","comment");if(S.test(U))return(U!=">"||!L.lexical||L.lexical.type!=">")&&(v.eat("=")?(U=="!"||U=="=")&&v.eat("="):/[<>*+\-|&?]/.test(U)&&(v.eat(U),U==">"&&v.eat(U))),U=="?"&&v.eat(".")?N("."):N("operator","operator",v.current());if(P.test(U)){v.eatWhile(P);var Z=v.current();if(L.lastType!="."){if(C.propertyIsEnumerable(Z)){var Se=C[Z];return N(Se.type,Se.style,Z)}if(Z=="async"&&v.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",Z)}return N("variable","variable",Z)}}function I(v){return function(L,U){var Z=!1,Se;if(y&&L.peek()=="@"&&L.match(B))return U.tokenize=D,N("jsonld-keyword","meta");for(;(Se=L.next())!=null&&!(Se==v&&!Z);)Z=!Z&&Se=="\\";return Z||(U.tokenize=D),N("string","string")}}function F(v,L){for(var U=!1,Z;Z=v.next();){if(Z=="/"&&U){L.tokenize=D;break}U=Z=="*"}return N("comment","comment")}function $(v,L){for(var U=!1,Z;(Z=v.next())!=null;){if(!U&&(Z=="`"||Z=="$"&&v.eat("{"))){L.tokenize=D;break}U=!U&&Z=="\\"}return N("quasi","string-2",v.current())}var X="([{}])";function j(v,L){L.fatArrowAt&&(L.fatArrowAt=null);var U=v.string.indexOf("=>",v.start);if(!(U<0)){if(x){var Z=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(v.string.slice(v.start,U));Z&&(U=Z.index)}for(var Se=0,Ae=!1,le=U-1;le>=0;--le){var Dt=v.string.charAt(le),en=X.indexOf(Dt);if(en>=0&&en<3){if(!Se){++le;break}if(--Se==0){Dt=="("&&(Ae=!0);break}}else if(en>=3&&en<6)++Se;else if(P.test(Dt))Ae=!0;else if(/["'\/`]/.test(Dt))for(;;--le){if(le==0)return;var Tr=v.string.charAt(le-1);if(Tr==Dt&&v.string.charAt(le-2)!="\\"){le--;break}}else if(Ae&&!Se){++le;break}}Ae&&!Se&&(L.fatArrowAt=le)}}var ue={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function se(v,L,U,Z,Se,Ae){this.indented=v,this.column=L,this.type=U,this.prev=Se,this.info=Ae,Z!=null&&(this.align=Z)}function ie(v,L){if(!w)return!1;for(var U=v.localVars;U;U=U.next)if(U.name==L)return!0;for(var Z=v.context;Z;Z=Z.prev)for(var U=Z.vars;U;U=U.next)if(U.name==L)return!0}function k(v,L,U,Z,Se){var Ae=v.cc;for(O.state=v,O.stream=Se,O.marked=null,O.cc=Ae,O.style=L,v.lexical.hasOwnProperty("align")||(v.lexical.align=!0);;){var le=Ae.length?Ae.pop():b?Oe:we;if(le(U,Z)){for(;Ae.length&&Ae[Ae.length-1].lex;)Ae.pop()();return O.marked?O.marked:U=="variable"&&ie(v,Z)?"variable-2":L}}}var O={state:null,column:null,marked:null,cc:null};function H(){for(var v=arguments.length-1;v>=0;v--)O.cc.push(arguments[v])}function E(){return H.apply(null,arguments),!0}function ve(v,L){for(var U=L;U;U=U.next)if(U.name==v)return!0;return!1}function Re(v){var L=O.state;if(O.marked="def",!!w){if(L.context){if(L.lexical.info=="var"&&L.context&&L.context.block){var U=ge(v,L.context);if(U!=null){L.context=U;return}}else if(!ve(v,L.localVars)){L.localVars=new Ne(v,L.localVars);return}}u.globalVars&&!ve(v,L.globalVars)&&(L.globalVars=new Ne(v,L.globalVars))}}function ge(v,L){if(L)if(L.block){var U=ge(v,L.prev);return U?U==L.prev?L:new De(U,L.vars,!0):null}else return ve(v,L.vars)?L:new De(L.prev,new Ne(v,L.vars),!1);else return null}function ke(v){return v=="public"||v=="private"||v=="protected"||v=="abstract"||v=="readonly"}function De(v,L,U){this.prev=v,this.vars=L,this.block=U}function Ne(v,L){this.name=v,this.next=L}var qt=new Ne("this",new Ne("arguments",null));function Ye(){O.state.context=new De(O.state.context,O.state.localVars,!1),O.state.localVars=qt}function Ue(){O.state.context=new De(O.state.context,O.state.localVars,!0),O.state.localVars=null}function qe(){O.state.localVars=O.state.context.vars,O.state.context=O.state.context.prev}qe.lex=!0;function ae(v,L){var U=function(){var Z=O.state,Se=Z.indented;if(Z.lexical.type=="stat")Se=Z.lexical.indented;else for(var Ae=Z.lexical;Ae&&Ae.type==")"&&Ae.align;Ae=Ae.prev)Se=Ae.indented;Z.lexical=new se(Se,O.stream.column(),v,null,Z.lexical,L)};return U.lex=!0,U}function ee(){var v=O.state;v.lexical.prev&&(v.lexical.type==")"&&(v.indented=v.lexical.indented),v.lexical=v.lexical.prev)}ee.lex=!0;function xe(v){function L(U){return U==v?E():v==";"||U=="}"||U==")"||U=="]"?H():E(L)}return L}function we(v,L){return v=="var"?E(ae("vardef",L),Kn,xe(";"),ee):v=="keyword a"?E(ae("form"),Kt,we,ee):v=="keyword b"?E(ae("form"),we,ee):v=="keyword d"?O.stream.match(/^\s*$/,!1)?E():E(ae("stat"),Le,xe(";"),ee):v=="debugger"?E(xe(";")):v=="{"?E(ae("}"),Ue,Ot,ee,qe):v==";"?E():v=="if"?(O.state.lexical.info=="else"&&O.state.cc[O.state.cc.length-1]==ee&&O.state.cc.pop()(),E(ae("form"),Kt,we,ee,re)):v=="function"?E(Pe):v=="for"?E(ae("form"),Ue,he,we,qe,ee):v=="class"||x&&L=="interface"?(O.marked="keyword",E(ae("form",v=="class"?v:L),He,ee)):v=="variable"?x&&L=="declare"?(O.marked="keyword",E(we)):x&&(L=="module"||L=="enum"||L=="type")&&O.stream.match(/^\s*\w/,!1)?(O.marked="keyword",L=="enum"?E(wn):L=="type"?E(lt,xe("operator"),Ce,xe(";")):E(ae("form"),wt,xe("{"),ae("}"),Ot,ee,ee)):x&&L=="namespace"?(O.marked="keyword",E(ae("form"),Oe,we,ee)):x&&L=="abstract"?(O.marked="keyword",E(we)):E(ae("stat"),$n):v=="switch"?E(ae("form"),Kt,xe("{"),ae("}","switch"),Ue,Ot,ee,ee,qe):v=="case"?E(Oe,xe(":")):v=="default"?E(xe(":")):v=="catch"?E(ae("form"),Ye,Nt,we,ee,qe):v=="export"?E(ae("stat"),ei,ee):v=="import"?E(ae("stat"),rt,ee):v=="async"?E(we):L=="@"?E(Oe,we):H(ae("stat"),Oe,xe(";"),ee)}function Nt(v){if(v=="(")return E(Me,xe(")"))}function Oe(v,L){return Xt(v,L,!1)}function ot(v,L){return Xt(v,L,!0)}function Kt(v){return v!="("?H():E(ae(")"),Le,xe(")"),ee)}function Xt(v,L,U){if(O.state.fatArrowAt==O.stream.start){var Z=U?rn:Pn;if(v=="(")return E(Ye,ae(")"),Je(Me,")"),ee,xe("=>"),Z,qe);if(v=="variable")return H(Ye,wt,xe("=>"),Z,qe)}var Se=U?Yt:mt;return ue.hasOwnProperty(v)?E(Se):v=="function"?E(Pe,Se):v=="class"||x&&L=="interface"?(O.marked="keyword",E(ae("form"),Ke,ee)):v=="keyword c"||v=="async"?E(U?ot:Oe):v=="("?E(ae(")"),Le,xe(")"),ee,Se):v=="operator"||v=="spread"?E(U?ot:Oe):v=="["?E(ae("]"),je,ee,Se):v=="{"?Nn(on,"}",null,Se):v=="quasi"?H(st,Se):v=="new"?E(Mn(U)):E()}function Le(v){return v.match(/[;\}\)\],]/)?H():H(Oe)}function mt(v,L){return v==","?E(Le):Yt(v,L,!1)}function Yt(v,L,U){var Z=U==!1?mt:Yt,Se=U==!1?Oe:ot;if(v=="=>")return E(Ye,U?rn:Pn,qe);if(v=="operator")return/\+\+|--/.test(L)||x&&L=="!"?E(Z):x&&L=="<"&&O.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(ae(">"),Je(Ce,">"),ee,Z):L=="?"?E(Oe,xe(":"),Se):E(Se);if(v=="quasi")return H(st,Z);if(v!=";"){if(v=="(")return Nn(ot,")","call",Z);if(v==".")return E(kr,Z);if(v=="[")return E(ae("]"),Le,xe("]"),ee,Z);if(x&&L=="as")return O.marked="keyword",E(Ce,Z);if(v=="regexp")return O.state.lastType=O.marked="operator",O.stream.backUp(O.stream.pos-O.stream.start-1),E(Se)}}function st(v,L){return v!="quasi"?H():L.slice(L.length-2)!="${"?E(st):E(Le,bt)}function bt(v){if(v=="}")return O.marked="string-2",O.state.tokenize=$,E(st)}function Pn(v){return j(O.stream,O.state),H(v=="{"?we:Oe)}function rn(v){return j(O.stream,O.state),H(v=="{"?we:ot)}function Mn(v){return function(L){return L=="."?E(v?yn:rr):L=="variable"&&x?E(On,v?Yt:mt):H(v?ot:Oe)}}function rr(v,L){if(L=="target")return O.marked="keyword",E(mt)}function yn(v,L){if(L=="target")return O.marked="keyword",E(Yt)}function $n(v){return v==":"?E(ee,we):H(mt,xe(";"),ee)}function kr(v){if(v=="variable")return O.marked="property",E()}function on(v,L){if(v=="async")return O.marked="property",E(on);if(v=="variable"||O.style=="keyword"){if(O.marked="property",L=="get"||L=="set")return E(Cr);var U;return x&&O.state.fatArrowAt==O.stream.start&&(U=O.stream.match(/^\s*:\s*/,!1))&&(O.state.fatArrowAt=O.stream.pos+U[0].length),E(Ht)}else{if(v=="number"||v=="string")return O.marked=y?"property":O.style+" property",E(Ht);if(v=="jsonld-keyword")return E(Ht);if(x&&ke(L))return O.marked="keyword",E(on);if(v=="[")return E(Oe,fn,xe("]"),Ht);if(v=="spread")return E(ot,Ht);if(L=="*")return O.marked="keyword",E(on);if(v==":")return H(Ht)}}function Cr(v){return v!="variable"?H(Ht):(O.marked="property",E(Pe))}function Ht(v){if(v==":")return E(ot);if(v=="(")return H(Pe)}function Je(v,L,U){function Z(Se,Ae){if(U?U.indexOf(Se)>-1:Se==","){var le=O.state.lexical;return le.info=="call"&&(le.pos=(le.pos||0)+1),E(function(Dt,en){return Dt==L||en==L?H():H(v)},Z)}return Se==L||Ae==L?E():U&&U.indexOf(";")>-1?H(v):E(xe(L))}return function(Se,Ae){return Se==L||Ae==L?E():H(v,Z)}}function Nn(v,L,U){for(var Z=3;Z<arguments.length;Z++)O.cc.push(arguments[Z]);return E(ae(L,U),Je(v,L),ee)}function Ot(v){return v=="}"?E():H(we,Ot)}function fn(v,L){if(x){if(v==":")return E(Ce);if(L=="?")return E(fn)}}function ye(v,L){if(x&&(v==":"||L=="in"))return E(Ce)}function Wt(v){if(x&&v==":")return O.stream.match(/^\s*\w+\s+is\b/,!1)?E(Oe,Lt,Ce):E(Ce)}function Lt(v,L){if(L=="is")return O.marked="keyword",E()}function Ce(v,L){if(L=="keyof"||L=="typeof"||L=="infer"||L=="readonly")return O.marked="keyword",E(L=="typeof"?ot:Ce);if(v=="variable"||L=="void")return O.marked="type",E(Ft);if(L=="|"||L=="&")return E(Ce);if(v=="string"||v=="number"||v=="atom")return E(Ft);if(v=="[")return E(ae("]"),Je(Ce,"]",","),ee,Ft);if(v=="{")return E(ae("}"),Gn,ee,Ft);if(v=="(")return E(Je(an,")"),Qe,Ft);if(v=="<")return E(Je(Ce,">"),Ce);if(v=="quasi")return H(sn,Ft)}function Qe(v){if(v=="=>")return E(Ce)}function Gn(v){return v.match(/[\}\)\]]/)?E():v==","||v==";"?E(Gn):H(at,Gn)}function at(v,L){if(v=="variable"||O.style=="keyword")return O.marked="property",E(at);if(L=="?"||v=="number"||v=="string")return E(at);if(v==":")return E(Ce);if(v=="[")return E(xe("variable"),ye,xe("]"),at);if(v=="(")return H(Fe,at);if(!v.match(/[;\}\)\],]/))return E()}function sn(v,L){return v!="quasi"?H():L.slice(L.length-2)!="${"?E(sn):E(Ce,tt)}function tt(v){if(v=="}")return O.marked="string-2",O.state.tokenize=$,E(sn)}function an(v,L){return v=="variable"&&O.stream.match(/^\s*[?:]/,!1)||L=="?"?E(an):v==":"?E(Ce):v=="spread"?E(an):H(Ce)}function Ft(v,L){if(L=="<")return E(ae(">"),Je(Ce,">"),ee,Ft);if(L=="|"||v=="."||L=="&")return E(Ce);if(v=="[")return E(Ce,xe("]"),Ft);if(L=="extends"||L=="implements")return O.marked="keyword",E(Ce);if(L=="?")return E(Ce,xe(":"),Ce)}function On(v,L){if(L=="<")return E(ae(">"),Je(Ce,">"),ee,Ft)}function Vt(){return H(Ce,ir)}function ir(v,L){if(L=="=")return E(Ce)}function Kn(v,L){return L=="enum"?(O.marked="keyword",E(wn)):H(wt,fn,M,K)}function wt(v,L){if(x&&ke(L))return O.marked="keyword",E(wt);if(v=="variable")return Re(L),E();if(v=="spread")return E(wt);if(v=="[")return Nn(ln,"]");if(v=="{")return Nn(or,"}")}function or(v,L){return v=="variable"&&!O.stream.match(/^\s*:/,!1)?(Re(L),E(M)):(v=="variable"&&(O.marked="property"),v=="spread"?E(wt):v=="}"?H():v=="["?E(Oe,xe("]"),xe(":"),or):E(xe(":"),wt,M))}function ln(){return H(wt,M)}function M(v,L){if(L=="=")return E(ot)}function K(v){if(v==",")return E(Kn)}function re(v,L){if(v=="keyword b"&&L=="else")return E(ae("form","else"),we,ee)}function he(v,L){if(L=="await")return E(he);if(v=="(")return E(ae(")"),$e,ee)}function $e(v){return v=="var"?E(Kn,Ie):v=="variable"?E(Ie):H(Ie)}function Ie(v,L){return v==")"?E():v==";"?E(Ie):L=="in"||L=="of"?(O.marked="keyword",E(Oe,Ie)):H(Oe,Ie)}function Pe(v,L){if(L=="*")return O.marked="keyword",E(Pe);if(v=="variable")return Re(L),E(Pe);if(v=="(")return E(Ye,ae(")"),Je(Me,")"),ee,Wt,we,qe);if(x&&L=="<")return E(ae(">"),Je(Vt,">"),ee,Pe)}function Fe(v,L){if(L=="*")return O.marked="keyword",E(Fe);if(v=="variable")return Re(L),E(Fe);if(v=="(")return E(Ye,ae(")"),Je(Me,")"),ee,Wt,qe);if(x&&L=="<")return E(ae(">"),Je(Vt,">"),ee,Fe)}function lt(v,L){if(v=="keyword"||v=="variable")return O.marked="type",E(lt);if(L=="<")return E(ae(">"),Je(Vt,">"),ee)}function Me(v,L){return L=="@"&&E(Oe,Me),v=="spread"?E(Me):x&&ke(L)?(O.marked="keyword",E(Me)):x&&v=="this"?E(fn,M):H(wt,fn,M)}function Ke(v,L){return v=="variable"?He(v,L):ze(v,L)}function He(v,L){if(v=="variable")return Re(L),E(ze)}function ze(v,L){if(L=="<")return E(ae(">"),Je(Vt,">"),ee,ze);if(L=="extends"||L=="implements"||x&&v==",")return L=="implements"&&(O.marked="keyword"),E(x?Ce:Oe,ze);if(v=="{")return E(ae("}"),Ve,ee)}function Ve(v,L){if(v=="async"||v=="variable"&&(L=="static"||L=="get"||L=="set"||x&&ke(L))&&O.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return O.marked="keyword",E(Ve);if(v=="variable"||O.style=="keyword")return O.marked="property",E(ut,Ve);if(v=="number"||v=="string")return E(ut,Ve);if(v=="[")return E(Oe,fn,xe("]"),ut,Ve);if(L=="*")return O.marked="keyword",E(Ve);if(x&&v=="(")return H(Fe,Ve);if(v==";"||v==",")return E(Ve);if(v=="}")return E();if(L=="@")return E(Oe,Ve)}function ut(v,L){if(L=="!"||L=="?")return E(ut);if(v==":")return E(Ce,M);if(L=="=")return E(ot);var U=O.state.lexical.prev,Z=U&&U.info=="interface";return H(Z?Fe:Pe)}function ei(v,L){return L=="*"?(O.marked="keyword",E(Zt,xe(";"))):L=="default"?(O.marked="keyword",E(Oe,xe(";"))):v=="{"?E(Je(ti,"}"),Zt,xe(";")):H(we)}function ti(v,L){if(L=="as")return O.marked="keyword",E(xe("variable"));if(v=="variable")return H(ot,ti)}function rt(v){return v=="string"?E():v=="("?H(Oe):v=="."?H(mt):H(fe,bn,Zt)}function fe(v,L){return v=="{"?Nn(fe,"}"):(v=="variable"&&Re(L),L=="*"&&(O.marked="keyword"),E(ni))}function bn(v){if(v==",")return E(fe,bn)}function ni(v,L){if(L=="as")return O.marked="keyword",E(fe)}function Zt(v,L){if(L=="from")return O.marked="keyword",E(Oe)}function je(v){return v=="]"?E():H(Je(ot,"]"))}function wn(){return H(ae("form"),wt,xe("{"),ae("}"),Je(sr,"}"),ee,ee)}function sr(){return H(wt,M)}function ri(v,L){return v.lastType=="operator"||v.lastType==","||S.test(L.charAt(0))||/[,.]/.test(L.charAt(0))}function Y(v,L,U){return L.tokenize==D&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(L.lastType)||L.lastType=="quasi"&&/\{\s*$/.test(v.string.slice(0,v.pos-(U||0)))}return{startState:function(v){var L={tokenize:D,lastType:"sof",cc:[],lexical:new se((v||0)-d,0,"block",!1),localVars:u.localVars,context:u.localVars&&new De(null,null,!1),indented:v||0};return u.globalVars&&typeof u.globalVars=="object"&&(L.globalVars=u.globalVars),L},token:function(v,L){if(v.sol()&&(L.lexical.hasOwnProperty("align")||(L.lexical.align=!1),L.indented=v.indentation(),j(v,L)),L.tokenize!=F&&v.eatSpace())return null;var U=L.tokenize(v,L);return J=="comment"?U:(L.lastType=J=="operator"&&(R=="++"||R=="--")?"incdec":J,k(L,U,J,R,v))},indent:function(v,L){if(v.tokenize==F||v.tokenize==$)return s.Pass;if(v.tokenize!=D)return 0;var U=L&&L.charAt(0),Z=v.lexical,Se;if(!/^\s*else\b/.test(L))for(var Ae=v.cc.length-1;Ae>=0;--Ae){var le=v.cc[Ae];if(le==ee)Z=Z.prev;else if(le!=re&&le!=qe)break}for(;(Z.type=="stat"||Z.type=="form")&&(U=="}"||(Se=v.cc[v.cc.length-1])&&(Se==mt||Se==Yt)&&!/^[,\.=+\-*:?[\(]/.test(L));)Z=Z.prev;p&&Z.type==")"&&Z.prev.type=="stat"&&(Z=Z.prev);var Dt=Z.type,en=U==Dt;return Dt=="vardef"?Z.indented+(v.lastType=="operator"||v.lastType==","?Z.info.length+1:0):Dt=="form"&&U=="{"?Z.indented:Dt=="form"?Z.indented+d:Dt=="stat"?Z.indented+(ri(v,L)?p||d:0):Z.info=="switch"&&!en&&u.doubleIndentSwitch!=!1?Z.indented+(/^(?:case|default)\b/.test(L)?d:2*d):Z.align?Z.column+(en?0:1):Z.indented+(en?0:d)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:b?null:"/*",blockCommentEnd:b?null:"*/",blockCommentContinue:b?null:" * ",lineComment:b?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:b?"json":"javascript",jsonldMode:y,jsonMode:b,expressionAllowed:Y,skipExpression:function(v){k(v,"atom","atom","true",new s.StringStream("",2,null))}}}),s.registerHelper("wordChars","javascript",/[\w$]/),s.defineMIME("text/javascript","javascript"),s.defineMIME("text/ecmascript","javascript"),s.defineMIME("application/javascript","javascript"),s.defineMIME("application/x-javascript","javascript"),s.defineMIME("application/ecmascript","javascript"),s.defineMIME("application/json",{name:"javascript",json:!0}),s.defineMIME("application/x-json",{name:"javascript",json:!0}),s.defineMIME("application/manifest+json",{name:"javascript",json:!0}),s.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),s.defineMIME("text/typescript",{name:"javascript",typescript:!0}),s.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();(function(n,o){(function(s){s(Dn.exports)})(function(s){var l="CodeMirror-hint",u="CodeMirror-hint-active";s.showHint=function(R,N,D){if(!N)return R.showHint(D);D&&D.async&&(N.async=!0);var I={hint:N};if(D)for(var F in D)I[F]=D[F];return R.showHint(I)},s.defineExtension("showHint",function(R){R=b(this,this.getCursor("start"),R);var N=this.listSelections();if(!(N.length>1)){if(this.somethingSelected()){if(!R.hint.supportsSelection)return;for(var D=0;D<N.length;D++)if(N[D].head.line!=N[D].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var I=this.state.completionActive=new d(this,R);!I.options.hint||(s.signal(this,"startCompletion",this),I.update(!0))}}),s.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function d(R,N){if(this.cm=R,this.options=N,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var D=this;R.on("cursorActivity",this.activityFunc=function(){D.cursorActivity()})}}var p=window.requestAnimationFrame||function(R){return setTimeout(R,1e3/60)},y=window.cancelAnimationFrame||clearTimeout;d.prototype={close:function(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&s.signal(this.data,"close"),this.widget&&this.widget.close(),s.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(R,N){var D=R.list[N],I=this;this.cm.operation(function(){D.hint?D.hint(I.cm,R,D):I.cm.replaceRange(w(D),D.from||R.from,D.to||R.to,"complete"),s.signal(R,"pick",D),I.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(y(this.debounce),this.debounce=0);var R=this.startPos;this.data&&(R=this.data.from);var N=this.cm.getCursor(),D=this.cm.getLine(N.line);if(N.line!=this.startPos.line||D.length-N.ch!=this.startLen-this.startPos.ch||N.ch<R.ch||this.cm.somethingSelected()||!N.ch||this.options.closeCharacters.test(D.charAt(N.ch-1)))this.close();else{var I=this;this.debounce=p(function(){I.update()}),this.widget&&this.widget.disable()}},update:function(R){if(this.tick!=null){var N=this,D=++this.tick;B(this.options.hint,this.cm,this.options,function(I){N.tick==D&&N.finishUpdate(I,R)})}},finishUpdate:function(R,N){this.data&&s.signal(this.data,"update");var D=this.widget&&this.widget.picked||N&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=R,R&&R.list.length&&(D&&R.list.length==1?this.pick(R,0):(this.widget=new C(this,R),s.signal(R,"shown")))}};function b(R,N,D){var I=R.options.hintOptions,F={};for(var $ in J)F[$]=J[$];if(I)for(var $ in I)I[$]!==void 0&&(F[$]=I[$]);if(D)for(var $ in D)D[$]!==void 0&&(F[$]=D[$]);return F.hint.resolve&&(F.hint=F.hint.resolve(R,N)),F}function w(R){return typeof R=="string"?R:R.text}function x(R,N){var D={Up:function(){N.moveFocus(-1)},Down:function(){N.moveFocus(1)},PageUp:function(){N.moveFocus(-N.menuSize()+1,!0)},PageDown:function(){N.moveFocus(N.menuSize()-1,!0)},Home:function(){N.setFocus(0)},End:function(){N.setFocus(N.length-1)},Enter:N.pick,Tab:N.pick,Esc:N.close},I=/Mac/.test(navigator.platform);I&&(D["Ctrl-P"]=function(){N.moveFocus(-1)},D["Ctrl-N"]=function(){N.moveFocus(1)});var F=R.options.customKeys,$=F?{}:D;function X(se,ie){var k;typeof ie!="string"?k=function(O){return ie(O,N)}:D.hasOwnProperty(ie)?k=D[ie]:k=ie,$[se]=k}if(F)for(var j in F)F.hasOwnProperty(j)&&X(j,F[j]);var ue=R.options.extraKeys;if(ue)for(var j in ue)ue.hasOwnProperty(j)&&X(j,ue[j]);return $}function P(R,N){for(;N&&N!=R;){if(N.nodeName.toUpperCase()==="LI"&&N.parentNode==R)return N;N=N.parentNode}}function C(R,N){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=R,this.data=N,this.picked=!1;var D=this,I=R.cm,F=I.getInputField().ownerDocument,$=F.defaultView||F.parentWindow,X=this.hints=F.createElement("ul");X.setAttribute("role","listbox"),X.setAttribute("aria-expanded","true"),X.id=this.id;var j=R.cm.options.theme;X.className="CodeMirror-hints "+j,this.selectedHint=N.selectedHint||0;for(var ue=N.list,se=0;se<ue.length;++se){var ie=X.appendChild(F.createElement("li")),k=ue[se],O=l+(se!=this.selectedHint?"":" "+u);k.className!=null&&(O=k.className+" "+O),ie.className=O,se==this.selectedHint&&ie.setAttribute("aria-selected","true"),ie.id=this.id+"-"+se,ie.setAttribute("role","option"),k.render?k.render(ie,N,k):ie.appendChild(F.createTextNode(k.displayText||w(k))),ie.hintId=se}var H=R.options.container||F.body,E=I.cursorCoords(R.options.alignWithWord?N.from:null),ve=E.left,Re=E.bottom,ge=!0,ke=0,De=0;if(H!==F.body){var Ne=["absolute","relative","fixed"].indexOf($.getComputedStyle(H).position)!==-1,qt=Ne?H:H.offsetParent,Ye=qt.getBoundingClientRect(),Ue=F.body.getBoundingClientRect();ke=Ye.left-Ue.left-qt.scrollLeft,De=Ye.top-Ue.top-qt.scrollTop}X.style.left=ve-ke+"px",X.style.top=Re-De+"px";var qe=$.innerWidth||Math.max(F.body.offsetWidth,F.documentElement.offsetWidth),ae=$.innerHeight||Math.max(F.body.offsetHeight,F.documentElement.offsetHeight);H.appendChild(X),I.getInputField().setAttribute("aria-autocomplete","list"),I.getInputField().setAttribute("aria-owns",this.id),I.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var ee=R.options.moveOnOverlap?X.getBoundingClientRect():new DOMRect,xe=R.options.paddingForScrollbar?X.scrollHeight>X.clientHeight+1:!1,we;setTimeout(function(){we=I.getScrollInfo()});var Nt=ee.bottom-ae;if(Nt>0){var Oe=ee.bottom-ee.top,ot=E.top-(E.bottom-ee.top);if(ot-Oe>0)X.style.top=(Re=E.top-Oe-De)+"px",ge=!1;else if(Oe>ae){X.style.height=ae-5+"px",X.style.top=(Re=E.bottom-ee.top-De)+"px";var Kt=I.getCursor();N.from.ch!=Kt.ch&&(E=I.cursorCoords(Kt),X.style.left=(ve=E.left-ke)+"px",ee=X.getBoundingClientRect())}}var Xt=ee.right-qe;if(xe&&(Xt+=I.display.nativeBarWidth),Xt>0&&(ee.right-ee.left>qe&&(X.style.width=qe-5+"px",Xt-=ee.right-ee.left-qe),X.style.left=(ve=E.left-Xt-ke)+"px"),xe)for(var Le=X.firstChild;Le;Le=Le.nextSibling)Le.style.paddingRight=I.display.nativeBarWidth+"px";if(I.addKeyMap(this.keyMap=x(R,{moveFocus:function(st,bt){D.changeActive(D.selectedHint+st,bt)},setFocus:function(st){D.changeActive(st)},menuSize:function(){return D.screenAmount()},length:ue.length,close:function(){R.close()},pick:function(){D.pick()},data:N})),R.options.closeOnUnfocus){var mt;I.on("blur",this.onBlur=function(){mt=setTimeout(function(){R.close()},100)}),I.on("focus",this.onFocus=function(){clearTimeout(mt)})}I.on("scroll",this.onScroll=function(){var st=I.getScrollInfo(),bt=I.getWrapperElement().getBoundingClientRect();we||(we=I.getScrollInfo());var Pn=Re+we.top-st.top,rn=Pn-($.pageYOffset||(F.documentElement||F.body).scrollTop);if(ge||(rn+=X.offsetHeight),rn<=bt.top||rn>=bt.bottom)return R.close();X.style.top=Pn+"px",X.style.left=ve+we.left-st.left+"px"}),s.on(X,"dblclick",function(st){var bt=P(X,st.target||st.srcElement);bt&&bt.hintId!=null&&(D.changeActive(bt.hintId),D.pick())}),s.on(X,"click",function(st){var bt=P(X,st.target||st.srcElement);bt&&bt.hintId!=null&&(D.changeActive(bt.hintId),R.options.completeOnSingleClick&&D.pick())}),s.on(X,"mousedown",function(){setTimeout(function(){I.focus()},20)});var Yt=this.getSelectedHintRange();return(Yt.from!==0||Yt.to!==0)&&this.scrollToActive(),s.signal(N,"select",ue[this.selectedHint],X.childNodes[this.selectedHint]),!0}C.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var R=this.completion.cm.getInputField();R.removeAttribute("aria-activedescendant"),R.removeAttribute("aria-owns");var N=this.completion.cm;this.completion.options.closeOnUnfocus&&(N.off("blur",this.onBlur),N.off("focus",this.onFocus)),N.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var R=this;this.keyMap={Enter:function(){R.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(R,N){if(R>=this.data.list.length?R=N?this.data.list.length-1:0:R<0&&(R=N?0:this.data.list.length-1),this.selectedHint!=R){var D=this.hints.childNodes[this.selectedHint];D&&(D.className=D.className.replace(" "+u,""),D.removeAttribute("aria-selected")),D=this.hints.childNodes[this.selectedHint=R],D.className+=" "+u,D.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",D.id),this.scrollToActive(),s.signal(this.data,"select",this.data.list[this.selectedHint],D)}},scrollToActive:function(){var R=this.getSelectedHintRange(),N=this.hints.childNodes[R.from],D=this.hints.childNodes[R.to],I=this.hints.firstChild;N.offsetTop<this.hints.scrollTop?this.hints.scrollTop=N.offsetTop-I.offsetTop:D.offsetTop+D.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=D.offsetTop+D.offsetHeight-this.hints.clientHeight+I.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var R=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-R),to:Math.min(this.data.list.length-1,this.selectedHint+R)}}};function S(R,N){if(!R.somethingSelected())return N;for(var D=[],I=0;I<N.length;I++)N[I].supportsSelection&&D.push(N[I]);return D}function B(R,N,D,I){if(R.async)R(N,I,D);else{var F=R(N,D);F&&F.then?F.then(I):I(F)}}function V(R,N){var D=R.getHelpers(N,"hint"),I;if(D.length){var F=function($,X,j){var ue=S($,D);function se(ie){if(ie==ue.length)return X(null);B(ue[ie],$,j,function(k){k&&k.list.length>0?X(k):se(ie+1)})}se(0)};return F.async=!0,F.supportsSelection=!0,F}else return(I=R.getHelper(R.getCursor(),"hintWords"))?function($){return s.hint.fromList($,{words:I})}:s.hint.anyword?function($,X){return s.hint.anyword($,X)}:function(){}}s.registerHelper("hint","auto",{resolve:V}),s.registerHelper("hint","fromList",function(R,N){var D=R.getCursor(),I=R.getTokenAt(D),F,$=s.Pos(D.line,I.start),X=D;I.start<D.ch&&/\w/.test(I.string.charAt(D.ch-I.start-1))?F=I.string.substr(0,D.ch-I.start):(F="",$=D);for(var j=[],ue=0;ue<N.words.length;ue++){var se=N.words[ue];se.slice(0,F.length)==F&&j.push(se)}if(j.length)return{list:j,from:$,to:X}}),s.commands.autocomplete=s.showHint;var J={hint:s.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};s.defineOption("hintOptions",null)})})();(function(n,o){(function(s){s(Dn.exports)})(function(s){var l=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),u=s.Pos,d={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function p(C){return C&&C.bracketRegex||/[(){}[\]]/}function y(C,S,B){var V=C.getLineHandle(S.line),J=S.ch-1,R=B&&B.afterCursor;R==null&&(R=/(^| )cm-fat-cursor($| )/.test(C.getWrapperElement().className));var N=p(B),D=!R&&J>=0&&N.test(V.text.charAt(J))&&d[V.text.charAt(J)]||N.test(V.text.charAt(J+1))&&d[V.text.charAt(++J)];if(!D)return null;var I=D.charAt(1)==">"?1:-1;if(B&&B.strict&&I>0!=(J==S.ch))return null;var F=C.getTokenTypeAt(u(S.line,J+1)),$=b(C,u(S.line,J+(I>0?1:0)),I,F,B);return $==null?null:{from:u(S.line,J),to:$&&$.pos,match:$&&$.ch==D.charAt(0),forward:I>0}}function b(C,S,B,V,J){for(var R=J&&J.maxScanLineLength||1e4,N=J&&J.maxScanLines||1e3,D=[],I=p(J),F=B>0?Math.min(S.line+N,C.lastLine()+1):Math.max(C.firstLine()-1,S.line-N),$=S.line;$!=F;$+=B){var X=C.getLine($);if(!!X){var j=B>0?0:X.length-1,ue=B>0?X.length:-1;if(!(X.length>R))for($==S.line&&(j=S.ch-(B<0?1:0));j!=ue;j+=B){var se=X.charAt(j);if(I.test(se)&&(V===void 0||(C.getTokenTypeAt(u($,j+1))||"")==(V||""))){var ie=d[se];if(ie&&ie.charAt(1)==">"==B>0)D.push(se);else if(D.length)D.pop();else return{pos:u($,j),ch:se}}}}}return $-B==(B>0?C.lastLine():C.firstLine())?!1:null}function w(C,S,B){for(var V=C.state.matchBrackets.maxHighlightLineLength||1e3,J=B&&B.highlightNonMatching,R=[],N=C.listSelections(),D=0;D<N.length;D++){var I=N[D].empty()&&y(C,N[D].head,B);if(I&&(I.match||J!==!1)&&C.getLine(I.from.line).length<=V){var F=I.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";R.push(C.markText(I.from,u(I.from.line,I.from.ch+1),{className:F})),I.to&&C.getLine(I.to.line).length<=V&&R.push(C.markText(I.to,u(I.to.line,I.to.ch+1),{className:F}))}}if(R.length){l&&C.state.focused&&C.focus();var $=function(){C.operation(function(){for(var X=0;X<R.length;X++)R[X].clear()})};if(S)setTimeout($,800);else return $}}function x(C){C.operation(function(){C.state.matchBrackets.currentlyHighlighted&&(C.state.matchBrackets.currentlyHighlighted(),C.state.matchBrackets.currentlyHighlighted=null),C.state.matchBrackets.currentlyHighlighted=w(C,!1,C.state.matchBrackets)})}function P(C){C.state.matchBrackets&&C.state.matchBrackets.currentlyHighlighted&&(C.state.matchBrackets.currentlyHighlighted(),C.state.matchBrackets.currentlyHighlighted=null)}s.defineOption("matchBrackets",!1,function(C,S,B){B&&B!=s.Init&&(C.off("cursorActivity",x),C.off("focus",x),C.off("blur",P),P(C)),S&&(C.state.matchBrackets=typeof S=="object"?S:{},C.on("cursorActivity",x),C.on("focus",x),C.on("blur",P))}),s.defineExtension("matchBrackets",function(){w(this,!0)}),s.defineExtension("findMatchingBracket",function(C,S,B){return(B||typeof S=="boolean")&&(B?(B.strict=S,S=B):S=S?{strict:!0}:null),y(this,C,S)}),s.defineExtension("scanForBracket",function(C,S,B,V){return b(this,C,S,B,V)})})})();(function(n,o){(function(s){s(Dn.exports)})(function(s){var l={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},u=s.Pos;s.defineOption("autoCloseBrackets",!1,function(R,N,D){D&&D!=s.Init&&(R.removeKeyMap(p),R.state.closeBrackets=null),N&&(y(d(N,"pairs")),R.state.closeBrackets=N,R.addKeyMap(p))});function d(R,N){return N=="pairs"&&typeof R=="string"?R:typeof R=="object"&&R[N]!=null?R[N]:l[N]}var p={Backspace:x,Enter:P};function y(R){for(var N=0;N<R.length;N++){var D=R.charAt(N),I="'"+D+"'";p[I]||(p[I]=b(D))}}y(l.pairs+"`");function b(R){return function(N){return B(N,R)}}function w(R){var N=R.state.closeBrackets;if(!N||N.override)return N;var D=R.getModeAt(R.getCursor());return D.closeBrackets||N}function x(R){var N=w(R);if(!N||R.getOption("disableInput"))return s.Pass;for(var D=d(N,"pairs"),I=R.listSelections(),F=0;F<I.length;F++){if(!I[F].empty())return s.Pass;var $=V(R,I[F].head);if(!$||D.indexOf($)%2!=0)return s.Pass}for(var F=I.length-1;F>=0;F--){var X=I[F].head;R.replaceRange("",u(X.line,X.ch-1),u(X.line,X.ch+1),"+delete")}}function P(R){var N=w(R),D=N&&d(N,"explode");if(!D||R.getOption("disableInput"))return s.Pass;for(var I=R.listSelections(),F=0;F<I.length;F++){if(!I[F].empty())return s.Pass;var $=V(R,I[F].head);if(!$||D.indexOf($)%2!=0)return s.Pass}R.operation(function(){var X=R.lineSeparator()||`
`;R.replaceSelection(X+X,null),C(R,-1),I=R.listSelections();for(var j=0;j<I.length;j++){var ue=I[j].head.line;R.indentLine(ue,null,!0),R.indentLine(ue+1,null,!0)}})}function C(R,N){for(var D=[],I=R.listSelections(),F=0,$=0;$<I.length;$++){var X=I[$];X.head==R.getCursor()&&(F=$);var j=X.head.ch||N>0?{line:X.head.line,ch:X.head.ch+N}:{line:X.head.line-1};D.push({anchor:j,head:j})}R.setSelections(D,F)}function S(R){var N=s.cmpPos(R.anchor,R.head)>0;return{anchor:new u(R.anchor.line,R.anchor.ch+(N?-1:1)),head:new u(R.head.line,R.head.ch+(N?1:-1))}}function B(R,N){var D=w(R);if(!D||R.getOption("disableInput"))return s.Pass;var I=d(D,"pairs"),F=I.indexOf(N);if(F==-1)return s.Pass;for(var $=d(D,"closeBefore"),X=d(D,"triples"),j=I.charAt(F+1)==N,ue=R.listSelections(),se=F%2==0,ie,k=0;k<ue.length;k++){var O=ue[k],H=O.head,E,ve=R.getRange(H,u(H.line,H.ch+1));if(se&&!O.empty())E="surround";else if((j||!se)&&ve==N)j&&J(R,H)?E="both":X.indexOf(N)>=0&&R.getRange(H,u(H.line,H.ch+3))==N+N+N?E="skipThree":E="skip";else if(j&&H.ch>1&&X.indexOf(N)>=0&&R.getRange(u(H.line,H.ch-2),H)==N+N){if(H.ch>2&&/\bstring/.test(R.getTokenTypeAt(u(H.line,H.ch-2))))return s.Pass;E="addFour"}else if(j){var Re=H.ch==0?" ":R.getRange(u(H.line,H.ch-1),H);if(!s.isWordChar(ve)&&Re!=N&&!s.isWordChar(Re))E="both";else return s.Pass}else if(se&&(ve.length===0||/\s/.test(ve)||$.indexOf(ve)>-1))E="both";else return s.Pass;if(!ie)ie=E;else if(ie!=E)return s.Pass}var ge=F%2?I.charAt(F-1):N,ke=F%2?N:I.charAt(F+1);R.operation(function(){if(ie=="skip")C(R,1);else if(ie=="skipThree")C(R,3);else if(ie=="surround"){for(var De=R.getSelections(),Ne=0;Ne<De.length;Ne++)De[Ne]=ge+De[Ne]+ke;R.replaceSelections(De,"around"),De=R.listSelections().slice();for(var Ne=0;Ne<De.length;Ne++)De[Ne]=S(De[Ne]);R.setSelections(De)}else ie=="both"?(R.replaceSelection(ge+ke,null),R.triggerElectric(ge+ke),C(R,-1)):ie=="addFour"&&(R.replaceSelection(ge+ge+ge+ge,"before"),C(R,1))})}function V(R,N){var D=R.getRange(u(N.line,N.ch-1),u(N.line,N.ch+1));return D.length==2?D:null}function J(R,N){var D=R.getTokenAt(u(N.line,N.ch+1));return/\bstring/.test(D.type)&&D.start==N.ch&&(N.ch==0||!/\bstring/.test(R.getTokenTypeAt(N)))}})})();(function(n,o){(function(s){s(Dn.exports)})(function(s){s.runMode=function(l,u,d,p){var y=s.getMode(s.defaults,u),b=p&&p.tabSize||s.defaults.tabSize;if(d.appendChild){var w=/MSIE \d/.test(navigator.userAgent),x=w&&(document.documentMode==null||document.documentMode<9),P=d,C=0;P.innerHTML="",d=function(D,I){if(D==`
`){P.appendChild(document.createTextNode(x?"\r":D)),C=0;return}for(var F="",$=0;;){var X=D.indexOf("	",$);if(X==-1){F+=D.slice($),C+=D.length-$;break}else{C+=X-$,F+=D.slice($,X);var j=b-C%b;C+=j;for(var ue=0;ue<j;++ue)F+=" ";$=X+1}}if(I){var se=P.appendChild(document.createElement("span"));se.className="cm-"+I.replace(/ +/g," cm-"),se.appendChild(document.createTextNode(F))}else P.appendChild(document.createTextNode(F))}}for(var S=s.splitLines(l),B=p&&p.state||s.startState(y),V=0,J=S.length;V<J;++V){V&&d(`
`);var R=new s.StringStream(S[V],null,{lookAhead:function(D){return S[V+D]},baseToken:function(){}});for(!R.string&&y.blankLine&&y.blankLine(B);!R.eol();){var N=y.token(R,B);d(R.current(),N,V,R.start,B,y),R.start=R.pos}}}})})();function gc(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Qr=gc();function oh(n){Qr=n}const sh=/[&<>"']/,ah=/[&<>"']/g,lh=/[<>"']|&(?!#?\w+;)/,uh=/[<>"']|&(?!#?\w+;)/g,ch={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uu=n=>ch[n];function _t(n,o){if(o){if(sh.test(n))return n.replace(ah,Uu)}else if(lh.test(n))return n.replace(uh,Uu);return n}const fh=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function mc(n){return n.replace(fh,(o,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const dh=/(^|[^\[])\^/g;function Ze(n,o){n=typeof n=="string"?n:n.source,o=o||"";const s={replace:(l,u)=>(u=u.source||u,u=u.replace(dh,"$1"),n=n.replace(l,u),s),getRegex:()=>new RegExp(n,o)};return s}const hh=/[^\w:]/g,ph=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function $u(n,o,s){if(n){let l;try{l=decodeURIComponent(mc(s)).replace(hh,"").toLowerCase()}catch{return null}if(l.indexOf("javascript:")===0||l.indexOf("vbscript:")===0||l.indexOf("data:")===0)return null}o&&!ph.test(s)&&(s=yh(o,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const mo={},gh=/^[^:]+:\/*[^/]*$/,mh=/^([^:]+:)[\s\S]*$/,vh=/^([^:]+:\/*[^/]*)[\s\S]*$/;function yh(n,o){mo[" "+n]||(gh.test(n)?mo[" "+n]=n+"/":mo[" "+n]=wo(n,"/",!0)),n=mo[" "+n];const s=n.indexOf(":")===-1;return o.substring(0,2)==="//"?s?o:n.replace(mh,"$1")+o:o.charAt(0)==="/"?s?o:n.replace(vh,"$1")+o:n+o}const Co={exec:function(){}};function vn(n){let o=1,s,l;for(;o<arguments.length;o++){s=arguments[o];for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n}function Gu(n,o){const s=n.replace(/\|/g,(d,p,y)=>{let b=!1,w=p;for(;--w>=0&&y[w]==="\\";)b=!b;return b?"|":" |"}),l=s.split(/ \|/);let u=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),l.length>o)l.splice(o);else for(;l.length<o;)l.push("");for(;u<l.length;u++)l[u]=l[u].trim().replace(/\\\|/g,"|");return l}function wo(n,o,s){const l=n.length;if(l===0)return"";let u=0;for(;u<l;){const d=n.charAt(l-u-1);if(d===o&&!s)u++;else if(d!==o&&s)u++;else break}return n.slice(0,l-u)}function bh(n,o){if(n.indexOf(o[1])===-1)return-1;const s=n.length;let l=0,u=0;for(;u<s;u++)if(n[u]==="\\")u++;else if(n[u]===o[0])l++;else if(n[u]===o[1]&&(l--,l<0))return u;return-1}function vc(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ku(n,o){if(o<1)return"";let s="";for(;o>1;)o&1&&(s+=n),o>>=1,n+=n;return s+n}function Xu(n,o,s,l){const u=o.href,d=o.title?_t(o.title):null,p=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){l.state.inLink=!0;const y={type:"link",raw:s,href:u,title:d,text:p,tokens:l.inlineTokens(p,[])};return l.state.inLink=!1,y}return{type:"image",raw:s,href:u,title:d,text:_t(p)}}function wh(n,o){const s=n.match(/^(\s+)(?:```)/);if(s===null)return o;const l=s[1];return o.split(`
`).map(u=>{const d=u.match(/^\s+/);if(d===null)return u;const[p]=d;return p.length>=l.length?u.slice(l.length):u}).join(`
`)}class Oa{constructor(o){this.options=o||Qr}space(o){const s=this.rules.block.newline.exec(o);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(o){const s=this.rules.block.code.exec(o);if(s){const l=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?l:wo(l,`
`)}}}fences(o){const s=this.rules.block.fences.exec(o);if(s){const l=s[0],u=wh(l,s[3]||"");return{type:"code",raw:l,lang:s[2]?s[2].trim():s[2],text:u}}}heading(o){const s=this.rules.block.heading.exec(o);if(s){let l=s[2].trim();if(/#$/.test(l)){const d=wo(l,"#");(this.options.pedantic||!d||/ $/.test(d))&&(l=d.trim())}const u={type:"heading",raw:s[0],depth:s[1].length,text:l,tokens:[]};return this.lexer.inline(u.text,u.tokens),u}}hr(o){const s=this.rules.block.hr.exec(o);if(s)return{type:"hr",raw:s[0]}}blockquote(o){const s=this.rules.block.blockquote.exec(o);if(s){const l=s[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:s[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(o){let s=this.rules.block.list.exec(o);if(s){let l,u,d,p,y,b,w,x,P,C,S,B,V=s[1].trim();const J=V.length>1,R={type:"list",raw:"",ordered:J,start:J?+V.slice(0,-1):"",loose:!1,items:[]};V=J?`\\d{1,9}\\${V.slice(-1)}`:`\\${V}`,this.options.pedantic&&(V=J?V:"[*+-]");const N=new RegExp(`^( {0,3}${V})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;o&&(B=!1,!(!(s=N.exec(o))||this.rules.block.hr.test(o)));){if(l=s[0],o=o.substring(l.length),x=s[2].split(`
`,1)[0],P=o.split(`
`,1)[0],this.options.pedantic?(p=2,S=x.trimLeft()):(p=s[2].search(/[^ ]/),p=p>4?1:p,S=x.slice(p),p+=s[1].length),b=!1,!x&&/^ *$/.test(P)&&(l+=P+`
`,o=o.substring(P.length+1),B=!0),!B){const I=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),F=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$=new RegExp(`^( {0,${Math.min(3,p-1)}})(\`\`\`|~~~)`);for(;o&&(C=o.split(`
`,1)[0],x=C,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!($.test(x)||this.rules.block.heading.test(x)||I.test(x)||F.test(o)));){if(x.search(/[^ ]/)>=p||!x.trim())S+=`
`+x.slice(p);else if(!b)S+=`
`+x;else break;!b&&!x.trim()&&(b=!0),l+=C+`
`,o=o.substring(C.length+1)}}R.loose||(w?R.loose=!0:/\n *\n *$/.test(l)&&(w=!0)),this.options.gfm&&(u=/^\[[ xX]\] /.exec(S),u&&(d=u[0]!=="[ ] ",S=S.replace(/^\[[ xX]\] +/,""))),R.items.push({type:"list_item",raw:l,task:!!u,checked:d,loose:!1,text:S}),R.raw+=l}R.items[R.items.length-1].raw=l.trimRight(),R.items[R.items.length-1].text=S.trimRight(),R.raw=R.raw.trimRight();const D=R.items.length;for(y=0;y<D;y++){this.lexer.state.top=!1,R.items[y].tokens=this.lexer.blockTokens(R.items[y].text,[]);const I=R.items[y].tokens.filter($=>$.type==="space"),F=I.every($=>{const X=$.raw.split("");let j=0;for(const ue of X)if(ue===`
`&&(j+=1),j>1)return!0;return!1});!R.loose&&I.length&&F&&(R.loose=!0,R.items[y].loose=!0)}return R}}html(o){const s=this.rules.block.html.exec(o);if(s){const l={type:"html",raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};return this.options.sanitize&&(l.type="paragraph",l.text=this.options.sanitizer?this.options.sanitizer(s[0]):_t(s[0]),l.tokens=[],this.lexer.inline(l.text,l.tokens)),l}}def(o){const s=this.rules.block.def.exec(o);if(s){s[3]&&(s[3]=s[3].substring(1,s[3].length-1));const l=s[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:l,raw:s[0],href:s[2],title:s[3]}}}table(o){const s=this.rules.block.table.exec(o);if(s){const l={type:"table",header:Gu(s[1]).map(u=>({text:u})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=s[0];let u=l.align.length,d,p,y,b;for(d=0;d<u;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(u=l.rows.length,d=0;d<u;d++)l.rows[d]=Gu(l.rows[d],l.header.length).map(w=>({text:w}));for(u=l.header.length,p=0;p<u;p++)l.header[p].tokens=[],this.lexer.inline(l.header[p].text,l.header[p].tokens);for(u=l.rows.length,p=0;p<u;p++)for(b=l.rows[p],y=0;y<b.length;y++)b[y].tokens=[],this.lexer.inline(b[y].text,b[y].tokens);return l}}}lheading(o){const s=this.rules.block.lheading.exec(o);if(s){const l={type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}paragraph(o){const s=this.rules.block.paragraph.exec(o);if(s){const l={type:"paragraph",raw:s[0],text:s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}text(o){const s=this.rules.block.text.exec(o);if(s){const l={type:"text",raw:s[0],text:s[0],tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}escape(o){const s=this.rules.inline.escape.exec(o);if(s)return{type:"escape",raw:s[0],text:_t(s[1])}}tag(o){const s=this.rules.inline.tag.exec(o);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):_t(s[0]):s[0]}}link(o){const s=this.rules.inline.link.exec(o);if(s){const l=s[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;const p=wo(l.slice(0,-1),"\\");if((l.length-p.length)%2===0)return}else{const p=bh(s[2],"()");if(p>-1){const b=(s[0].indexOf("!")===0?5:4)+s[1].length+p;s[2]=s[2].substring(0,p),s[0]=s[0].substring(0,b).trim(),s[3]=""}}let u=s[2],d="";if(this.options.pedantic){const p=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);p&&(u=p[1],d=p[3])}else d=s[3]?s[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(l)?u=u.slice(1):u=u.slice(1,-1)),Xu(s,{href:u&&u.replace(this.rules.inline._escapes,"$1"),title:d&&d.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(o,s){let l;if((l=this.rules.inline.reflink.exec(o))||(l=this.rules.inline.nolink.exec(o))){let u=(l[2]||l[1]).replace(/\s+/g," ");if(u=s[u.toLowerCase()],!u||!u.href){const d=l[0].charAt(0);return{type:"text",raw:d,text:d}}return Xu(l,u,l[0],this.lexer)}}emStrong(o,s,l=""){let u=this.rules.inline.emStrong.lDelim.exec(o);if(!u||u[3]&&l.match(/[\p{L}\p{N}]/u))return;const d=u[1]||u[2]||"";if(!d||d&&(l===""||this.rules.inline.punctuation.exec(l))){const p=u[0].length-1;let y,b,w=p,x=0;const P=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,s=s.slice(-1*o.length+p);(u=P.exec(s))!=null;){if(y=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!y)continue;if(b=y.length,u[3]||u[4]){w+=b;continue}else if((u[5]||u[6])&&p%3&&!((p+b)%3)){x+=b;continue}if(w-=b,w>0)continue;if(b=Math.min(b,b+w+x),Math.min(p,b)%2){const S=o.slice(1,p+u.index+b);return{type:"em",raw:o.slice(0,p+u.index+b+1),text:S,tokens:this.lexer.inlineTokens(S,[])}}const C=o.slice(2,p+u.index+b-1);return{type:"strong",raw:o.slice(0,p+u.index+b+1),text:C,tokens:this.lexer.inlineTokens(C,[])}}}}codespan(o){const s=this.rules.inline.code.exec(o);if(s){let l=s[2].replace(/\n/g," ");const u=/[^ ]/.test(l),d=/^ /.test(l)&&/ $/.test(l);return u&&d&&(l=l.substring(1,l.length-1)),l=_t(l,!0),{type:"codespan",raw:s[0],text:l}}}br(o){const s=this.rules.inline.br.exec(o);if(s)return{type:"br",raw:s[0]}}del(o){const s=this.rules.inline.del.exec(o);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2],[])}}autolink(o,s){const l=this.rules.inline.autolink.exec(o);if(l){let u,d;return l[2]==="@"?(u=_t(this.options.mangle?s(l[1]):l[1]),d="mailto:"+u):(u=_t(l[1]),d=u),{type:"link",raw:l[0],text:u,href:d,tokens:[{type:"text",raw:u,text:u}]}}}url(o,s){let l;if(l=this.rules.inline.url.exec(o)){let u,d;if(l[2]==="@")u=_t(this.options.mangle?s(l[0]):l[0]),d="mailto:"+u;else{let p;do p=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(p!==l[0]);u=_t(l[0]),l[1]==="www."?d="http://"+u:d=u}return{type:"link",raw:l[0],text:u,href:d,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(o,s){const l=this.rules.inline.text.exec(o);if(l){let u;return this.lexer.state.inRawBlock?u=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):_t(l[0]):l[0]:u=_t(this.options.smartypants?s(l[0]):l[0]),{type:"text",raw:l[0],text:u}}}}const Te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Co,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Te._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Te._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Te.def=Ze(Te.def).replace("label",Te._label).replace("title",Te._title).getRegex();Te.bullet=/(?:[*+-]|\d{1,9}[.)])/;Te.listItemStart=Ze(/^( *)(bull) */).replace("bull",Te.bullet).getRegex();Te.list=Ze(Te.list).replace(/bull/g,Te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Te.def.source+")").getRegex();Te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Te.html=Ze(Te.html,"i").replace("comment",Te._comment).replace("tag",Te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Te.paragraph=Ze(Te._paragraph).replace("hr",Te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Te._tag).getRegex();Te.blockquote=Ze(Te.blockquote).replace("paragraph",Te.paragraph).getRegex();Te.normal=vn({},Te);Te.gfm=vn({},Te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Te.gfm.table=Ze(Te.gfm.table).replace("hr",Te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Te._tag).getRegex();Te.gfm.paragraph=Ze(Te._paragraph).replace("hr",Te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Te._tag).getRegex();Te.pedantic=vn({},Te.normal,{html:Ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Co,paragraph:Ze(Te.normal._paragraph).replace("hr",Te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const de={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Co,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Co,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};de._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";de.punctuation=Ze(de.punctuation).replace(/punctuation/g,de._punctuation).getRegex();de.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;de.escapedEmSt=/\\\*|\\_/g;de._comment=Ze(Te._comment).replace("(?:-->|$)","-->").getRegex();de.emStrong.lDelim=Ze(de.emStrong.lDelim).replace(/punct/g,de._punctuation).getRegex();de.emStrong.rDelimAst=Ze(de.emStrong.rDelimAst,"g").replace(/punct/g,de._punctuation).getRegex();de.emStrong.rDelimUnd=Ze(de.emStrong.rDelimUnd,"g").replace(/punct/g,de._punctuation).getRegex();de._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;de._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;de._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;de.autolink=Ze(de.autolink).replace("scheme",de._scheme).replace("email",de._email).getRegex();de._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;de.tag=Ze(de.tag).replace("comment",de._comment).replace("attribute",de._attribute).getRegex();de._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;de._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;de._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;de.link=Ze(de.link).replace("label",de._label).replace("href",de._href).replace("title",de._title).getRegex();de.reflink=Ze(de.reflink).replace("label",de._label).replace("ref",Te._label).getRegex();de.nolink=Ze(de.nolink).replace("ref",Te._label).getRegex();de.reflinkSearch=Ze(de.reflinkSearch,"g").replace("reflink",de.reflink).replace("nolink",de.nolink).getRegex();de.normal=vn({},de);de.pedantic=vn({},de.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ze(/^!?\[(label)\]\((.*?)\)/).replace("label",de._label).getRegex(),reflink:Ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",de._label).getRegex()});de.gfm=vn({},de.normal,{escape:Ze(de.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});de.gfm.url=Ze(de.gfm.url,"i").replace("email",de.gfm._extended_email).getRegex();de.breaks=vn({},de.gfm,{br:Ze(de.br).replace("{2,}","*").getRegex(),text:Ze(de.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function kh(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Yu(n){let o="",s,l;const u=n.length;for(s=0;s<u;s++)l=n.charCodeAt(s),Math.random()>.5&&(l="x"+l.toString(16)),o+="&#"+l+";";return o}class jn{constructor(o){this.tokens=[],this.tokens.links=Object.create(null),this.options=o||Qr,this.options.tokenizer=this.options.tokenizer||new Oa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:Te.normal,inline:de.normal};this.options.pedantic?(s.block=Te.pedantic,s.inline=de.pedantic):this.options.gfm&&(s.block=Te.gfm,this.options.breaks?s.inline=de.breaks:s.inline=de.gfm),this.tokenizer.rules=s}static get rules(){return{block:Te,inline:de}}static lex(o,s){return new jn(s).lex(o)}static lexInline(o,s){return new jn(s).inlineTokens(o)}lex(o){o=o.replace(/\r\n|\r/g,`
`),this.blockTokens(o,this.tokens);let s;for(;s=this.inlineQueue.shift();)this.inlineTokens(s.src,s.tokens);return this.tokens}blockTokens(o,s=[]){this.options.pedantic?o=o.replace(/\t/g,"    ").replace(/^ +$/gm,""):o=o.replace(/^( *)(\t+)/gm,(y,b,w)=>b+"    ".repeat(w.length));let l,u,d,p;for(;o;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(y=>(l=y.call({lexer:this},o,s))?(o=o.substring(l.raw.length),s.push(l),!0):!1))){if(l=this.tokenizer.space(o)){o=o.substring(l.raw.length),l.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(l);continue}if(l=this.tokenizer.code(o)){o=o.substring(l.raw.length),u=s[s.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(l);continue}if(l=this.tokenizer.fences(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.heading(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.hr(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.blockquote(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.list(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.html(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.def(o)){o=o.substring(l.raw.length),u=s[s.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.lheading(o)){o=o.substring(l.raw.length),s.push(l);continue}if(d=o,this.options.extensions&&this.options.extensions.startBlock){let y=1/0;const b=o.slice(1);let w;this.options.extensions.startBlock.forEach(function(x){w=x.call({lexer:this},b),typeof w=="number"&&w>=0&&(y=Math.min(y,w))}),y<1/0&&y>=0&&(d=o.substring(0,y+1))}if(this.state.top&&(l=this.tokenizer.paragraph(d))){u=s[s.length-1],p&&u.type==="paragraph"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(l),p=d.length!==o.length,o=o.substring(l.raw.length);continue}if(l=this.tokenizer.text(o)){o=o.substring(l.raw.length),u=s[s.length-1],u&&u.type==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):s.push(l);continue}if(o){const y="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return this.state.top=!0,s}inline(o,s){this.inlineQueue.push({src:o,tokens:s})}inlineTokens(o,s=[]){let l,u,d,p=o,y,b,w;if(this.tokens.links){const x=Object.keys(this.tokens.links);if(x.length>0)for(;(y=this.tokenizer.rules.inline.reflinkSearch.exec(p))!=null;)x.includes(y[0].slice(y[0].lastIndexOf("[")+1,-1))&&(p=p.slice(0,y.index)+"["+Ku("a",y[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(y=this.tokenizer.rules.inline.blockSkip.exec(p))!=null;)p=p.slice(0,y.index)+"["+Ku("a",y[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(y=this.tokenizer.rules.inline.escapedEmSt.exec(p))!=null;)p=p.slice(0,y.index)+"++"+p.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;o;)if(b||(w=""),b=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(x=>(l=x.call({lexer:this},o,s))?(o=o.substring(l.raw.length),s.push(l),!0):!1))){if(l=this.tokenizer.escape(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.tag(o)){o=o.substring(l.raw.length),u=s[s.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):s.push(l);continue}if(l=this.tokenizer.link(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.reflink(o,this.tokens.links)){o=o.substring(l.raw.length),u=s[s.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):s.push(l);continue}if(l=this.tokenizer.emStrong(o,p,w)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.codespan(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.br(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.del(o)){o=o.substring(l.raw.length),s.push(l);continue}if(l=this.tokenizer.autolink(o,Yu)){o=o.substring(l.raw.length),s.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(o,Yu))){o=o.substring(l.raw.length),s.push(l);continue}if(d=o,this.options.extensions&&this.options.extensions.startInline){let x=1/0;const P=o.slice(1);let C;this.options.extensions.startInline.forEach(function(S){C=S.call({lexer:this},P),typeof C=="number"&&C>=0&&(x=Math.min(x,C))}),x<1/0&&x>=0&&(d=o.substring(0,x+1))}if(l=this.tokenizer.inlineText(d,kh)){o=o.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(w=l.raw.slice(-1)),b=!0,u=s[s.length-1],u&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):s.push(l);continue}if(o){const x="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(x);break}else throw new Error(x)}}return s}}class Aa{constructor(o){this.options=o||Qr}code(o,s,l){const u=(s||"").match(/\S*/)[0];if(this.options.highlight){const d=this.options.highlight(o,u);d!=null&&d!==o&&(l=!0,o=d)}return o=o.replace(/\n$/,"")+`
`,u?'<pre><code class="'+this.options.langPrefix+_t(u,!0)+'">'+(l?o:_t(o,!0))+`</code></pre>
`:"<pre><code>"+(l?o:_t(o,!0))+`</code></pre>
`}blockquote(o){return`<blockquote>
${o}</blockquote>
`}html(o){return o}heading(o,s,l,u){if(this.options.headerIds){const d=this.options.headerPrefix+u.slug(l);return`<h${s} id="${d}">${o}</h${s}>
`}return`<h${s}>${o}</h${s}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(o,s,l){const u=s?"ol":"ul",d=s&&l!==1?' start="'+l+'"':"";return"<"+u+d+`>
`+o+"</"+u+`>
`}listitem(o){return`<li>${o}</li>
`}checkbox(o){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(o){return`<p>${o}</p>
`}table(o,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+o+`</thead>
`+s+`</table>
`}tablerow(o){return`<tr>
${o}</tr>
`}tablecell(o,s){const l=s.header?"th":"td";return(s.align?`<${l} align="${s.align}">`:`<${l}>`)+o+`</${l}>
`}strong(o){return`<strong>${o}</strong>`}em(o){return`<em>${o}</em>`}codespan(o){return`<code>${o}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(o){return`<del>${o}</del>`}link(o,s,l){if(o=$u(this.options.sanitize,this.options.baseUrl,o),o===null)return l;let u='<a href="'+_t(o)+'"';return s&&(u+=' title="'+s+'"'),u+=">"+l+"</a>",u}image(o,s,l){if(o=$u(this.options.sanitize,this.options.baseUrl,o),o===null)return l;let u=`<img src="${o}" alt="${l}"`;return s&&(u+=` title="${s}"`),u+=this.options.xhtml?"/>":">",u}text(o){return o}}class yc{strong(o){return o}em(o){return o}codespan(o){return o}del(o){return o}html(o){return o}text(o){return o}link(o,s,l){return""+l}image(o,s,l){return""+l}br(){return""}}class bc{constructor(){this.seen={}}serialize(o){return o.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(o,s){let l=o,u=0;if(this.seen.hasOwnProperty(l)){u=this.seen[o];do u++,l=o+"-"+u;while(this.seen.hasOwnProperty(l))}return s||(this.seen[o]=u,this.seen[l]=0),l}slug(o,s={}){const l=this.serialize(o);return this.getNextSafeSlug(l,s.dryrun)}}class Bn{constructor(o){this.options=o||Qr,this.options.renderer=this.options.renderer||new Aa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yc,this.slugger=new bc}static parse(o,s){return new Bn(s).parse(o)}static parseInline(o,s){return new Bn(s).parseInline(o)}parse(o,s=!0){let l="",u,d,p,y,b,w,x,P,C,S,B,V,J,R,N,D,I,F,$;const X=o.length;for(u=0;u<X;u++){if(S=o[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[S.type]&&($=this.options.extensions.renderers[S.type].call({parser:this},S),$!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(S.type))){l+=$||"";continue}switch(S.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{l+=this.renderer.heading(this.parseInline(S.tokens),S.depth,mc(this.parseInline(S.tokens,this.textRenderer)),this.slugger);continue}case"code":{l+=this.renderer.code(S.text,S.lang,S.escaped);continue}case"table":{for(P="",x="",y=S.header.length,d=0;d<y;d++)x+=this.renderer.tablecell(this.parseInline(S.header[d].tokens),{header:!0,align:S.align[d]});for(P+=this.renderer.tablerow(x),C="",y=S.rows.length,d=0;d<y;d++){for(w=S.rows[d],x="",b=w.length,p=0;p<b;p++)x+=this.renderer.tablecell(this.parseInline(w[p].tokens),{header:!1,align:S.align[p]});C+=this.renderer.tablerow(x)}l+=this.renderer.table(P,C);continue}case"blockquote":{C=this.parse(S.tokens),l+=this.renderer.blockquote(C);continue}case"list":{for(B=S.ordered,V=S.start,J=S.loose,y=S.items.length,C="",d=0;d<y;d++)N=S.items[d],D=N.checked,I=N.task,R="",N.task&&(F=this.renderer.checkbox(D),J?N.tokens.length>0&&N.tokens[0].type==="paragraph"?(N.tokens[0].text=F+" "+N.tokens[0].text,N.tokens[0].tokens&&N.tokens[0].tokens.length>0&&N.tokens[0].tokens[0].type==="text"&&(N.tokens[0].tokens[0].text=F+" "+N.tokens[0].tokens[0].text)):N.tokens.unshift({type:"text",text:F}):R+=F),R+=this.parse(N.tokens,J),C+=this.renderer.listitem(R,I,D);l+=this.renderer.list(C,B,V);continue}case"html":{l+=this.renderer.html(S.text);continue}case"paragraph":{l+=this.renderer.paragraph(this.parseInline(S.tokens));continue}case"text":{for(C=S.tokens?this.parseInline(S.tokens):S.text;u+1<X&&o[u+1].type==="text";)S=o[++u],C+=`
`+(S.tokens?this.parseInline(S.tokens):S.text);l+=s?this.renderer.paragraph(C):C;continue}default:{const j='Token with "'+S.type+'" type was not found.';if(this.options.silent){console.error(j);return}else throw new Error(j)}}}return l}parseInline(o,s){s=s||this.renderer;let l="",u,d,p;const y=o.length;for(u=0;u<y;u++){if(d=o[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(p=this.options.extensions.renderers[d.type].call({parser:this},d),p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type))){l+=p||"";continue}switch(d.type){case"escape":{l+=s.text(d.text);break}case"html":{l+=s.html(d.text);break}case"link":{l+=s.link(d.href,d.title,this.parseInline(d.tokens,s));break}case"image":{l+=s.image(d.href,d.title,d.text);break}case"strong":{l+=s.strong(this.parseInline(d.tokens,s));break}case"em":{l+=s.em(this.parseInline(d.tokens,s));break}case"codespan":{l+=s.codespan(d.text);break}case"br":{l+=s.br();break}case"del":{l+=s.del(this.parseInline(d.tokens,s));break}case"text":{l+=s.text(d.text);break}default:{const b='Token with "'+d.type+'" type was not found.';if(this.options.silent){console.error(b);return}else throw new Error(b)}}}return l}}function _e(n,o,s){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof o=="function"&&(s=o,o=null),o=vn({},_e.defaults,o||{}),vc(o),s){const l=o.highlight;let u;try{u=jn.lex(n,o)}catch(y){return s(y)}const d=function(y){let b;if(!y)try{o.walkTokens&&_e.walkTokens(u,o.walkTokens),b=Bn.parse(u,o)}catch(w){y=w}return o.highlight=l,y?s(y):s(null,b)};if(!l||l.length<3||(delete o.highlight,!u.length))return d();let p=0;_e.walkTokens(u,function(y){y.type==="code"&&(p++,setTimeout(()=>{l(y.text,y.lang,function(b,w){if(b)return d(b);w!=null&&w!==y.text&&(y.text=w,y.escaped=!0),p--,p===0&&d()})},0))}),p===0&&d();return}try{const l=jn.lex(n,o);return o.walkTokens&&_e.walkTokens(l,o.walkTokens),Bn.parse(l,o)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+_t(l.message+"",!0)+"</pre>";throw l}}_e.options=_e.setOptions=function(n){return vn(_e.defaults,n),oh(_e.defaults),_e};_e.getDefaults=gc;_e.defaults=Qr;_e.use=function(...n){const o=vn({},...n),s=_e.defaults.extensions||{renderers:{},childTokens:{}};let l;n.forEach(u=>{if(u.extensions&&(l=!0,u.extensions.forEach(d=>{if(!d.name)throw new Error("extension name required");if(d.renderer){const p=s.renderers?s.renderers[d.name]:null;p?s.renderers[d.name]=function(...y){let b=d.renderer.apply(this,y);return b===!1&&(b=p.apply(this,y)),b}:s.renderers[d.name]=d.renderer}if(d.tokenizer){if(!d.level||d.level!=="block"&&d.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");s[d.level]?s[d.level].unshift(d.tokenizer):s[d.level]=[d.tokenizer],d.start&&(d.level==="block"?s.startBlock?s.startBlock.push(d.start):s.startBlock=[d.start]:d.level==="inline"&&(s.startInline?s.startInline.push(d.start):s.startInline=[d.start]))}d.childTokens&&(s.childTokens[d.name]=d.childTokens)})),u.renderer){const d=_e.defaults.renderer||new Aa;for(const p in u.renderer){const y=d[p];d[p]=(...b)=>{let w=u.renderer[p].apply(d,b);return w===!1&&(w=y.apply(d,b)),w}}o.renderer=d}if(u.tokenizer){const d=_e.defaults.tokenizer||new Oa;for(const p in u.tokenizer){const y=d[p];d[p]=(...b)=>{let w=u.tokenizer[p].apply(d,b);return w===!1&&(w=y.apply(d,b)),w}}o.tokenizer=d}if(u.walkTokens){const d=_e.defaults.walkTokens;o.walkTokens=function(p){u.walkTokens.call(this,p),d&&d.call(this,p)}}l&&(o.extensions=s),_e.setOptions(o)})};_e.walkTokens=function(n,o){for(const s of n)switch(o.call(_e,s),s.type){case"table":{for(const l of s.header)_e.walkTokens(l.tokens,o);for(const l of s.rows)for(const u of l)_e.walkTokens(u.tokens,o);break}case"list":{_e.walkTokens(s.items,o);break}default:_e.defaults.extensions&&_e.defaults.extensions.childTokens&&_e.defaults.extensions.childTokens[s.type]?_e.defaults.extensions.childTokens[s.type].forEach(function(l){_e.walkTokens(s[l],o)}):s.tokens&&_e.walkTokens(s.tokens,o)}};_e.parseInline=function(n,o){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");o=vn({},_e.defaults,o||{}),vc(o);try{const s=jn.lexInline(n,o);return o.walkTokens&&_e.walkTokens(s,o.walkTokens),Bn.parseInline(s,o)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+_t(s.message+"",!0)+"</pre>";throw s}};_e.Parser=Bn;_e.parser=Bn.parse;_e.Renderer=Aa;_e.TextRenderer=yc;_e.Lexer=jn;_e.lexer=jn.lex;_e.Tokenizer=Oa;_e.Slugger=bc;_e.parse=_e;_e.options;_e.setOptions;_e.use;_e.walkTokens;_e.parseInline;Bn.parse;jn.lex;var pe={},gt={},Ia={},En={};Object.defineProperty(En,"__esModule",{value:!0});let As;function Is(){if(As===void 0)throw new Error("No runtime abstraction layer installed");return As}(function(n){function o(s){if(s===void 0)throw new Error("No runtime abstraction layer provided");As=s}n.install=o})(Is||(Is={}));En.default=Is;var qa={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Disposable=void 0,function(o){function s(l){return{dispose:l}}o.create=s}(n.Disposable||(n.Disposable={}))})(qa);var wr={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Emitter=n.Event=void 0;const o=En;(function(u){const d={dispose(){}};u.None=function(){return d}})(n.Event||(n.Event={}));class s{add(d,p=null,y){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(d),this._contexts.push(p),Array.isArray(y)&&y.push({dispose:()=>this.remove(d,p)})}remove(d,p=null){if(!this._callbacks)return;let y=!1;for(let b=0,w=this._callbacks.length;b<w;b++)if(this._callbacks[b]===d)if(this._contexts[b]===p){this._callbacks.splice(b,1),this._contexts.splice(b,1);return}else y=!0;if(y)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...d){if(!this._callbacks)return[];const p=[],y=this._callbacks.slice(0),b=this._contexts.slice(0);for(let w=0,x=y.length;w<x;w++)try{p.push(y[w].apply(b[w],d))}catch(P){(0,o.default)().console.error(P)}return p}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class l{constructor(d){this._options=d}get event(){return this._event||(this._event=(d,p,y)=>{this._callbacks||(this._callbacks=new s),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(d,p);const b={dispose:()=>{!this._callbacks||(this._callbacks.remove(d,p),b.dispose=l._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(y)&&y.push(b),b}),this._event}fire(d){this._callbacks&&this._callbacks.invoke.call(this._callbacks,d)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}n.Emitter=l,l._noop=function(){}})(wr);var Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.AbstractMessageBuffer=void 0;const Ch=13,Th=10,Sh=`\r
`;class xh{constructor(o="utf-8"){this._encoding=o,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(o){const s=typeof o=="string"?this.fromString(o,this._encoding):o;this._chunks.push(s),this._totalLength+=s.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let o=0,s=0,l=0,u=0;e:for(;s<this._chunks.length;){const b=this._chunks[s];for(l=0;l<b.length;){switch(b[l]){case Ch:switch(o){case 0:o=1;break;case 2:o=3;break;default:o=0}break;case Th:switch(o){case 1:o=2;break;case 3:o=4,l++;break e;default:o=0}break;default:o=0}l++}u+=b.byteLength,s++}if(o!==4)return;const d=this._read(u+l),p=new Map,y=this.toString(d,"ascii").split(Sh);if(y.length<2)return p;for(let b=0;b<y.length-2;b++){const w=y[b],x=w.indexOf(":");if(x===-1)throw new Error("Message header must separate key and value using :");const P=w.substr(0,x),C=w.substr(x+1).trim();p.set(P,C)}return p}tryReadBody(o){if(!(this._totalLength<o))return this._read(o)}get numberOfBytes(){return this._totalLength}_read(o){if(o===0)return this.emptyBuffer();if(o>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===o){const d=this._chunks[0];return this._chunks.shift(),this._totalLength-=o,this.asNative(d)}if(this._chunks[0].byteLength>o){const d=this._chunks[0],p=this.asNative(d,o);return this._chunks[0]=d.slice(o),this._totalLength-=o,p}const s=this.allocNative(o);let l=0,u=0;for(;o>0;){const d=this._chunks[u];if(d.byteLength>o){const p=d.slice(0,o);s.set(p,l),l+=o,this._chunks[u]=d.slice(o),this._totalLength-=o,o-=o}else s.set(d,l),l+=d.byteLength,this._chunks.shift(),this._totalLength-=d.byteLength,o-=d.byteLength}return s}}Io.AbstractMessageBuffer=xh;Object.defineProperty(Ia,"__esModule",{value:!0});const wc=En,Ur=qa,Rh=wr,_h=Io;class qo extends _h.AbstractMessageBuffer{constructor(o="utf-8"){super(o),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return qo.emptyBuffer}fromString(o,s){return new TextEncoder().encode(o)}toString(o,s){return s==="ascii"?this.asciiDecoder.decode(o):new TextDecoder(s).decode(o)}asNative(o,s){return s===void 0?o:o.slice(0,s)}allocNative(o){return new Uint8Array(o)}}qo.emptyBuffer=new Uint8Array(0);class Lh{constructor(o){this.socket=o,this._onData=new Rh.Emitter,this._messageListener=s=>{s.data.arrayBuffer().then(u=>{this._onData.fire(new Uint8Array(u))},()=>{(0,wc.default)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(o){return this.socket.addEventListener("close",o),Ur.Disposable.create(()=>this.socket.removeEventListener("close",o))}onError(o){return this.socket.addEventListener("error",o),Ur.Disposable.create(()=>this.socket.removeEventListener("error",o))}onEnd(o){return this.socket.addEventListener("end",o),Ur.Disposable.create(()=>this.socket.removeEventListener("end",o))}onData(o){return this._onData.event(o)}}class Dh{constructor(o){this.socket=o}onClose(o){return this.socket.addEventListener("close",o),Ur.Disposable.create(()=>this.socket.removeEventListener("close",o))}onError(o){return this.socket.addEventListener("error",o),Ur.Disposable.create(()=>this.socket.removeEventListener("error",o))}onEnd(o){return this.socket.addEventListener("end",o),Ur.Disposable.create(()=>this.socket.removeEventListener("end",o))}write(o,s){if(typeof o=="string"){if(s!==void 0&&s!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${s}`);this.socket.send(o)}else this.socket.send(o);return Promise.resolve()}end(){this.socket.close()}}const Eh=new TextEncoder,kc=Object.freeze({messageBuffer:Object.freeze({create:n=>new qo(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,o)=>{if(o.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${o.charset}`);return Promise.resolve(Eh.encode(JSON.stringify(n,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(n,o)=>{if(!(n instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(o.charset).decode(n)))}})}),stream:Object.freeze({asReadableStream:n=>new Lh(n),asWritableStream:n=>new Dh(n)}),console,timer:Object.freeze({setTimeout(n,o,...s){const l=setTimeout(n,o,...s);return{dispose:()=>clearTimeout(l)}},setImmediate(n,...o){const s=setTimeout(n,0,...o);return{dispose:()=>clearTimeout(s)}},setInterval(n,o,...s){const l=setInterval(n,o,...s);return{dispose:()=>clearInterval(l)}}})});function qs(){return kc}(function(n){function o(){wc.default.install(kc)}n.install=o})(qs||(qs={}));Ia.default=qs;var Hs={},Ha={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.stringArray=yt.array=yt.func=yt.error=yt.number=yt.string=yt.boolean=void 0;function Ph(n){return n===!0||n===!1}yt.boolean=Ph;function Cc(n){return typeof n=="string"||n instanceof String}yt.string=Cc;function Mh(n){return typeof n=="number"||n instanceof Number}yt.number=Mh;function Nh(n){return n instanceof Error}yt.error=Nh;function Oh(n){return typeof n=="function"}yt.func=Oh;function Tc(n){return Array.isArray(n)}yt.array=Tc;function Ah(n){return Tc(n)&&n.every(o=>Cc(o))}yt.stringArray=Ah;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Message=n.NotificationType9=n.NotificationType8=n.NotificationType7=n.NotificationType6=n.NotificationType5=n.NotificationType4=n.NotificationType3=n.NotificationType2=n.NotificationType1=n.NotificationType0=n.NotificationType=n.RequestType9=n.RequestType8=n.RequestType7=n.RequestType6=n.RequestType5=n.RequestType4=n.RequestType3=n.RequestType2=n.RequestType1=n.RequestType=n.RequestType0=n.AbstractMessageSignature=n.ParameterStructures=n.ResponseError=n.ErrorCodes=void 0;const o=yt;var s;(function(k){k.ParseError=-32700,k.InvalidRequest=-32600,k.MethodNotFound=-32601,k.InvalidParams=-32602,k.InternalError=-32603,k.jsonrpcReservedErrorRangeStart=-32099,k.serverErrorStart=-32099,k.MessageWriteError=-32099,k.MessageReadError=-32098,k.PendingResponseRejected=-32097,k.ConnectionInactive=-32096,k.ServerNotInitialized=-32002,k.UnknownErrorCode=-32001,k.jsonrpcReservedErrorRangeEnd=-32e3,k.serverErrorEnd=-32e3})(s=n.ErrorCodes||(n.ErrorCodes={}));class l extends Error{constructor(O,H,E){super(H),this.code=o.number(O)?O:s.UnknownErrorCode,this.data=E,Object.setPrototypeOf(this,l.prototype)}toJson(){const O={code:this.code,message:this.message};return this.data!==void 0&&(O.data=this.data),O}}n.ResponseError=l;class u{constructor(O){this.kind=O}static is(O){return O===u.auto||O===u.byName||O===u.byPosition}toString(){return this.kind}}n.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class d{constructor(O,H){this.method=O,this.numberOfParams=H}get parameterStructures(){return u.auto}}n.AbstractMessageSignature=d;class p extends d{constructor(O){super(O,0)}}n.RequestType0=p;class y extends d{constructor(O,H=u.auto){super(O,1),this._parameterStructures=H}get parameterStructures(){return this._parameterStructures}}n.RequestType=y;class b extends d{constructor(O,H=u.auto){super(O,1),this._parameterStructures=H}get parameterStructures(){return this._parameterStructures}}n.RequestType1=b;class w extends d{constructor(O){super(O,2)}}n.RequestType2=w;class x extends d{constructor(O){super(O,3)}}n.RequestType3=x;class P extends d{constructor(O){super(O,4)}}n.RequestType4=P;class C extends d{constructor(O){super(O,5)}}n.RequestType5=C;class S extends d{constructor(O){super(O,6)}}n.RequestType6=S;class B extends d{constructor(O){super(O,7)}}n.RequestType7=B;class V extends d{constructor(O){super(O,8)}}n.RequestType8=V;class J extends d{constructor(O){super(O,9)}}n.RequestType9=J;class R extends d{constructor(O,H=u.auto){super(O,1),this._parameterStructures=H}get parameterStructures(){return this._parameterStructures}}n.NotificationType=R;class N extends d{constructor(O){super(O,0)}}n.NotificationType0=N;class D extends d{constructor(O,H=u.auto){super(O,1),this._parameterStructures=H}get parameterStructures(){return this._parameterStructures}}n.NotificationType1=D;class I extends d{constructor(O){super(O,2)}}n.NotificationType2=I;class F extends d{constructor(O){super(O,3)}}n.NotificationType3=F;class $ extends d{constructor(O){super(O,4)}}n.NotificationType4=$;class X extends d{constructor(O){super(O,5)}}n.NotificationType5=X;class j extends d{constructor(O){super(O,6)}}n.NotificationType6=j;class ue extends d{constructor(O){super(O,7)}}n.NotificationType7=ue;class se extends d{constructor(O){super(O,8)}}n.NotificationType8=se;class ie extends d{constructor(O){super(O,9)}}n.NotificationType9=ie,function(k){function O(ve){const Re=ve;return Re&&o.string(Re.method)&&(o.string(Re.id)||o.number(Re.id))}k.isRequest=O;function H(ve){const Re=ve;return Re&&o.string(Re.method)&&ve.id===void 0}k.isNotification=H;function E(ve){const Re=ve;return Re&&(Re.result!==void 0||!!Re.error)&&(o.string(Re.id)||o.number(Re.id)||Re.id===null)}k.isResponse=E}(n.Message||(n.Message={}))})(Ha);var Wa={};(function(n){var o;Object.defineProperty(n,"__esModule",{value:!0}),n.LRUCache=n.LinkedMap=n.Touch=void 0;var s;(function(d){d.None=0,d.First=1,d.AsOld=d.First,d.Last=2,d.AsNew=d.Last})(s=n.Touch||(n.Touch={}));class l{constructor(){this[o]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var p;return(p=this._head)==null?void 0:p.value}get last(){var p;return(p=this._tail)==null?void 0:p.value}has(p){return this._map.has(p)}get(p,y=s.None){const b=this._map.get(p);if(!!b)return y!==s.None&&this.touch(b,y),b.value}set(p,y,b=s.None){let w=this._map.get(p);if(w)w.value=y,b!==s.None&&this.touch(w,b);else{switch(w={key:p,value:y,next:void 0,previous:void 0},b){case s.None:this.addItemLast(w);break;case s.First:this.addItemFirst(w);break;case s.Last:this.addItemLast(w);break;default:this.addItemLast(w);break}this._map.set(p,w),this._size++}return this}delete(p){return!!this.remove(p)}remove(p){const y=this._map.get(p);if(!!y)return this._map.delete(p),this.removeItem(y),this._size--,y.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const p=this._head;return this._map.delete(p.key),this.removeItem(p),this._size--,p.value}forEach(p,y){const b=this._state;let w=this._head;for(;w;){if(y?p.bind(y)(w.value,w.key,this):p(w.value,w.key,this),this._state!==b)throw new Error("LinkedMap got modified during iteration.");w=w.next}}keys(){const p=this._state;let y=this._head;const b={[Symbol.iterator]:()=>b,next:()=>{if(this._state!==p)throw new Error("LinkedMap got modified during iteration.");if(y){const w={value:y.key,done:!1};return y=y.next,w}else return{value:void 0,done:!0}}};return b}values(){const p=this._state;let y=this._head;const b={[Symbol.iterator]:()=>b,next:()=>{if(this._state!==p)throw new Error("LinkedMap got modified during iteration.");if(y){const w={value:y.value,done:!1};return y=y.next,w}else return{value:void 0,done:!0}}};return b}entries(){const p=this._state;let y=this._head;const b={[Symbol.iterator]:()=>b,next:()=>{if(this._state!==p)throw new Error("LinkedMap got modified during iteration.");if(y){const w={value:[y.key,y.value],done:!1};return y=y.next,w}else return{value:void 0,done:!0}}};return b}[(o=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(p){if(p>=this.size)return;if(p===0){this.clear();return}let y=this._head,b=this.size;for(;y&&b>p;)this._map.delete(y.key),y=y.next,b--;this._head=y,this._size=b,y&&(y.previous=void 0),this._state++}addItemFirst(p){if(!this._head&&!this._tail)this._tail=p;else if(this._head)p.next=this._head,this._head.previous=p;else throw new Error("Invalid list");this._head=p,this._state++}addItemLast(p){if(!this._head&&!this._tail)this._head=p;else if(this._tail)p.previous=this._tail,this._tail.next=p;else throw new Error("Invalid list");this._tail=p,this._state++}removeItem(p){if(p===this._head&&p===this._tail)this._head=void 0,this._tail=void 0;else if(p===this._head){if(!p.next)throw new Error("Invalid list");p.next.previous=void 0,this._head=p.next}else if(p===this._tail){if(!p.previous)throw new Error("Invalid list");p.previous.next=void 0,this._tail=p.previous}else{const y=p.next,b=p.previous;if(!y||!b)throw new Error("Invalid list");y.previous=b,b.next=y}p.next=void 0,p.previous=void 0,this._state++}touch(p,y){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(y!==s.First&&y!==s.Last)){if(y===s.First){if(p===this._head)return;const b=p.next,w=p.previous;p===this._tail?(w.next=void 0,this._tail=w):(b.previous=w,w.next=b),p.previous=void 0,p.next=this._head,this._head.previous=p,this._head=p,this._state++}else if(y===s.Last){if(p===this._tail)return;const b=p.next,w=p.previous;p===this._head?(b.previous=void 0,this._head=b):(b.previous=w,w.next=b),p.next=void 0,p.previous=this._tail,this._tail.next=p,this._tail=p,this._state++}}}toJSON(){const p=[];return this.forEach((y,b)=>{p.push([b,y])}),p}fromJSON(p){this.clear();for(const[y,b]of p)this.set(y,b)}}n.LinkedMap=l;class u extends l{constructor(p,y=1){super(),this._limit=p,this._ratio=Math.min(Math.max(0,y),1)}get limit(){return this._limit}set limit(p){this._limit=p,this.checkTrim()}get ratio(){return this._ratio}set ratio(p){this._ratio=Math.min(Math.max(0,p),1),this.checkTrim()}get(p,y=s.AsNew){return super.get(p,y)}peek(p){return super.get(p,s.None)}set(p,y){return super.set(p,y,s.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}n.LRUCache=u})(Wa);var Fa={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CancellationTokenSource=n.CancellationToken=void 0;const o=En,s=yt,l=wr;var u;(function(b){b.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:l.Event.None}),b.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:l.Event.None});function w(x){const P=x;return P&&(P===b.None||P===b.Cancelled||s.boolean(P.isCancellationRequested)&&!!P.onCancellationRequested)}b.is=w})(u=n.CancellationToken||(n.CancellationToken={}));const d=Object.freeze(function(b,w){const x=(0,o.default)().timer.setTimeout(b.bind(w),0);return{dispose(){x.dispose()}}});class p{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?d:(this._emitter||(this._emitter=new l.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class y{get token(){return this._token||(this._token=new p),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof p&&this._token.dispose():this._token=u.None}}n.CancellationTokenSource=y})(Fa);var Sc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ReadableStreamMessageReader=n.AbstractMessageReader=n.MessageReader=void 0;const o=En,s=yt,l=wr;(function(y){function b(w){let x=w;return x&&s.func(x.listen)&&s.func(x.dispose)&&s.func(x.onError)&&s.func(x.onClose)&&s.func(x.onPartialMessage)}y.is=b})(n.MessageReader||(n.MessageReader={}));class u{constructor(){this.errorEmitter=new l.Emitter,this.closeEmitter=new l.Emitter,this.partialMessageEmitter=new l.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(b){this.errorEmitter.fire(this.asError(b))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(b){this.partialMessageEmitter.fire(b)}asError(b){return b instanceof Error?b:new Error(`Reader received error. Reason: ${s.string(b.message)?b.message:"unknown"}`)}}n.AbstractMessageReader=u;var d;(function(y){function b(w){var V;let x,P;const C=new Map;let S;const B=new Map;if(w===void 0||typeof w=="string")x=w!=null?w:"utf-8";else{if(x=(V=w.charset)!=null?V:"utf-8",w.contentDecoder!==void 0&&(P=w.contentDecoder,C.set(P.name,P)),w.contentDecoders!==void 0)for(const J of w.contentDecoders)C.set(J.name,J);if(w.contentTypeDecoder!==void 0&&(S=w.contentTypeDecoder,B.set(S.name,S)),w.contentTypeDecoders!==void 0)for(const J of w.contentTypeDecoders)B.set(J.name,J)}return S===void 0&&(S=(0,o.default)().applicationJson.decoder,B.set(S.name,S)),{charset:x,contentDecoder:P,contentDecoders:C,contentTypeDecoder:S,contentTypeDecoders:B}}y.fromOptions=b})(d||(d={}));class p extends u{constructor(b,w){super(),this.readable=b,this.options=d.fromOptions(w),this.buffer=(0,o.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(b){this._partialMessageTimeout=b}get partialMessageTimeout(){return this._partialMessageTimeout}listen(b){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=b;const w=this.readable.onData(x=>{this.onData(x)});return this.readable.onError(x=>this.fireError(x)),this.readable.onClose(()=>this.fireClose()),w}onData(b){for(this.buffer.append(b);;){if(this.nextMessageLength===-1){const P=this.buffer.tryReadHeaders();if(!P)return;const C=P.get("Content-Length");if(!C)throw new Error("Header must provide a Content-Length property.");const S=parseInt(C);if(isNaN(S))throw new Error("Content-Length value must be a number.");this.nextMessageLength=S}const w=this.buffer.tryReadBody(this.nextMessageLength);if(w===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let x;this.options.contentDecoder!==void 0?x=this.options.contentDecoder.decode(w):x=Promise.resolve(w),x.then(P=>{this.options.contentTypeDecoder.decode(P,this.options).then(C=>{this.callback(C)},C=>{this.fireError(C)})},P=>{this.fireError(P)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,o.default)().timer.setTimeout((b,w)=>{this.partialMessageTimer=void 0,b===this.messageToken&&(this.firePartialMessage({messageToken:b,waitingTime:w}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}n.ReadableStreamMessageReader=p})(Sc);var xc={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Semaphore=void 0;const Ih=En;class qh{constructor(o=1){if(o<=0)throw new Error("Capacity must be greater than 0");this._capacity=o,this._active=0,this._waiting=[]}lock(o){return new Promise((s,l)=>{this._waiting.push({thunk:o,resolve:s,reject:l}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ih.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const o=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const s=o.thunk();s instanceof Promise?s.then(l=>{this._active--,o.resolve(l),this.runNext()},l=>{this._active--,o.reject(l),this.runNext()}):(this._active--,o.resolve(s),this.runNext())}catch(s){this._active--,o.reject(s),this.runNext()}}}Ho.Semaphore=qh;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WriteableStreamMessageWriter=n.AbstractMessageWriter=n.MessageWriter=void 0;const o=En,s=yt,l=Ho,u=wr,d="Content-Length: ",p=`\r
`;(function(x){function P(C){let S=C;return S&&s.func(S.dispose)&&s.func(S.onClose)&&s.func(S.onError)&&s.func(S.write)}x.is=P})(n.MessageWriter||(n.MessageWriter={}));class y{constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(P,C,S){this.errorEmitter.fire([this.asError(P),C,S])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(P){return P instanceof Error?P:new Error(`Writer received error. Reason: ${s.string(P.message)?P.message:"unknown"}`)}}n.AbstractMessageWriter=y;var b;(function(x){function P(C){var S,B;return C===void 0||typeof C=="string"?{charset:C!=null?C:"utf-8",contentTypeEncoder:(0,o.default)().applicationJson.encoder}:{charset:(S=C.charset)!=null?S:"utf-8",contentEncoder:C.contentEncoder,contentTypeEncoder:(B=C.contentTypeEncoder)!=null?B:(0,o.default)().applicationJson.encoder}}x.fromOptions=P})(b||(b={}));class w extends y{constructor(P,C){super(),this.writable=P,this.options=b.fromOptions(C),this.errorCount=0,this.writeSemaphore=new l.Semaphore(1),this.writable.onError(S=>this.fireError(S)),this.writable.onClose(()=>this.fireClose())}async write(P){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(P,this.options).then(S=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(S):S).then(S=>{const B=[];return B.push(d,S.byteLength.toString(),p),B.push(p),this.doWrite(P,B,S)},S=>{throw this.fireError(S),S}))}async doWrite(P,C,S){try{return await this.writable.write(C.join(""),"ascii"),this.writable.write(S)}catch(B){return this.handleError(B,P),Promise.reject(B)}}handleError(P,C){this.errorCount++,this.fireError(P,C,this.errorCount)}end(){this.writable.end()}}n.WriteableStreamMessageWriter=w})(xc);var Rc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createMessageConnection=n.ConnectionOptions=n.CancellationStrategy=n.CancellationSenderStrategy=n.CancellationReceiverStrategy=n.ConnectionStrategy=n.ConnectionError=n.ConnectionErrors=n.LogTraceNotification=n.SetTraceNotification=n.TraceFormat=n.Trace=n.NullLogger=n.ProgressType=n.ProgressToken=void 0;const o=En,s=yt,l=Ha,u=Wa,d=wr,p=Fa;var y;(function(j){j.type=new l.NotificationType("$/cancelRequest")})(y||(y={}));var b;(function(j){function ue(se){return typeof se=="string"||typeof se=="number"}j.is=ue})(b=n.ProgressToken||(n.ProgressToken={}));var w;(function(j){j.type=new l.NotificationType("$/progress")})(w||(w={}));class x{constructor(){}}n.ProgressType=x;var P;(function(j){function ue(se){return s.func(se)}j.is=ue})(P||(P={})),n.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var C;(function(j){j[j.Off=0]="Off",j[j.Messages=1]="Messages",j[j.Compact=2]="Compact",j[j.Verbose=3]="Verbose"})(C=n.Trace||(n.Trace={})),function(j){function ue(ie){if(!s.string(ie))return j.Off;switch(ie=ie.toLowerCase(),ie){case"off":return j.Off;case"messages":return j.Messages;case"compact":return j.Compact;case"verbose":return j.Verbose;default:return j.Off}}j.fromString=ue;function se(ie){switch(ie){case j.Off:return"off";case j.Messages:return"messages";case j.Compact:return"compact";case j.Verbose:return"verbose";default:return"off"}}j.toString=se}(C=n.Trace||(n.Trace={}));var S;(function(j){j.Text="text",j.JSON="json"})(S=n.TraceFormat||(n.TraceFormat={})),function(j){function ue(se){return s.string(se)?(se=se.toLowerCase(),se==="json"?j.JSON:j.Text):j.Text}j.fromString=ue}(S=n.TraceFormat||(n.TraceFormat={}));var B;(function(j){j.type=new l.NotificationType("$/setTrace")})(B=n.SetTraceNotification||(n.SetTraceNotification={}));var V;(function(j){j.type=new l.NotificationType("$/logTrace")})(V=n.LogTraceNotification||(n.LogTraceNotification={}));var J;(function(j){j[j.Closed=1]="Closed",j[j.Disposed=2]="Disposed",j[j.AlreadyListening=3]="AlreadyListening"})(J=n.ConnectionErrors||(n.ConnectionErrors={}));class R extends Error{constructor(ue,se){super(se),this.code=ue,Object.setPrototypeOf(this,R.prototype)}}n.ConnectionError=R;var N;(function(j){function ue(se){const ie=se;return ie&&s.func(ie.cancelUndispatched)}j.is=ue})(N=n.ConnectionStrategy||(n.ConnectionStrategy={}));var D;(function(j){j.Message=Object.freeze({createCancellationTokenSource(se){return new p.CancellationTokenSource}});function ue(se){const ie=se;return ie&&s.func(ie.createCancellationTokenSource)}j.is=ue})(D=n.CancellationReceiverStrategy||(n.CancellationReceiverStrategy={}));var I;(function(j){j.Message=Object.freeze({sendCancellation(se,ie){return se.sendNotification(y.type,{id:ie})},cleanup(se){}});function ue(se){const ie=se;return ie&&s.func(ie.sendCancellation)&&s.func(ie.cleanup)}j.is=ue})(I=n.CancellationSenderStrategy||(n.CancellationSenderStrategy={}));var F;(function(j){j.Message=Object.freeze({receiver:D.Message,sender:I.Message});function ue(se){const ie=se;return ie&&D.is(ie.receiver)&&I.is(ie.sender)}j.is=ue})(F=n.CancellationStrategy||(n.CancellationStrategy={})),function(j){function ue(se){const ie=se;return ie&&(F.is(ie.cancellationStrategy)||N.is(ie.connectionStrategy))}j.is=ue}(n.ConnectionOptions||(n.ConnectionOptions={}));var $;(function(j){j[j.New=1]="New",j[j.Listening=2]="Listening",j[j.Closed=3]="Closed",j[j.Disposed=4]="Disposed"})($||($={}));function X(j,ue,se,ie){const k=se!==void 0?se:n.NullLogger;let O=0,H=0,E=0;const ve="2.0";let Re;const ge=new Map;let ke;const De=new Map,Ne=new Map;let qt,Ye=new u.LinkedMap,Ue=new Map,qe=new Set,ae=new Map,ee=C.Off,xe=S.Text,we,Nt=$.New;const Oe=new d.Emitter,ot=new d.Emitter,Kt=new d.Emitter,Xt=new d.Emitter,Le=new d.Emitter,mt=ie&&ie.cancellationStrategy?ie.cancellationStrategy:F.Message;function Yt(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+M.toString()}function st(M){return M===null?"res-unknown-"+(++E).toString():"res-"+M.toString()}function bt(){return"not-"+(++H).toString()}function Pn(M,K){l.Message.isRequest(K)?M.set(Yt(K.id),K):l.Message.isResponse(K)?M.set(st(K.id),K):M.set(bt(),K)}function rn(M){}function Mn(){return Nt===$.Listening}function rr(){return Nt===$.Closed}function yn(){return Nt===$.Disposed}function $n(){(Nt===$.New||Nt===$.Listening)&&(Nt=$.Closed,ot.fire(void 0))}function kr(M){Oe.fire([M,void 0,void 0])}function on(M){Oe.fire(M)}j.onClose($n),j.onError(kr),ue.onClose($n),ue.onError(on);function Cr(){qt||Ye.size===0||(qt=(0,o.default)().timer.setImmediate(()=>{qt=void 0,Ht()}))}function Ht(){if(Ye.size===0)return;const M=Ye.shift();try{l.Message.isRequest(M)?Nn(M):l.Message.isNotification(M)?fn(M):l.Message.isResponse(M)?Ot(M):ye(M)}finally{Cr()}}const Je=M=>{try{if(l.Message.isNotification(M)&&M.method===y.type.method){const K=M.params.id,re=Yt(K),he=Ye.get(re);if(l.Message.isRequest(he)){const Ie=ie==null?void 0:ie.connectionStrategy,Pe=Ie&&Ie.cancelUndispatched?Ie.cancelUndispatched(he,rn):void 0;if(Pe&&(Pe.error!==void 0||Pe.result!==void 0)){Ye.delete(re),ae.delete(K),Pe.id=he.id,Qe(Pe,M.method,Date.now()),ue.write(Pe).catch(()=>k.error("Sending response for canceled message failed."));return}}const $e=ae.get(K);if($e!==void 0){$e.cancel(),at(M);return}else qe.add(K)}Pn(Ye,M)}finally{Cr()}};function Nn(M){var lt;if(yn())return;function K(Me,Ke,He){const ze={jsonrpc:ve,id:M.id};Me instanceof l.ResponseError?ze.error=Me.toJson():ze.result=Me===void 0?null:Me,Qe(ze,Ke,He),ue.write(ze).catch(()=>k.error("Sending response failed."))}function re(Me,Ke,He){const ze={jsonrpc:ve,id:M.id,error:Me.toJson()};Qe(ze,Ke,He),ue.write(ze).catch(()=>k.error("Sending response failed."))}function he(Me,Ke,He){Me===void 0&&(Me=null);const ze={jsonrpc:ve,id:M.id,result:Me};Qe(ze,Ke,He),ue.write(ze).catch(()=>k.error("Sending response failed."))}Gn(M);const $e=ge.get(M.method);let Ie,Pe;$e&&(Ie=$e.type,Pe=$e.handler);const Fe=Date.now();if(Pe||Re){const Me=(lt=M.id)!=null?lt:String(Date.now()),Ke=mt.receiver.createCancellationTokenSource(Me);M.id!==null&&qe.has(M.id)&&Ke.cancel(),M.id!==null&&ae.set(Me,Ke);try{let He;if(Pe)if(M.params===void 0){if(Ie!==void 0&&Ie.numberOfParams!==0){re(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${M.method} defines ${Ie.numberOfParams} params but received none.`),M.method,Fe);return}He=Pe(Ke.token)}else if(Array.isArray(M.params)){if(Ie!==void 0&&Ie.parameterStructures===l.ParameterStructures.byName){re(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,Fe);return}He=Pe(...M.params,Ke.token)}else{if(Ie!==void 0&&Ie.parameterStructures===l.ParameterStructures.byPosition){re(new l.ResponseError(l.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,Fe);return}He=Pe(M.params,Ke.token)}else Re&&(He=Re(M.method,M.params,Ke.token));const ze=He;He?ze.then?ze.then(Ve=>{ae.delete(Me),K(Ve,M.method,Fe)},Ve=>{ae.delete(Me),Ve instanceof l.ResponseError?re(Ve,M.method,Fe):Ve&&s.string(Ve.message)?re(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${Ve.message}`),M.method,Fe):re(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Fe)}):(ae.delete(Me),K(He,M.method,Fe)):(ae.delete(Me),he(He,M.method,Fe))}catch(He){ae.delete(Me),He instanceof l.ResponseError?K(He,M.method,Fe):He&&s.string(He.message)?re(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${He.message}`),M.method,Fe):re(new l.ResponseError(l.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Fe)}}else re(new l.ResponseError(l.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,Fe)}function Ot(M){if(!yn())if(M.id===null)M.error?k.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):k.error("Received response message without id. No further error information provided.");else{const K=M.id,re=Ue.get(K);if(sn(M,re),re!==void 0){Ue.delete(K);try{if(M.error){const he=M.error;re.reject(new l.ResponseError(he.code,he.message,he.data))}else if(M.result!==void 0)re.resolve(M.result);else throw new Error("Should never happen.")}catch(he){he.message?k.error(`Response handler '${re.method}' failed with message: ${he.message}`):k.error(`Response handler '${re.method}' failed unexpectedly.`)}}}}function fn(M){if(yn())return;let K,re;if(M.method===y.type.method){const he=M.params.id;qe.delete(he),at(M);return}else{const he=De.get(M.method);he&&(re=he.handler,K=he.type)}if(re||ke)try{if(at(M),re)if(M.params===void 0)K!==void 0&&K.numberOfParams!==0&&K.parameterStructures!==l.ParameterStructures.byName&&k.error(`Notification ${M.method} defines ${K.numberOfParams} params but received none.`),re();else if(Array.isArray(M.params)){const he=M.params;M.method===w.type.method&&he.length===2&&b.is(he[0])?re({token:he[0],value:he[1]}):(K!==void 0&&(K.parameterStructures===l.ParameterStructures.byName&&k.error(`Notification ${M.method} defines parameters by name but received parameters by position`),K.numberOfParams!==M.params.length&&k.error(`Notification ${M.method} defines ${K.numberOfParams} params but received ${he.length} arguments`)),re(...he))}else K!==void 0&&K.parameterStructures===l.ParameterStructures.byPosition&&k.error(`Notification ${M.method} defines parameters by position but received parameters by name`),re(M.params);else ke&&ke(M.method,M.params)}catch(he){he.message?k.error(`Notification handler '${M.method}' failed with message: ${he.message}`):k.error(`Notification handler '${M.method}' failed unexpectedly.`)}else Kt.fire(M)}function ye(M){if(!M){k.error("Received empty message.");return}k.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);const K=M;if(s.string(K.id)||s.number(K.id)){const re=K.id,he=Ue.get(re);he&&he.reject(new Error("The received response has neither a result nor an error property."))}}function Wt(M){if(M!=null)switch(ee){case C.Verbose:return JSON.stringify(M,null,4);case C.Compact:return JSON.stringify(M);default:return}}function Lt(M){if(!(ee===C.Off||!we))if(xe===S.Text){let K;(ee===C.Verbose||ee===C.Compact)&&M.params&&(K=`Params: ${Wt(M.params)}

`),we.log(`Sending request '${M.method} - (${M.id})'.`,K)}else tt("send-request",M)}function Ce(M){if(!(ee===C.Off||!we))if(xe===S.Text){let K;(ee===C.Verbose||ee===C.Compact)&&(M.params?K=`Params: ${Wt(M.params)}

`:K=`No parameters provided.

`),we.log(`Sending notification '${M.method}'.`,K)}else tt("send-notification",M)}function Qe(M,K,re){if(!(ee===C.Off||!we))if(xe===S.Text){let he;(ee===C.Verbose||ee===C.Compact)&&(M.error&&M.error.data?he=`Error data: ${Wt(M.error.data)}

`:M.result?he=`Result: ${Wt(M.result)}

`:M.error===void 0&&(he=`No result returned.

`)),we.log(`Sending response '${K} - (${M.id})'. Processing request took ${Date.now()-re}ms`,he)}else tt("send-response",M)}function Gn(M){if(!(ee===C.Off||!we))if(xe===S.Text){let K;(ee===C.Verbose||ee===C.Compact)&&M.params&&(K=`Params: ${Wt(M.params)}

`),we.log(`Received request '${M.method} - (${M.id})'.`,K)}else tt("receive-request",M)}function at(M){if(!(ee===C.Off||!we||M.method===V.type.method))if(xe===S.Text){let K;(ee===C.Verbose||ee===C.Compact)&&(M.params?K=`Params: ${Wt(M.params)}

`:K=`No parameters provided.

`),we.log(`Received notification '${M.method}'.`,K)}else tt("receive-notification",M)}function sn(M,K){if(!(ee===C.Off||!we))if(xe===S.Text){let re;if((ee===C.Verbose||ee===C.Compact)&&(M.error&&M.error.data?re=`Error data: ${Wt(M.error.data)}

`:M.result?re=`Result: ${Wt(M.result)}

`:M.error===void 0&&(re=`No result returned.

`)),K){const he=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";we.log(`Received response '${K.method} - (${M.id})' in ${Date.now()-K.timerStart}ms.${he}`,re)}else we.log(`Received response ${M.id} without active response promise.`,re)}else tt("receive-response",M)}function tt(M,K){if(!we||ee===C.Off)return;const re={isLSPMessage:!0,type:M,message:K,timestamp:Date.now()};we.log(re)}function an(){if(rr())throw new R(J.Closed,"Connection is closed.");if(yn())throw new R(J.Disposed,"Connection is disposed.")}function Ft(){if(Mn())throw new R(J.AlreadyListening,"Connection is already listening")}function On(){if(!Mn())throw new Error("Call listen() first.")}function Vt(M){return M===void 0?null:M}function ir(M){if(M!==null)return M}function Kn(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function wt(M,K){switch(M){case l.ParameterStructures.auto:return Kn(K)?ir(K):[Vt(K)];case l.ParameterStructures.byName:if(!Kn(K))throw new Error("Received parameters by name but param is not an object literal.");return ir(K);case l.ParameterStructures.byPosition:return[Vt(K)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function or(M,K){let re;const he=M.numberOfParams;switch(he){case 0:re=void 0;break;case 1:re=wt(M.parameterStructures,K[0]);break;default:re=[];for(let $e=0;$e<K.length&&$e<he;$e++)re.push(Vt(K[$e]));if(K.length<he)for(let $e=K.length;$e<he;$e++)re.push(null);break}return re}const ln={sendNotification:(M,...K)=>{an();let re,he;if(s.string(M)){re=M;const Ie=K[0];let Pe=0,Fe=l.ParameterStructures.auto;l.ParameterStructures.is(Ie)&&(Pe=1,Fe=Ie);let lt=K.length;const Me=lt-Pe;switch(Me){case 0:he=void 0;break;case 1:he=wt(Fe,K[Pe]);break;default:if(Fe===l.ParameterStructures.byName)throw new Error(`Received ${Me} parameters for 'by Name' notification parameter structure.`);he=K.slice(Pe,lt).map(Ke=>Vt(Ke));break}}else{const Ie=K;re=M.method,he=or(M,Ie)}const $e={jsonrpc:ve,method:re,params:he};return Ce($e),ue.write($e).catch(()=>k.error("Sending notification failed."))},onNotification:(M,K)=>{an();let re;return s.func(M)?ke=M:K&&(s.string(M)?(re=M,De.set(M,{type:void 0,handler:K})):(re=M.method,De.set(M.method,{type:M,handler:K}))),{dispose:()=>{re!==void 0?De.delete(re):ke=void 0}}},onProgress:(M,K,re)=>{if(Ne.has(K))throw new Error(`Progress handler for token ${K} already registered`);return Ne.set(K,re),{dispose:()=>{Ne.delete(K)}}},sendProgress:(M,K,re)=>ln.sendNotification(w.type,{token:K,value:re}),onUnhandledProgress:Xt.event,sendRequest:(M,...K)=>{an(),On();let re,he,$e;if(s.string(M)){re=M;const lt=K[0],Me=K[K.length-1];let Ke=0,He=l.ParameterStructures.auto;l.ParameterStructures.is(lt)&&(Ke=1,He=lt);let ze=K.length;p.CancellationToken.is(Me)&&(ze=ze-1,$e=Me);const Ve=ze-Ke;switch(Ve){case 0:he=void 0;break;case 1:he=wt(He,K[Ke]);break;default:if(He===l.ParameterStructures.byName)throw new Error(`Received ${Ve} parameters for 'by Name' request parameter structure.`);he=K.slice(Ke,ze).map(ut=>Vt(ut));break}}else{const lt=K;re=M.method,he=or(M,lt);const Me=M.numberOfParams;$e=p.CancellationToken.is(lt[Me])?lt[Me]:void 0}const Ie=O++;let Pe;return $e&&(Pe=$e.onCancellationRequested(()=>{const lt=mt.sender.sendCancellation(ln,Ie);return lt===void 0?(k.log(`Received no promise from cancellation strategy when cancelling id ${Ie}`),Promise.resolve()):lt.catch(()=>{k.log(`Sending cancellation messages for id ${Ie} failed`)})})),new Promise((lt,Me)=>{const Ke={jsonrpc:ve,id:Ie,method:re,params:he},He=ut=>{lt(ut),mt.sender.cleanup(Ie),Pe==null||Pe.dispose()},ze=ut=>{Me(ut),mt.sender.cleanup(Ie),Pe==null||Pe.dispose()};let Ve={method:re,timerStart:Date.now(),resolve:He,reject:ze};Lt(Ke);try{ue.write(Ke).catch(()=>k.error("Sending request failed."))}catch(ut){Ve.reject(new l.ResponseError(l.ErrorCodes.MessageWriteError,ut.message?ut.message:"Unknown reason")),Ve=null}Ve&&Ue.set(Ie,Ve)})},onRequest:(M,K)=>{an();let re=null;return P.is(M)?(re=void 0,Re=M):s.string(M)?(re=null,K!==void 0&&(re=M,ge.set(M,{handler:K,type:void 0}))):K!==void 0&&(re=M.method,ge.set(M.method,{type:M,handler:K})),{dispose:()=>{re!==null&&(re!==void 0?ge.delete(re):Re=void 0)}}},hasPendingResponse:()=>Ue.size>0,trace:async(M,K,re)=>{let he=!1,$e=S.Text;re!==void 0&&(s.boolean(re)?he=re:(he=re.sendNotification||!1,$e=re.traceFormat||S.Text)),ee=M,xe=$e,ee===C.Off?we=void 0:we=K,he&&!rr()&&!yn()&&await ln.sendNotification(B.type,{value:C.toString(M)})},onError:Oe.event,onClose:ot.event,onUnhandledNotification:Kt.event,onDispose:Le.event,end:()=>{ue.end()},dispose:()=>{if(yn())return;Nt=$.Disposed,Le.fire(void 0);const M=new l.ResponseError(l.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const K of Ue.values())K.reject(M);Ue=new Map,ae=new Map,qe=new Set,Ye=new u.LinkedMap,s.func(ue.dispose)&&ue.dispose(),s.func(j.dispose)&&j.dispose()},listen:()=>{an(),Ft(),Nt=$.Listening,j.listen(Je)},inspect:()=>{(0,o.default)().console.log("inspect")}};return ln.onNotification(V.type,M=>{if(ee===C.Off||!we)return;const K=ee===C.Verbose||ee===C.Compact;we.log(M.message,K?M.verbose:void 0)}),ln.onNotification(w.type,M=>{const K=Ne.get(M.token);K?K(M.value):Xt.fire(M)}),ln}n.createMessageConnection=X})(Rc);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SetTraceNotification=n.TraceFormat=n.Trace=n.ProgressType=n.ProgressToken=n.createMessageConnection=n.NullLogger=n.ConnectionOptions=n.ConnectionStrategy=n.WriteableStreamMessageWriter=n.AbstractMessageWriter=n.MessageWriter=n.ReadableStreamMessageReader=n.AbstractMessageReader=n.MessageReader=n.CancellationToken=n.CancellationTokenSource=n.Emitter=n.Event=n.Disposable=n.LRUCache=n.Touch=n.LinkedMap=n.ParameterStructures=n.NotificationType9=n.NotificationType8=n.NotificationType7=n.NotificationType6=n.NotificationType5=n.NotificationType4=n.NotificationType3=n.NotificationType2=n.NotificationType1=n.NotificationType0=n.NotificationType=n.ErrorCodes=n.ResponseError=n.RequestType9=n.RequestType8=n.RequestType7=n.RequestType6=n.RequestType5=n.RequestType4=n.RequestType3=n.RequestType2=n.RequestType1=n.RequestType0=n.RequestType=n.Message=n.RAL=void 0,n.CancellationStrategy=n.CancellationSenderStrategy=n.CancellationReceiverStrategy=n.ConnectionError=n.ConnectionErrors=n.LogTraceNotification=void 0;const o=Ha;Object.defineProperty(n,"Message",{enumerable:!0,get:function(){return o.Message}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return o.RequestType}}),Object.defineProperty(n,"RequestType0",{enumerable:!0,get:function(){return o.RequestType0}}),Object.defineProperty(n,"RequestType1",{enumerable:!0,get:function(){return o.RequestType1}}),Object.defineProperty(n,"RequestType2",{enumerable:!0,get:function(){return o.RequestType2}}),Object.defineProperty(n,"RequestType3",{enumerable:!0,get:function(){return o.RequestType3}}),Object.defineProperty(n,"RequestType4",{enumerable:!0,get:function(){return o.RequestType4}}),Object.defineProperty(n,"RequestType5",{enumerable:!0,get:function(){return o.RequestType5}}),Object.defineProperty(n,"RequestType6",{enumerable:!0,get:function(){return o.RequestType6}}),Object.defineProperty(n,"RequestType7",{enumerable:!0,get:function(){return o.RequestType7}}),Object.defineProperty(n,"RequestType8",{enumerable:!0,get:function(){return o.RequestType8}}),Object.defineProperty(n,"RequestType9",{enumerable:!0,get:function(){return o.RequestType9}}),Object.defineProperty(n,"ResponseError",{enumerable:!0,get:function(){return o.ResponseError}}),Object.defineProperty(n,"ErrorCodes",{enumerable:!0,get:function(){return o.ErrorCodes}}),Object.defineProperty(n,"NotificationType",{enumerable:!0,get:function(){return o.NotificationType}}),Object.defineProperty(n,"NotificationType0",{enumerable:!0,get:function(){return o.NotificationType0}}),Object.defineProperty(n,"NotificationType1",{enumerable:!0,get:function(){return o.NotificationType1}}),Object.defineProperty(n,"NotificationType2",{enumerable:!0,get:function(){return o.NotificationType2}}),Object.defineProperty(n,"NotificationType3",{enumerable:!0,get:function(){return o.NotificationType3}}),Object.defineProperty(n,"NotificationType4",{enumerable:!0,get:function(){return o.NotificationType4}}),Object.defineProperty(n,"NotificationType5",{enumerable:!0,get:function(){return o.NotificationType5}}),Object.defineProperty(n,"NotificationType6",{enumerable:!0,get:function(){return o.NotificationType6}}),Object.defineProperty(n,"NotificationType7",{enumerable:!0,get:function(){return o.NotificationType7}}),Object.defineProperty(n,"NotificationType8",{enumerable:!0,get:function(){return o.NotificationType8}}),Object.defineProperty(n,"NotificationType9",{enumerable:!0,get:function(){return o.NotificationType9}}),Object.defineProperty(n,"ParameterStructures",{enumerable:!0,get:function(){return o.ParameterStructures}});const s=Wa;Object.defineProperty(n,"LinkedMap",{enumerable:!0,get:function(){return s.LinkedMap}}),Object.defineProperty(n,"LRUCache",{enumerable:!0,get:function(){return s.LRUCache}}),Object.defineProperty(n,"Touch",{enumerable:!0,get:function(){return s.Touch}});const l=qa;Object.defineProperty(n,"Disposable",{enumerable:!0,get:function(){return l.Disposable}});const u=wr;Object.defineProperty(n,"Event",{enumerable:!0,get:function(){return u.Event}}),Object.defineProperty(n,"Emitter",{enumerable:!0,get:function(){return u.Emitter}});const d=Fa;Object.defineProperty(n,"CancellationTokenSource",{enumerable:!0,get:function(){return d.CancellationTokenSource}}),Object.defineProperty(n,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});const p=Sc;Object.defineProperty(n,"MessageReader",{enumerable:!0,get:function(){return p.MessageReader}}),Object.defineProperty(n,"AbstractMessageReader",{enumerable:!0,get:function(){return p.AbstractMessageReader}}),Object.defineProperty(n,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return p.ReadableStreamMessageReader}});const y=xc;Object.defineProperty(n,"MessageWriter",{enumerable:!0,get:function(){return y.MessageWriter}}),Object.defineProperty(n,"AbstractMessageWriter",{enumerable:!0,get:function(){return y.AbstractMessageWriter}}),Object.defineProperty(n,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return y.WriteableStreamMessageWriter}});const b=Rc;Object.defineProperty(n,"ConnectionStrategy",{enumerable:!0,get:function(){return b.ConnectionStrategy}}),Object.defineProperty(n,"ConnectionOptions",{enumerable:!0,get:function(){return b.ConnectionOptions}}),Object.defineProperty(n,"NullLogger",{enumerable:!0,get:function(){return b.NullLogger}}),Object.defineProperty(n,"createMessageConnection",{enumerable:!0,get:function(){return b.createMessageConnection}}),Object.defineProperty(n,"ProgressToken",{enumerable:!0,get:function(){return b.ProgressToken}}),Object.defineProperty(n,"ProgressType",{enumerable:!0,get:function(){return b.ProgressType}}),Object.defineProperty(n,"Trace",{enumerable:!0,get:function(){return b.Trace}}),Object.defineProperty(n,"TraceFormat",{enumerable:!0,get:function(){return b.TraceFormat}}),Object.defineProperty(n,"SetTraceNotification",{enumerable:!0,get:function(){return b.SetTraceNotification}}),Object.defineProperty(n,"LogTraceNotification",{enumerable:!0,get:function(){return b.LogTraceNotification}}),Object.defineProperty(n,"ConnectionErrors",{enumerable:!0,get:function(){return b.ConnectionErrors}}),Object.defineProperty(n,"ConnectionError",{enumerable:!0,get:function(){return b.ConnectionError}}),Object.defineProperty(n,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return b.CancellationReceiverStrategy}}),Object.defineProperty(n,"CancellationSenderStrategy",{enumerable:!0,get:function(){return b.CancellationSenderStrategy}}),Object.defineProperty(n,"CancellationStrategy",{enumerable:!0,get:function(){return b.CancellationStrategy}});const w=En;n.RAL=w.default})(Hs);(function(n){var o=nn&&nn.__createBinding||(Object.create?function(b,w,x,P){P===void 0&&(P=x);var C=Object.getOwnPropertyDescriptor(w,x);(!C||("get"in C?!w.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return w[x]}}),Object.defineProperty(b,P,C)}:function(b,w,x,P){P===void 0&&(P=x),b[P]=w[x]}),s=nn&&nn.__exportStar||function(b,w){for(var x in b)x!=="default"&&!Object.prototype.hasOwnProperty.call(w,x)&&o(w,b,x)};Object.defineProperty(n,"__esModule",{value:!0}),n.createMessageConnection=n.BrowserMessageWriter=n.BrowserMessageReader=void 0,Ia.default.install();const u=Hs;s(Hs,n);class d extends u.AbstractMessageReader{constructor(w){super(),this._onData=new u.Emitter,this._messageListener=x=>{this._onData.fire(x.data)},w.addEventListener("error",x=>this.fireError(x)),w.onmessage=this._messageListener}listen(w){return this._onData.event(w)}}n.BrowserMessageReader=d;class p extends u.AbstractMessageWriter{constructor(w){super(),this.context=w,this.errorCount=0,w.addEventListener("error",x=>this.fireError(x))}write(w){try{return this.context.postMessage(w),Promise.resolve()}catch(x){return this.handleError(x,w),Promise.reject(x)}}handleError(w,x){this.errorCount++,this.fireError(w,x,this.errorCount)}end(){}}n.BrowserMessageWriter=p;function y(b,w,x,P){return x===void 0&&(x=u.NullLogger),u.ConnectionStrategy.is(P)&&(P={connectionStrategy:P}),(0,u.createMessageConnection)(b,w,x,P)}n.createMessageConnection=y})(gt);var Vu=gt,_c={},Ws;(function(n){function o(s){return typeof s=="string"}n.is=o})(Ws||(Ws={}));var To;(function(n){function o(s){return typeof s=="string"}n.is=o})(To||(To={}));var Fs;(function(n){n.MIN_VALUE=-2147483648,n.MAX_VALUE=2147483647;function o(s){return typeof s=="number"&&n.MIN_VALUE<=s&&s<=n.MAX_VALUE}n.is=o})(Fs||(Fs={}));var Pi;(function(n){n.MIN_VALUE=0,n.MAX_VALUE=2147483647;function o(s){return typeof s=="number"&&n.MIN_VALUE<=s&&s<=n.MAX_VALUE}n.is=o})(Pi||(Pi={}));var cn;(function(n){function o(l,u){return l===Number.MAX_VALUE&&(l=Pi.MAX_VALUE),u===Number.MAX_VALUE&&(u=Pi.MAX_VALUE),{line:l,character:u}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&W.uinteger(u.line)&&W.uinteger(u.character)}n.is=s})(cn||(cn={}));var dt;(function(n){function o(l,u,d,p){if(W.uinteger(l)&&W.uinteger(u)&&W.uinteger(d)&&W.uinteger(p))return{start:cn.create(l,u),end:cn.create(d,p)};if(cn.is(l)&&cn.is(u))return{start:l,end:u};throw new Error("Range#create called with invalid arguments[".concat(l,", ").concat(u,", ").concat(d,", ").concat(p,"]"))}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&cn.is(u.start)&&cn.is(u.end)}n.is=s})(dt||(dt={}));var Mi;(function(n){function o(l,u){return{uri:l,range:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&dt.is(u.range)&&(W.string(u.uri)||W.undefined(u.uri))}n.is=s})(Mi||(Mi={}));var zs;(function(n){function o(l,u,d,p){return{targetUri:l,targetRange:u,targetSelectionRange:d,originSelectionRange:p}}n.create=o;function s(l){var u=l;return W.defined(u)&&dt.is(u.targetRange)&&W.string(u.targetUri)&&dt.is(u.targetSelectionRange)&&(dt.is(u.originSelectionRange)||W.undefined(u.originSelectionRange))}n.is=s})(zs||(zs={}));var So;(function(n){function o(l,u,d,p){return{red:l,green:u,blue:d,alpha:p}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&W.numberRange(u.red,0,1)&&W.numberRange(u.green,0,1)&&W.numberRange(u.blue,0,1)&&W.numberRange(u.alpha,0,1)}n.is=s})(So||(So={}));var js;(function(n){function o(l,u){return{range:l,color:u}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&dt.is(u.range)&&So.is(u.color)}n.is=s})(js||(js={}));var Bs;(function(n){function o(l,u,d){return{label:l,textEdit:u,additionalTextEdits:d}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&W.string(u.label)&&(W.undefined(u.textEdit)||Ln.is(u))&&(W.undefined(u.additionalTextEdits)||W.typedArray(u.additionalTextEdits,Ln.is))}n.is=s})(Bs||(Bs={}));var Us;(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(Us||(Us={}));var $s;(function(n){function o(l,u,d,p,y,b){var w={startLine:l,endLine:u};return W.defined(d)&&(w.startCharacter=d),W.defined(p)&&(w.endCharacter=p),W.defined(y)&&(w.kind=y),W.defined(b)&&(w.collapsedText=b),w}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&W.uinteger(u.startLine)&&W.uinteger(u.startLine)&&(W.undefined(u.startCharacter)||W.uinteger(u.startCharacter))&&(W.undefined(u.endCharacter)||W.uinteger(u.endCharacter))&&(W.undefined(u.kind)||W.string(u.kind))}n.is=s})($s||($s={}));var xo;(function(n){function o(l,u){return{location:l,message:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&Mi.is(u.location)&&W.string(u.message)}n.is=s})(xo||(xo={}));var Gs;(function(n){n.Error=1,n.Warning=2,n.Information=3,n.Hint=4})(Gs||(Gs={}));var Ks;(function(n){n.Unnecessary=1,n.Deprecated=2})(Ks||(Ks={}));var Xs;(function(n){function o(s){var l=s;return W.objectLiteral(l)&&W.string(l.href)}n.is=o})(Xs||(Xs={}));var Ni;(function(n){function o(l,u,d,p,y,b){var w={range:l,message:u};return W.defined(d)&&(w.severity=d),W.defined(p)&&(w.code=p),W.defined(y)&&(w.source=y),W.defined(b)&&(w.relatedInformation=b),w}n.create=o;function s(l){var u,d=l;return W.defined(d)&&dt.is(d.range)&&W.string(d.message)&&(W.number(d.severity)||W.undefined(d.severity))&&(W.integer(d.code)||W.string(d.code)||W.undefined(d.code))&&(W.undefined(d.codeDescription)||W.string((u=d.codeDescription)===null||u===void 0?void 0:u.href))&&(W.string(d.source)||W.undefined(d.source))&&(W.undefined(d.relatedInformation)||W.typedArray(d.relatedInformation,xo.is))}n.is=s})(Ni||(Ni={}));var br;(function(n){function o(l,u){for(var d=[],p=2;p<arguments.length;p++)d[p-2]=arguments[p];var y={title:l,command:u};return W.defined(d)&&d.length>0&&(y.arguments=d),y}n.create=o;function s(l){var u=l;return W.defined(u)&&W.string(u.title)&&W.string(u.command)}n.is=s})(br||(br={}));var Ln;(function(n){function o(d,p){return{range:d,newText:p}}n.replace=o;function s(d,p){return{range:{start:d,end:d},newText:p}}n.insert=s;function l(d){return{range:d,newText:""}}n.del=l;function u(d){var p=d;return W.objectLiteral(p)&&W.string(p.newText)&&dt.is(p.range)}n.is=u})(Ln||(Ln={}));var yr;(function(n){function o(l,u,d){var p={label:l};return u!==void 0&&(p.needsConfirmation=u),d!==void 0&&(p.description=d),p}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&W.string(u.label)&&(W.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(W.string(u.description)||u.description===void 0)}n.is=s})(yr||(yr={}));var Mt;(function(n){function o(s){var l=s;return W.string(l)}n.is=o})(Mt||(Mt={}));var zn;(function(n){function o(d,p,y){return{range:d,newText:p,annotationId:y}}n.replace=o;function s(d,p,y){return{range:{start:d,end:d},newText:p,annotationId:y}}n.insert=s;function l(d,p){return{range:d,newText:"",annotationId:p}}n.del=l;function u(d){var p=d;return Ln.is(p)&&(yr.is(p.annotationId)||Mt.is(p.annotationId))}n.is=u})(zn||(zn={}));var Oi;(function(n){function o(l,u){return{textDocument:l,edits:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&Ai.is(u.textDocument)&&Array.isArray(u.edits)}n.is=s})(Oi||(Oi={}));var Gr;(function(n){function o(l,u,d){var p={kind:"create",uri:l};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(p.options=u),d!==void 0&&(p.annotationId=d),p}n.create=o;function s(l){var u=l;return u&&u.kind==="create"&&W.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||W.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||W.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}n.is=s})(Gr||(Gr={}));var Kr;(function(n){function o(l,u,d,p){var y={kind:"rename",oldUri:l,newUri:u};return d!==void 0&&(d.overwrite!==void 0||d.ignoreIfExists!==void 0)&&(y.options=d),p!==void 0&&(y.annotationId=p),y}n.create=o;function s(l){var u=l;return u&&u.kind==="rename"&&W.string(u.oldUri)&&W.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||W.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||W.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}n.is=s})(Kr||(Kr={}));var Xr;(function(n){function o(l,u,d){var p={kind:"delete",uri:l};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(p.options=u),d!==void 0&&(p.annotationId=d),p}n.create=o;function s(l){var u=l;return u&&u.kind==="delete"&&W.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||W.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||W.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||Mt.is(u.annotationId))}n.is=s})(Xr||(Xr={}));var Ro;(function(n){function o(s){var l=s;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(u){return W.string(u.kind)?Gr.is(u)||Kr.is(u)||Xr.is(u):Oi.is(u)}))}n.is=o})(Ro||(Ro={}));var vo=function(){function n(o,s){this.edits=o,this.changeAnnotations=s}return n.prototype.insert=function(o,s,l){var u,d;if(l===void 0?u=Ln.insert(o,s):Mt.is(l)?(d=l,u=zn.insert(o,s,l)):(this.assertChangeAnnotations(this.changeAnnotations),d=this.changeAnnotations.manage(l),u=zn.insert(o,s,d)),this.edits.push(u),d!==void 0)return d},n.prototype.replace=function(o,s,l){var u,d;if(l===void 0?u=Ln.replace(o,s):Mt.is(l)?(d=l,u=zn.replace(o,s,l)):(this.assertChangeAnnotations(this.changeAnnotations),d=this.changeAnnotations.manage(l),u=zn.replace(o,s,d)),this.edits.push(u),d!==void 0)return d},n.prototype.delete=function(o,s){var l,u;if(s===void 0?l=Ln.del(o):Mt.is(s)?(u=s,l=zn.del(o,s)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(s),l=zn.del(o,u)),this.edits.push(l),u!==void 0)return u},n.prototype.add=function(o){this.edits.push(o)},n.prototype.all=function(){return this.edits},n.prototype.clear=function(){this.edits.splice(0,this.edits.length)},n.prototype.assertChangeAnnotations=function(o){if(o===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},n}(),Zu=function(){function n(o){this._annotations=o===void 0?Object.create(null):o,this._counter=0,this._size=0}return n.prototype.all=function(){return this._annotations},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype.manage=function(o,s){var l;if(Mt.is(o)?l=o:(l=this.nextId(),s=o),this._annotations[l]!==void 0)throw new Error("Id ".concat(l," is already in use."));if(s===void 0)throw new Error("No annotation provided for id ".concat(l));return this._annotations[l]=s,this._size++,l},n.prototype.nextId=function(){return this._counter++,this._counter.toString()},n}(),Hh=function(){function n(o){var s=this;this._textEditChanges=Object.create(null),o!==void 0?(this._workspaceEdit=o,o.documentChanges?(this._changeAnnotations=new Zu(o.changeAnnotations),o.changeAnnotations=this._changeAnnotations.all(),o.documentChanges.forEach(function(l){if(Oi.is(l)){var u=new vo(l.edits,s._changeAnnotations);s._textEditChanges[l.textDocument.uri]=u}})):o.changes&&Object.keys(o.changes).forEach(function(l){var u=new vo(o.changes[l]);s._textEditChanges[l]=u})):this._workspaceEdit={}}return Object.defineProperty(n.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),n.prototype.getTextEditChange=function(o){if(Ai.is(o)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s={uri:o.uri,version:o.version},l=this._textEditChanges[s.uri];if(!l){var u=[],d={textDocument:s,edits:u};this._workspaceEdit.documentChanges.push(d),l=new vo(u,this._changeAnnotations),this._textEditChanges[s.uri]=l}return l}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[o];if(!l){var u=[];this._workspaceEdit.changes[o]=u,l=new vo(u),this._textEditChanges[o]=l}return l}},n.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Zu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},n.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},n.prototype.createFile=function(o,s,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;yr.is(s)||Mt.is(s)?u=s:l=s;var d,p;if(u===void 0?d=Gr.create(o,l):(p=Mt.is(u)?u:this._changeAnnotations.manage(u),d=Gr.create(o,l,p)),this._workspaceEdit.documentChanges.push(d),p!==void 0)return p},n.prototype.renameFile=function(o,s,l,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var d;yr.is(l)||Mt.is(l)?d=l:u=l;var p,y;if(d===void 0?p=Kr.create(o,s,u):(y=Mt.is(d)?d:this._changeAnnotations.manage(d),p=Kr.create(o,s,u,y)),this._workspaceEdit.documentChanges.push(p),y!==void 0)return y},n.prototype.deleteFile=function(o,s,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;yr.is(s)||Mt.is(s)?u=s:l=s;var d,p;if(u===void 0?d=Xr.create(o,l):(p=Mt.is(u)?u:this._changeAnnotations.manage(u),d=Xr.create(o,l,p)),this._workspaceEdit.documentChanges.push(d),p!==void 0)return p},n}(),Ys;(function(n){function o(l){return{uri:l}}n.create=o;function s(l){var u=l;return W.defined(u)&&W.string(u.uri)}n.is=s})(Ys||(Ys={}));var Vs;(function(n){function o(l,u){return{uri:l,version:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&W.string(u.uri)&&W.integer(u.version)}n.is=s})(Vs||(Vs={}));var Ai;(function(n){function o(l,u){return{uri:l,version:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&W.string(u.uri)&&(u.version===null||W.integer(u.version))}n.is=s})(Ai||(Ai={}));var Zs;(function(n){function o(l,u,d,p){return{uri:l,languageId:u,version:d,text:p}}n.create=o;function s(l){var u=l;return W.defined(u)&&W.string(u.uri)&&W.string(u.languageId)&&W.integer(u.version)&&W.string(u.text)}n.is=s})(Zs||(Zs={}));var _o;(function(n){n.PlainText="plaintext",n.Markdown="markdown";function o(s){var l=s;return l===n.PlainText||l===n.Markdown}n.is=o})(_o||(_o={}));var Yr;(function(n){function o(s){var l=s;return W.objectLiteral(s)&&_o.is(l.kind)&&W.string(l.value)}n.is=o})(Yr||(Yr={}));var Qs;(function(n){n.Text=1,n.Method=2,n.Function=3,n.Constructor=4,n.Field=5,n.Variable=6,n.Class=7,n.Interface=8,n.Module=9,n.Property=10,n.Unit=11,n.Value=12,n.Enum=13,n.Keyword=14,n.Snippet=15,n.Color=16,n.File=17,n.Reference=18,n.Folder=19,n.EnumMember=20,n.Constant=21,n.Struct=22,n.Event=23,n.Operator=24,n.TypeParameter=25})(Qs||(Qs={}));var Js;(function(n){n.PlainText=1,n.Snippet=2})(Js||(Js={}));var ea;(function(n){n.Deprecated=1})(ea||(ea={}));var ta;(function(n){function o(l,u,d){return{newText:l,insert:u,replace:d}}n.create=o;function s(l){var u=l;return u&&W.string(u.newText)&&dt.is(u.insert)&&dt.is(u.replace)}n.is=s})(ta||(ta={}));var na;(function(n){n.asIs=1,n.adjustIndentation=2})(na||(na={}));var ra;(function(n){function o(s){var l=s;return l&&(W.string(l.detail)||l.detail===void 0)&&(W.string(l.description)||l.description===void 0)}n.is=o})(ra||(ra={}));var ia;(function(n){function o(s){return{label:s}}n.create=o})(ia||(ia={}));var oa;(function(n){function o(s,l){return{items:s||[],isIncomplete:!!l}}n.create=o})(oa||(oa={}));var Ii;(function(n){function o(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=o;function s(l){var u=l;return W.string(u)||W.objectLiteral(u)&&W.string(u.language)&&W.string(u.value)}n.is=s})(Ii||(Ii={}));var sa;(function(n){function o(s){var l=s;return!!l&&W.objectLiteral(l)&&(Yr.is(l.contents)||Ii.is(l.contents)||W.typedArray(l.contents,Ii.is))&&(s.range===void 0||dt.is(s.range))}n.is=o})(sa||(sa={}));var aa;(function(n){function o(s,l){return l?{label:s,documentation:l}:{label:s}}n.create=o})(aa||(aa={}));var la;(function(n){function o(s,l){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var p={label:s};return W.defined(l)&&(p.documentation=l),W.defined(u)?p.parameters=u:p.parameters=[],p}n.create=o})(la||(la={}));var ua;(function(n){n.Text=1,n.Read=2,n.Write=3})(ua||(ua={}));var ca;(function(n){function o(s,l){var u={range:s};return W.number(l)&&(u.kind=l),u}n.create=o})(ca||(ca={}));var fa;(function(n){n.File=1,n.Module=2,n.Namespace=3,n.Package=4,n.Class=5,n.Method=6,n.Property=7,n.Field=8,n.Constructor=9,n.Enum=10,n.Interface=11,n.Function=12,n.Variable=13,n.Constant=14,n.String=15,n.Number=16,n.Boolean=17,n.Array=18,n.Object=19,n.Key=20,n.Null=21,n.EnumMember=22,n.Struct=23,n.Event=24,n.Operator=25,n.TypeParameter=26})(fa||(fa={}));var da;(function(n){n.Deprecated=1})(da||(da={}));var ha;(function(n){function o(s,l,u,d,p){var y={name:s,kind:l,location:{uri:d,range:u}};return p&&(y.containerName=p),y}n.create=o})(ha||(ha={}));var pa;(function(n){function o(s,l,u,d){return d!==void 0?{name:s,kind:l,location:{uri:u,range:d}}:{name:s,kind:l,location:{uri:u}}}n.create=o})(pa||(pa={}));var ga;(function(n){function o(l,u,d,p,y,b){var w={name:l,detail:u,kind:d,range:p,selectionRange:y};return b!==void 0&&(w.children=b),w}n.create=o;function s(l){var u=l;return u&&W.string(u.name)&&W.number(u.kind)&&dt.is(u.range)&&dt.is(u.selectionRange)&&(u.detail===void 0||W.string(u.detail))&&(u.deprecated===void 0||W.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}n.is=s})(ga||(ga={}));var ma;(function(n){n.Empty="",n.QuickFix="quickfix",n.Refactor="refactor",n.RefactorExtract="refactor.extract",n.RefactorInline="refactor.inline",n.RefactorRewrite="refactor.rewrite",n.Source="source",n.SourceOrganizeImports="source.organizeImports",n.SourceFixAll="source.fixAll"})(ma||(ma={}));var qi;(function(n){n.Invoked=1,n.Automatic=2})(qi||(qi={}));var va;(function(n){function o(l,u,d){var p={diagnostics:l};return u!=null&&(p.only=u),d!=null&&(p.triggerKind=d),p}n.create=o;function s(l){var u=l;return W.defined(u)&&W.typedArray(u.diagnostics,Ni.is)&&(u.only===void 0||W.typedArray(u.only,W.string))&&(u.triggerKind===void 0||u.triggerKind===qi.Invoked||u.triggerKind===qi.Automatic)}n.is=s})(va||(va={}));var ya;(function(n){function o(l,u,d){var p={title:l},y=!0;return typeof u=="string"?(y=!1,p.kind=u):br.is(u)?p.command=u:p.edit=u,y&&d!==void 0&&(p.kind=d),p}n.create=o;function s(l){var u=l;return u&&W.string(u.title)&&(u.diagnostics===void 0||W.typedArray(u.diagnostics,Ni.is))&&(u.kind===void 0||W.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||br.is(u.command))&&(u.isPreferred===void 0||W.boolean(u.isPreferred))&&(u.edit===void 0||Ro.is(u.edit))}n.is=s})(ya||(ya={}));var ba;(function(n){function o(l,u){var d={range:l};return W.defined(u)&&(d.data=u),d}n.create=o;function s(l){var u=l;return W.defined(u)&&dt.is(u.range)&&(W.undefined(u.command)||br.is(u.command))}n.is=s})(ba||(ba={}));var wa;(function(n){function o(l,u){return{tabSize:l,insertSpaces:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&W.uinteger(u.tabSize)&&W.boolean(u.insertSpaces)}n.is=s})(wa||(wa={}));var ka;(function(n){function o(l,u,d){return{range:l,target:u,data:d}}n.create=o;function s(l){var u=l;return W.defined(u)&&dt.is(u.range)&&(W.undefined(u.target)||W.string(u.target))}n.is=s})(ka||(ka={}));var Ca;(function(n){function o(l,u){return{range:l,parent:u}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&dt.is(u.range)&&(u.parent===void 0||n.is(u.parent))}n.is=s})(Ca||(Ca={}));var Ta;(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",n.decorator="decorator"})(Ta||(Ta={}));var Sa;(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(Sa||(Sa={}));var xa;(function(n){function o(s){var l=s;return W.objectLiteral(l)&&(l.resultId===void 0||typeof l.resultId=="string")&&Array.isArray(l.data)&&(l.data.length===0||typeof l.data[0]=="number")}n.is=o})(xa||(xa={}));var Ra;(function(n){function o(l,u){return{range:l,text:u}}n.create=o;function s(l){var u=l;return u!=null&&dt.is(u.range)&&W.string(u.text)}n.is=s})(Ra||(Ra={}));var _a;(function(n){function o(l,u,d){return{range:l,variableName:u,caseSensitiveLookup:d}}n.create=o;function s(l){var u=l;return u!=null&&dt.is(u.range)&&W.boolean(u.caseSensitiveLookup)&&(W.string(u.variableName)||u.variableName===void 0)}n.is=s})(_a||(_a={}));var La;(function(n){function o(l,u){return{range:l,expression:u}}n.create=o;function s(l){var u=l;return u!=null&&dt.is(u.range)&&(W.string(u.expression)||u.expression===void 0)}n.is=s})(La||(La={}));var Da;(function(n){function o(l,u){return{frameId:l,stoppedLocation:u}}n.create=o;function s(l){var u=l;return W.defined(u)&&dt.is(l.stoppedLocation)}n.is=s})(Da||(Da={}));var Lo;(function(n){n.Type=1,n.Parameter=2;function o(s){return s===1||s===2}n.is=o})(Lo||(Lo={}));var Do;(function(n){function o(l){return{value:l}}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&(u.tooltip===void 0||W.string(u.tooltip)||Yr.is(u.tooltip))&&(u.location===void 0||Mi.is(u.location))&&(u.command===void 0||br.is(u.command))}n.is=s})(Do||(Do={}));var Ea;(function(n){function o(l,u,d){var p={position:l,label:u};return d!==void 0&&(p.kind=d),p}n.create=o;function s(l){var u=l;return W.objectLiteral(u)&&cn.is(u.position)&&(W.string(u.label)||W.typedArray(u.label,Do.is))&&(u.kind===void 0||Lo.is(u.kind))&&u.textEdits===void 0||W.typedArray(u.textEdits,Ln.is)&&(u.tooltip===void 0||W.string(u.tooltip)||Yr.is(u.tooltip))&&(u.paddingLeft===void 0||W.boolean(u.paddingLeft))&&(u.paddingRight===void 0||W.boolean(u.paddingRight))}n.is=s})(Ea||(Ea={}));var Pa;(function(n){function o(s){var l=s;return W.objectLiteral(l)&&To.is(l.uri)&&W.string(l.name)}n.is=o})(Pa||(Pa={}));var Wh=[`
`,`\r
`,"\r"],Ma;(function(n){function o(d,p,y,b){return new Fh(d,p,y,b)}n.create=o;function s(d){var p=d;return!!(W.defined(p)&&W.string(p.uri)&&(W.undefined(p.languageId)||W.string(p.languageId))&&W.uinteger(p.lineCount)&&W.func(p.getText)&&W.func(p.positionAt)&&W.func(p.offsetAt))}n.is=s;function l(d,p){for(var y=d.getText(),b=u(p,function(B,V){var J=B.range.start.line-V.range.start.line;return J===0?B.range.start.character-V.range.start.character:J}),w=y.length,x=b.length-1;x>=0;x--){var P=b[x],C=d.offsetAt(P.range.start),S=d.offsetAt(P.range.end);if(S<=w)y=y.substring(0,C)+P.newText+y.substring(S,y.length);else throw new Error("Overlapping edit");w=C}return y}n.applyEdits=l;function u(d,p){if(d.length<=1)return d;var y=d.length/2|0,b=d.slice(0,y),w=d.slice(y);u(b,p),u(w,p);for(var x=0,P=0,C=0;x<b.length&&P<w.length;){var S=p(b[x],w[P]);S<=0?d[C++]=b[x++]:d[C++]=w[P++]}for(;x<b.length;)d[C++]=b[x++];for(;P<w.length;)d[C++]=w[P++];return d}})(Ma||(Ma={}));var Fh=function(){function n(o,s,l,u){this._uri=o,this._languageId=s,this._version=l,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),n.prototype.getText=function(o){if(o){var s=this.offsetAt(o.start),l=this.offsetAt(o.end);return this._content.substring(s,l)}return this._content},n.prototype.update=function(o,s){this._content=o.text,this._version=s,this._lineOffsets=void 0},n.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var o=[],s=this._content,l=!0,u=0;u<s.length;u++){l&&(o.push(u),l=!1);var d=s.charAt(u);l=d==="\r"||d===`
`,d==="\r"&&u+1<s.length&&s.charAt(u+1)===`
`&&u++}l&&s.length>0&&o.push(s.length),this._lineOffsets=o}return this._lineOffsets},n.prototype.positionAt=function(o){o=Math.max(Math.min(o,this._content.length),0);var s=this.getLineOffsets(),l=0,u=s.length;if(u===0)return cn.create(0,o);for(;l<u;){var d=Math.floor((l+u)/2);s[d]>o?u=d:l=d+1}var p=l-1;return cn.create(p,o-s[p])},n.prototype.offsetAt=function(o){var s=this.getLineOffsets();if(o.line>=s.length)return this._content.length;if(o.line<0)return 0;var l=s[o.line],u=o.line+1<s.length?s[o.line+1]:this._content.length;return Math.max(Math.min(l+o.character,u),l)},Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),n}(),W;(function(n){var o=Object.prototype.toString;function s(S){return typeof S!="undefined"}n.defined=s;function l(S){return typeof S=="undefined"}n.undefined=l;function u(S){return S===!0||S===!1}n.boolean=u;function d(S){return o.call(S)==="[object String]"}n.string=d;function p(S){return o.call(S)==="[object Number]"}n.number=p;function y(S,B,V){return o.call(S)==="[object Number]"&&B<=S&&S<=V}n.numberRange=y;function b(S){return o.call(S)==="[object Number]"&&-2147483648<=S&&S<=2147483647}n.integer=b;function w(S){return o.call(S)==="[object Number]"&&0<=S&&S<=2147483647}n.uinteger=w;function x(S){return o.call(S)==="[object Function]"}n.func=x;function P(S){return S!==null&&typeof S=="object"}n.objectLiteral=P;function C(S,B){return Array.isArray(S)&&S.every(B)}n.typedArray=C})(W||(W={}));var zh=Object.freeze(Object.defineProperty({__proto__:null,get DocumentUri(){return Ws},get URI(){return To},get integer(){return Fs},get uinteger(){return Pi},get Position(){return cn},get Range(){return dt},get Location(){return Mi},get LocationLink(){return zs},get Color(){return So},get ColorInformation(){return js},get ColorPresentation(){return Bs},get FoldingRangeKind(){return Us},get FoldingRange(){return $s},get DiagnosticRelatedInformation(){return xo},get DiagnosticSeverity(){return Gs},get DiagnosticTag(){return Ks},get CodeDescription(){return Xs},get Diagnostic(){return Ni},get Command(){return br},get TextEdit(){return Ln},get ChangeAnnotation(){return yr},get ChangeAnnotationIdentifier(){return Mt},get AnnotatedTextEdit(){return zn},get TextDocumentEdit(){return Oi},get CreateFile(){return Gr},get RenameFile(){return Kr},get DeleteFile(){return Xr},get WorkspaceEdit(){return Ro},WorkspaceChange:Hh,get TextDocumentIdentifier(){return Ys},get VersionedTextDocumentIdentifier(){return Vs},get OptionalVersionedTextDocumentIdentifier(){return Ai},get TextDocumentItem(){return Zs},get MarkupKind(){return _o},get MarkupContent(){return Yr},get CompletionItemKind(){return Qs},get InsertTextFormat(){return Js},get CompletionItemTag(){return ea},get InsertReplaceEdit(){return ta},get InsertTextMode(){return na},get CompletionItemLabelDetails(){return ra},get CompletionItem(){return ia},get CompletionList(){return oa},get MarkedString(){return Ii},get Hover(){return sa},get ParameterInformation(){return aa},get SignatureInformation(){return la},get DocumentHighlightKind(){return ua},get DocumentHighlight(){return ca},get SymbolKind(){return fa},get SymbolTag(){return da},get SymbolInformation(){return ha},get WorkspaceSymbol(){return pa},get DocumentSymbol(){return ga},get CodeActionKind(){return ma},get CodeActionTriggerKind(){return qi},get CodeActionContext(){return va},get CodeAction(){return ya},get CodeLens(){return ba},get FormattingOptions(){return wa},get DocumentLink(){return ka},get SelectionRange(){return Ca},get SemanticTokenTypes(){return Ta},get SemanticTokenModifiers(){return Sa},get SemanticTokens(){return xa},get InlineValueText(){return Ra},get InlineValueVariableLookup(){return _a},get InlineValueEvaluatableExpression(){return La},get InlineValueContext(){return Da},get InlayHintKind(){return Lo},get InlayHintLabelPart(){return Do},get InlayHint(){return Ea},get WorkspaceFolder(){return Pa},EOL:Wh,get TextDocument(){return Ma}},Symbol.toStringTag,{value:"Module"})),za=ih(zh),We={};Object.defineProperty(We,"__esModule",{value:!0});We.ProtocolNotificationType=We.ProtocolNotificationType0=We.ProtocolRequestType=We.ProtocolRequestType0=We.RegistrationType=void 0;const Vr=gt;class jh{constructor(o){this.method=o}}We.RegistrationType=jh;class Bh extends Vr.RequestType0{constructor(o){super(o)}}We.ProtocolRequestType0=Bh;class Uh extends Vr.RequestType{constructor(o){super(o,Vr.ParameterStructures.byName)}}We.ProtocolRequestType=Uh;class $h extends Vr.NotificationType0{constructor(o){super(o)}}We.ProtocolNotificationType0=$h;class Gh extends Vr.NotificationType{constructor(o){super(o,Vr.ParameterStructures.byName)}}We.ProtocolNotificationType=Gh;var Lc={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.objectLiteral=ft.typedArray=ft.stringArray=ft.array=ft.func=ft.error=ft.number=ft.string=ft.boolean=void 0;function Kh(n){return n===!0||n===!1}ft.boolean=Kh;function Dc(n){return typeof n=="string"||n instanceof String}ft.string=Dc;function Xh(n){return typeof n=="number"||n instanceof Number}ft.number=Xh;function Yh(n){return n instanceof Error}ft.error=Yh;function Vh(n){return typeof n=="function"}ft.func=Vh;function Ec(n){return Array.isArray(n)}ft.array=Ec;function Zh(n){return Ec(n)&&n.every(o=>Dc(o))}ft.stringArray=Zh;function Qh(n,o){return Array.isArray(n)&&n.every(o)}ft.typedArray=Qh;function Jh(n){return n!==null&&typeof n=="object"}ft.objectLiteral=Jh;var Pc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ImplementationRequest=void 0;const o=We;(function(s){s.method="textDocument/implementation",s.type=new o.ProtocolRequestType(s.method)})(n.ImplementationRequest||(n.ImplementationRequest={}))})(Pc);var Mc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypeDefinitionRequest=void 0;const o=We;(function(s){s.method="textDocument/typeDefinition",s.type=new o.ProtocolRequestType(s.method)})(n.TypeDefinitionRequest||(n.TypeDefinitionRequest={}))})(Mc);var Nc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DidChangeWorkspaceFoldersNotification=n.WorkspaceFoldersRequest=void 0;const o=We;(function(s){s.type=new o.ProtocolRequestType0("workspace/workspaceFolders")})(n.WorkspaceFoldersRequest||(n.WorkspaceFoldersRequest={})),function(s){s.type=new o.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(n.DidChangeWorkspaceFoldersNotification||(n.DidChangeWorkspaceFoldersNotification={}))})(Nc);var Oc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigurationRequest=void 0;const o=We;(function(s){s.type=new o.ProtocolRequestType("workspace/configuration")})(n.ConfigurationRequest||(n.ConfigurationRequest={}))})(Oc);var Ac={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorPresentationRequest=n.DocumentColorRequest=void 0;const o=We;(function(s){s.method="textDocument/documentColor",s.type=new o.ProtocolRequestType(s.method)})(n.DocumentColorRequest||(n.DocumentColorRequest={})),function(s){s.type=new o.ProtocolRequestType("textDocument/colorPresentation")}(n.ColorPresentationRequest||(n.ColorPresentationRequest={}))})(Ac);var Ic={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.FoldingRangeRequest=void 0;const o=We;(function(s){s.method="textDocument/foldingRange",s.type=new o.ProtocolRequestType(s.method)})(n.FoldingRangeRequest||(n.FoldingRangeRequest={}))})(Ic);var qc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DeclarationRequest=void 0;const o=We;(function(s){s.method="textDocument/declaration",s.type=new o.ProtocolRequestType(s.method)})(n.DeclarationRequest||(n.DeclarationRequest={}))})(qc);var Hc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionRangeRequest=void 0;const o=We;(function(s){s.method="textDocument/selectionRange",s.type=new o.ProtocolRequestType(s.method)})(n.SelectionRangeRequest||(n.SelectionRangeRequest={}))})(Hc);var Wc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WorkDoneProgressCancelNotification=n.WorkDoneProgressCreateRequest=n.WorkDoneProgress=void 0;const o=gt,s=We;(function(l){l.type=new o.ProgressType;function u(d){return d===l.type}l.is=u})(n.WorkDoneProgress||(n.WorkDoneProgress={})),function(l){l.method="window/workDoneProgress/create",l.type=new s.ProtocolRequestType(l.method)}(n.WorkDoneProgressCreateRequest||(n.WorkDoneProgressCreateRequest={})),function(l){l.method="window/workDoneProgress/cancel",l.type=new s.ProtocolNotificationType(l.method)}(n.WorkDoneProgressCancelNotification||(n.WorkDoneProgressCancelNotification={}))})(Wc);var Fc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CallHierarchyOutgoingCallsRequest=n.CallHierarchyIncomingCallsRequest=n.CallHierarchyPrepareRequest=void 0;const o=We;(function(s){s.method="textDocument/prepareCallHierarchy",s.type=new o.ProtocolRequestType(s.method)})(n.CallHierarchyPrepareRequest||(n.CallHierarchyPrepareRequest={})),function(s){s.method="callHierarchy/incomingCalls",s.type=new o.ProtocolRequestType(s.method)}(n.CallHierarchyIncomingCallsRequest||(n.CallHierarchyIncomingCallsRequest={})),function(s){s.method="callHierarchy/outgoingCalls",s.type=new o.ProtocolRequestType(s.method)}(n.CallHierarchyOutgoingCallsRequest||(n.CallHierarchyOutgoingCallsRequest={}))})(Fc);var zc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SemanticTokensRefreshRequest=n.SemanticTokensRangeRequest=n.SemanticTokensDeltaRequest=n.SemanticTokensRequest=n.SemanticTokensRegistrationType=n.TokenFormat=void 0;const o=We;(function(s){s.Relative="relative"})(n.TokenFormat||(n.TokenFormat={})),function(s){s.method="textDocument/semanticTokens",s.type=new o.RegistrationType(s.method)}(n.SemanticTokensRegistrationType||(n.SemanticTokensRegistrationType={})),function(s){s.method="textDocument/semanticTokens/full",s.type=new o.ProtocolRequestType(s.method)}(n.SemanticTokensRequest||(n.SemanticTokensRequest={})),function(s){s.method="textDocument/semanticTokens/full/delta",s.type=new o.ProtocolRequestType(s.method)}(n.SemanticTokensDeltaRequest||(n.SemanticTokensDeltaRequest={})),function(s){s.method="textDocument/semanticTokens/range",s.type=new o.ProtocolRequestType(s.method)}(n.SemanticTokensRangeRequest||(n.SemanticTokensRangeRequest={})),function(s){s.method="workspace/semanticTokens/refresh",s.type=new o.ProtocolRequestType0(s.method)}(n.SemanticTokensRefreshRequest||(n.SemanticTokensRefreshRequest={}))})(zc);var jc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ShowDocumentRequest=void 0;const o=We;(function(s){s.method="window/showDocument",s.type=new o.ProtocolRequestType(s.method)})(n.ShowDocumentRequest||(n.ShowDocumentRequest={}))})(jc);var Bc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LinkedEditingRangeRequest=void 0;const o=We;(function(s){s.method="textDocument/linkedEditingRange",s.type=new o.ProtocolRequestType(s.method)})(n.LinkedEditingRangeRequest||(n.LinkedEditingRangeRequest={}))})(Bc);var Uc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WillDeleteFilesRequest=n.DidDeleteFilesNotification=n.DidRenameFilesNotification=n.WillRenameFilesRequest=n.DidCreateFilesNotification=n.WillCreateFilesRequest=n.FileOperationPatternKind=void 0;const o=We;(function(s){s.file="file",s.folder="folder"})(n.FileOperationPatternKind||(n.FileOperationPatternKind={})),function(s){s.method="workspace/willCreateFiles",s.type=new o.ProtocolRequestType(s.method)}(n.WillCreateFilesRequest||(n.WillCreateFilesRequest={})),function(s){s.method="workspace/didCreateFiles",s.type=new o.ProtocolNotificationType(s.method)}(n.DidCreateFilesNotification||(n.DidCreateFilesNotification={})),function(s){s.method="workspace/willRenameFiles",s.type=new o.ProtocolRequestType(s.method)}(n.WillRenameFilesRequest||(n.WillRenameFilesRequest={})),function(s){s.method="workspace/didRenameFiles",s.type=new o.ProtocolNotificationType(s.method)}(n.DidRenameFilesNotification||(n.DidRenameFilesNotification={})),function(s){s.method="workspace/didDeleteFiles",s.type=new o.ProtocolNotificationType(s.method)}(n.DidDeleteFilesNotification||(n.DidDeleteFilesNotification={})),function(s){s.method="workspace/willDeleteFiles",s.type=new o.ProtocolRequestType(s.method)}(n.WillDeleteFilesRequest||(n.WillDeleteFilesRequest={}))})(Uc);var $c={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MonikerRequest=n.MonikerKind=n.UniquenessLevel=void 0;const o=We;(function(s){s.document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global"})(n.UniquenessLevel||(n.UniquenessLevel={})),function(s){s.$import="import",s.$export="export",s.local="local"}(n.MonikerKind||(n.MonikerKind={})),function(s){s.method="textDocument/moniker",s.type=new o.ProtocolRequestType(s.method)}(n.MonikerRequest||(n.MonikerRequest={}))})($c);var Gc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypeHierarchySubtypesRequest=n.TypeHierarchySupertypesRequest=n.TypeHierarchyPrepareRequest=void 0;const o=We;(function(s){s.method="textDocument/prepareTypeHierarchy",s.type=new o.ProtocolRequestType(s.method)})(n.TypeHierarchyPrepareRequest||(n.TypeHierarchyPrepareRequest={})),function(s){s.method="typeHierarchy/supertypes",s.type=new o.ProtocolRequestType(s.method)}(n.TypeHierarchySupertypesRequest||(n.TypeHierarchySupertypesRequest={})),function(s){s.method="typeHierarchy/subtypes",s.type=new o.ProtocolRequestType(s.method)}(n.TypeHierarchySubtypesRequest||(n.TypeHierarchySubtypesRequest={}))})(Gc);var Kc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.InlineValueRefreshRequest=n.InlineValueRequest=void 0;const o=We;(function(s){s.method="textDocument/inlineValue",s.type=new o.ProtocolRequestType(s.method)})(n.InlineValueRequest||(n.InlineValueRequest={})),function(s){s.method="workspace/inlineValue/refresh",s.type=new o.ProtocolRequestType0(s.method)}(n.InlineValueRefreshRequest||(n.InlineValueRefreshRequest={}))})(Kc);var Xc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.InlayHintRefreshRequest=n.InlayHintResolveRequest=n.InlayHintRequest=void 0;const o=We;(function(s){s.method="textDocument/inlayHint",s.type=new o.ProtocolRequestType(s.method)})(n.InlayHintRequest||(n.InlayHintRequest={})),function(s){s.method="inlayHint/resolve",s.type=new o.ProtocolRequestType(s.method)}(n.InlayHintResolveRequest||(n.InlayHintResolveRequest={})),function(s){s.method="workspace/inlayHint/refresh",s.type=new o.ProtocolRequestType0(s.method)}(n.InlayHintRefreshRequest||(n.InlayHintRefreshRequest={}))})(Xc);var Yc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DiagnosticRefreshRequest=n.WorkspaceDiagnosticRequest=n.DocumentDiagnosticRequest=n.DocumentDiagnosticReportKind=n.DiagnosticServerCancellationData=void 0;const o=gt,s=ft,l=We;(function(u){function d(p){const y=p;return y&&s.boolean(y.retriggerRequest)}u.is=d})(n.DiagnosticServerCancellationData||(n.DiagnosticServerCancellationData={})),function(u){u.Full="full",u.Unchanged="unchanged"}(n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={})),function(u){u.method="textDocument/diagnostic",u.type=new l.ProtocolRequestType(u.method),u.partialResult=new o.ProgressType}(n.DocumentDiagnosticRequest||(n.DocumentDiagnosticRequest={})),function(u){u.method="workspace/diagnostic",u.type=new l.ProtocolRequestType(u.method),u.partialResult=new o.ProgressType}(n.WorkspaceDiagnosticRequest||(n.WorkspaceDiagnosticRequest={})),function(u){u.method="workspace/diagnostic/refresh",u.type=new l.ProtocolRequestType0(u.method)}(n.DiagnosticRefreshRequest||(n.DiagnosticRefreshRequest={}))})(Yc);var Vc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DidCloseNotebookDocumentNotification=n.DidSaveNotebookDocumentNotification=n.DidChangeNotebookDocumentNotification=n.NotebookCellArrayChange=n.DidOpenNotebookDocumentNotification=n.NotebookDocumentSyncRegistrationType=n.NotebookDocument=n.NotebookCell=n.ExecutionSummary=n.NotebookCellKind=void 0;const o=za,s=ft,l=We;var u;(function(y){y.Markup=1,y.Code=2;function b(w){return w===1||w===2}y.is=b})(u=n.NotebookCellKind||(n.NotebookCellKind={}));var d;(function(y){function b(P,C){const S={executionOrder:P};return(C===!0||C===!1)&&(S.success=C),S}y.create=b;function w(P){const C=P;return s.objectLiteral(C)&&o.uinteger.is(C.executionOrder)&&(C.success===void 0||s.boolean(C.success))}y.is=w;function x(P,C){return P===C?!0:P==null||C===null||C===void 0?!1:P.executionOrder===C.executionOrder&&P.success===C.success}y.equals=x})(d=n.ExecutionSummary||(n.ExecutionSummary={}));var p;(function(y){function b(C,S){return{kind:C,document:S}}y.create=b;function w(C){const S=C;return s.objectLiteral(S)&&u.is(S.kind)&&o.DocumentUri.is(S.document)&&(S.metadata===void 0||s.objectLiteral(S.metadata))}y.is=w;function x(C,S){const B=new Set;return C.document!==S.document&&B.add("document"),C.kind!==S.kind&&B.add("kind"),C.executionSummary!==S.executionSummary&&B.add("executionSummary"),(C.metadata!==void 0||S.metadata!==void 0)&&!P(C.metadata,S.metadata)&&B.add("metadata"),(C.executionSummary!==void 0||S.executionSummary!==void 0)&&!d.equals(C.executionSummary,S.executionSummary)&&B.add("executionSummary"),B}y.diff=x;function P(C,S){if(C===S)return!0;if(C==null||S===null||S===void 0||typeof C!=typeof S||typeof C!="object")return!1;const B=Array.isArray(C),V=Array.isArray(S);if(B!==V)return!1;if(B&&V){if(C.length!==S.length)return!1;for(let J=0;J<C.length;J++)if(!P(C[J],S[J]))return!1}if(s.objectLiteral(C)&&s.objectLiteral(S)){const J=Object.keys(C),R=Object.keys(S);if(J.length!==R.length||(J.sort(),R.sort(),!P(J,R)))return!1;for(let N=0;N<J.length;N++){const D=J[N];if(!P(C[D],S[D]))return!1}}return!0}})(p=n.NotebookCell||(n.NotebookCell={})),function(y){function b(x,P,C,S){return{uri:x,notebookType:P,version:C,cells:S}}y.create=b;function w(x){const P=x;return s.objectLiteral(P)&&s.string(P.uri)&&o.integer.is(P.version)&&s.typedArray(P.cells,p.is)}y.is=w}(n.NotebookDocument||(n.NotebookDocument={})),function(y){y.method="notebookDocument/sync",y.type=new l.RegistrationType(y.method)}(n.NotebookDocumentSyncRegistrationType||(n.NotebookDocumentSyncRegistrationType={})),function(y){y.method="notebookDocument/didOpen",y.type=new l.ProtocolNotificationType(y.method)}(n.DidOpenNotebookDocumentNotification||(n.DidOpenNotebookDocumentNotification={})),function(y){function b(x){const P=x;return s.objectLiteral(P)&&o.uinteger.is(P.start)&&o.uinteger.is(P.deleteCount)&&(P.cells===void 0||s.typedArray(P.cells,p.is))}y.is=b;function w(x,P,C){const S={start:x,deleteCount:P};return C!==void 0&&(S.cells=C),S}y.create=w}(n.NotebookCellArrayChange||(n.NotebookCellArrayChange={})),function(y){y.method="notebookDocument/didChange",y.type=new l.ProtocolNotificationType(y.method)}(n.DidChangeNotebookDocumentNotification||(n.DidChangeNotebookDocumentNotification={})),function(y){y.method="notebookDocument/didSave",y.type=new l.ProtocolNotificationType(y.method)}(n.DidSaveNotebookDocumentNotification||(n.DidSaveNotebookDocumentNotification={})),function(y){y.method="notebookDocument/didClose",y.type=new l.ProtocolNotificationType(y.method)}(n.DidCloseNotebookDocumentNotification||(n.DidCloseNotebookDocumentNotification={}))})(Vc);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WorkspaceSymbolRequest=n.CodeActionResolveRequest=n.CodeActionRequest=n.DocumentSymbolRequest=n.DocumentHighlightRequest=n.ReferencesRequest=n.DefinitionRequest=n.SignatureHelpRequest=n.SignatureHelpTriggerKind=n.HoverRequest=n.CompletionResolveRequest=n.CompletionRequest=n.CompletionTriggerKind=n.PublishDiagnosticsNotification=n.WatchKind=n.RelativePattern=n.FileChangeType=n.DidChangeWatchedFilesNotification=n.WillSaveTextDocumentWaitUntilRequest=n.WillSaveTextDocumentNotification=n.TextDocumentSaveReason=n.DidSaveTextDocumentNotification=n.DidCloseTextDocumentNotification=n.DidChangeTextDocumentNotification=n.TextDocumentContentChangeEvent=n.DidOpenTextDocumentNotification=n.TextDocumentSyncKind=n.TelemetryEventNotification=n.LogMessageNotification=n.ShowMessageRequest=n.ShowMessageNotification=n.MessageType=n.DidChangeConfigurationNotification=n.ExitNotification=n.ShutdownRequest=n.InitializedNotification=n.InitializeErrorCodes=n.InitializeRequest=n.WorkDoneProgressOptions=n.TextDocumentRegistrationOptions=n.StaticRegistrationOptions=n.PositionEncodingKind=n.FailureHandlingKind=n.ResourceOperationKind=n.UnregistrationRequest=n.RegistrationRequest=n.DocumentSelector=n.NotebookCellTextDocumentFilter=n.NotebookDocumentFilter=n.TextDocumentFilter=void 0,n.TypeHierarchySubtypesRequest=n.TypeHierarchyPrepareRequest=n.MonikerRequest=n.MonikerKind=n.UniquenessLevel=n.WillDeleteFilesRequest=n.DidDeleteFilesNotification=n.WillRenameFilesRequest=n.DidRenameFilesNotification=n.WillCreateFilesRequest=n.DidCreateFilesNotification=n.FileOperationPatternKind=n.LinkedEditingRangeRequest=n.ShowDocumentRequest=n.SemanticTokensRegistrationType=n.SemanticTokensRefreshRequest=n.SemanticTokensRangeRequest=n.SemanticTokensDeltaRequest=n.SemanticTokensRequest=n.TokenFormat=n.CallHierarchyPrepareRequest=n.CallHierarchyOutgoingCallsRequest=n.CallHierarchyIncomingCallsRequest=n.WorkDoneProgressCancelNotification=n.WorkDoneProgressCreateRequest=n.WorkDoneProgress=n.SelectionRangeRequest=n.DeclarationRequest=n.FoldingRangeRequest=n.ColorPresentationRequest=n.DocumentColorRequest=n.ConfigurationRequest=n.DidChangeWorkspaceFoldersNotification=n.WorkspaceFoldersRequest=n.TypeDefinitionRequest=n.ImplementationRequest=n.ApplyWorkspaceEditRequest=n.ExecuteCommandRequest=n.PrepareRenameRequest=n.RenameRequest=n.PrepareSupportDefaultBehavior=n.DocumentOnTypeFormattingRequest=n.DocumentRangeFormattingRequest=n.DocumentFormattingRequest=n.DocumentLinkResolveRequest=n.DocumentLinkRequest=n.CodeLensRefreshRequest=n.CodeLensResolveRequest=n.CodeLensRequest=n.WorkspaceSymbolResolveRequest=void 0,n.DidCloseNotebookDocumentNotification=n.DidSaveNotebookDocumentNotification=n.DidChangeNotebookDocumentNotification=n.NotebookCellArrayChange=n.DidOpenNotebookDocumentNotification=n.NotebookDocumentSyncRegistrationType=n.NotebookDocument=n.NotebookCell=n.ExecutionSummary=n.NotebookCellKind=n.DiagnosticRefreshRequest=n.WorkspaceDiagnosticRequest=n.DocumentDiagnosticRequest=n.DocumentDiagnosticReportKind=n.DiagnosticServerCancellationData=n.InlayHintRefreshRequest=n.InlayHintResolveRequest=n.InlayHintRequest=n.InlineValueRefreshRequest=n.InlineValueRequest=n.TypeHierarchySupertypesRequest=void 0;const o=We,s=za,l=ft,u=Pc;Object.defineProperty(n,"ImplementationRequest",{enumerable:!0,get:function(){return u.ImplementationRequest}});const d=Mc;Object.defineProperty(n,"TypeDefinitionRequest",{enumerable:!0,get:function(){return d.TypeDefinitionRequest}});const p=Nc;Object.defineProperty(n,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return p.WorkspaceFoldersRequest}}),Object.defineProperty(n,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return p.DidChangeWorkspaceFoldersNotification}});const y=Oc;Object.defineProperty(n,"ConfigurationRequest",{enumerable:!0,get:function(){return y.ConfigurationRequest}});const b=Ac;Object.defineProperty(n,"DocumentColorRequest",{enumerable:!0,get:function(){return b.DocumentColorRequest}}),Object.defineProperty(n,"ColorPresentationRequest",{enumerable:!0,get:function(){return b.ColorPresentationRequest}});const w=Ic;Object.defineProperty(n,"FoldingRangeRequest",{enumerable:!0,get:function(){return w.FoldingRangeRequest}});const x=qc;Object.defineProperty(n,"DeclarationRequest",{enumerable:!0,get:function(){return x.DeclarationRequest}});const P=Hc;Object.defineProperty(n,"SelectionRangeRequest",{enumerable:!0,get:function(){return P.SelectionRangeRequest}});const C=Wc;Object.defineProperty(n,"WorkDoneProgress",{enumerable:!0,get:function(){return C.WorkDoneProgress}}),Object.defineProperty(n,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return C.WorkDoneProgressCreateRequest}}),Object.defineProperty(n,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return C.WorkDoneProgressCancelNotification}});const S=Fc;Object.defineProperty(n,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return S.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(n,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return S.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(n,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return S.CallHierarchyPrepareRequest}});const B=zc;Object.defineProperty(n,"TokenFormat",{enumerable:!0,get:function(){return B.TokenFormat}}),Object.defineProperty(n,"SemanticTokensRequest",{enumerable:!0,get:function(){return B.SemanticTokensRequest}}),Object.defineProperty(n,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return B.SemanticTokensDeltaRequest}}),Object.defineProperty(n,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return B.SemanticTokensRangeRequest}}),Object.defineProperty(n,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return B.SemanticTokensRefreshRequest}}),Object.defineProperty(n,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return B.SemanticTokensRegistrationType}});const V=jc;Object.defineProperty(n,"ShowDocumentRequest",{enumerable:!0,get:function(){return V.ShowDocumentRequest}});const J=Bc;Object.defineProperty(n,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return J.LinkedEditingRangeRequest}});const R=Uc;Object.defineProperty(n,"FileOperationPatternKind",{enumerable:!0,get:function(){return R.FileOperationPatternKind}}),Object.defineProperty(n,"DidCreateFilesNotification",{enumerable:!0,get:function(){return R.DidCreateFilesNotification}}),Object.defineProperty(n,"WillCreateFilesRequest",{enumerable:!0,get:function(){return R.WillCreateFilesRequest}}),Object.defineProperty(n,"DidRenameFilesNotification",{enumerable:!0,get:function(){return R.DidRenameFilesNotification}}),Object.defineProperty(n,"WillRenameFilesRequest",{enumerable:!0,get:function(){return R.WillRenameFilesRequest}}),Object.defineProperty(n,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return R.DidDeleteFilesNotification}}),Object.defineProperty(n,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return R.WillDeleteFilesRequest}});const N=$c;Object.defineProperty(n,"UniquenessLevel",{enumerable:!0,get:function(){return N.UniquenessLevel}}),Object.defineProperty(n,"MonikerKind",{enumerable:!0,get:function(){return N.MonikerKind}}),Object.defineProperty(n,"MonikerRequest",{enumerable:!0,get:function(){return N.MonikerRequest}});const D=Gc;Object.defineProperty(n,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return D.TypeHierarchyPrepareRequest}}),Object.defineProperty(n,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return D.TypeHierarchySubtypesRequest}}),Object.defineProperty(n,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return D.TypeHierarchySupertypesRequest}});const I=Kc;Object.defineProperty(n,"InlineValueRequest",{enumerable:!0,get:function(){return I.InlineValueRequest}}),Object.defineProperty(n,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return I.InlineValueRefreshRequest}});const F=Xc;Object.defineProperty(n,"InlayHintRequest",{enumerable:!0,get:function(){return F.InlayHintRequest}}),Object.defineProperty(n,"InlayHintResolveRequest",{enumerable:!0,get:function(){return F.InlayHintResolveRequest}}),Object.defineProperty(n,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return F.InlayHintRefreshRequest}});const $=Yc;Object.defineProperty(n,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return $.DiagnosticServerCancellationData}}),Object.defineProperty(n,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return $.DocumentDiagnosticReportKind}}),Object.defineProperty(n,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return $.DocumentDiagnosticRequest}}),Object.defineProperty(n,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return $.WorkspaceDiagnosticRequest}}),Object.defineProperty(n,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return $.DiagnosticRefreshRequest}});const X=Vc;Object.defineProperty(n,"NotebookCellKind",{enumerable:!0,get:function(){return X.NotebookCellKind}}),Object.defineProperty(n,"ExecutionSummary",{enumerable:!0,get:function(){return X.ExecutionSummary}}),Object.defineProperty(n,"NotebookCell",{enumerable:!0,get:function(){return X.NotebookCell}}),Object.defineProperty(n,"NotebookDocument",{enumerable:!0,get:function(){return X.NotebookDocument}}),Object.defineProperty(n,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return X.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(n,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidOpenNotebookDocumentNotification}}),Object.defineProperty(n,"NotebookCellArrayChange",{enumerable:!0,get:function(){return X.NotebookCellArrayChange}}),Object.defineProperty(n,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidChangeNotebookDocumentNotification}}),Object.defineProperty(n,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidSaveNotebookDocumentNotification}}),Object.defineProperty(n,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidCloseNotebookDocumentNotification}});var j;(function(k){function O(H){const E=H;return l.string(E.language)||l.string(E.scheme)||l.string(E.pattern)}k.is=O})(j=n.TextDocumentFilter||(n.TextDocumentFilter={}));var ue;(function(k){function O(H){const E=H;return l.objectLiteral(E)&&(l.string(E.notebookType)||l.string(E.scheme)||l.string(E.pattern))}k.is=O})(ue=n.NotebookDocumentFilter||(n.NotebookDocumentFilter={}));var se;(function(k){function O(H){const E=H;return l.objectLiteral(E)&&(l.string(E.notebook)||ue.is(E.notebook))&&(E.language===void 0||l.string(E.language))}k.is=O})(se=n.NotebookCellTextDocumentFilter||(n.NotebookCellTextDocumentFilter={}));var ie;(function(k){function O(H){if(!Array.isArray(H))return!1;for(let E of H)if(!l.string(E)&&!j.is(E)&&!se.is(E))return!1;return!0}k.is=O})(ie=n.DocumentSelector||(n.DocumentSelector={})),function(k){k.type=new o.ProtocolRequestType("client/registerCapability")}(n.RegistrationRequest||(n.RegistrationRequest={})),function(k){k.type=new o.ProtocolRequestType("client/unregisterCapability")}(n.UnregistrationRequest||(n.UnregistrationRequest={})),function(k){k.Create="create",k.Rename="rename",k.Delete="delete"}(n.ResourceOperationKind||(n.ResourceOperationKind={})),function(k){k.Abort="abort",k.Transactional="transactional",k.TextOnlyTransactional="textOnlyTransactional",k.Undo="undo"}(n.FailureHandlingKind||(n.FailureHandlingKind={})),function(k){k.UTF8="utf-8",k.UTF16="utf-16",k.UTF32="utf-32"}(n.PositionEncodingKind||(n.PositionEncodingKind={})),function(k){function O(H){const E=H;return E&&l.string(E.id)&&E.id.length>0}k.hasId=O}(n.StaticRegistrationOptions||(n.StaticRegistrationOptions={})),function(k){function O(H){const E=H;return E&&(E.documentSelector===null||ie.is(E.documentSelector))}k.is=O}(n.TextDocumentRegistrationOptions||(n.TextDocumentRegistrationOptions={})),function(k){function O(E){const ve=E;return l.objectLiteral(ve)&&(ve.workDoneProgress===void 0||l.boolean(ve.workDoneProgress))}k.is=O;function H(E){const ve=E;return ve&&l.boolean(ve.workDoneProgress)}k.hasWorkDoneProgress=H}(n.WorkDoneProgressOptions||(n.WorkDoneProgressOptions={})),function(k){k.type=new o.ProtocolRequestType("initialize")}(n.InitializeRequest||(n.InitializeRequest={})),function(k){k.unknownProtocolVersion=1}(n.InitializeErrorCodes||(n.InitializeErrorCodes={})),function(k){k.type=new o.ProtocolNotificationType("initialized")}(n.InitializedNotification||(n.InitializedNotification={})),function(k){k.type=new o.ProtocolRequestType0("shutdown")}(n.ShutdownRequest||(n.ShutdownRequest={})),function(k){k.type=new o.ProtocolNotificationType0("exit")}(n.ExitNotification||(n.ExitNotification={})),function(k){k.type=new o.ProtocolNotificationType("workspace/didChangeConfiguration")}(n.DidChangeConfigurationNotification||(n.DidChangeConfigurationNotification={})),function(k){k.Error=1,k.Warning=2,k.Info=3,k.Log=4}(n.MessageType||(n.MessageType={})),function(k){k.type=new o.ProtocolNotificationType("window/showMessage")}(n.ShowMessageNotification||(n.ShowMessageNotification={})),function(k){k.type=new o.ProtocolRequestType("window/showMessageRequest")}(n.ShowMessageRequest||(n.ShowMessageRequest={})),function(k){k.type=new o.ProtocolNotificationType("window/logMessage")}(n.LogMessageNotification||(n.LogMessageNotification={})),function(k){k.type=new o.ProtocolNotificationType("telemetry/event")}(n.TelemetryEventNotification||(n.TelemetryEventNotification={})),function(k){k.None=0,k.Full=1,k.Incremental=2}(n.TextDocumentSyncKind||(n.TextDocumentSyncKind={})),function(k){k.method="textDocument/didOpen",k.type=new o.ProtocolNotificationType(k.method)}(n.DidOpenTextDocumentNotification||(n.DidOpenTextDocumentNotification={})),function(k){function O(E){let ve=E;return ve!=null&&typeof ve.text=="string"&&ve.range!==void 0&&(ve.rangeLength===void 0||typeof ve.rangeLength=="number")}k.isIncremental=O;function H(E){let ve=E;return ve!=null&&typeof ve.text=="string"&&ve.range===void 0&&ve.rangeLength===void 0}k.isFull=H}(n.TextDocumentContentChangeEvent||(n.TextDocumentContentChangeEvent={})),function(k){k.method="textDocument/didChange",k.type=new o.ProtocolNotificationType(k.method)}(n.DidChangeTextDocumentNotification||(n.DidChangeTextDocumentNotification={})),function(k){k.method="textDocument/didClose",k.type=new o.ProtocolNotificationType(k.method)}(n.DidCloseTextDocumentNotification||(n.DidCloseTextDocumentNotification={})),function(k){k.method="textDocument/didSave",k.type=new o.ProtocolNotificationType(k.method)}(n.DidSaveTextDocumentNotification||(n.DidSaveTextDocumentNotification={})),function(k){k.Manual=1,k.AfterDelay=2,k.FocusOut=3}(n.TextDocumentSaveReason||(n.TextDocumentSaveReason={})),function(k){k.method="textDocument/willSave",k.type=new o.ProtocolNotificationType(k.method)}(n.WillSaveTextDocumentNotification||(n.WillSaveTextDocumentNotification={})),function(k){k.method="textDocument/willSaveWaitUntil",k.type=new o.ProtocolRequestType(k.method)}(n.WillSaveTextDocumentWaitUntilRequest||(n.WillSaveTextDocumentWaitUntilRequest={})),function(k){k.type=new o.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(n.DidChangeWatchedFilesNotification||(n.DidChangeWatchedFilesNotification={})),function(k){k.Created=1,k.Changed=2,k.Deleted=3}(n.FileChangeType||(n.FileChangeType={})),function(k){function O(H){const E=H;return l.objectLiteral(E)&&(s.URI.is(E.baseUri)||s.WorkspaceFolder.is(E.baseUri))&&l.string(E.pattern)}k.is=O}(n.RelativePattern||(n.RelativePattern={})),function(k){k.Create=1,k.Change=2,k.Delete=4}(n.WatchKind||(n.WatchKind={})),function(k){k.type=new o.ProtocolNotificationType("textDocument/publishDiagnostics")}(n.PublishDiagnosticsNotification||(n.PublishDiagnosticsNotification={})),function(k){k.Invoked=1,k.TriggerCharacter=2,k.TriggerForIncompleteCompletions=3}(n.CompletionTriggerKind||(n.CompletionTriggerKind={})),function(k){k.method="textDocument/completion",k.type=new o.ProtocolRequestType(k.method)}(n.CompletionRequest||(n.CompletionRequest={})),function(k){k.method="completionItem/resolve",k.type=new o.ProtocolRequestType(k.method)}(n.CompletionResolveRequest||(n.CompletionResolveRequest={})),function(k){k.method="textDocument/hover",k.type=new o.ProtocolRequestType(k.method)}(n.HoverRequest||(n.HoverRequest={})),function(k){k.Invoked=1,k.TriggerCharacter=2,k.ContentChange=3}(n.SignatureHelpTriggerKind||(n.SignatureHelpTriggerKind={})),function(k){k.method="textDocument/signatureHelp",k.type=new o.ProtocolRequestType(k.method)}(n.SignatureHelpRequest||(n.SignatureHelpRequest={})),function(k){k.method="textDocument/definition",k.type=new o.ProtocolRequestType(k.method)}(n.DefinitionRequest||(n.DefinitionRequest={})),function(k){k.method="textDocument/references",k.type=new o.ProtocolRequestType(k.method)}(n.ReferencesRequest||(n.ReferencesRequest={})),function(k){k.method="textDocument/documentHighlight",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentHighlightRequest||(n.DocumentHighlightRequest={})),function(k){k.method="textDocument/documentSymbol",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentSymbolRequest||(n.DocumentSymbolRequest={})),function(k){k.method="textDocument/codeAction",k.type=new o.ProtocolRequestType(k.method)}(n.CodeActionRequest||(n.CodeActionRequest={})),function(k){k.method="codeAction/resolve",k.type=new o.ProtocolRequestType(k.method)}(n.CodeActionResolveRequest||(n.CodeActionResolveRequest={})),function(k){k.method="workspace/symbol",k.type=new o.ProtocolRequestType(k.method)}(n.WorkspaceSymbolRequest||(n.WorkspaceSymbolRequest={})),function(k){k.method="workspaceSymbol/resolve",k.type=new o.ProtocolRequestType(k.method)}(n.WorkspaceSymbolResolveRequest||(n.WorkspaceSymbolResolveRequest={})),function(k){k.method="textDocument/codeLens",k.type=new o.ProtocolRequestType(k.method)}(n.CodeLensRequest||(n.CodeLensRequest={})),function(k){k.method="codeLens/resolve",k.type=new o.ProtocolRequestType(k.method)}(n.CodeLensResolveRequest||(n.CodeLensResolveRequest={})),function(k){k.method="workspace/codeLens/refresh",k.type=new o.ProtocolRequestType0(k.method)}(n.CodeLensRefreshRequest||(n.CodeLensRefreshRequest={})),function(k){k.method="textDocument/documentLink",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentLinkRequest||(n.DocumentLinkRequest={})),function(k){k.method="documentLink/resolve",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentLinkResolveRequest||(n.DocumentLinkResolveRequest={})),function(k){k.method="textDocument/formatting",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentFormattingRequest||(n.DocumentFormattingRequest={})),function(k){k.method="textDocument/rangeFormatting",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentRangeFormattingRequest||(n.DocumentRangeFormattingRequest={})),function(k){k.method="textDocument/onTypeFormatting",k.type=new o.ProtocolRequestType(k.method)}(n.DocumentOnTypeFormattingRequest||(n.DocumentOnTypeFormattingRequest={})),function(k){k.Identifier=1}(n.PrepareSupportDefaultBehavior||(n.PrepareSupportDefaultBehavior={})),function(k){k.method="textDocument/rename",k.type=new o.ProtocolRequestType(k.method)}(n.RenameRequest||(n.RenameRequest={})),function(k){k.method="textDocument/prepareRename",k.type=new o.ProtocolRequestType(k.method)}(n.PrepareRenameRequest||(n.PrepareRenameRequest={})),function(k){k.type=new o.ProtocolRequestType("workspace/executeCommand")}(n.ExecuteCommandRequest||(n.ExecuteCommandRequest={})),function(k){k.type=new o.ProtocolRequestType("workspace/applyEdit")}(n.ApplyWorkspaceEditRequest||(n.ApplyWorkspaceEditRequest={}))})(Lc);var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.createProtocolConnection=void 0;const Qu=gt;function ep(n,o,s,l){return Qu.ConnectionStrategy.is(l)&&(l={connectionStrategy:l}),(0,Qu.createMessageConnection)(n,o,s,l)}Wo.createProtocolConnection=ep;(function(n){var o=nn&&nn.__createBinding||(Object.create?function(u,d,p,y){y===void 0&&(y=p);var b=Object.getOwnPropertyDescriptor(d,p);(!b||("get"in b?!d.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(u,y,b)}:function(u,d,p,y){y===void 0&&(y=p),u[y]=d[p]}),s=nn&&nn.__exportStar||function(u,d){for(var p in u)p!=="default"&&!Object.prototype.hasOwnProperty.call(d,p)&&o(d,u,p)};Object.defineProperty(n,"__esModule",{value:!0}),n.LSPErrorCodes=n.createProtocolConnection=void 0,s(gt,n),s(za,n),s(We,n),s(Lc,n);var l=Wo;Object.defineProperty(n,"createProtocolConnection",{enumerable:!0,get:function(){return l.createProtocolConnection}}),function(u){u.lspReservedErrorRangeStart=-32899,u.RequestFailed=-32803,u.ServerCancelled=-32802,u.ContentModified=-32801,u.RequestCancelled=-32800,u.lspReservedErrorRangeEnd=-32800}(n.LSPErrorCodes||(n.LSPErrorCodes={}))})(_c);(function(n){var o=nn&&nn.__createBinding||(Object.create?function(d,p,y,b){b===void 0&&(b=y);var w=Object.getOwnPropertyDescriptor(p,y);(!w||("get"in w?!p.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(d,b,w)}:function(d,p,y,b){b===void 0&&(b=y),d[b]=p[y]}),s=nn&&nn.__exportStar||function(d,p){for(var y in d)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&o(p,d,y)};Object.defineProperty(n,"__esModule",{value:!0}),n.createProtocolConnection=void 0;const l=Vu;s(Vu,n),s(_c,n);function u(d,p,y,b){return(0,l.createMessageConnection)(d,p,y,b)}n.createProtocolConnection=u})(pe);const tp=n=>{let o="initial";const s=[],l=new gt.Emitter,u=new gt.Emitter,d=new gt.Emitter,p=new gt.Emitter,y=C=>{o==="initial"?s.push({message:C}):o==="listening"&&p.fire(JSON.parse(C))},b=C=>{o==="initial"?s.push({error:C}):o==="listening"&&l.fire(C)},w=()=>{o==="listening"&&u.fire(),o="closed"},x=C=>y(C.data),P=C=>{C.code!==1e3&&b(new Error(`WebSocket Error (${C.code}): ${C.reason}`)),w()};return n.addEventListener("message",x),n.addEventListener("close",P),{get onError(){return l.event},get onClose(){return u.event},get onPartialMessage(){return d.event},listen(C){if(o!=="initial")throw new Error("Already listening");const S=p.event(C);if(o="listening",s.length===0)return S;for(const B of s)B.message?y(B.message):B.error&&b(B.error);return s.length=0,S},dispose(){n.removeEventListener("message",x),n.removeEventListener("close",P),l.dispose(),u.dispose(),d.dispose(),s.length=0}}},np=n=>{const o=new gt.Emitter,s=new gt.Emitter,l=()=>{s.fire()};n.addEventListener("close",l);let u=0;return{get onError(){return o.event},get onClose(){return s.event},async write(d){try{n.send(JSON.stringify(d))}catch(p){o.fire([rp(p),d,++u])}},end(){},dispose(){o.dispose(),s.dispose(),n.removeEventListener("close",l)}}},rp=n=>n instanceof Error?n:new Error((n==null?void 0:n.message)||"Unknown error"),ip=(n,o=op())=>new Promise(s=>{n.onopen=()=>{const l=gt.createMessageConnection(tp(n),np(n),o);l.onDispose(()=>n.close()),l.onClose(()=>l.dispose()),s(l)}}),op=()=>({error:n=>console.error(n),warn:n=>console.warn(n),info:n=>console.info(n),log:n=>console.log(n)}),sp=n=>{const o=new gt.Emitter,s=new gt.Emitter,l=new gt.Emitter,u=new gt.Emitter,d=y=>{o.fire(y.data)},p=y=>{s.fire(y)};return n.addEventListener("message",d),n.addEventListener("error",p),n.addEventListener("messageerror",p),{get onError(){return s.event},get onClose(){return l.event},get onPartialMessage(){return u.event},listen(y){return o.event(y)},dispose(){n.removeEventListener("message",d),n.removeEventListener("error",p),n.removeEventListener("messageerror",p),o.dispose(),s.dispose(),l.dispose(),u.dispose()}}},ap=n=>{const o=new gt.Emitter,s=new gt.Emitter;let l=0;const u=d=>{o.fire([Ju(d),void 0,++l])};return n.addEventListener("error",u),{get onError(){return o.event},get onClose(){return s.event},async write(d){try{n.postMessage(d)}catch(p){o.fire([Ju(p),d,++l])}},end(){},dispose(){n.removeEventListener("error",u),o.dispose(),s.dispose()}}},Ju=n=>n instanceof Error?n:new Error((n==null?void 0:n.message)||"Unknown error"),lp=(n,o=up())=>{const s=gt.createMessageConnection(sp(n),ap(n),o);return s.onClose(()=>s.dispose()),Promise.resolve(s)},up=()=>({error:n=>console.error(n),warn:n=>console.warn(n),info:n=>console.info(n),log:n=>console.log(n)}),ec=n=>{let o;n.onRequest(pe.RegistrationRequest.type,({registrations:w})=>{for(const{method:x,registerOptions:P}of w){const C=tc[x];C&&(o[C]=P!=null?P:!0)}}),n.onRequest(pe.UnregistrationRequest.type,({unregisterations:w})=>{for(const{method:x}of w){const P=tc[x];P&&(o[P]=void 0)}});const s=(w,x)=>(P,C)=>w()?n.sendRequest(x,P,C):Promise.resolve(null),l=(w,x)=>P=>w()?n.sendNotification(x,P):Promise.resolve(),u=w=>x=>n.sendNotification(w,x),d=w=>x=>{n.onNotification(w,x)},p=()=>{var w;const x=(w=o.textDocumentSync)!==null&&w!==void 0?w:pe.TextDocumentSyncKind.None;return typeof x!="number"&&!!x.willSave},y=()=>{var w;const x=(w=o.textDocumentSync)!==null&&w!==void 0?w:pe.TextDocumentSyncKind.None;return typeof x!="number"&&!!x.willSaveWaitUntil},b=()=>{var w;const x=(w=o.textDocumentSync)!==null&&w!==void 0?w:pe.TextDocumentSyncKind.None;return typeof x=="number"?x!==pe.TextDocumentSyncKind.None:!!x.save};return{listen:()=>n.listen(),dispose:()=>n.dispose(),initialize:async w=>{const x=await n.sendRequest(pe.InitializeRequest.type,w);return o=x.capabilities,x},initialized:()=>n.sendNotification(pe.InitializedNotification.type,{}),shutdown:()=>n.sendRequest(pe.ShutdownRequest.type),exit:()=>n.sendNotification(pe.ExitNotification.type),onError:w=>n.onError(([x,P,C])=>w(x,P,C)),onClose:w=>n.onClose(()=>w()),onLogMessage:d(pe.LogMessageNotification.type),onShowMessage:d(pe.ShowMessageNotification.type),onDiagnostics:d(pe.PublishDiagnosticsNotification.type),textDocumentOpened:u(pe.DidOpenTextDocumentNotification.type),textDocumentClosed:u(pe.DidCloseTextDocumentNotification.type),textDocumentChanged:u(pe.DidChangeTextDocumentNotification.type),textDocumentWillSave:l(p,pe.WillSaveTextDocumentNotification.type),getEditsBeforeSave:s(y,pe.WillSaveTextDocumentWaitUntilRequest.type),textDocumentSaved:l(b,pe.DidSaveTextDocumentNotification.type),configurationChanged:u(pe.DidChangeConfigurationNotification.type),watchedFilesChanged:u(pe.DidChangeWatchedFilesNotification.type),getCompletion:s(()=>!!o.completionProvider,pe.CompletionRequest.type),getCompletionItemDetails:s(()=>{var w;return!!(!((w=o.completionProvider)===null||w===void 0)&&w.resolveProvider)},pe.CompletionResolveRequest.type),getHoverInfo:s(()=>!!o.hoverProvider,pe.HoverRequest.type),getSignatureHelp:s(()=>!!o.signatureHelpProvider,pe.SignatureHelpRequest.type),getDeclaration:s(()=>!!o.declarationProvider,pe.DeclarationRequest.type),getDefinition:s(()=>!!o.definitionProvider,pe.DefinitionRequest.type),getTypeDefinition:s(()=>!!o.typeDefinitionProvider,pe.TypeDefinitionRequest.type),getImplementation:s(()=>!!o.implementationProvider,pe.ImplementationRequest.type),getReferences:s(()=>!!o.referencesProvider,pe.ReferencesRequest.type),getDocumentHighlight:s(()=>!!o.documentHighlightProvider,pe.DocumentHighlightRequest.type),getDocumentSymbol:s(()=>!!o.documentSymbolProvider,pe.DocumentSymbolRequest.type),getCodeAction:s(()=>!!o.codeActionProvider,pe.CodeActionRequest.type),getCodeLens:s(()=>!!o.codeLensProvider,pe.CodeLensRequest.type),resolveCodeLens:s(()=>{var w;return!!(!((w=o.codeLensProvider)===null||w===void 0)&&w.resolveProvider)},pe.CodeLensResolveRequest.type),getDocumentLink:s(()=>!!o.documentLinkProvider,pe.DocumentLinkRequest.type),resolveDocumentLink:s(()=>{var w;return!!(!((w=o.documentLinkProvider)===null||w===void 0)&&w.resolveProvider)},pe.DocumentLinkResolveRequest.type),getColorSymbols:s(()=>!!o.colorProvider,pe.DocumentColorRequest.type),getFoldingRanges:s(()=>!!o.foldingRangeProvider,pe.FoldingRangeRequest.type),getSelectionRanges:s(()=>!!o.selectionRangeProvider,pe.SelectionRangeRequest.type),getWorkspaceSymbols:s(()=>!!o.workspaceSymbolProvider,pe.WorkspaceSymbolRequest.type),get syncsIncrementally(){var w,x;let P=(w=o.textDocumentSync)!==null&&w!==void 0?w:pe.TextDocumentSyncKind.None;return typeof P!="number"&&(P=(x=P.change)!==null&&x!==void 0?x:pe.TextDocumentSyncKind.None),P===pe.TextDocumentSyncKind.Incremental},get completionTriggers(){var w;return((w=o.completionProvider)===null||w===void 0?void 0:w.triggerCharacters)||[]},get signatureHelpTriggers(){var w;return((w=o.signatureHelpProvider)===null||w===void 0?void 0:w.triggerCharacters)||[]},get signatureHelpRetriggers(){var w;return((w=o.signatureHelpProvider)===null||w===void 0?void 0:w.retriggerCharacters)||[]}}},tc={"textDocument/codeAction":"codeActionProvider","textDocument/codeLens":"codeLensProvider","textDocument/color":"colorProvider","textDocument/completion":"completionProvider","textDocument/declaration":"declarationProvider","textDocument/definition":"definitionProvider","textDocument/documentFormatting":"documentFormattingProvider","textDocument/documentHighlight":"documentHighlightProvider","textDocument/documentLink":"documentLinkProvider","textDocument/documentOnTypeFormatting":"documentOnTypeFormattingProvider","textDocument/documentRangeFormatting":"documentRangeFormattingProvider","textDocument/documentSymbol":"documentSymbolProvider","textDocument/executeCommand":"executeCommandProvider","textDocument/foldingRange":"foldingRangeProvider","textDocument/hover":"hoverProvider","textDocument/implementation":"implementationProvider","textDocument/references":"referencesProvider","textDocument/rename":"renameProvider","textDocument/signatureHelp":"signatureHelpProvider","textDocument/typeDefinition":"typeDefinitionProvider","textDocument/workspaceSymbol":"workspaceSymbolProvider"},cp=Object.freeze({allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5}),fp=0,nc=1,dp=2,rc=3;class hp{constructor(o,s,l={}){this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=fp,this.OPEN=nc,this.CLOSING=dp,this.CLOSED=rc,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},this.url=o,s==null||typeof s=="string"||Array.isArray(s)?this.protocols=s:l=s,this.options=Object.assign({},cp,l),this.openNewWebSocket()}get binaryType(){return this.binaryTypeInternal||"blob"}set binaryType(o){this.binaryTypeInternal=o,this.ws&&(this.ws.binaryType=o)}get bufferedAmount(){let o=this.ws?this.ws.bufferedAmount:0,s=!1;return this.messageBuffer.forEach(l=>{const u=pp(l);u!=null?o+=u:s=!0}),s&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),o}get extensions(){return this.ws?this.ws.extensions:this.lastKnownExtensions}get protocol(){return this.ws?this.ws.protocol:this.lastKnownProtocol}get readyState(){return this.isClosed?rc:nc}close(o,s){this.disposeSocket(o,s),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")}send(o){this.ws&&this.ws.readyState===this.OPEN?this.ws.send(o):this.messageBuffer.push(o)}reconnect(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)}addEventListener(o,s){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(s)}dispatchEvent(o){return this.dispatchEventOfType(o.type,o)}removeEventListener(o,s){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(l=>l!==s))}openNewWebSocket(){if(this.isClosed)return;const{connectTimeout:o}=this.options;this.debugLog(`Opening new WebSocket to ${this.url}.`);const s=new WebSocket(this.url,this.protocols);s.onclose=l=>this.handleClose(l),s.onerror=l=>this.handleError(l),s.onmessage=l=>this.handleMessage(l),s.onopen=l=>this.handleOpen(l),this.connectTimeoutId=setTimeout(()=>{this.clearConnectTimeout(),this.disposeSocket(),this.handleClose(void 0)},o),this.ws=s}handleOpen(o){if(!this.ws||this.isClosed)return;const{allClearResetTime:s}=this.options;this.debugLog("WebSocket opened."),this.binaryTypeInternal!=null?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",o):(this.dispatchEventOfType("open",o),this.hasBeenOpened=!0,this.messageBuffer.forEach(l=>this.send(l))),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(()=>{this.clearAllClearTimeout(),this.nextRetryTime=0,this.reconnectCount=0;const l=s/1e3|0;this.debugLog(`WebSocket remained open for ${l}s. Resetting retry time and count`)},s)}handleMessage(o){this.isClosed||this.dispatchEventOfType("message",o)}handleClose(o){if(this.isClosed)return;const{maxReconnectAttempts:s}=this.options;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.ws=void 0),this.dispatchEventOfType("down",o),this.reconnectCount>=s){const l=`Failed to reconnect after ${s} attempts. Closing permanently.`;this.stopReconnecting(o,l)}else this.reestablishConnection()}handleError(o){this.dispatchEventOfType("error",o),this.debugLog("WebSocket encountered an error.")}reestablishConnection(){const{minReconnectDelay:o,maxReconnectDelay:s,reconnectBackoffFactor:l}=this.options;this.reconnectCount++;const u=this.nextRetryTime;this.nextRetryTime=Math.max(o,Math.min(this.nextRetryTime*l,s)),setTimeout(()=>this.openNewWebSocket(),u);const d=u/1e3|0;this.debugLog(`WebSocket was closed. Re-opening in ${d}s.`)}stopReconnecting(o,s){this.debugLog(s),this.shutdown(),o&&this.dispatchEventOfType("close",o)}shutdown(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[]}disposeSocket(o,s){!this.ws||(this.ws.onerror=yo,this.ws.onclose=yo,this.ws.onmessage=yo,this.ws.onopen=yo,this.ws.close(o,s),this.ws=void 0)}clearAllTimeouts(){this.clearConnectTimeout(),this.clearAllClearTimeout()}clearConnectTimeout(){this.connectTimeoutId!=null&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)}clearAllClearTimeout(){this.allClearTimeoutId!=null&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)}dispatchEventOfType(o,s){switch(o){case"close":this.onclose&&this.onclose(s);break;case"error":this.onerror&&this.onerror(s);break;case"message":this.onmessage&&this.onmessage(s);break;case"open":this.onopen&&this.onopen(s);break;case"down":this.ondown&&this.ondown(s);break;case"reopen":this.onreopen&&this.onreopen(s);break}return o in this.listeners&&this.listeners[o].slice().forEach(l=>this.callListener(l,s)),!s||!s.defaultPrevented}callListener(o,s){typeof o=="function"?o.call(this,s):o.handleEvent.call(this,s)}debugLog(o){this.options.debug&&console.debug(o)}}function pp(n){return typeof n=="string"?2*n.length:n instanceof ArrayBuffer?n.byteLength:n instanceof Blob?n.size:void 0}const yo=()=>{},ja=n=>n.replace(gp,mp),gp=/[&<>'"]/g,mp=n=>n==="&"?"&amp;":n==="<"?"&lt;":n===">"?"&gt;":n==="'"?"&#39;":"&quot;",gn=({line:n,ch:o})=>({line:n,character:o}),vp=(n,o)=>({start:gn(n),end:gn(o)}),yp=n=>({range:vp(n.from,n.to),text:n.text.join(`
`)}),Eo=({line:n,character:o})=>({line:n,ch:o}),Un=({start:n,end:o})=>[Eo(n),Eo(o)],bp=n=>{switch(n){case 1:return"error";case 2:return"warning";case 3:return"information";case 4:return"hint"}},Po=(n,o=s=>s)=>n?typeof n=="string"?ja(n):Zc(n,o):"",wp=(n,o)=>Array.isArray(n)?n.map(s=>ic(s,o)).join(`
`):pe.MarkedString.is(n)?ic(n,o):Zc(n,o),Zc=(n,o)=>n.kind==="markdown"?o(n.value):ja(n.value),ic=(n,o)=>o(typeof n=="string"?n:["```"+n.language,n.value,"```"].join(`
`)),oc=(()=>{const n=["","text","method","function","constructor","field","variable","class","interface","module","property","unit","value","enum","keyword","snippet","color","file","reference","folder","enum-member","constant","struct","event","operator","type-parameter"];return o=>n[o!=null?o:0]||"unknown"})(),kp=(()=>{const n=["","file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enum-member","struct","event","operator","type-parameter"];return o=>n[o!=null?o:0]||"unknown"})(),Cp=n=>({items:n,isIncomplete:!1}),Qc="cmw-gutter",Mo=new WeakMap,Tp=(n,o)=>{if(Jc(n),o.length===0)return;const s=Mo.get(n)||{marks:[]};for(const l of o){const[u,d]=Un(l.range),p=bp(l.severity||3);s.marks.push(n.markText(u,d,{className:`cmw-mark-${p}`}));const y=document.createElement("div");y.classList.add(`cmw-guttermark-${p}`),y.style.width="10px",y.style.fontSize="8px",y.style.textAlign="center",y.title=l.message,y.innerText="\u2B24",n.setGutterMarker(u.line,Qc,y)}Mo.set(n,s)},Jc=n=>{const o=Mo.get(n);if(!!o){n.clearGutter(Qc);for(const s of o.marks)s.clear();o.marks.length=0,Mo.delete(n)}},ef=(n,o,s)=>{const l=document.createElement("div");l.classList.add("cmw-tooltip"),l.style.cssText=[`left: ${o}px;`,`top: ${s}px;`].join(" "),l.appendChild(n);const u=document.createElement("div");return u.classList.add("cmw-tooltip-close"),u.addEventListener("click",()=>{l.remove()}),l.appendChild(u),document.body.appendChild(l),requestAnimationFrame(()=>{l.style.top=`${s-l.offsetHeight}px`}),l},Zr=new WeakMap,Sp=(n,o,s,l,u=d=>d)=>{if($r(n),Array.isArray(l.contents)&&l.contents.length===0)return;const d=wp(l.contents,u);if(!d)return;const p=Zr.get(n)||{};let y=s;if(l.range){let x=s;[y,x]=Un(l.range),p.marker=n.markText(y,x,{css:"text-decoration: underline"})}const b=document.createElement("div");b.innerHTML=d;const w=n.charCoords(y,"page");p.tooltip=ef(b,w.left,w.top),p.mouseLeaveAllListener=o,o.addElement(p.tooltip),Zr.set(n,p)},$r=n=>{const o=Zr.get(n);!o||(o.marker&&o.marker.clear(),o.mouseLeaveAllListener&&o.tooltip&&o.mouseLeaveAllListener.removeElement(o.tooltip),o.tooltip&&o.tooltip.remove(),Zr.delete(n))},xp=n=>{var o;return!(!((o=Zr.get(n))===null||o===void 0)&&o.disabled)},Rp=n=>{$r(n),Zr.set(n,{disabled:!0})},_p=n=>{$r(n)},No=new WeakMap,Lp=(n,o)=>{const s=No.get(n)||{marks:[]};for(const{kind:l,range:u}of o){const[d,p]=Un(u);s.marks.push(n.markText(d,p,{className:"cmw-highlight"}))}No.set(n,s)},Ms=n=>{const o=No.get(n);if(!!o){if(o.marks&&o.marks.length>0){for(const s of o.marks)s.clear();o.marks.length=0}No.delete(n)}},Ba=(n,o,s)=>{const l=n.getCursor(),u=n.markText(l,l,{clearWhenEmpty:!1}),d=o.map(p=>n.markText(...Un(p.range),{clearWhenEmpty:!1}));n.operation(()=>{for(let p=0;p<o.length;++p){const y=d[p],b=y.find();n.replaceRange(o[p].newText,b.from,b.to,s),y.clear()}}),n.setCursor(u.find().to),u.clear()},sc=(n,o,s,l=0)=>{const u=n.markText(o,s,{className:"cmw-highlight"});return typeof l=="number"&&l>0&&setTimeout(()=>{u.clear()},l),u};class un{constructor(){this.value="",this.pos=0}static isDigitCharacter(o){return o>=48&&o<=57}static isVariableCharacter(o){return o===95||o>=97&&o<=122||o>=65&&o<=90}text(o){this.value=o,this.pos=0}tokenText(o){return this.value.substr(o.pos,o.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let o=this.pos,s=0,l=this.value.charCodeAt(o),u;if(u=un._table[l],typeof u=="number")return this.pos+=1,{type:u,pos:o,len:1};if(un.isDigitCharacter(l)){u=8;do s+=1,l=this.value.charCodeAt(o+s);while(un.isDigitCharacter(l));return this.pos+=s,{type:u,pos:o,len:s}}if(un.isVariableCharacter(l)){u=9;do l=this.value.charCodeAt(o+ ++s);while(un.isVariableCharacter(l)||un.isDigitCharacter(l));return this.pos+=s,{type:u,pos:o,len:s}}u=10;do s+=1,l=this.value.charCodeAt(o+s);while(!isNaN(l)&&typeof un._table[l]=="undefined"&&!un.isDigitCharacter(l)&&!un.isVariableCharacter(l));return this.pos+=s,{type:u,pos:o,len:s}}}un._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Jr{constructor(){this._children=[]}appendChild(o){return o instanceof Gt&&this._children[this._children.length-1]instanceof Gt?this._children[this._children.length-1].value+=o.value:(o.parent=this,this._children.push(o)),this}replace(o,s){const{parent:l}=o,u=l.children.indexOf(o),d=l.children.slice(0);d.splice(u,1,...s),l._children=d,function p(y,b){for(const w of y)w.parent=b,p(w.children,w)}(s,l)}get children(){return this._children}get snippet(){let o=this;for(;;){if(!o)return;if(o instanceof Fo)return o;o=o.parent}}toString(){return this.children.reduce((o,s)=>o+s.toString(),"")}len(){return 0}}class Gt extends Jr{constructor(o){super(),this.value=o}static escape(o){return o.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return Gt.escape(this.value)}len(){return this.value.length}clone(){return new Gt(this.value)}}class tf extends Jr{}class _n extends tf{constructor(o){super(),this.index=o}static compareByIndex(o,s){return o.index===s.index?0:o.isFinalTabstop?1:s.isFinalTabstop||o.index<s.index?-1:o.index>s.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Wi?this._children[0]:void 0}toTextmateString(){let o="";return this.transform&&(o=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${o}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${o}}`:`\${${this.index}:${this.children.map(s=>s.toTextmateString()).join("")}${o}}`}clone(){let o=new _n(this.index);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(s=>s.clone()),o}}class Wi extends Jr{constructor(){super(...arguments),this.options=[]}appendChild(o){return o instanceof Gt&&(o.parent=this,this.options.push(o)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(o=>o.value.replace(/\||,/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let o=new Wi;return this.options.forEach(o.appendChild,o),o}}class Ua extends Jr{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(o){const s=this;let l=!1,u=o.replace(this.regexp,function(){return l=!0,s._replace(Array.prototype.slice.call(arguments,0,-2))});return!l&&this._children.some(d=>d instanceof mn&&Boolean(d.elseValue))&&(u=this._replace([])),u}_replace(o){let s="";for(const l of this._children)if(l instanceof mn){let u=o[l.index]||"";u=l.resolve(u),s+=u}else s+=l.toString();return s}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(o=>o.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let o=new Ua;return o.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),o._children=this.children.map(s=>s.clone()),o}}class mn extends Jr{constructor(o,s,l,u){super(),this.index=o,this.shorthandName=s,this.ifValue=l,this.elseValue=u}resolve(o){return this.shorthandName==="upcase"?o?o.toLocaleUpperCase():"":this.shorthandName==="downcase"?o?o.toLocaleLowerCase():"":this.shorthandName==="capitalize"?o?o[0].toLocaleUpperCase()+o.substr(1):"":this.shorthandName==="pascalcase"?o?this._toPascalCase(o):"":Boolean(o)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(o)&&typeof this.elseValue=="string"?this.elseValue:o||""}_toPascalCase(o){const s=o.match(/[a-z]+/gi);return s?s.map(function(l){return l.charAt(0).toUpperCase()+l.substr(1).toLowerCase()}).join(""):o}toTextmateString(){let o="${";return o+=this.index,this.shorthandName?o+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?o+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?o+=`:+${this.ifValue}`:this.elseValue&&(o+=`:-${this.elseValue}`),o+="}",o}clone(){return new mn(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class Hi extends tf{constructor(o){super(),this.name=o}resolve(o){let s=o.resolve(this);return this.transform&&(s=this.transform.resolve(s||"")),s!==void 0?(this._children=[new Gt(s)],!0):!1}toTextmateString(){let o="";return this.transform&&(o=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${o}}`:`\${${this.name}:${this.children.map(s=>s.toTextmateString()).join("")}${o}}`}clone(){const o=new Hi(this.name);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(s=>s.clone()),o}}function ac(n,o){const s=[...n];for(;s.length>0;){const l=s.shift();if(!o(l))break;s.unshift(...l.children)}}class Fo extends Jr{get placeholderInfo(){if(!this._placeholders){let o=[],s;this.walk(function(l){return l instanceof _n&&(o.push(l),s=!s||s.index<l.index?l:s),!0}),this._placeholders={all:o,last:s}}return this._placeholders}get placeholders(){const{all:o}=this.placeholderInfo;return o}offset(o){let s=0,l=!1;return this.walk(u=>u===o?(l=!0,!1):(s+=u.len(),!0)),l?s:-1}fullLen(o){let s=0;return ac([o],l=>(s+=l.len(),!0)),s}enclosingPlaceholders(o){let s=[],{parent:l}=o;for(;l;)l instanceof _n&&s.push(l),l=l.parent;return s}resolveVariables(o){return this.walk(s=>(s instanceof Hi&&s.resolve(o)&&(this._placeholders=void 0),!0)),this}appendChild(o){return this._placeholders=void 0,super.appendChild(o)}replace(o,s){return this._placeholders=void 0,super.replace(o,s)}toTextmateString(){return this.children.reduce((o,s)=>o+s.toTextmateString(),"")}clone(){let o=new Fo;return this._children=this.children.map(s=>s.clone()),o}walk(o){ac(this.children,o)}}class Dp{constructor(){this._scanner=new un,this._token={type:14,pos:0,len:0}}static escape(o){return o.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(o){return/\${?CLIPBOARD/.test(o)}text(o){return this.parse(o).toString()}parse(o,s,l){this._scanner.text(o),this._token=this._scanner.next();const u=new Fo;for(;this._parse(u););const d=new Map,p=[];let y=0;u.walk(b=>(b instanceof _n&&(y+=1,b.isFinalTabstop?d.set(0,void 0):!d.has(b.index)&&b.children.length>0?d.set(b.index,b.children):p.push(b)),!0));for(const b of p){const w=d.get(b.index);if(w){const x=new _n(b.index);x.transform=b.transform;for(const P of w)x.appendChild(P.clone());u.replace(b,[x])}}return l||(l=y>0&&s),!d.has(0)&&l&&u.appendChild(new _n(0)),u}_accept(o,s){if(o===void 0||this._token.type===o){let l=s?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),l}return!1}_backTo(o){return this._scanner.pos=o.pos+o.len,this._token=o,!1}_until(o){const s=this._token;for(;this._token.type!==o;){if(this._token.type===14)return!1;if(this._token.type===5){const u=this._scanner.next();if(u.type!==0&&u.type!==4&&u.type!==5)return!1}this._token=this._scanner.next()}const l=this._scanner.value.substring(s.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),l}_parse(o){return this._parseEscaped(o)||this._parseTabstopOrVariableName(o)||this._parseComplexPlaceholder(o)||this._parseComplexVariable(o)||this._parseAnything(o)}_parseEscaped(o){let s;return(s=this._accept(5,!0))?(s=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||s,o.appendChild(new Gt(s)),!0):!1}_parseTabstopOrVariableName(o){let s;const l=this._token;return this._accept(0)&&(s=this._accept(9,!0)||this._accept(8,!0))?(o.appendChild(/^\d+$/.test(s)?new _n(Number(s)):new Hi(s)),!0):this._backTo(l)}_parseComplexPlaceholder(o){let s;const l=this._token;if(!(this._accept(0)&&this._accept(3)&&(s=this._accept(8,!0))))return this._backTo(l);const d=new _n(Number(s));if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(d),!0;if(!this._parse(d))return o.appendChild(new Gt("${"+s+":")),d.children.forEach(o.appendChild,o),!0}else if(d.index>0&&this._accept(7)){const p=new Wi;for(;;){if(this._parseChoiceElement(p)){if(this._accept(2))continue;if(this._accept(7)&&(d.appendChild(p),this._accept(4)))return o.appendChild(d),!0}return this._backTo(l),!1}}else return this._accept(6)?this._parseTransform(d)?(o.appendChild(d),!0):(this._backTo(l),!1):this._accept(4)?(o.appendChild(d),!0):this._backTo(l)}_parseChoiceElement(o){const s=this._token,l=[];for(;!(this._token.type===2||this._token.type===7);){let u;if((u=this._accept(5,!0))?u=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||u:u=this._accept(void 0,!0),!u)return this._backTo(s),!1;l.push(u)}return l.length===0?(this._backTo(s),!1):(o.appendChild(new Gt(l.join(""))),!0)}_parseComplexVariable(o){let s;const l=this._token;if(!(this._accept(0)&&this._accept(3)&&(s=this._accept(9,!0))))return this._backTo(l);const d=new Hi(s);if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(d),!0;if(!this._parse(d))return o.appendChild(new Gt("${"+s+":")),d.children.forEach(o.appendChild,o),!0}else return this._accept(6)?this._parseTransform(d)?(o.appendChild(d),!0):(this._backTo(l),!1):this._accept(4)?(o.appendChild(d),!0):this._backTo(l)}_parseTransform(o){let s=new Ua,l="",u="";for(;!this._accept(6);){let d;if(d=this._accept(5,!0)){d=this._accept(6,!0)||d,l+=d;continue}if(this._token.type!==14){l+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let d;if(d=this._accept(5,!0)){d=this._accept(5,!0)||this._accept(6,!0)||d,s.appendChild(new Gt(d));continue}if(!(this._parseFormatString(s)||this._parseAnything(s)))return!1}for(;!this._accept(4);){if(this._token.type!==14){u+=this._accept(void 0,!0);continue}return!1}try{s.regexp=new RegExp(l,u)}catch{return!1}return o.transform=s,!0}_parseFormatString(o){const s=this._token;if(!this._accept(0))return!1;let l=!1;this._accept(3)&&(l=!0);let u=this._accept(8,!0);if(u)if(l){if(this._accept(4))return o.appendChild(new mn(Number(u))),!0;if(!this._accept(1))return this._backTo(s),!1}else return o.appendChild(new mn(Number(u))),!0;else return this._backTo(s),!1;if(this._accept(6)){let d=this._accept(9,!0);return!d||!this._accept(4)?(this._backTo(s),!1):(o.appendChild(new mn(Number(u),d)),!0)}else if(this._accept(11)){let d=this._until(4);if(d)return o.appendChild(new mn(Number(u),void 0,d,void 0)),!0}else if(this._accept(12)){let d=this._until(4);if(d)return o.appendChild(new mn(Number(u),void 0,void 0,d)),!0}else if(this._accept(13)){let d=this._until(1);if(d){let p=this._until(4);if(p)return o.appendChild(new mn(Number(u),void 0,d,p)),!0}}else{let d=this._until(4);if(d)return o.appendChild(new mn(Number(u),void 0,void 0,d)),!0}return this._backTo(s),!1}_parseAnything(o){return this._token.type!==14?(o.appendChild(new Gt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const Ep=(n,o)=>{if(n.length===0)return[];const s=Pp(n.slice(),o),l=[[s[0]]];for(let u=1;u<s.length;++u)o(s[u-1],s[u])!==0?l.push([s[u]]):l[l.length-1].push(s[u]);return l},Pp=(n,o)=>{for(let s=1;s<n.length;++s)if(o(n[s-1],n[s])>0){let l=s;const u=n[l];do n[l]=n[--l];while(l>0&&o(n[l-1],u)>0);n[l]=u}return n},Mp=(n,o,s,l,u)=>{const d=new Dp().parse(o,!0,!0);Op(n,s,d),n.replaceRange(d.toString(),s,l,"complete");const p=new Map,y=n.indexFromPos(s);for(const V of d.placeholders)p.set(V,n.markText(...Np(n,y,d,V),{className:"cmw-snippet-tabstop",collapsed:!1,clearWhenEmpty:!1,inclusiveLeft:!0,inclusiveRight:!0}));if(u&&Ba(n,u,"+complete"),d.placeholders.length===0)return;let b=0;const w=Ep(d.placeholders,_n.compareByIndex);let x=null;if(w.length>1){const V=document.createElement("span");V.className="cmw-snippet-final-tabstop";const J=w[w.length-1],R=J[J.length-1];x=n.setBookmark(n.posFromIndex(y+d.offset(R)+d.fullLen(R)),{widget:V,insertLeft:!0})}const P=V=>{const J=w[V],N=J[0].isFinalTabstop,D=J.map(I=>{const{from:F,to:$}=p.get(I).find();return{anchor:F,head:$}});n.setSelections(D,N?D.length-1:0,{scroll:!0,origin:"snippet"})},C=()=>{S()},S=()=>{n.removeKeyMap(B),n.off("mousedown",C);const V=w[w.length-1],J=V[V.length-1],R=p.get(J).find();n.setCursor(R.to);for(const N of p.values())N.clear();p.clear(),x&&x.clear(),w.length=0},B=Dn.exports.normalizeKeyMap({Tab:V=>{b+1<=w.length-1&&P(++b),b>=w.length-1&&S()},"Shift-Tab":V=>{b-1>=0&&P(--b)},Enter:V=>{S()},Esc:V=>{S()}});n.addKeyMap(B),n.on("mousedown",C),P(0),w.length===1&&w[0].length===1&&S()},Np=(n,o,s,l)=>{const u=o+s.offset(l);return[n.posFromIndex(u),n.posFromIndex(u+s.fullLen(l))]},Op=(n,o,s)=>{const l=lc(n.getLine(o.line),0,o.ch);s.walk(u=>{if(u instanceof Gt&&!(u.parent instanceof Wi)){const d=u.value.split(/\r?\n|\r/);for(let y=1;y<d.length;++y){const b=lc(d[y]);let w=l+b;if(n.getOption("indentWithTabs")){const x=n.getOption("indentUnit")||2;w=w.replace(/\t/g," ".repeat(x));const P=Math.floor(w.length/x);w="	".repeat(P)+" ".repeat(w.length-P*x)}d[y]=w+d[y].substr(b.length)}const p=d.join(n.lineSeparator());p!==u.value&&u.parent.replace(u,[new Gt(p)])}return!0})},lc=(n,o=0,s=n.length)=>{for(let l=o;l<s;++l)if(n[l]!==" "&&n[l]!=="	")return n.substring(o,l);return n.substring(o,s)};class Ap{constructor({uri:o,editor:s,conn:l,renderMarkdown:u}){this.pendingRequest=null,this.uri=o,this.editor=s,this.conn=l,this.renderMarkdown=u}invoke(){this.request({triggerKind:pe.CompletionTriggerKind.Invoked})}retriggerForIncomplete(){this.request({triggerKind:pe.CompletionTriggerKind.TriggerForIncompleteCompletions})}triggerWith(o){this.request({triggerKind:pe.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o})}onChange(){const o=this.editor.getCursor();if(o.ch===0)return!0;const s=this.editor.getLine(o.line)[o.ch-1];if(this.conn.completionTriggers.includes(s))return this.triggerWith(s),!0;if(this.isComplete())return!0;const l=this.editor.getTokenTypeAt(o);if(l){if(/\b(?:variable|property|type)\b/.test(l))return this.isActive()?this.retriggerForIncomplete():this.invoke(),!0;if(this.isActive()&&l==="string")return this.retriggerForIncomplete(),!0}return!1}request(o){this.cancelPending();const s=new pe.CancellationTokenSource;this.pendingRequest=s,this.conn.getCompletion({textDocument:{uri:this.uri},position:gn(this.editor.getCursor()),context:o},this.pendingRequest.token).then(l=>{if(this.pendingRequest===s)this.pendingRequest=null;else return;!l||(Array.isArray(l)&&(l=Cp(l)),l.items.length!==0&&new Ip({list:l,editor:this.editor,invoked:o.triggerKind!==pe.CompletionTriggerKind.TriggerCharacter,renderMarkdown:this.renderMarkdown,resolveItem:(u,d)=>this.conn.getCompletionItemDetails(u,d).then(p=>p||u)}).show())})}close(){this.cancelPending(),this.editor.closeHint()}isActive(){var o;return!!(!((o=this.editor.state)===null||o===void 0)&&o.completionActive)}isComplete(){var o,s,l;return!!(!((l=(s=(o=this.editor.state)===null||o===void 0?void 0:o.completionActive)===null||s===void 0?void 0:s.options)===null||l===void 0)&&l.updateOnCursorActivity)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}class Ip{constructor({editor:o,invoked:s,list:l,renderMarkdown:u,resolveItem:d}){this.tooltip=null,this.detailsCache=new WeakMap,this.pendingRequest=null,this.renderItem=(p,y,b)=>{const w=b.item;let P=`hsl(${Math.floor((w.kind||0)/30*180+180)}, 75%, 50%)`;if(w.kind===pe.CompletionItemKind.Color){const S=Po(w.documentation);if(S){const B=S.match(/#[\da-f]{6}/i);B&&(P=B[0])}}const C=p.appendChild(document.createElement("div"));C.style.color=P,C.className=["cmw-icon",`cmw-icon--${oc(w.kind)}`].join(" "),p.appendChild(document.createTextNode(w.label))},this.onHintsClose=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsUpdate=()=>{this.cancelPending(),this.removeTooltip()},this.onHintsSelect=(p,y)=>{this.cancelPending(),this.removeTooltip();const b=p.item,w=this.detailsCache.get(b);if(w)this.addTooltip(y,w);else{const x=new pe.CancellationTokenSource;this.pendingRequest=x,this.resolveItem(b,this.pendingRequest.token).then(P=>{if(this.removeTooltip(),this.pendingRequest===x)this.pendingRequest=null;else return;const C=this.cacheDetails(Object.assign(b,P));this.detailsCache.set(b,C),this.addTooltip(y,C)})}},this.editor=o,this.list=l,this.invoked=s,this.updates=0,this.renderMarkdown=u,this.resolveItem=d}show(){this.editor.showHint({completeSingle:!1,updateOnCursorActivity:!this.list.isIncomplete,hint:()=>this.update()})}update(){const{from:o,to:s,items:l}=this.getState(),u=l.map(p=>({text:"",displayText:p.label,hint:b=>{let w=p.insertText||p.label,x={line:o.line,ch:o.ch},P={line:s.line,ch:s.ch};if(p.textEdit){const C=p.textEdit,S=Un(pe.TextEdit.is(C)?C.range:C.replace);S[0].ch<x.ch&&(x.ch=S[0].ch),S[1].ch>P.ch&&(P.ch=S[1].ch),this.editor.replaceRange(this.editor.getRange(S[0],S[1]),x,P,"complete"),[x,P]=S,w=C.newText}if(p.insertTextFormat===pe.InsertTextFormat.Snippet)return Mp(b,w,x,P,p.additionalTextEdits);b.replaceRange(w,x,P,"+complete"),p.additionalTextEdits&&Ba(b,p.additionalTextEdits,"+complete"),b.scrollIntoView(null),b.closeHint()},render:this.renderItem,item:p})),d={from:o,to:s,list:u};return bo.on(d,"close",this.onHintsClose),bo.on(d,"update",this.onHintsUpdate),bo.on(d,"select",this.onHintsSelect),d}getState(){const o=this.editor.getCursor();if(this.updates++>0||this.invoked){const s=this.editor.getTokenAt(o);if(s.type==="string"){const p=this.list.items.find(y=>y.textEdit);if(p){const y=p.textEdit,b=Un(pe.TextEdit.is(y)?y.range:y.replace);s.start=b[0].ch,s.end=o.ch}else{const y=s.string[0],b=s.string[s.string.length-1];(y==='"'||y==="'")&&(y===b?(s.start+=1,s.end-=1):(s.start+=1,s.end=o.ch))}}const l={line:o.line,ch:s.start},u={line:o.line,ch:s.end},d=this.editor.getRange(l,u);return{from:l,to:u,items:qp(this.list.items,d,50)}}else return{from:o,to:o,items:this.list.items}}cacheDetails(o){return{kind:o.kind&&oc(o.kind),detail:o.detail&&ja(o.detail),documentation:o.documentation&&Po(o.documentation,this.renderMarkdown)}}tooltipContent(o){let s="";return o.detail&&(s+=`<code>${o.detail}</code>`),o.documentation&&(s+=`<div>${o.documentation}</div>`),s}addTooltip(o,s){if(!o.isConnected)return;const l=this.tooltipContent(s);if(!l)return;const u=o.parentNode,d=u.getBoundingClientRect().right+window.pageXOffset,p=u.getBoundingClientRect().top+window.pageYOffset,y=document.createElement("div");y.innerHTML=l;const b=document.createElement("div");b.classList.add("cmw-completion-item-doc"),b.style.cssText=`
    z-index: 10;
    position: absolute;
    left: ${d}px;
    top: ${p}px;
    font-size: 12px;
    padding: 2px;
    max-height: 400px;
    max-width: 400px;
    overflow: auto;
    `,b.appendChild(y),document.body.appendChild(b),this.tooltip=b}removeTooltip(){this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}cancelPending(){this.pendingRequest&&(this.pendingRequest.cancel(),this.pendingRequest=null)}}const qp=(n,o,s=30)=>{const l=n.reduce((u,d)=>(u[d.label]=Wp(d.filterText||d.label,o),u),{});return n.slice().sort((u,d)=>l[d.label]-l[u.label]).slice(0,s)},Hp=.5,Wp=(n,o)=>{const s=n.length,l=o.length,u=Math.min(s,l);if(u===0)return 0;let d=0;for(;n[d]===o[d]&&++d<u;);const p=(s+l)/(2*s*l),y=u===d?u:s<l?uc(o,n):uc(n,o);return p*y**2+d*Hp},uc=(n,o)=>{const s=n.length,l=o.length,u=[0];for(let d=1;d<=l;++d)u[d]=0;for(let d=1;d<=s;++d)for(let p=1,y=u[0];p<=l;++p){const b=u[p];u[p]=n[d-1]===o[p-1]?y+1:Math.max(u[p-1],u[p]),y=b}return u[l]},nf=n=>n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),Oo=new WeakMap,Fp=(n,o,s,l,u=d=>d)=>{var d;(d=s.activeSignature)!==null&&d!==void 0||(s.activeSignature=0);const p=s.signatures[s.activeSignature];if(!p)return;const y=Oo.get(n)||{},b=document.createElement("div"),w=document.createElement("div");let x=!1;if(s.activeParameter!=null&&p.parameters){const S=Math.min(s.activeParameter,p.parameters.length-1),B=p.parameters[S],V="text-decoration: underline; font-weight: 500;";if(Array.isArray(B.label)){const[R,N]=B.label;w.innerHTML=[p.label.slice(0,R),`<span style="${V}">`,p.label.slice(R,N),"</span>",p.label.slice(N)].join("")}else w.innerHTML=p.label.replace(new RegExp("("+nf(B.label)+")"),`<span style="${V}">$1</span>`);b.appendChild(w);const J=Po(B.documentation,u);if(J){x=!0;const R=document.createElement("div");R.style.marginTop="4px",R.innerHTML=J,b.appendChild(R)}}else w.innerText=p.label,b.appendChild(w);const P=Po(p.documentation,u);if(P){const S=document.createElement("div");x&&(S.style.marginTop="8px"),S.innerHTML=P,b.appendChild(S)}const C=n.charCoords(l,"page");y.tooltip=ef(b,C.left,C.top),y.mouseLeaveAllListener=o,o.addElement(y.tooltip),Oo.set(n,y)},Rn=n=>{const o=Oo.get(n);!o||(o.mouseLeaveAllListener&&o.tooltip&&o.mouseLeaveAllListener.removeElement(o.tooltip),o.tooltip&&o.tooltip.remove(),Oo.delete(n))},Br=(n,o,s)=>{const l=Array.isArray(s)?s[0]:s;if(pe.Location.is(l)){if(l.uri===o){const u=Eo(l.range.start);sc(n,...Un(l.range),1500),n.setCursor(u,{scroll:!0}),n.focus()}}else if(pe.LocationLink.is(l)&&l.targetUri===o){const u=Eo(l.targetSelectionRange.start);sc(n,...Un(l.targetRange),1500),n.setCursor(u,{scroll:!0}),n.focus()}},zp=(n,{getSuggestions:o,onSelect:s,onUpdate:l,onCancel:u,render:d=jp,className:p="",debounceTimeout:y=0})=>{const b=document;let w=[],x="",P,C=-1,S=0,B;const V=b.createElement("div"),J=V.style;V.className=p,J.position="absolute";const R=()=>{V.parentNode||b.body.appendChild(V)},N=()=>{const ge=V.parentNode;ge&&ge.removeChild(V)},D=()=>!!V.parentNode,I=()=>{S++,w=[],x="",P=void 0,C=-1,N()},F=()=>{B&&window.clearTimeout(B)},$=()=>{if(!D())return;J.height="auto",J.width=n.offsetWidth+"px";const ge=()=>{const ke=b.documentElement,De=ke.clientTop||b.body.clientTop||0,Ne=ke.clientLeft||b.body.clientLeft||0,qt=window.pageYOffset||ke.scrollTop,Ye=window.pageXOffset||ke.scrollLeft,Ue=n.getBoundingClientRect(),qe=Ue.top+n.offsetHeight+qt-De,ae=Ue.left+Ye-Ne;J.top=qe+"px",J.left=ae+"px";const ee=Math.max(0,window.innerHeight-(Ue.top+n.offsetHeight));J.top=qe+"px",J.bottom="",J.left=ae+"px",J.maxHeight=ee+"px"};ge(),ge()},X=()=>{if(V.textContent="",w.length===0){I();return}const ge=b.createDocumentFragment();for(const ke of w){const De=d(ke,x);if(!De)return;De.addEventListener("click",Ne=>{s(ke),I(),Ne.preventDefault(),Ne.stopPropagation()}),ke===P&&(De.className+=" selected"),ge.appendChild(De)}V.appendChild(ge),R(),$(),k()},j=()=>{D()&&X()},ue=()=>{j()},se=ge=>{ge.target!==V?j():ge.preventDefault()},ie=ge=>{ve()},k=()=>{const ge=V.getElementsByClassName("selected");if(ge.length===0)return;const ke=ge[0];if(ke.offsetTop<V.scrollTop)V.scrollTop=ke.offsetTop;else{const De=ke.offsetTop+ke.offsetHeight,Ne=V.scrollTop+V.offsetHeight;De>Ne&&(V.scrollTop+=De-Ne)}},O=ge=>{const ke=w.length;ke===0?(P=void 0,C=-1):(C=(ge%ke+ke)%ke,P=w[C],P&&l&&l(P),X())},H=ge=>{const ke=ge.key;switch(ke){case"Esc":case"Escape":I(),ge.preventDefault(),ge.stopPropagation(),u&&u();return;case"Up":case"Down":case"ArrowUp":case"ArrowDown":{const De=ke==="ArrowUp"||ke==="Up"?-1:1;ge.preventDefault(),O(C+De);return}case"Enter":P&&(s(P),I()),ge.preventDefault();return}},E=()=>{ve(!1)},ve=(ge=!0)=>{const ke=++S,De=n.value;F(),B=window.setTimeout(()=>{o(De).then(Ne=>{S===ke&&(w=Ne,x=De,w.length===0?(C=-1,P=void 0):(C=0,P=w[0],P&&l&&l(P)),X())})},ge?y:0)},Re=()=>{setTimeout(()=>{b.activeElement!==n&&I()},200)};return V.addEventListener("mousedown",ge=>{ge.stopPropagation(),ge.preventDefault()}),V.addEventListener("focus",()=>n.focus()),n.addEventListener("keydown",H),n.addEventListener("input",ie),n.addEventListener("blur",Re),n.addEventListener("focus",E),window.addEventListener("resize",ue),b.addEventListener("scroll",se,!0),()=>{n.removeEventListener("focus",E),n.removeEventListener("keydown",H),n.removeEventListener("input",ie),n.removeEventListener("blur",Re),window.removeEventListener("resize",ue),b.removeEventListener("scroll",se,!0),F(),I()}},jp=(n,o)=>{const s=document.createElement("div");return s.textContent=n.label,s},Bp=(n,o,s)=>{if(s.length===0)return;let l=null;const u=Up(s)?s.flatMap(P=>[cc(P,o),...(P.children||[]).map(C=>cc(C,o))]):s.map(P=>$p(P)),p=n.getWrapperElement().appendChild(document.createElement("div")),y=p.appendChild(document.createElement("input"));p.className="cmw-document-symbols",y.className="cmw-document-symbols-input";const b=zp(y,{className:"cmw-document-symbols-list",getSuggestions:async P=>{if(P==="")return u.slice();const C=u.reduce((S,B)=>(S[B.label]=Gp(B.label,P),S),{});return u.slice().filter(S=>C[S.label]>0).sort((S,B)=>C[B.label]-C[S.label])},render:(P,C)=>{const S=document.createElement("div"),B=S.appendChild(document.createElement("div")),V=Math.floor((P.kind||0)/30*180+180);return B.style.color=`hsl(${V}, 75%, 50%)`,B.className=`cmw-icon cmw-icon--${kp(P.kind)}`,S.insertAdjacentHTML("beforeend",P.label.replace(new RegExp("("+nf(C)+")","i"),'<span class="matched">$1</span>')),S},onSelect:P=>{x(),Br(n,o,P.location)},onUpdate:P=>{l&&l.clear();const C=P.location;C.uri===o&&(l=n.markText(...Un(C.range),{className:"cmw-highlight"}))},onCancel:()=>{y.blur(),x()}});let w=!1;const x=()=>{w||(w=!0,l&&l.clear(),b(),p.remove(),n.focus())};p.addEventListener("focusout",P=>{P.relatedTarget!==null&&x()}),y.focus()},Up=n=>n.every(o=>pe.DocumentSymbol.is(o)),$p=(n,o)=>({label:n.name,kind:n.kind,location:n.location}),cc=(n,o)=>({label:n.name,kind:n.kind,location:{uri:o,range:n.range}}),Gp=(n,o)=>{const s=n.toLowerCase(),l=o.toLowerCase(),u=s.includes(l)?1:0,d=n.includes(o)?1:0,p=s.startsWith(l)?2:0,y=n.startsWith(o)?3:0;return u+d+p+y},Kp=(n,o)=>s=>(n.addEventListener(o,s),()=>{n.removeEventListener(o,s)}),Ns=n=>o=>s=>o(l=>s(n(l))),Xp=(n=(o,s)=>o===s)=>o=>s=>{let l=null;return o(u=>{(!l||!n(l.value,u))&&(l={value:u},s(u))})},fc=n=>o=>s=>{let l=null;return o(u=>{l!==null&&(clearTimeout(l),l=null),l=setTimeout(()=>s(u),n)})},Yp=n=>o=>s=>{let l=null;const u=[];return o(d=>{l!==null&&(clearTimeout(l),l=null),u.push(d),l=setTimeout(()=>{s(u.slice()),u.length=0},n)})},dc=n=>o=>s=>o(l=>{n(l)&&s(l)}),Os=(n,...o)=>o.reduce((s,l)=>l(s),n),Na=(n,o)=>s=>{const l=(...u)=>{s(u)};return n.on(o,l),()=>{n.off(o,l)}},vr=(n,o,s)=>Na(n,o)(s),rf=(n,o,...s)=>{Dn.exports.signal(n,o,...s)};class Vp{constructor(o){this.onMouseLeaveAll=o,this.listeners=[]}addElement(o){if(this.listeners.find(l=>l.element===o))return;const s={element:o,over:!1,onEnter:()=>{s.over=!0},onLeave:()=>{s.over=!1,this.checkHoverState()}};this.listeners.push(s),o.addEventListener("mouseenter",s.onEnter),o.addEventListener("mouseleave",s.onLeave)}removeElement(o){const s=this.listeners.findIndex(u=>u.element===o),l=s!==-1;if(l){const u=this.listeners[s];this.listeners.splice(s,1),u.element.removeEventListener("mouseenter",u.onEnter),u.element.removeEventListener("mouseleave",u.onLeave),this.checkHoverState()}return l}dispose(){this.listeners.forEach(o=>{this.removeElement(o.element)})}checkHoverState(){window.setTimeout(()=>{this.listeners.every(o=>!o.over)&&this.onMouseLeaveAll()},500)}}const Zp=n=>new Promise(o=>setTimeout(o,n)),Ao=new WeakMap,Qp=(n,o,s,l)=>{Ao.has(n)&&ko(n);const u=document.createElement("div");u.className="cmw-context-menu",u.style.cssText=["z-index: 10;","position: absolute;","white-space: nowrap;","transition: opacity 200ms;"].join("");for(let b=0;b<l.length;++b){const w=l[b];for(const{label:x,handler:P}of w){const C=u.appendChild(document.createElement("div"));C.className="cmw-context-menu-item",C.appendChild(document.createTextNode(x)),P?C.addEventListener("click",S=>{S.preventDefault(),ko(n),P()}):C.setAttribute("disabled","")}if(b+1<l.length){const x=u.appendChild(document.createElement("hr"));x.className="cmw-context-menu-item-separator"}}u.style.opacity="0",document.body.appendChild(u);const d=u.offsetWidth+10,p=u.offsetHeight+10;u.style.left=Math.min(o,window.innerWidth-d)+"px",u.style.top=Math.min(s,window.innerHeight-p)+"px",u.style.opacity="1",rf(n,"cmw:contextMenuOpened",n);const y=b=>{(!(b.target instanceof Node)||!u.contains(b.target))&&(ko(n),document.removeEventListener("mousedown",y))};document.addEventListener("mousedown",y),Ao.set(n,{menu:u})},ko=n=>{const o=Ao.get(n);!o||(o.menu&&o.menu.remove(),Ao.delete(n),rf(n,"cmw:contextMenuClosed",n))},hc=50;class Jp{constructor(o){var s,l,u;this.connectionToUris=new WeakMap,this.editors=Object.create(null),this.connectionPromises=Object.create(null),this.connections=Object.create(null),this.documentVersions=Object.create(null),this.subscriptionDisposers=new WeakMap,this.completionHandlers=new WeakMap,this.configs=o.configs||{},this.rootUri=o.rootUri+(o.rootUri.endsWith("/")?"":"/"),this.getConnectionString=o.getConnectionString.bind(void 0),this.getLanguageAssociation=o.getLanguageAssociation.bind(void 0),this.canHandleMarkdown=typeof o.renderMarkdown=="function";const d=o.renderMarkdown||(p=>p);this.renderMarkdown=d.bind(void 0),this.popupsEnabled=!0,this.onDisconnected=((s=o.onDisconnected)===null||s===void 0?void 0:s.bind(void 0))||(p=>{}),this.onReconnected=((l=o.onReconnected)===null||l===void 0?void 0:l.bind(void 0))||(p=>Promise.resolve()),this.onConnectionFailed=((u=o.onConnectionFailed)===null||u===void 0?void 0:u.bind(void 0))||(p=>{})}enablePopups(o=!0){this.popupsEnabled=o,o||this.hideAllPopups()}dispose(){for(const o of Object.values(this.editors))this.removeEventHandlers(o);this.editors=Object.create(null),this.documentVersions=Object.create(null);for(const o of Object.values(this.connections))o.dispose(),this.connectionToUris.delete(o);this.connections=Object.create(null),this.connectionPromises=Object.create(null)}async openTextDocument(o,s){var l;const u=this.getDocumentUri(o),d=this.getLanguageAssociation(u);if(!d)return;const p=d.languageServerIds[0];if(!p)return;const y=await this.getConnection(p);if(!y)return;this.editors[u]=s,this.documentVersions[u]=0;const b=d.languageId;y.textDocumentOpened({textDocument:{uri:u,languageId:b,text:s.getValue(),version:++this.documentVersions[u]}}),(l=this.connectionToUris.get(y))===null||l===void 0||l.add(u),this.addEventHandlers(u,s,y)}addEventHandlers(o,s,l){const u=new Ap({uri:o,editor:s,conn:l,renderMarkdown:this.renderMarkdown});this.completionHandlers.set(s,u);const d=[],p=new Vp(()=>{this.hideTooltips(s)});p.addElement(s.getWrapperElement()),d.push(()=>{p.dispose()});const y=D=>{Rn(D),u.invoke()},b=Os(Na(s,"changes"),Yp(hc),Ns(D=>{const I=D[0][0];l.textDocumentChanged({textDocument:{uri:o,version:++this.documentVersions[o]},contentChanges:l.syncsIncrementally?D.flatMap(([$,X])=>X.map(yp)):[{text:I.getValue()}]});const F=D[D.length-1][1];return[I,F[F.length-1]]}),dc(([D,I])=>I.origin==="+delete"||I.text.every(F=>F.length===0)?(u.close(),Rn(D),!1):!(I.origin==="complete"||I.origin==="+complete")));d.push(b(([D,I])=>{if(!this.popupsEnabled||u.onChange())return;const F=D.getCursor();if(F.ch===0)return;const $=D.getLine(F.line)[F.ch-1];if(l.signatureHelpTriggers.includes($)||l.signatureHelpRetriggers.includes($)){u.close(),Rn(D),l.getSignatureHelp({textDocument:{uri:o},position:gn(F),context:{triggerKind:pe.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:$,isRetrigger:!1}}).then(X=>{!X||X.signatures.length===0||Fp(D,p,X,F,this.renderMarkdown)});return}u.close(),Rn(D)}));const w=Os(Na(s,"cursorActivity"),fc(100),Ns(([D])=>[D,D.getCursor()]));d.push(w(([D,I])=>{const F=this.popupsEnabled&&D.getTokenTypeAt(I);if(F&&/\b(?:variable|property)\b/.test(F))l.getDocumentHighlight({textDocument:{uri:o},position:gn(I)}).then($=>{Ms(D),$&&Lp(D,$)});else if(Ms(D),I.ch>0){const $=D.getLine(I.line)[I.ch-1];!l.signatureHelpTriggers.includes($)&&!l.signatureHelpRetriggers.includes($)&&Rn(D)}else Rn(D)}));const x=Os(Kp(s.getWrapperElement(),"mouseover"),dc(()=>xp(s)),fc(100),Ns(D=>s.coordsChar({left:D.pageX,top:D.pageY},"page")),Xp((D,I)=>{if(D.line!==I.line)return!1;if(D.ch===I.ch)return!0;const F=s.getTokenAt(D),$=s.getTokenAt(I);return F.string===$.string&&F.start===$.start&&F.end===$.end}));d.push(x(D=>{$r(s);const I=s.getTokenAt(D);I.type==="comment"||I.string.length===0||I.type===null||!this.popupsEnabled||l.getHoverInfo({textDocument:{uri:o},position:gn(D)}).then(F=>{F&&(Rn(s),Sp(s,p,D,F,this.renderMarkdown))})}));const P=([D])=>{this.hideAllPopups(D)},C=([D])=>{this.hideTooltips(D)};d.push(vr(s,"cmw:contextMenuOpened",([D])=>{Rp(D),u.close(),Rn(D)}),vr(s,"cmw:contextMenuClosed",([D])=>{_p(D)}),vr(s,"refresh",P),vr(s,"blur",C),vr(s,"changes",C),vr(s,"viewportChange",C));const S=(D,I=D.getCursor())=>{l.getDefinition({textDocument:{uri:o},position:gn(I)}).then(F=>{F&&Br(D,o,F)})},B=(D,I=D.getCursor())=>{l.getDeclaration({textDocument:{uri:o},position:gn(I)}).then(F=>{F&&Br(D,o,F)})},V=(D,I=D.getCursor())=>{l.getTypeDefinition({textDocument:{uri:o},position:gn(I)}).then(F=>{F&&Br(D,o,F)})},J=(D,I=D.getCursor())=>{l.getReferences({textDocument:{uri:o},position:gn(I),context:{includeDeclaration:!0}}).then(F=>{F&&Br(D,o,F)})},R=(D,I=D.getCursor())=>{l.getImplementation({textDocument:{uri:o},position:gn(I)}).then(F=>{F&&Br(D,o,F)})};d.push(vr(s,"contextmenu",([D,I])=>{I.preventDefault();const F=D.coordsChar({left:I.pageX,top:I.pageY},"page");Qp(D,I.pageX,I.pageY,[[{label:"Go to Definition",handler:()=>{S(D,F)}},{label:"Go to Type Definition",handler:()=>{V(D,F)}},{label:"Go to Implementations",handler:()=>{R(D,F)}},{label:"Go to References",handler:()=>{J(D,F)}},{label:"Go to Symbol...",handler:()=>{l.getDocumentSymbol({textDocument:{uri:o}}).then($=>{$&&Bp(D,o,$)})}}],[{label:"Copy"},{label:"Cut"}]])}));const N=Dn.exports.normalizeKeyMap({"Ctrl-Space":D=>{y(D)},"Alt-G D":D=>{S(D)},"Alt-G H":D=>{B(D)},"Alt-G T":D=>{V(D)},"Alt-G I":D=>{R(D)},"Alt-G R":D=>{J(D)}});s.addKeyMap(N),d.push(()=>{s.removeKeyMap(N)}),this.subscriptionDisposers.set(s,d)}hideAllPopups(o){if(o){this.hideTooltips(o);const s=this.completionHandlers.get(o);s&&s.close(),ko(o)}else Object.values(this.editors).forEach(s=>this.hideAllPopups(s))}hideTooltips(o){o?($r(o),Rn(o)):Object.values(this.editors).forEach(s=>this.hideTooltips(s))}async closeTextDocument(o){var s;const l=this.getDocumentUri(o),u=this.getLanguageAssociation(l);if(!u)return;const d=u.languageServerIds[0];if(!d)return;const p=await this.getConnection(d);!p||(this.detachEditor(l),p.textDocumentClosed({textDocument:{uri:l}}),(s=this.connectionToUris.get(p))===null||s===void 0||s.delete(l))}detachEditor(o){const s=this.editors[o];delete this.editors[o],delete this.documentVersions[o],this.removeEventHandlers(s)}async saveTextDocument(o){const s=this.getDocumentUri(o),l=this.getLanguageAssociation(s);if(!l)return;const u=l.languageServerIds[0];if(!u)return;const d=await this.getConnection(u);if(!d)return;const p=this.editors[s];if(!p)return;d.textDocumentWillSave({textDocument:{uri:s},reason:pe.TextDocumentSaveReason.Manual});const y=await d.getEditsBeforeSave({textDocument:{uri:s},reason:pe.TextDocumentSaveReason.Manual});y&&(Ba(p,y,"beforeSave"),await Zp(hc*1.5)),d.textDocumentSaved({textDocument:{uri:s},text:p.getValue()})}async notifyFilesChanged(o){for(const s of Object.values(this.connections))s.watchedFilesChanged({changes:o})}getConnection(o){return this.connectionPromises[o]||(this.connectionPromises[o]=(async()=>{const s=await this.getConnectionString(o);return s?(this.connections[o]=await this.openConnection(o,s,async(l,u)=>{await this.initConnection(l,this.configs[o],u)}),this.connections[o]):null})()),this.connectionPromises[o]}removeEventHandlers(o){const s=this.subscriptionDisposers.get(o);if(s){for(const u of s)u();s.length=0,this.subscriptionDisposers.delete(o)}Jc(o),$r(o),Ms(o),Rn(o);const l=this.completionHandlers.get(o);l&&(l.close(),this.completionHandlers.delete(o))}async initConnection(o,s,l){var u;l||o.listen(),await o.initialize({capabilities:{textDocument:{synchronization:{dynamicRegistration:!0,willSave:!0,willSaveWaitUntil:!0,didSave:!0},completion:{dynamicRegistration:!0,completionItem:{snippetSupport:!0,insertReplaceSupport:!0,commitCharactersSupport:!1,documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],deprecatedSupport:!0,preselectSupport:!0,resolveSupport:{properties:["documentation","detail"]}},contextSupport:!0},hover:{dynamicRegistration:!0,contentFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"]},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:this.canHandleMarkdown?["markdown","plaintext"]:["plaintext"],parameterInformation:{labelOffsetSupport:!0}},contextSupport:!0},declaration:{dynamicRegistration:!0,linkSupport:!1},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0,linkSupport:!0},implementation:{dynamicRegistration:!0,linkSupport:!0},references:{dynamicRegistration:!0},documentHighlight:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[pe.DiagnosticTag.Unnecessary,pe.DiagnosticTag.Deprecated]}},moniker:{}},workspace:{didChangeConfiguration:{dynamicRegistration:!0},didChangeWatchedFiles:{dynamicRegistration:!1}}},initializationOptions:(u=s==null?void 0:s.initOptions)!==null&&u!==void 0?u:null,processId:null,rootUri:this.rootUri,workspaceFolders:null}),o.initialized();const d=s==null?void 0:s.settings;return d&&o.configurationChanged({settings:d}),l||o.onDiagnostics(({uri:p,diagnostics:y})=>{const b=this.editors[p];b&&Tp(b,y)}),o}getDocumentUri(o){return o.startsWith(this.rootUri)?o:this.rootUri+o.replace(/^\/+/,"")}async openConnection(o,s,l){if(/^wss?:\/\//.test(s)){const u=new hp(s,{maxReconnectAttempts:10,debug:!0}),d=await ip(u),p=ec(d),y=[];let b=!1;return await l(p,!1),this.connectionToUris.set(p,new Set),u.addEventListener("down",w=>{if(b)console.debug(`cmw:ws:${o} connection is still down`);else{b=!0,console.debug(`cmw:ws:${o} connection went down`);const x=this.connectionToUris.get(p);for(const P of x){const C=this.editors[P];C&&(this.detachEditor(P),y.push([P,C]))}x.clear(),this.onDisconnected(o)}}),u.addEventListener("reopen",()=>{b=!1,console.debug(`cmw:ws:${o} connection reopened, reinitializing`),l(p,!0).then(async()=>{await this.onReconnected(o);for(const[w,x]of y)this.openTextDocument(w,x);y.length=0})}),u.addEventListener("close",w=>{y.length=0,w&&w.code!==1e3&&(console.warn(`cmw:ws:${o} connection failed`),this.onConnectionFailed(o))}),p}else{const u=await lp(new Worker(s)),d=ec(u);return await l(d,!1),d}}}const pc="json-worker",eg=new Jp({rootUri:"inmemory://workspace/",getLanguageAssociation:n=>n.endsWith(".json")?{languageId:"json",languageServerIds:[pc]}:null,getConnectionString:async n=>{switch(n){case pc:return"worker.js";default:return""}},renderMarkdown:n=>_e(n)}),tg=bo(document.getElementById("editor"),{theme:"idea",gutters:["cmw-gutter"],lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,mode:"application/json",value:JSON.stringify({compilerOptions:{target:"es2017",module:"commonjs",strict:!0,esModuleInterop:!0,skipLibCheck:!0,forceConsistentCasingInFileNames:!0}},null,2)});eg.openTextDocument("tsconfig.json",tg);
